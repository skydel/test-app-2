(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f0b4540"],{"0a52":function(e,t,r){"use strict";(function(e){var n=r("bf18");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?p(e):t}function m(e){var t=f();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function v(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=d(e),null===e)break;return e}function y(e,t,r){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},y(e,t,r||e)}function b(e){return A(e)||_(e)||E(e)||k()}function A(e){if(Array.isArray(e))return T(e)}function _(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e,t){if(e){if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;function S(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var w={exports:{}};(function(e,t){"undefined"!==typeof window&&function(t,r){e.exports=r()}(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=new Array(a);n<a;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(i,"");while(e.length!==(e=e.replace(a,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,n){var l={};l[n]=[];var u=t.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;var d,h=c[1],f=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");while(d=f.exec(u))"dll-reference"!==d[3]&&l[n].push(d[3]);f=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");while(d=f.exec(u))e[d[2]]||(l[n].push(d[1]),e[d[2]]=r(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var p=Object.keys(l),g=0;g<p.length;g++)for(var m=0;m<l[p[g]].length;m++)s(l[p[g]][m])&&(l[p[g]][m]=1*l[p[g]][m]);return l}function u(e){var t=Object.keys(e);return t.reduce((function(t,r){return t||e[r].length>0}),!1)}function c(e,t){var r={main:[t]},n={main:[]},i={main:{}};while(u(r))for(var a=Object.keys(r),o=0;o<a.length;o++){var s=a[o],c=r[s],d=c.pop();if(i[s]=i[s]||{},!i[s][d]&&e[s][d]){i[s][d]=!0,n[s]=n[s]||[],n[s].push(d);for(var h=l(e,e[s][d],s),f=Object.keys(h),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(h[f[p]])}}return n}e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:c(i,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){var t=0;while(a[e][t])t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,u=l.createObjectURL(s),d=new window.Worker(u);return d.objectURL=u,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}var t=e.prototype;return t.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}var t=e.prototype;return t.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=i;function o(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}var s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],b=h[y],A=257*h[m]^16843008*m;n[f]=A<<24|A>>>8,i[f]=A<<16|A>>>16,a[f]=A<<8|A>>>24,o[f]=A,A=16843009*b^65537*y^257*v^16843008*f,l[m]=A<<24|A>>>8,u[m]=A<<16|A>>>16,c[m]=A<<8|A>>>24,d[m]=A,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;while(n<t.length&&r)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=t[a]:(l=s,a%i===0?(l=l<<8|l>>>24,l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i===4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){var i,a,s,l,u,c,d,h,f,p,g,m,v,y,b=this.keySize+6,A=this.invKeySchedule,_=this.invSBox,E=this.invSubMix,T=E[0],k=E[1],S=E[2],w=E[3],R=this.uint8ArrayToUint32Array_(r),C=R[0],L=R[1],I=R[2],O=R[3],D=new Int32Array(e),P=new Int32Array(D.length),x=this.networkToHostOrderSwap;while(t<D.length){for(f=x(D[t]),p=x(D[t+1]),g=x(D[t+2]),m=x(D[t+3]),u=f^A[0],c=m^A[1],d=g^A[2],h=p^A[3],v=4,y=1;y<b;y++)i=T[u>>>24]^k[c>>16&255]^S[d>>8&255]^w[255&h]^A[v],a=T[c>>>24]^k[d>>16&255]^S[h>>8&255]^w[255&u]^A[v+1],s=T[d>>>24]^k[h>>16&255]^S[u>>8&255]^w[255&c]^A[v+2],l=T[h>>>24]^k[u>>16&255]^S[c>>8&255]^w[255&d]^A[v+3],u=i,c=a,d=s,h=l,v+=4;i=_[u>>>24]<<24^_[c>>16&255]<<16^_[d>>8&255]<<8^_[255&h]^A[v],a=_[c>>>24]<<24^_[d>>16&255]<<16^_[h>>8&255]<<8^_[255&u]^A[v+1],s=_[d>>>24]<<24^_[h>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^A[v+2],l=_[h>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&d]^A[v+3],v+=3,P[t]=x(i^C),P[t+1]=x(l^L),P[t+2]=x(s^I),P[t+3]=x(a^O),C=f,L=p,I=g,O=m,t+=4}return n?o(P.buffer):P.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),l=s,u=r("./src/errors.ts"),c=r("./src/utils/logger.js"),d=r("./src/events.js"),h=r("./src/utils/get-self-scope.js"),f=Object(h["getSelfScope"])(),p=function(){function e(e,t,r){var n=void 0===r?{}:r,i=n.removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var o=f.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(s){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,i){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(c["logger"].log("JS AES decrypt"),this.logEnabled=!1);var s=this.decryptor;s||(this.decryptor=s=new l),s.expandKey(t),i(s.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(c["logger"].log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(u,t)),this.fastAesKey.expandKey().then((function(a){var s=new n(u,r);s.decrypt(e,a).catch((function(n){o.onWebCryptoError(n,e,t,r,i)})).then((function(e){i(e)}))})).catch((function(n){o.onWebCryptoError(n,e,t,r,i)}))}},t.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(c["logger"].log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c["logger"].error("decrypting error : "+e.message),this.observer.trigger(d["default"].ERROR,{type:u["ErrorTypes"].MEDIA_ERROR,details:u["ErrorDetails"].FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t["default"]=p},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){r.r(t);var n=r("./src/events.js"),i=r("./src/errors.ts"),a=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t,r,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),l=(60&t[r+2])>>>2,!(l>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s["logger"].log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function c(e,t){return 255===e[t]&&240===(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function h(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&c(e,t))}function p(e,t){if(f(e,t)){var r=d(e,t);if(t+r>=e.length)return!1;var n=h(e,t);if(n<=r)return!1;var i=t+n;if(i===e.length||i+1<e.length&&c(e,i))return!0}return!1}function g(e,t,r,n,i){if(!e.samplerate){var a=u(t,r,n,i);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,s["logger"].log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function m(e){return 9216e4/e}function v(e,t,r,n,i){var a,o,s,l=e.length;if(a=d(e,t),o=h(e,t),o-=a,o>0&&t+a+o<=l)return s=r+n*i,{headerLength:a,frameLength:o,stamp:s}}function y(e,t,r,n,i){var a=m(e.samplerate),o=v(t,r,n,i,a);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,c={unit:t.subarray(r+l,r+l+u),pts:s,dts:s};return e.samples.push(c),{sample:c,length:u+l}}}var b=r("./src/demux/id3.js"),A=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=b["default"].getID3Data(e,0)||[],r=t.length,n=e.length;r<n;r++)if(p(e,r))return s["logger"].log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=this._audioTrack,a=b["default"].getID3Data(e,0)||[],l=b["default"].getTimeStamp(a),u=Object(o["isFiniteNumber"])(l)?90*l:9e4*t,c=0,d=u,h=e.length,p=a.length,m=[{pts:d,dts:d,data:a}];while(p<h-1)if(f(e,p)&&p+5<h){g(i,this.observer,e,p,i.manifestCodec);var v=y(i,e,p,u,c);if(!v){s["logger"].log("Unable to parse AAC frame");break}p+=v.length,d=v.sample.pts,c++}else b["default"].isHeader(e,p)?(a=b["default"].getID3Data(e,p),m.push({pts:d,dts:d,data:a}),p+=a.length):p++;this.remuxer.remux(i,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),_=A,E=r("./src/demux/mp4demuxer.js"),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,l={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==i&&15!==i&&3!==a){var s=3===r?3-n:3===n?3:4,l=1e3*T.BitratesMap[14*s+i-1],u=3===r?0:2===r?1:2,c=T.SamplingRateMap[3*u+a],d=e[t+3]>>6===3?1:2,h=T.SamplesCoefficients[r][n],f=T.BytesInSlot[n],p=8*h*f,g=parseInt(h*l/c+o,10)*f;return{sampleRate:c,channelCount:d,frameLength:g,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=4,n=this.parseHeader(e,t),i=r;n&&n.frameLength&&(i=n.frameLength);var a=t+i;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},k=T,S=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s["logger"].error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,r,n,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var A=f();if(0===A)f();else if(1===A)for(g(1),m(),m(),t=f(),o=0;o<t;o++)m();v(),g(1),r=f(),n=f(),i=h(1),0===i&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),c=f());var _=[1,1];if(p()&&p()){var E=d();switch(E){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:_}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),w=S,R=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new a["default"](e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;;r++){if(r>=i.length)break;var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}(),C=R,L={video:1,audio:2,id3:3,text:4},I=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new C(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&s["logger"].warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){var t=Math.min(1e3,e.length-564),r=0;while(r<t){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:L[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,r,a,o){var l,u,c,d,h,f,p=t.length,g=!1;this.pmtUnknownTypes={},this.contiguous=a;var m=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,b=this._id3Track,A=v.pid,_=y.pid,E=b.pid,T=this._pmtId,k=v.pesData,S=y.pesData,w=b.pesData,R=this._parsePAT,C=this._parsePMT.bind(this),L=this._parsePES,I=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),x=e._syncOffset(t);for(p-=(p+x)%188,l=x;l<p;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],d=(48&t[l+3])>>4,d>1){if(h=l+5+t[l+4],h===l+188)continue}else h=l+4;switch(c){case A:u&&(k&&(f=L(k))&&I(f,!1),k={data:[],size:0}),k&&(k.data.push(t.subarray(h,l+188)),k.size+=l+188-h);break;case _:u&&(S&&(f=L(S))&&(y.isAAC?O(f):D(f)),S={data:[],size:0}),S&&(S.data.push(t.subarray(h,l+188)),S.size+=l+188-h);break;case E:u&&(w&&(f=L(w))&&P(f),w={data:[],size:0}),w&&(w.data.push(t.subarray(h,l+188)),w.size+=l+188-h);break;case 0:u&&(h+=t[h]+1),T=this._pmtId=R(t,h);break;case T:u&&(h+=t[h]+1);var N=C(t,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);A=N.avc,A>0&&(v.pid=A),_=N.audio,_>0&&(y.pid=_,y.isAAC=N.isAAC),E=N.id3,E>0&&(b.pid=E),g&&!m&&(s["logger"].log("reparse from beginning"),g=!1,l=x-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=!0;break}}else this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(f=L(k))?(I(f,!0),v.pesData=null):v.pesData=k,S&&(f=L(S))?(y.isAAC?O(f):D(f),y.pesData=null):(S&&S.size&&s["logger"].log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=S),w&&(f=L(w))?(P(f),b.pesData=null):b.pesData=w,null==this.sampleAes?this.remuxer.remux(y,v,b,this._txtTrack,r,a,o):this.decryptAndRemux(y,v,b,this._txtTrack,r,a,o)},t.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},t.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,a,o)}))}else this.remuxer.remux(e,t,r,n,i,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var n=this.pmtUnknownTypes[e]||0;return 0===n&&(this.pmtUnknownTypes[e]=0,t.call(s["logger"],r)),this.pmtUnknownTypes[e]++,n},t._parsePMT=function(e,t,r,n){var i,a,o,l,u={audio:-1,avc:-1,id3:-1,isAAC:!0};i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;while(t<a){switch(l=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){this._trackUnknownPmt(e[t],s["logger"].warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===u.audio&&(u.audio=l);break;case 21:-1===u.id3&&(u.id3=l);break;case 219:if(!n){this._trackUnknownPmt(e[t],s["logger"].warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===u.avc&&(u.avc=l);break;case 3:case 4:r?-1===u.audio&&(u.audio=l,u.isAAC=!1):this._trackUnknownPmt(e[t],s["logger"].warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s["logger"].warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s["logger"].log,"Unknown stream type:"+e[t]);break}t+=5+((15&e[t+3])<<8|e[t+4])}return u},t._parsePES=function(e){var t,r,n,i,a,o,l,u,c,d=0,h=e.data;if(!e||0===e.size)return null;while(h[0].length<19&&h.length>1){var f=new Uint8Array(h[0].length+h[1].length);f.set(h[0]),f.set(h[1],h[0].length),h[0]=f,h.splice(1,1)}if(t=h[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;if(r=t[7],192&r&&(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,l-u>54e5&&(s["logger"].warn(Math.round((l-u)/9e4)+"s delta between PTS and DTS, align them"),l=u)):u=l),a=t[8],c=a+9,e.size<=c)return null;e.size-=c,o=new Uint8Array(e.size);for(var p=0,g=h.length;p<g;p++){t=h[p];var m=t.byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}o.set(t,d),d+=m}return i&&(i-=a+3),{data:o,pts:l,dts:u,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s["logger"].log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var h=new w(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,r=new w(a.discardEPB(t.data)),r.readUByte();var f=0,p=0,g=!1,m=0;while(!g&&r.bytesAvailable>1){f=0;do{m=r.readUByte(),f+=m}while(255===m);p=0;do{m=r.readUByte(),p+=m}while(255===m);if(4===f&&0!==r.bytesAvailable){g=!0;var v=r.readUByte();if(181===v){var y=r.readUShort();if(49===y){var A=r.readUInt();if(1195456820===A){var _=r.readUByte();if(3===_){var E=r.readUByte(),T=r.readUByte(),k=31&E,S=[E,T];for(i=0;i<k;i++)S.push(r.readUByte()),S.push(r.readUByte()),S.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,p>16){var R=[];for(i=0;i<16;i++)R.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||R.push("-");var C=p-16,L=new Uint8Array(C);for(i=0;i<C;i++)L[i]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:R.join(""),userDataBytes:L,userData:Object(b["utf8ArrayToStr"])(L.buffer)})}}else if(p<r.bytesAvailable)for(i=0;i<p;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!o.sps){r=new w(t.data);var I=r.readSPS();o.width=I.width,o.height=I.height,o.pixelRatio=I.pixelRatio,o.sps=[t.data],o.duration=a._duration;var O=t.data.subarray(1,4),D="avc1.";for(i=0;i<3;i++){var P=O[i].toString(16);P.length<2&&(P="0"+P),D+=P}o.codec=D}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ");break}if(l&&n){var x=l.units;x.push(t)}})),t&&l&&(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,i,a,o=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],h=-1;-1===u&&(h=0,a=31&e[0],u=0,o=1);while(o<s)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(h>=0)n={data:e.subarray(h,o-u-1),type:a},d.push(n);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),r=o-u-1,r>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(e.subarray(0,r),f.data.byteLength),f.data=p}}o<s?(i=31&e[o],h=o,a=i,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(h>=0&&u>=0&&(n={data:e.subarray(h,s),type:a,state:u},d.push(n)),0===d.length){var g=this._getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return l.naluState=u,d},t.discardEPB=function(e){var t,r,n=e.byteLength,i=[],a=1;while(a<n-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,a,o,l,u,c,d=this._audioTrack,h=e.data,p=e.pts,v=0,b=this.aacOverFlow,A=this.aacLastPTS;if(b){var _=new Uint8Array(b.byteLength+h.byteLength);_.set(b,0),_.set(h,b.byteLength),h=_}for(a=v,l=h.length;a<l-1;a++)if(f(h,a))break;if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s["logger"].warn("parsing error:"+u),this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:c,reason:u}),c))return;if(g(d,this.observer,h,a,this.audioCodec),r=0,t=m(d.samplerate),b&&A){var E=A+t;Math.abs(E-p)>1&&(s["logger"].log("AAC: align PTS for overlapping frames by "+Math.round((E-p)/90)),p=E)}while(a<l){if(f(h,a)){if(a+5<l){var T=y(d,h,a,p,r);if(T){a+=T.length,o=T.sample.pts,r++;continue}}break}a++}b=a<l?h.subarray(a,l):null,this.aacOverFlow=b,this.aacLastPTS=o},t._parseMPEGPES=function(e){var t=e.data,r=t.length,n=0,i=0,a=e.pts;while(i<r)if(k.isHeader(t,i)){var o=k.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),O=I,D=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=b["default"].getID3Data(e,0);if(n&&void 0!==b["default"].getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(k.probe(e,t))return s["logger"].log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=b["default"].getID3Data(e,0)||[],a=b["default"].getTimeStamp(i),o=void 0!==a?90*a:9e4*t,s=i.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:i}];while(s<l)if(k.isHeader(e,s)){var f=k.appendFrame(d,e,s,o,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else b["default"].isHeader(e,s)?(i=b["default"].getID3Data(e,s),h.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),P=D,x=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},e}(),N=x,M=Math.pow(2,32)-1,F=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;while(i--)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){var r=t.length,n=[];while(r--)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){var r=t.length,n=[];while(r--)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(n/(M+1)),s=Math.floor(n%(M+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(M+1)),o=Math.floor(r%(M+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=u[n],a=i.duration,o=i.size,s=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}(),j=F,U=9e4;function B(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function G(e,t){return void 0===t&&(t=!1),B(e,1e3,1/U,t)}function K(e,t){return void 0===t&&(t=1),B(e,U,1/t)}var V=K(10),Y=K(.2),H=null,W=function(){function e(e,t,r,n){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===H){var i=navigator.userAgent.match(/Chrome\/(\d+)/i);H=i?parseInt(i[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var n=r.pts-e;return n<-4294967296?(t=!0,z(e,r.pts)):n>0?e:r.pts}),e[0].pts);return t&&s["logger"].debug("PTS rollover detected"),r},t.remux=function(e,t,r,i,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var f=this.getVideoStartPts(t.samples),p=z(e.samples[0].pts,f)-f,g=p/t.inputTimeScale;d+=Math.max(0,g),h+=Math.max(0,-g)}if(u){e.timescale||(s["logger"].warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var m,v=this.remuxAudio(e,d,o,l);if(c)v&&(m=v.endPTS-v.startPTS),t.timescale||(s["logger"].warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,m)}else if(c){var y=this.remuxVideo(t,h,o,0,l);y&&e.codec&&this.remuxEmptyAudio(e,d,o,y)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(n["default"].FRAG_PARSED)},t.generateIS=function(e,t,r){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s["logger"].log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:j.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&c.length){var m=t.inputTimeScale;if(t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:j.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var v=this.getVideoStartPts(c),y=Math.round(m*r);o=Math.min(o,z(c[0].dts,v)-y),a=Math.min(a,v-y),this.observer.trigger(n["default"].INIT_PTS_FOUND,{initPTS:a})}}else g&&f.audio&&this.observer.trigger(n["default"].INIT_PTS_FOUND,{initPTS:a});Object.keys(f).length?(l.trigger(n["default"].FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,a){var o,l,u,c,d,h=e.timescale,f=e.samples,p=[],g=f.length,m=this._initPTS,v=8,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,A=0,_=!1,E=this.nextAvcDts;if(0!==g){if(!r){var T=t*h,k=f[0].pts-z(f[0].dts,f[0].pts);E=T-k}for(var S=0;S<g;S++){var w=f[S];w.pts=z(w.pts-m,E),w.dts=z(w.dts-m,E),w.dts>w.pts&&(A=Math.max(Math.min(A,w.pts-w.dts),-1*Y)),w.dts<f[S>0?S-1:S].dts&&(_=!0)}_&&f.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id})),c=f[0].dts,d=f[g-1].dts;var R=Math.round((d-c)/(g-1));if(A<0){if(A<-2*R){s["logger"].warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+G(-R,!0)+" ms");for(var C=A,L=0;L<g;L++)f[L].dts=C=Math.max(C,f[L].pts-R),f[L].pts=Math.max(C,f[L].pts)}else{s["logger"].warn("PTS < DTS detected in video samples, shifting DTS by "+G(A,!0)+" ms to overcome this issue");for(var I=0;I<g;I++)f[I].dts=f[I].dts+A}c=f[0].dts,d=f[g-1].dts}if(r){var O=c-E,D=O>R,P=O<-1;if(D||P){D?s["logger"].warn("AVC: "+G(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):s["logger"].warn("AVC: "+G(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),c=E;var x=f[0].pts-O;f[0].dts=c,f[0].pts=x,s["logger"].log("Video: First PTS/DTS adjusted: "+G(x,!0)+"/"+G(c,!0)+", delta: "+G(O,!0)+" ms")}}H&&H<75&&(c=Math.max(0,c));for(var N=0,M=0,F=0;F<g;F++){for(var U=f[F],B=U.units,K=B.length,V=0,W=0;W<K;W++)V+=B[W].data.length;M+=V,N+=K,U.length=V,U.dts=Math.max(U.dts,c),U.pts=Math.max(U.pts,U.dts,0),y=Math.min(U.pts,y),b=Math.max(U.pts,b)}d=f[g-1].dts;var $=M+4*N+8;try{l=new Uint8Array($)}catch(pe){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:$,reason:"fail allocating video mdat "+$})}var q=new DataView(l.buffer);q.setUint32(0,$),l.set(j.types.mdat,4);for(var X=0;X<g;X++){for(var Z=f[X],J=Z.units,Q=0,ee=void 0,te=0,re=J.length;te<re;te++){var ne=J[te],ie=ne.data,ae=ne.data.byteLength;q.setUint32(v,ae),v+=4,l.set(ie,v),v+=ae,Q+=4+ae}if(X<g-1)o=f[X+1].dts-Z.dts;else{var oe=this.config,se=Z.dts-f[X>0?X-1:X].dts;if(oe.stretchShortVideoTrack){var le=oe.maxBufferHole,ue=Math.floor(le*h),ce=(a?y+a*h:this.nextAudioPts)-Z.pts;ce>ue?(o=ce-se,o<0&&(o=se),s["logger"].log("It is approximately "+G(ce,!1)+" ms to the next segment; using duration "+G(o,!1)+" ms for the last video frame.")):o=se}else o=se}ee=Math.round(Z.pts-Z.dts),p.push({size:Q,duration:o,cts:ee,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Z.key?2:1,isNonSync:Z.key?0:1}})}this.nextAvcDts=d+o;var de=e.dropped;if(e.nbNalu=0,e.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var he=p[0].flags;he.dependsOn=2,he.isNonSync=0}e.samples=p,u=j.moof(e.sequenceNumber++,c,e),e.samples=[];var fe={data1:u,data2:l,startPTS:y/h,endPTS:(b+o)/h,startDTS:c/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:de};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,fe),fe}},t.remuxAudio=function(e,t,r,a){var o,l,u,c,d,h,f=e.inputTimeScale,p=e.timescale,g=f/p,m=e.isAAC?1024:1152,v=m*g,y=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,A=b?0:8,_=e.samples,E=[],T=this.nextAudioPts;if(r|=_.length&&T&&(a&&Math.abs(t-T/f)<.1||Math.abs(_[0].pts-T-y)<20*v),_.forEach((function(e){e.pts=e.dts=z(e.pts-y,t*f)})),_=_.filter((function(e){return e.pts>=0})),0!==_.length){if(r||(T=a?Math.max(0,t*f):_[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,S=0,w=T;S<_.length;){var R=_[S],C=R.pts,L=C-w;if(L<=-k*v)r||S>0?(s["logger"].warn("Dropping 1 audio frame @ "+G(w,!0)/1e3+"s due to "+G(L,!0)+" ms overlap."),_.splice(S,1)):(s["logger"].warn("Audio frame @ "+G(C,!0)/1e3+"s overlaps nextAudioPts by "+G(L,!0)+" ms."),w=C+v,S++);else if(L>=k*v&&L<V&&w){var I=Math.round(L/v);s["logger"].warn("Injecting "+I+" audio frames @ "+G(w,!0)/1e3+"s due to "+G(L,!0)+" ms gap.");for(var O=0;O<I;O++){var D=Math.max(w,0);l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=R.unit.subarray()),_.splice(S,0,{unit:l,pts:D,dts:D}),w+=v,S++}R.pts=R.dts=w,w+=v,S++}else R.pts=R.dts=w,w+=v,S++}var P=_.length,x=0;while(P--)x+=_[P].unit.byteLength;for(var M=0,F=_.length;M<F;M++){var U=_[M],B=U.unit,K=U.pts;if(void 0!==h&&o)o.duration=Math.round((K-h)/g);else{var Y=K-T,H=0;if(r&&e.isAAC&&Y){if(Y>0&&Y<V)H=Math.round((K-T)/v),s["logger"].log(G(Y,!0)+" ms hole between AAC samples detected,filling it"),H>0&&(l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(l=B.subarray()),x+=H*l.length);else if(Y<-12){s["logger"].log("drop overlapping AAC sample, expected/parsed/delta: "+G(T,!0)+" ms / "+G(K,!0)+" ms / "+G(-Y,!0)+" ms"),x-=B.byteLength;continue}K=T}if(d=K,!(x>0))return;x+=A;try{u=new Uint8Array(x)}catch(ee){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}if(!b){var W=new DataView(u.buffer);W.setUint32(0,x),u.set(j.types.mdat,4)}for(var $=0;$<H;$++)l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=B.subarray()),u.set(l,A),A+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(o)}u.set(B,A);var q=B.byteLength;A+=q,o={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(o),h=K}var X=0;if(P=E.length,P>=2&&(X=E[P-2].duration,o.duration=X),P){this.nextAudioPts=T=h+g*X,e.samples=E,c=b?new Uint8Array:j.moof(e.sequenceNumber++,d/g,e),e.samples=[];var Z=d/f,J=T/f,Q={data1:c,data2:u,startPTS:Z,endPTS:J,startDTS:Z,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:P};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,l=this.nextAudioPts,u=(void 0!==l?l:n.startDTS*i)+this._initDTS,c=n.endDTS*i+this._initDTS,d=1024,h=o*d,f=Math.ceil((c-u)/h),p=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s["logger"].warn("remux empty Audio"),p){for(var g=[],m=0;m<f;m++){var v=u+m*h;g.push({unit:p,pts:v,dts:v})}e.samples=g,this.remuxAudio(e,t,r)}else s["logger"].trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var i=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<r;s++){var l=e.samples[s];l.pts=z(l.pts-a,t*i)/i,l.dts=z(l.dts-o,t*i)/i}this.observer.trigger(n["default"].FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=z(s.pts-a,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(n["default"].FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}();function z(e,t){var r;if(void 0===t)return e;r=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=r;return e}var $,q=W,X=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,i,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n["default"].FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n["default"].FRAG_PARSED)},e}(),Z=X,J=Object(l["getSelfScope"])();try{$=J.performance.now.bind(J.performance)}catch(ee){s["logger"].debug("Unable to use Performance API on this environment"),$=J.Date.now}var Q=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,i,o,s,l,u,c,d,h,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a["default"](this.observer,this.config));var m=$();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=$();p.observer.trigger(n["default"].FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)},t.pushDecrypted=function(e,t,r,a,o,s,l,u,c,d,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var m,v=this.observer,y=this.typeSupported,b=this.config,A=[{demux:O,remux:q},{demux:E["default"],remux:Z},{demux:_,remux:q},{demux:P,remux:q}],T=0,k=A.length;T<k;T++)if(m=A[T],m.demux.probe(e))break;if(!m)return void v.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof m.remux||(g=new m.remux(v,b,y,this.vendor)),p&&p instanceof m.demux||(p=new m.demux(v,g,b,y),this.probe=m.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(r,a,o,d),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"===typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,h)},e}();t["default"]=Q},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){r.r(t);var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=function(e){var t=new o["EventEmitter"];t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n["default"](t,o.typeSupported,s,o.vendor),Object(a["enableLogs"])(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS);break}})),t.on(i["default"].FRAG_DECRYPTED,r),t.on(i["default"].FRAG_PARSING_INIT_SEGMENT,r),t.on(i["default"].FRAG_PARSED,r),t.on(i["default"].ERROR,r),t.on(i["default"].FRAG_PARSING_METADATA,r),t.on(i["default"].FRAG_PARSING_USERDATA,r),t.on(i["default"].INIT_PTS_FOUND,r),t.on(i["default"].FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))};t["default"]=s},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,r){r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var n,i=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){var n=r,i=0;while(e.isHeader(t,r)){i+=10;var a=e._readSize(t,r+6);i+=a,e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4),i=10;return{type:r,size:n,data:t.subarray(i,i+n)}},e.getID3Frames=function(t){var r=0,n=[];while(e.isHeader(t,r)){var i=e._readSize(t,r+6);r+=10;var a=r+i;while(r+8<a){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):e._decodeTextFrame(t)},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}var a,s,l,u=e.length,c="",d=0;while(d<u){if(a=e[d++],0===a&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0);break}}return c},e}();function o(){var e=Object(i["getSelfScope"])();return n||"undefined"===typeof e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=a._utf8ArrayToStr;t["default"]=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,r){r.r(t);var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i["default"].FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!r.length)return null;for(n=l;n<o;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=i>1?n+i:o,a===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:u}):(s=e.findBox({data:t,start:n+8,end:u},r.slice(1)),s.length&&(c=c.concat(s)))),n=u;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4;var u=0,c=0;a+=0===s?8:16,a+=2;var d=o.end+c,h=e.readUint16(o,a);a+=2;for(var f=0;f<h;f++){var p=a,g=e.readUint32(o,p);p+=4;var m=2147483647&g,v=(2147483648&g)>>>31;if(1===v)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(o,p);p+=4,r.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/l,start:d,end:d+m-1}}),d+=m,p+=4,a=p}return{earliestPresentationTime:u,timescale:l,version:s,referencesCount:h,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[],i=e.findBox(t,["moov","trak"]);return i.forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=l.data[l.start],o=0===a?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d=e.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[d];if(h){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));n["logger"].log("MP4Demuxer:"+h+":"+p+" found")}r[s]={timescale:u,type:h},r[h]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,a,o;return i=e.readUint32(n,4),a=t[i].timescale||9e4,o=e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0],o/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(i["default"].INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},t.destroy=function(){},e}();t["default"]=o},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e["NETWORK_ERROR"]="networkError",e["MEDIA_ERROR"]="mediaError",e["KEY_SYSTEM_ERROR"]="keySystemError",e["MUX_ERROR"]="muxError",e["OTHER_ERROR"]="otherError"}(n||(n={})),function(e){e["KEY_SYSTEM_NO_KEYS"]="keySystemNoKeys",e["KEY_SYSTEM_NO_ACCESS"]="keySystemNoAccess",e["KEY_SYSTEM_NO_SESSION"]="keySystemNoSession",e["KEY_SYSTEM_LICENSE_REQUEST_FAILED"]="keySystemLicenseRequestFailed",e["KEY_SYSTEM_NO_INIT_DATA"]="keySystemNoInitData",e["MANIFEST_LOAD_ERROR"]="manifestLoadError",e["MANIFEST_LOAD_TIMEOUT"]="manifestLoadTimeOut",e["MANIFEST_PARSING_ERROR"]="manifestParsingError",e["MANIFEST_INCOMPATIBLE_CODECS_ERROR"]="manifestIncompatibleCodecsError",e["LEVEL_EMPTY_ERROR"]="levelEmptyError",e["LEVEL_LOAD_ERROR"]="levelLoadError",e["LEVEL_LOAD_TIMEOUT"]="levelLoadTimeOut",e["LEVEL_SWITCH_ERROR"]="levelSwitchError",e["AUDIO_TRACK_LOAD_ERROR"]="audioTrackLoadError",e["AUDIO_TRACK_LOAD_TIMEOUT"]="audioTrackLoadTimeOut",e["FRAG_LOAD_ERROR"]="fragLoadError",e["FRAG_LOAD_TIMEOUT"]="fragLoadTimeOut",e["FRAG_DECRYPT_ERROR"]="fragDecryptError",e["FRAG_PARSING_ERROR"]="fragParsingError",e["REMUX_ALLOC_ERROR"]="remuxAllocError",e["KEY_LOAD_ERROR"]="keyLoadError",e["KEY_LOAD_TIMEOUT"]="keyLoadTimeOut",e["BUFFER_ADD_CODEC_ERROR"]="bufferAddCodecError",e["BUFFER_APPEND_ERROR"]="bufferAppendError",e["BUFFER_APPENDING_ERROR"]="bufferAppendingError",e["BUFFER_STALLED_ERROR"]="bufferStalledError",e["BUFFER_FULL_ERROR"]="bufferFullError",e["BUFFER_SEEK_OVER_HOLE"]="bufferSeekOverHole",e["BUFFER_NUDGE_ON_STALL"]="bufferNudgeOnStall",e["INTERNAL_EXCEPTION"]="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,r){r.r(t);var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};t["default"]=n},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){r.r(t),r.d(t,"default",(function(){return In}));var n={};r.r(n),r.d(n,"newCue",(function(){return dr}));var i,a,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number.js"),u=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!==typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(n){c["logger"].error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}},e}(),f=h;(function(e){e["MANIFEST"]="manifest",e["LEVEL"]="level",e["AUDIO_TRACK"]="audioTrack",e["SUBTITLE_TRACK"]="subtitleTrack"})(i||(i={})),function(e){e["MAIN"]="main",e["AUDIO"]="audio",e["SUBTITLE"]="subtitle"}(a||(a={}));var p=r("./src/demux/mp4demuxer.js");function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}var v,y=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return m(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o["buildAbsoluteURL"])(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}(function(e){e["AUDIO"]="audio",e["VIDEO"]="video"})(v||(v={}));var _=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(e={},e[v.AUDIO]=!1,e[v.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},t.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&(r=new y(e.baseuri,e.reluri),r.method=e.method,r.iv=this.createInitializationVector(t)),r},A(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o["buildAbsoluteURL"])(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c["logger"].warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l["isFiniteNumber"])(this.programDateTime))return null;var e=Object(l["isFiniteNumber"])(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}();function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}var k=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return T(e,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l["isFiniteNumber"])(this.fragments[0].programDateTime))}}]),e}(),S=/^(\d+)x(\d+)$/,w=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,R=function(){function e(t){for(var r in"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=S.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};w.lastIndex=0;while(null!==(t=w.exec(e))){var n=t[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),C=R,L={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function I(e,t){var r=L[t];return!!r&&!0===r[e.slice(0,4)]}function O(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var D=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,P=/#EXT-X-MEDIA:(.*)/g,x=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),N=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,M=/\.(mp4|m4s|m4v|m4a)$/i,F=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o["buildAbsoluteURL"](t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[],a={},o=!1;function s(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return I(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}D.lastIndex=0;while(null!=(n=D.exec(t)))if(n[1]){var l={},u=l.attrs=new C(n[1]);l.url=e.resolve(n[2],r);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(n[3]){var d=new C(n[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,r,n,i){var a;void 0===i&&(i=[]);var o=[],s=0;P.lastIndex=0;while(null!==(a=P.exec(t))){var l=new C(a[1]);if(l.TYPE===n){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),i.length){var c=e.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,i){var a,o,s,u=0,d=0,h=new k(t),f=0,p=null,g=new _,m=null;x.lastIndex=0;while(null!==(a=x.exec(e))){var v=a[1];if(v){g.duration=parseFloat(v);var b=(" "+a[2]).slice(1);g.title=b||null,g.tagList.push(b?["INF",v,b]:["INF",v])}else if(a[3]){if(Object(l["isFiniteNumber"])(g.duration)){var A=u++;g.type=n,g.start=d,s&&(g.levelkey=s),g.sn=A,g.level=r,g.cc=f,g.urlId=i,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),U(g,p),h.fragments.push(g),p=g,d+=g.duration,g=new _}}else if(a[4]){var E=(" "+a[4]).slice(1);p?g.setByteRange(E,p):g.setByteRange(E)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(a=a[0].match(N),!a){c["logger"].warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length;o++)if("undefined"!==typeof a[o])break;var T=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(S?[T,S]:[T]);break;case"PLAYLIST-TYPE":h.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(T);break;case"TARGETDURATION":h.targetduration=parseFloat(T);break;case"VERSION":h.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var w=T,R=new C(w),L=R.enumeratedString("METHOD"),I=R.URI,O=R.hexadecimalInteger("IV"),D=R.KEYFORMAT||"identity";if("com.apple.streamingkeydelivery"===D){c["logger"].warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}L&&(s=new y(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(s.method=L,s.key=null,s.iv=O));break;case"START":var P=new C(T),F=P.decimalFloatingPoint("TIME-OFFSET");Object(l["isFiniteNumber"])(F)&&(h.startTimeOffset=F);break;case"MAP":var B=new C(T);g.relurl=B.URI,B.BYTERANGE&&g.setByteRange(B.BYTERANGE),g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,g=new _,g.rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c["logger"].warn("line parsed but not handled: "+a);break}}}return g=p,g&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return M.test(e.relurl)}))&&(c["logger"].warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new _,g.relurl=h.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&j(h.fragments,m),h},e}();function j(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function U(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null===t||void 0===t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l["isFiniteNumber"])(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var G=window,K=G.performance,V=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].LEVEL_LOADING,u["default"].AUDIO_TRACK_LOADING,u["default"].SUBTITLE_TRACK_LOADING)||this,r.loaders={},r}B(t,e),t.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){var t=e.type;switch(t){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},t.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var r=t.prototype;return r.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},r.getInternalLoader=function(e){return this.loaders[e.type]},r.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},r.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},r.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},r.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},r.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},r.load=function(e){var t=this.hls.config;c["logger"].debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c["logger"].trace("playlist request ongoing"),!1;c["logger"].warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:r=0,o=0,a=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout;break}s=this.createInternalLoader(e);var u={timeout:n,maxRetry:r,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c["logger"].debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},r.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!==typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=K.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r._handleMasterPlaylist=function(e,r,n,i){var a=this.hls,o=e.data,s=t.getResponseUrl(e,n),l=F.parseMasterPlaylist(o,s),d=l.levels,h=l.sessionData;if(d.length){var f=d.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=F.parseMasterPlaylistMedia(o,s,"AUDIO",f),g=F.parseMasterPlaylistMedia(o,s,"SUBTITLES"),m=F.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var v=!1;p.forEach((function(e){e.url||(v=!0)})),!1===v&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c["logger"].log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u["default"].MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:m,url:s,stats:r,networkDetails:i,sessionData:h})}else this._handleManifestParsingError(e,n,"no level found in manifest",i)},r._handleTrackOrLevelPlaylist=function(e,r,n,a){var o=this.hls,c=n.id,d=n.level,h=n.type,f=t.getResponseUrl(e,n),p=Object(l["isFiniteNumber"])(c)?c:0,g=Object(l["isFiniteNumber"])(d)?d:p,m=t.mapContextToLevelType(n),v=F.parseLevelPlaylist(e.data,f,g,m,p);if(v.tload=r.tload,v.fragments.length){if(h===i.MANIFEST){var y={url:f,details:v};o.trigger(u["default"].MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:r,networkDetails:a,sessionData:null})}if(r.tparsed=K.now(),v.needSidxRanges){var b=v.initSegment.url;this.load({url:b,isSidxRequest:!0,type:h,level:d,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=v,this._handlePlaylistLoaded(e,r,n,a)}else o.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"===typeof n.level?n.level:void 0})},r._handleSidxRequest=function(e,t){if("string"===typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=p["default"].parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info;if(i){var n=i.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),i&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},r._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r._handleNetworkError=function(e,t,r,n){var a,o;void 0===r&&(r=!1),void 0===n&&(n=null),c["logger"].info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=r?s["ErrorDetails"].MANIFEST_LOAD_TIMEOUT:s["ErrorDetails"].MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=r?s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:s["ErrorDetails"].LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=r?s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s["ErrorTypes"].NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(u["default"].ERROR,d)},r._handlePlaylistLoaded=function(e,r,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration){var d=t.canHaveQualityLevels(n.type);if(d)this.hls.trigger(u["default"].LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:r,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(u["default"].AUDIO_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(u["default"].SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break}}else this._handleManifestParsingError(e,n,"invalid target duration",a)},t}(f),Y=V;function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var W=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING)||this,r.loaders={},r}H(t,e);var r=t.prototype;return r.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s,u,d,h=n[r];h&&(c["logger"].warn("abort previous fragment loader for type: "+r),h.abort()),h=n[r]=t.loader=i.fLoader?new a(i):new o(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l["isFiniteNumber"])(f)&&Object(l["isFiniteNumber"])(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},r.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u["default"].FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},r.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u["default"].FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},t}(f),z=W;function $(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].KEY_LOADING)||this,r.loaders={},r.decryptkey=null,r.decrypturl=null,r}$(t,e);var r=t.prototype;return r.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&&(c["logger"].warn("abort previous key loader for type:"+r),n.abort()),!i)return void c["logger"].warn("key uri is falsy");t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u["default"].KEY_LOADED,{frag:t}))}else c["logger"].warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u["default"].KEY_LOADED,{frag:n})):c["logger"].error("after key load, decryptdata unset")},r.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},r.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(f),X=q;function Z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var J={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].BUFFER_APPENDED,u["default"].FRAG_BUFFERED,u["default"].FRAG_LOADED)||this,r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}Z(t,e);var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},r.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(n){var i=r.fragments[n];if(i&&i.buffered){var a=i.range[e];if(a)for(var o=a.time,s=0;s<o.length;s++){var l=o[s];if(!r.isTimeBuffered(l.startPTS,l.endPTS,t)){r.removeFragment(i.body);break}}}}))},r.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},r.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(a=l.body,o=t)))})),a},r.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=J.NOT_LOADED;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?J.PARTIAL:J.OK:J.APPENDING),n},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(l["isFiniteNumber"])(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(f),ee={search:function(e,t){var r=0,n=e.length-1,i=null,a=null;while(r<=n){i=(r+n)/2|0,a=e[i];var o=t(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}},te=ee,re=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(i){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,i=e.buffered,a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(o){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var n=[];if(r)for(var i=0;i<e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o<r?e[i].end>o&&(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,l=0,u=t,c=t,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(t+r>=h&&t<f)u=h,c=f,l=c-t;else if(t+r<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),ne=r("./node_modules/eventemitter3/index.js"),ie=r("./node_modules/webworkify-webpack/index.js"),ae=r("./src/demux/demuxer-inline.js");function oe(){return window.MediaSource||window.WebKitMediaSource}var se=r("./src/utils/get-self-scope.js");function le(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ue=function(e){function t(){return e.apply(this,arguments)||this}le(t,e);var r=t.prototype;return r.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},t}(ne["EventEmitter"]),ce=Object(se["getSelfScope"])(),de=oe()||{isTypeSupported:function(){return!1}},he=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new ue,i=e.config,a=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(u["default"].FRAG_DECRYPTED,a),n.on(u["default"].FRAG_PARSING_INIT_SEGMENT,a),n.on(u["default"].FRAG_PARSING_DATA,a),n.on(u["default"].FRAG_PARSED,a),n.on(u["default"].ERROR,a),n.on(u["default"].FRAG_PARSING_METADATA,a),n.on(u["default"].FRAG_PARSING_USERDATA,a),n.on(u["default"].INIT_PTS_FOUND,a);var o={mp4:de.isTypeSupported("video/mp4"),mpeg:de.isTypeSupported("audio/mpeg"),mp3:de.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!==typeof Worker){var d;c["logger"].log("demuxing in webworker");try{d=this.w=ie(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(i)})}catch(h){c["logger"].warn("Error in worker:",h),c["logger"].error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&ce.URL.revokeObjectURL(d.objectURL),this.demuxer=new ae["default"](n,o,i,l),this.w=void 0}}else this.demuxer=new ae["default"](n,o,i,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,i,a,o,s){var u=this.w,d=Object(l["isFiniteNumber"])(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,v=!g&&m;if(p&&c["logger"].log(this.id+":discontinuity detected"),g&&c["logger"].log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,t,r,n,d,p,g,v,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":ce.URL.revokeObjectURL(this.w.objectURL);break;case u["default"].FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data);break}},e}(),fe=he;function pe(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r);break}}function ge(e,t,r){var n=e[t],i=e[r],a=i.startPTS;if(Object(l["isFiniteNumber"])(a))r>t?(n.duration=a-n.start,n.duration<0&&c["logger"].warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&c["logger"].warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var o=n.cc===i.cc;i.start=n.start+(o&&n.minEndPTS?n.minEndPTS-n.start:n.duration)}else i.start=Math.max(n.start-i.duration,0)}function me(e,t,r,n,i,a){var o=r,s=n;if(Object(l["isFiniteNumber"])(t.startPTS)){var u=Math.abs(t.startPTS-r);Object(l["isFiniteNumber"])(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),s=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var c=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.minEndPTS=s,t.startDTS=i,t.endDTS=a,t.duration=n-r;var d,h,f,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(d=p-e.startSN,h=e.fragments,h[d]=t,f=d;f>0;f--)ge(h,f,f-1);for(f=d;f<h.length-1;f++)ge(h,f,f+1);return e.PTSKnown=!0,c}function ve(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if(be(e,t,(function(e,i){n=e.cc-i.cc,Object(l["isFiniteNumber"])(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0})),t.PTSKnown){if(n){c["logger"].log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=n}r?me(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):Ae(e,t),t.PTSKnown=e.PTSKnown}}function ye(e,t,r){void 0===r&&(r=0);var n=-1;be(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}function be(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=n;o<=i;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function Ae(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}function _e(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var Ee={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}},Te=Ee;function ke(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function Se(e,t){return te.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}function we(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function Re(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var i=ke(r,n[0].cc);if(i&&(!i||i.startPTS))return i;c["logger"].log("No frag in previous level to align on")}else c["logger"].log("No fragments to align")}function Ce(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function Le(e,t,r){Ie(e,r,t),!r.PTSKnown&&t&&Oe(r,t.details)}function Ie(e,t,r){if(we(e,r,t)){var n=Re(r.details,t);n&&(c["logger"].log("Adjusting PTS using last level due to CC increase within current level"),Ce(n.start,t))}}function Oe(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,i=(n-r)/1e3+t.fragments[0].start;Object(l["isFiniteNumber"])(i)&&(c["logger"].log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),Ce(i,e))}}function De(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l["isFiniteNumber"])(t))return null;var n=e[0].programDateTime;if(t<(n||0))return null;var i=e[e.length-1].endProgramDateTime;if(t>=(i||0))return null;r=r||0;for(var a=0;a<e.length;++a){var o=e[a];if(Ne(t,r,o))return o}return null}function Pe(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;if(e?i=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(i=t[0]),i&&0===xe(r,n,i))return i;var a=te.search(t,xe.bind(null,r,n));return a||i}function xe(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function Ne(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0)),i=r.endProgramDateTime||0;return i-n>e}var Me=250,Fe=2,je=.1,Ue=.05,Be=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,i=r.currentTime,a=r.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=re.bufferInfo(r,i,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>Fe,f=!d||d-i>Fe&&!this.fragmentTracker.getPartialFragment(i);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,l.start||0)-i;if(p>0&&p<=Fe)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==n){var m=g-n;!a&&m>=Me&&this._reportStall(l.len);var v=re.bufferInfo(r,i,t.maxBufferHole);this._tryFixBufferStall(v,m)}else this.stalled=g}}}else if(this.moved=!0,null!==n){if(this.stallReported){var y=self.performance.now()-n;c["logger"].warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media,a=i.currentTime,o=n.getPartialFragment(a);if(o){var s=this._trySkipBufferHole(o);if(s)return}e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(c["logger"].warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media,n=this.stallReported;n||(this.stallReported=!0,c["logger"].warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=0,o=0;o<n.buffered.length;o++){var l=n.buffered.start(o);if(i+t.maxBufferHole>=a&&i<l){var d=Math.max(l+Ue,n.currentTime+je);return c["logger"].warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:e}),d}a=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=n+i*e.nudgeOffset;c["logger"].warn("Nudging 'currentTime' from "+n+" to "+a),r.currentTime=a,t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_NUDGE_ON_STALL,fatal:!1})}else c["logger"].error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!0})},e}();function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ve=function(e){function t(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return r=e.call.apply(e,[this,t].concat(i))||this,r._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(Ge(r)),r}Ke(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},t}(f);function Ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var He={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},We=function(e){function t(){return e.apply(this,arguments)||this}Ye(t,e);var r=t.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=He.STOPPED},r._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===J.PARTIAL||i===J.OK}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,i=t?t.currentTime:null,a=re.bufferInfo(r||t,i,this.config.maxBufferHole);if(c["logger"].log("media seeking to "+(Object(l["isFiniteNumber"])(i)?i.toFixed(3):i)),n===He.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;i<u||i>d?(o.loader&&(c["logger"].log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=He.IDLE):c["logger"].log("seeking outside of buffer but within currently loaded fragment range")}}else n===He.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=He.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=He.STOPPED,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},t}(Ve);function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function qe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Xe,Ze=100,Je=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].LEVEL_LOADED,u["default"].LEVELS_UPDATED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_LOAD_EMERGENCY_ABORTED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_SWITCHED,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}qe(t,e);var r=t.prototype;return r.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(Ze),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(c["logger"].log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=He.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=He.STOPPED},r.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case He.BUFFER_FLUSHING:this.fragLoadError=0;break;case He.IDLE:this._doTickIdle();break;case He.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(c["logger"].log("mediaController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},r._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=n<t.maxBufferHole?Math.max(Fe,t.maxBufferHole):t.maxBufferHole,d=re.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,l),h=d.len;if(!(h>=o)){c["logger"].trace("buffer length of "+h.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=He.WAITING_LEVEL;else{if(this._streamEnded(d,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u["default"].BUFFER_EOS,p),void(this.state=He.ENDED)}this._fetchPayloadOrEos(n,d,f)}}}}},r._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious;this.level;var i=r.fragments,a=i.length;if(0!==a){var o,s=i[0].start,l=i[a-1].start+i[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c["logger"].warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(o=this._ensureFragmentAtLivePoint(r,u,s,l,n,i),null===o)return}else u<s&&(o=i[0]);o||(o=this._findFragment(s,n,a,i,u,l,r)),o&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,u))}},r._ensureFragmentAtLivePoint=function(e,t,r,n,i,a){var o,s=this.hls.config,u=this.media,d=1/0;if(void 0!==s.liveMaxLatencyDuration?d=s.liveMaxLatencyDuration:Object(l["isFiniteNumber"])(s.liveMaxLatencyDurationCount)&&(d=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-s.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c["logger"].log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&i)if(e.hasProgramDateTime)c["logger"].log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),o=De(a,i.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];i.cc===p.cc&&(o=p,c["logger"].log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=te.search(a,(function(e){return i.cc-e.cc})),o&&c["logger"].log("live playlist, switching playlist, load frag with same CC: "+o.sn))}return o},r._findFragment=function(e,t,r,n,i,a,o){var s,l=this.hls.config;if(i<a){var u=i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=Pe(t,n,i,u)}else s=n[r-1];if(s){var d=s.sn-o.startSN,h=t&&s.level===t.level,f=n[d-1],p=n[d+1];if(t&&s.sn===t.sn)if(h&&!s.backtracked)if(s.sn<o.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&d?(s=f,c["logger"].warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=p,this.fragmentTracker.getState(s)!==J.OK&&c["logger"].log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(p&&p.backtracked?(c["logger"].warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(c["logger"].warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f,s.backtracked=!0):d&&(s=null)))}return s},r._loadKey=function(e,t){c["logger"].log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:e})},r._loadFragment=function(e,t,r,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||i===J.NOT_LOADED||i===J.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,c["logger"].log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(r.toFixed(3))+", bufferEnd: "+parseFloat(n.toFixed(3))),this.hls.trigger(u["default"].FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new fe(this.hls,"main")),this.state=He.FRAG_LOADING):i===J.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},r._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),re.isBuffered(r,t)?e=this.getBufferedFrag(t):re.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u["default"].FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u["default"].LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.immediateLevelSwitch=function(){if(c["logger"].log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,e||t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&re.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var n=this.hls.nextLoadLevel,i=this.levels[n],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},r.flushMainBuffer=function(e,t){this.state=He.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u["default"].BUFFER_FLUSHING,r)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new Be(r,t,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l["isFiniteNumber"])(t)&&c["logger"].log("media seeked to "+t.toFixed(3)),this.tick()},r.onManifestLoading=function(){c["logger"].log("trigger BUFFER_RESET"),this.hls.trigger(u["default"].BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){t=e.audioCodec,t&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c["logger"].log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],a=t.totalduration,o=0;if(c["logger"].log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i.details&&i.details.live){var s=i.details;s&&t.fragments.length>0?(ve(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l["isFiniteNumber"])(o)?c["logger"].log("live playlist sliding:"+o.toFixed(3)):(c["logger"].log("live playlist - outdated PTS, unknown sliding"),Le(this.fragPrevious,n,t))):(c["logger"].log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,Le(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=r,this.hls.trigger(u["default"].LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l["isFiniteNumber"])(d)?(d<0&&(c["logger"].log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c["logger"].log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c["logger"].log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_LEVEL&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===He.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c["logger"].log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=He.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=He.IDLE,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c["logger"].log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=He.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s),p=this.demuxer=this.demuxer||new fe(this.hls,"main");p.push(e.payload,h,f,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,i=a.audio,i){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c["logger"].log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}for(n in i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(u["default"].BUFFER_CODECS,a),a){i=a[n],c["logger"].log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===He.PARSING){var i=this.levels[this.level],a=r;if(Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&a.addElementaryStream(v.AUDIO),!0===e.hasVideo&&a.addElementaryStream(v.VIDEO),c["logger"].log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c["logger"].warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c["logger"].warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=He.IDLE,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c["logger"].warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=me(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u["default"].LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===He.PARSING&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u["default"].BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onAudioTrackSwitching=function(e){var t=this.altAudio,r=!!e.url,n=e.id;if(!r){if(this.mediaBuffer!==this.media){c["logger"].log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(c["logger"].log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=He.IDLE}var a=this.hls;t&&a.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:n})}},r.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c["logger"].log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(c["logger"].log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c["logger"].log("main buffered : "+Te.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=He.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},r.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&re.isBuffered(this.media,this.media.currentTime)&&re.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c["logger"].warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:this.state!==He.ERROR&&(e.fatal?(this.state=He.ERROR,c["logger"].warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==He.WAITING_LEVEL||(this.state=He.IDLE));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==He.PARSING&&this.state!==He.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=He.IDLE):(c["logger"].warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},r._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c["logger"].warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.onFragLoadEmergencyAborted=function(){this.state=He.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?v.AUDIO:v.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=He.IDLE,this.fragPrevious=null},r.onLevelsUpdated=function(e){this.levels=e.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return void c["logger"].log("could not seek to "+r+", already seeking at "+t);var n=e.buffered.length?e.buffered.start(0):0,i=n-r;i>0&&i<this.config.maxBufferHole&&(c["logger"].log("adjusting start position by "+i+" to match buffer start"),r+=i,this.startPosition=r),c["logger"].log("seek to target start position "+r+" from current time "+t+". ready state "+e.readyState),e.currentTime=r}},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},$e(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("main stream-controller: "+t+"->"+e),this.hls.trigger(u["default"].STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(We),Qe=Je;function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t,r){return t&&et(e.prototype,t),r&&et(e,r),e}function rt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var nt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADED,u["default"].LEVEL_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].FRAG_LOADED,u["default"].ERROR)||this,r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Xe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}rt(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,r=[],n=[],i={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Xe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),a=i[e.bitrate],a?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&pe(a||e,"audio",t.AUDIO),t.SUBTITLES&&pe(a||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){var t=e.videoCodec;return!!t}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||O(t,"audio"))&&(!r||O(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||O(e.audioCodec,"audio")})),n.forEach((function(e,t){e.id=t}))),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,c["logger"].log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var h=l&&!o;this.hls.trigger(u["default"].MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:!h&&n.some((function(e){return!!e.url}))})}else this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c["logger"].log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(u["default"].LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;r.trigger(u["default"].LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.onError=function(e){if(e.fatal)e.type===s["ErrorTypes"].NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s["ErrorDetails"].REMUX_ALLOC_ERROR:t=e.level,r=!0;break}void 0!==t&&this.recoverLevel(e,t,r,n)}},r.recoverLevel=function(e,t,r,n){var i,a,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c["logger"].error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c["logger"].warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=d.url.length,i>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c["logger"].warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c["logger"].warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(c["logger"].warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},r.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},r.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=_e(i.details,n,e.stats.trequest);c["logger"].log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},r.loadLevel=function(){if(c["logger"].debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];c["logger"].log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u["default"].LEVEL_LOADING,{url:n,level:t,id:r})}}},r.removeLevel=function(e,t){var r=this.levels.filter((function(r,n){return n!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),r.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(u["default"].LEVELS_UPDATED,{levels:r})},tt(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(f),it=r("./src/demux/id3.js");function at(e,t){var r;try{r=new Event("addtrack")}catch(n){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function ot(e){if(null===e||void 0===e?void 0:e.cues)while(e.cues.length>0)e.removeCue(e.cues[0])}function st(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];var r=0,n=e.length-1;while(r<=n){var i=Math.floor((n+r)/2);if(t<e[i].endTime)n=i-1;else{if(!(t>e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}function lt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ut=.25,ct=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_METADATA,u["default"].LIVE_BACK_BUFFER_REACHED)||this,r.id3Track=void 0,r.media=void 0,r}lt(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){ot(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return at(r,this.media),r}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=it["default"].getID3Frames(r[i].data);if(a){var o=Math.max(r[i].pts,0),s=i<r.length-1?r[i+1].pts:t.endPTS;s||(s=t.start+t.duration);var l=s-o;l<=0&&(s=o+ut);for(var u=0;u<a.length;u++){var c=a[u];if(!it["default"].isTimeStampFrame(c)){var d=new n(o,s,"");d.value=c,this.id3Track.addCue(d)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=st(r.cues,t);if(n)while(r.cues[0]!==n)r.removeCue(r.cues[0])}},t}(f),dt=ct;function ht(){var e=oe();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}var ft=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),pt=ft,gt=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new pt(t),this.fast_=new pt(r)}var t=e.prototype;return t.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8*t,n=e/1e3,i=r/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),mt=gt;function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t,r){return t&&vt(e.prototype,t),r&&vt(e,r),e}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _t=window,Et=_t.performance,Tt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING,u["default"].FRAG_LOADED,u["default"].FRAG_BUFFERED,u["default"].ERROR)||this,r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(bt(r)),r}At(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,a=i.config,o=t.level,s=i.levels[o].details.live;s?(r=a.abrEwmaFastLive,n=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,n=a.abrEwmaSlowVoD),this._bwEstimator=new mt(i,n,r,a.abrEwmaDefaultEstimate)}},r._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader;if(!n||n.stats&&n.stats.aborted)return c["logger"].warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=n.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=Et.now()-i.trequest,o=Math.abs(t.playbackRate);if(a>500*r.duration/o){var s=e.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=s[r.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*h/8)),p=t.currentTime,g=(f-i.loaded)/l,m=(re.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m<2*r.duration/o&&g>m){var v,y,b=e.minAutoLevel;for(y=r.level-1;y>b;y--){var A=s[y].realBitrate?Math.max(s[y].realBitrate,s[y].bitrate):s[y].bitrate,_=r.duration*A/(6.4*l);if(_<m)break}v<g&&(c["logger"].warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(a,i.loaded),n.abort(),this.clearTimer(),e.trigger(u["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},r.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l["isFiniteNumber"])(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l["isFiniteNumber"])(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;c["logger"].log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},r.onError=function(e){switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:this.clearTimer();break}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r._findBestLevel=function(e,t,r,n,i,a,o,s,l){for(var u=i;u>=n;u--){var d=l[u];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=void 0;g=u<=e?o*r:s*r;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(c["logger"].trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},yt(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(re.bufferInfo(a,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,d,i,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;c["logger"].trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;if(v){var y=s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay;p=y-v,c["logger"].trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}}return f=this._findBestLevel(o,s,d,i,t,h+p,g,m,r),Math.max(f,0)}}]),t}(f),kt=Tt;function St(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var wt=oe(),Rt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_PARSED,u["default"].BUFFER_RESET,u["default"].BUFFER_APPENDING,u["default"].BUFFER_CODECS,u["default"].BUFFER_EOS,u["default"].BUFFER_FLUSHING,u["default"].LEVEL_PTS_UPDATED,u["default"].LEVEL_UPDATED)||this,r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c["logger"].log("media source opened"),r.hls.trigger(u["default"].MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c["logger"].log("media source closed")},r._onMediaSourceEnded=function(){c["logger"].log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;c["logger"].warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),i={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}r.hls.trigger(u["default"].BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){c["logger"].error("sourceBuffer error:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}St(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");var i=Math.abs(n.timestampOffset-e.start);if(i>.1){var a=n.updating;try{n.abort()}catch(o){c["logger"].warn("can not abort audio buffer: "+o)}a?this.audioTimestampOffset=e.start:(c["logger"].warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,c["logger"].log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&wt){var r=this.mediaSource=new wt;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.onMediaDetaching=function(){c["logger"].log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){c["logger"].warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c["logger"].warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u["default"].MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(n){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var i=e[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c["logger"].log("creating sourceBuffer("+o+")");try{var l=t[n]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(d){c["logger"].error("error while trying to add sourceBuffer:"+d.message),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_ADD_CODEC_ERROR,fatal:!1,err:d,mimeType:o})}}this.hls.trigger(u["default"].BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,c["logger"].log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c["logger"].log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(i){c["logger"].warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o];if(s){var l=s.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(u["default"].LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c["logger"].error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c["logger"].log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l["isFiniteNumber"])(e))&&(c["logger"].log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){while(this.flushRange.length){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&&(t+=i.buffered.length)}}catch(a){c["logger"].error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u["default"].BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c["logger"].error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=r.shift();if(i)try{var a=n[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(l){c["logger"].error("error while trying to append buffer:"+l.message),r.unshift(i);var o={type:s["ErrorTypes"].MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===l.code?(this.segments=[],o.details=s["ErrorDetails"].BUFFER_FULL_ERROR):(this.appendError++,o.details=s["ErrorDetails"].BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c["logger"].log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u["default"].ERROR,o)}}}},r.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c["logger"].log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c["logger"].warn("abort flushing too many retries"),!0;var a=n[r];if(a){if(a.ended=!1,a.updating)return c["logger"].warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return c["logger"].log("buffer flushed"),!0},r.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,r),l=Math.min(o,n);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c["logger"].log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(d){c["logger"].warn("removeBufferRange failed",d)}return!1},t}(f),Ct=Rt;function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t,r){return t&&Lt(e.prototype,t),r&&Lt(e,r),e}function Ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Dt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FPS_DROP_LEVEL_CAPPING,u["default"].MEDIA_ATTACHING,u["default"].MANIFEST_PARSED,u["default"].LEVELS_UPDATED,u["default"].BUFFER_CODECS,u["default"].MEDIA_DETACHING)||this,r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}Ot(t,e);var r=t.prototype;return r.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},r.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onBufferCodecs=function(e){var t=this.hls;t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onLevelsUpdated=function(e){this.levels=e.levels},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return t.isLevelAllowed(i,r.restrictedLevels)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},r.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},t.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&n(o,e[a+1])){i=a;break}}return i},It(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),t}(f),Pt=Dt;function xt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Nt=window,Mt=Nt.performance,Ft=function(e){function t(t){return e.call(this,t,u["default"].MEDIA_ATTACHING)||this}xt(t,e);var r=t.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var r=this.video=e.media instanceof window.HTMLVideoElement?e.media:null;"function"===typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},r.checkFPS=function(e,t,r){var n=Mt.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(u["default"].FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c["logger"].warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u["default"].FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(f),jt=Ft,Ut=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(i){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:e.status,text:i.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;n.tload=Math.max(n.tfirst,window.performance.now()),"arraybuffer"===i.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,i,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(c["logger"].error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(c["logger"].warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c["logger"].warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}(),Bt=Ut;function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t,r){return t&&Gt(e.prototype,t),r&&Gt(e,r),e}function Vt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Yt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].AUDIO_TRACK_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].LEVEL_LOADED,u["default"].ERROR)||this,r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}Vt(t,e);var r=t.prototype;return r.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},r.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u["default"].AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},r.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c["logger"].warn("Invalid audio track id:",e.id);else{if(c["logger"].log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},r.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},r.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},r.onError=function(e){e.type===s["ErrorTypes"].NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR&&(c["logger"].warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},r._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c["logger"].debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c["logger"].warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c["logger"].log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(u["default"].AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},r.doTick=function(){this._updateTrack(this._trackId)},r._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},r._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c["logger"].warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(n=null,o()),a||(c["logger"].error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},r._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},r._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;c["logger"].log("loading audio-track playlist for id: "+r),this.hls.trigger(u["default"].AUDIO_TRACK_LOADING,{url:t,id:r})}},r._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c["logger"].log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},r._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;c["logger"].warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===r){a=o;break}}a!==e?(c["logger"].log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c["logger"].warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},Kt(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(Ve),Ht=Yt;function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t,r){return t&&Wt(e.prototype,t),r&&Wt(e,r),e}function $t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var qt=window,Xt=qt.performance,Zt=100,Jt=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].AUDIO_TRACKS_UPDATED,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_LOADED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].BUFFER_RESET,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED,u["default"].INIT_PTS_FOUND)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n.waitingVideoCC=null,n}$t(t,e);var r=t.prototype;return r.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c["logger"].log("InitPTS for cc: "+r+" found from main: "+n),this.state===He.WAITING_INIT_PTS&&this.tick())},r.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Zt),this.fragLoadError=0,t>0&&-1===e?(c["logger"].log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=He.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=He.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=He.STOPPED},r.doTick=function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case He.ERROR:case He.PAUSED:case He.BUFFER_FLUSHING:break;case He.STARTING:this.state=He.WAITING_TRACK,this.loadedmetadata=!1;break;case He.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(e=this.nextLoadPosition,void 0===e)break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=e<i.maxBufferHole?Math.max(Fe,i.maxBufferHole):i.maxBufferHole,h=re.bufferInfo(o,e,d),f=re.bufferInfo(s,e,d),p=h.len,g=h.end,m=this.fragPrevious,v=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(v,f.len),b=this.audioSwitch,A=this.trackId;if((p<y||b)&&A<a.length){if(r=a[A].details,"undefined"===typeof r){this.state=He.WAITING_TRACK;break}if(!b&&this._streamEnded(h,r))return this.hls.trigger(u["default"].BUFFER_EOS,{type:"audio"}),void(this.state=He.ENDED);var _,E=r.fragments,T=E.length,k=E[0].start,S=E[T-1].start+E[T-1].duration;if(b)if(r.live&&!r.PTSKnown)c["logger"].log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,r.PTSKnown&&e<k){if(!(h.end>k||h.nextStart))return;c["logger"].log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(r.initSegment&&!r.initSegment.data)_=r.initSegment;else if(g<=k){if(_=E[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=Se(E,this.videoTrackCC)),r.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var w=h.nextStart?h.nextStart:k;return c["logger"].log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(w+.05)),void(this.media.currentTime=w+.05)}}else{var R,C=i.maxFragLookUpTolerance,L=m?E[m.sn-E[0].sn+1]:void 0;g<S?(g>S-C&&(C=0),R=L&&!xe(g,C,L)?L:te.search(E,(function(e){return xe(g,C,e)}))):R=E[T-1],R&&(_=R,k=R.start,m&&_.level===m.level&&_.sn===m.sn&&(_.sn<r.endSN?(_=E[_.sn+1-r.startSN],this.fragmentTracker.getState(_)!==J.OK&&c["logger"].log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(c["logger"].log("Loading key for "+_.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+A),this.state=He.KEY_LOADING,n.trigger(u["default"].KEY_LOADING,{frag:_})):(this.fragCurrent=_,(b||this.fragmentTracker.getState(_)===J.NOT_LOADED)&&(c["logger"].log("Loading "+_.sn+", cc: "+_.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+A+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+g.toFixed(3)),"initSegment"!==_.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(_.sn)&&(this.nextLoadPosition=_.start+_.duration),n.trigger(u["default"].FRAG_LOADING,{frag:_}),this.state=He.FRAG_LOADING)))}break;case He.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var I=Xt.now(),O=this.retryDate;o=this.media;var D=o&&o.seeking;(!O||I>=O||D)&&(c["logger"].log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break;case He.WAITING_INIT_PTS:var P=this.waitingFragment;if(P){var x=P.frag.cc;if(void 0!==this.initPTS[x])this.waitingFragment=null,this.state=He.FRAG_LOADING,this.onFragLoaded(P);else if(this.videoTrackCC!==this.waitingVideoCC)c["logger"].log("Waiting fragment cc ("+x+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var N=re.bufferInfo(this.mediaBuffer,this.media.currentTime,i.maxBufferHole),M=xe(N.end,i.maxFragLookUpTolerance,P.frag);M<0&&(c["logger"].log("Waiting fragment cc ("+x+") @ "+P.frag.start+" cancelled because another fragment at "+N.end+" is needed"),this.clearWaitingFragment())}}else this.state=He.IDLE;break}},r.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=He.IDLE)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onAudioTracksUpdated=function(e){c["logger"].log("audio tracks updated"),this.tracks=e.audioTracks},r.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=He.PAUSED,t?this.setInterval(Zt):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=He.IDLE),this.tick()},r.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],i=n.details,a=t.totalduration,o=0;if(c["logger"].log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i&&i.live?i&&t.fragments.length>0?(ve(i,t),o=t.fragments[0].start,t.PTSKnown?c["logger"].log("live audio playlist sliding:"+o.toFixed(3)):c["logger"].log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c["logger"].log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l["isFiniteNumber"])(s)?(c["logger"].log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),c["logger"].log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_TRACK&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===He.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=He.IDLE,h.tparsed=h.tbuffered=Xt.now(),i.initSegment.data=e.payload,this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=He.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new fe(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];if(void 0!==f){this.pendingBuffering=!0,c["logger"].log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);var g=!1;this.demuxer.push(e.payload,p,d,null,t,a,g,f)}else c["logger"].log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=He.WAITING_INIT_PTS}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i=e.tracks;if(i.video&&delete i.video,n=i.audio,n){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(u["default"].BUFFER_CODECS,i),c["logger"].log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var a=n.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,o))}this.tick()}}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===He.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(v.AUDIO),c["logger"].log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),me(a.details,r,e.startPTS,e.endPTS);var d=this.media,h=!1;if(this.audioSwitch)if(d&&d.readyState){var f=d.currentTime;c["logger"].log("switching audio track : currentTime:"+f),f>=e.startPTS&&(c["logger"].log("switching audio track : flushing all audio"),this.state=He.BUFFER_FLUSHING,o.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i});var p=this.pendingData;if(!p)return c["logger"].warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})})),!h&&p.length&&(p.forEach((function(e){t.state===He.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(u["default"].BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=Xt.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=Xt.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c["logger"].log("audio buffered : "+Te.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=He.IDLE}this.tick()}},r.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var a=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c["logger"].warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Xt.now()+a,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR}break;case s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR:case s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:this.state!==He.ERROR&&(this.state=e.fatal?He.ERROR:He.IDLE,c["logger"].warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===He.PARSING||this.state===He.PARSED)){var o=this.mediaBuffer,l=this.media.currentTime,d=o&&re.isBuffered(o,l)&&re.isBuffered(o,l+.5);if(d){var h=this.config;h.maxMaxBufferLength>=h.maxBufferLength&&(h.maxMaxBufferLength/=2,c["logger"].warn("AudioStreamController: reduce max buffer length to "+h.maxMaxBufferLength+"s")),this.state=He.IDLE}else c["logger"].warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=He.BUFFER_FLUSHING,this.hls.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},r.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c["logger"].log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u["default"].BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=He.PARSED):(this.state=He.IDLE,this.fragPrevious=null,this.tick())},zt(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(We),Qt=Jt,er=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){if("string"!==typeof e)return!1;var r=t[e.toLowerCase()];return!!r&&e.toLowerCase()}function i(e){if("string"!==typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function o(t,r,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=t,h=r,f=o,p=null,g="",m=!0,v="auto",y="start",b=50,A="middle",_=50,E="middle";Object.defineProperty(s,"id",a({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",a({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",a({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},l,{get:function(){return g},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},l,{get:function(){return v},set:function(t){if("number"!==typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},l,{get:function(){return A},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return o.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},o}(),tr=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function rr(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new tr,this.regionList=[]}function nr(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function ir(){this.values=Object.create(null)}function ar(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}ir.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var or=new er(0,0,0),sr="middle"===or.align?"middle":"center";function lr(e,t,r){var n=e;function i(){var t=nr(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var n=new ir;ar(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",sr,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",sr,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",sr,"end","left","right"]);break}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===or.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",sr);var a=n.get("position","auto");"auto"===a&&50===or.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),o(),t.endTime=i(),o(),a(e,t)}function ur(e){return e.replace(/<br(?: \/)?>/gi,"\n")}rr.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;e=ur(e);while(r<e.length&&"\r"!==e[r]&&"\n"!==e[r])++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function n(e){ar(e,(function(e,t){}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;i=r();var a=i.match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}var o=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=r(),t.state){case"HEADER":/:/.test(i)?n(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new er(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{lr(i,t.cue,t.regionList)}catch(l){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(l){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}};var cr=rr;function dr(e,t,r,n){for(var i,a,o,s,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<n.rows.length;d++)if(i=n.rows[d],o=!0,s=0,l="",!i.isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&o?s++:(l+=i.chars[h].uchar,o=!1);i.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,ur(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),u.push(a),e&&e.addCue(a)}return u}var hr,fr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},pr=function(e){var t=e;return fr.hasOwnProperty(e)&&(t=fr[e]),String.fromCharCode(t)},gr=15,mr=100,vr={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},br={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ar={25:2,26:4,29:6,30:8,31:10,27:13,28:15},_r=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(e){e[e["ERROR"]=0]="ERROR",e[e["TEXT"]=1]="TEXT",e[e["WARNING"]=2]="WARNING",e[e["INFO"]=2]="INFO",e[e["DEBUG"]=3]="DEBUG",e[e["DATA"]=3]="DATA"})(hr||(hr={}));var Er=function(){function e(){this.time=null,this.verboseLevel=hr.ERROR}var t=e.prototype;return t.log=function(e,t){this.verboseLevel>=e&&c["logger"].log(this.time+" ["+e+"] "+t)},e}(),Tr=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},kr=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Sr=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new kr(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),wr=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<mr;t++)this.chars.push(new Sr);this.logger=e,this.pos=0,this.currPenState=new kr}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<mr;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<mr;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<mr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(hr.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>mr&&(this.logger.log(hr.DEBUG,"Too large cursor position "+this.pos),this.pos=mr)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=pr(e);this.pos>=mr?this.logger.log(hr.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<mr;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<mr;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)},e}(),Rr=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<gr;t++)this.rows.push(new wr(e));this.logger=e,this.currRow=gr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<gr;e++)this.rows[e].clear();this.currRow=gr-1},t.equals=function(e){for(var t=!0,r=0;r<gr;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<gr;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<gr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){var e=this.rows[this.currRow];e.backSpace()},t.clearToEndOfRow=function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},t.insertChar=function(e){var t=this.rows[this.currRow];t.insertChar(e)},t.setPen=function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},t.moveCursor=function(e){var t=this.rows[this.currRow];t.moveCursor(e)},t.setCursor=function(e){this.logger.log(hr.INFO,"setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},t.setPAC=function(e){this.logger.log(hr.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<gr;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[n+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(hr.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(hr.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(hr.INFO,"Rolling up")}else this.logger.log(hr.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<gr;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Cr=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Rr(r),this.nonDisplayedMemory=new Rr(r),this.lastOutputScreen=new Rr(r),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(hr.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(hr.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(hr.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(hr.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(hr.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(hr.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(hr.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(hr.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(hr.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(hr.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(hr.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(hr.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(hr.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(hr.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(hr.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(hr.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(hr.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}this.logger.log(hr.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Lr=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Er;this.channels=[null,new Cr(e,t,n),new Cr(e+1,r,n)],this.cmdHistory=Dr(),this.logger=n}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,i,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(this.logger.log(hr.DATA,"["+Tr([t[o],t[o+1]])+"] -> ("+Tr([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i),a)){var s=this.currentChannel;if(s&&s>0){var l=this.channels[s];l.insertChars(a)}else this.logger.log(hr.WARNING,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(hr.WARNING,"Couldn't parse cleaned data "+Tr([n,i])+" orig: "+Tr([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory,n=(20===e||28===e||21===e||29===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=33&&t<=35;if(!n&&!i)return!1;if(Or(e,t,r))return Ir(null,null,r),this.logger.log(hr.DEBUG,"Repeated command ("+Tr([e,t])+") is dropped"),!0;var a=20===e||21===e||23===e?1:2,o=this.channels[a];return 20===e||21===e||28===e||29===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),Ir(e,t,r),this.currentChannel=a,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currentChannel)return this.logger.log(hr.ERROR,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(hr.DEBUG,"MIDROW ("+Tr([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,n=this.cmdHistory,i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(16===e||24===e)&&t>=64&&t<=95;if(!i&&!a)return!1;if(Or(e,t,n))return Ir(null,null,n),!0;var o=e<=23?1:2;r=t>=64&&t<=95?1===o?vr[e]:br[e]:1===o?yr[e]:Ar[e];var s=this.channels[o];return!!s&&(s.setPAC(this.interpretPAC(r,t)),Ir(e,t,n),this.currentChannel=o,!0)},t.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,this.logger.log(hr.INFO,"Special char '"+pr(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=Tr(n);this.logger.log(hr.DEBUG,"Char codes =  "+o.join(",")),Ir(e,t,this.cmdHistory)}return n},t.parseBackgroundAttributes=function(e,t){var r,n=(16===e||24===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=45&&t<=47;if(!n&&!i)return!1;var a={};16===e||24===e?(r=Math.floor((t-32)/2),a.background=_r[r],t%2===1&&(a.background=a.background+"_semi")):45===t?a.background="transparent":(a.foreground="black",47===t&&(a.underline=!0));var o=e<=23?1:2,s=this.channels[o];return s.setBkgData(a),Ir(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory=Dr()},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}();function Ir(e,t,r){r.a=e,r.b=t}function Or(e,t,r){return r.a===e&&r.b===t}function Dr(){return{a:null,b:null}}var Pr=Lr,xr=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Nr=function(e,t,r){return e.substr(r||0,t.length)===t},Mr=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!Object(l["isFiniteNumber"])(t)||!Object(l["isFiniteNumber"])(r)||!Object(l["isFiniteNumber"])(n)||!Object(l["isFiniteNumber"])(i))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*n,t+=36e5*i,t},Fr=function(e){var t=5381,r=e.length;while(r)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},jr=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);while(i&&i.new)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},Ur={parse:function(e,t,r,n,i,a){var o,s=/\r\n|\n\r|\n|\r/g,l=Object(it["utf8ArrayToStr"])(new Uint8Array(e)).trim().replace(s,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new cr;m.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(void 0!==d?i=r.ccOffset=t.start:jr(r,n,h)),h&&(i=h-r.presentationOffset),g&&(e.startTime+=i-d,e.endTime+=i-d),e.id=Fr(e.startTime.toString())+Fr(e.endTime.toString())+Fr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},m.onparsingerror=function(e){o=e},m.onflush=function(){o&&a?a(o):i(f)},l.forEach((function(e){if(p){if(Nr(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach((function(e){Nr(e,"LOCAL:")?u=e.substr(6):Nr(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),c-=t,d=Mr(u)/1e3,h=c/9e4}catch(i){g=!1,o=i}return}""===e&&(p=!1)}m.parse(e+"\n")})),m.flush()}},Br=Ur;function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Vr=function(e){function t(t){var r;if(r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_USERDATA,u["default"].FRAG_DECRYPTED,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_LOADED,u["default"].FRAG_LOADED,u["default"].INIT_PTS_FOUND)||this,r.media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=Wr(),r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var n=new xr(Gr(r),"textTrack1"),i=new xr(Gr(r),"textTrack2"),a=new xr(Gr(r),"textTrack3"),o=new xr(Gr(r),"textTrack4");r.cea608Parser1=new Pr(1,n,i),r.cea608Parser2=new Pr(3,a,o)}return r}Kr(t,e);var r=t.prototype;return r.addCues=function(e,t,r,n,i){for(var a=!1,o=i.length;o--;){var s=i[o],l=Hr(s[0],s[1],t,r);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),a=!0,l/(r-t)>.5))return}if(a||i.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,r,n);else{var c=this.Cues.newCue(null,t,r,n);this.hls.trigger(u["default"].CUES_PARSED,{type:"captions",cues:c,track:e})}},r.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,i=e.initPTS,a=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},r.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,ot(r[e]),at(r[e],n);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},r.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r=t.label,n={_id:e,label:r,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(u["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},r.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){ot(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=Wr(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)ot(t[r])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=e.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var n;if(r<i.length){for(var a=null,o=0;o<i.length;o++)if(Yr(i[o],e)){a=i[o];break}a&&(n=a)}n||(n=t.createTextTrack("subtitles",e.name,e.lang)),e.default?n.mode=t.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",t.textTracks.push(n)}))}else if(!n&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(u["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var r=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(r){var n="textTrack"+r[1],i=t.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},r.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser1,i=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var c=t.sn;t.sn!==o+1&&n&&i&&(n.reset(),i.reset()),this.lastSn=c}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l["isFiniteNumber"])(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(t,r)}else this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var r=this,n=this.hls,i=this.prevCC,a=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),Br.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var i=a[e.level];if("disabled"===i.mode)return void n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){c["logger"].debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}}))}else{var o=r.tracks[e.level].default?"default":"subtitles"+e.level;n.trigger(u["default"].CUES_PARSED,{type:"subtitles",cues:t,track:o})}n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){c["logger"].log("Failed to parse VTT cue: "+t),n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l["isFiniteNumber"])(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},r.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var a=this.extractCea608Data(i);t.addData(e.samples[n].pts,a[0]),r.addData(e.samples[n].pts,a[1])}}},r.extractCea608Data=function(e){for(var t=31&e[0],r=2,n=[[],[]],i=0;i<t;i++){var a=e[r++],o=127&e[r++],s=127&e[r++],l=0!==(4&a),u=3&a;0===o&&0===s||l&&(0!==u&&1!==u||(n[u].push(o),n[u].push(s)))}return n},t}(f);function Yr(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Hr(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}function Wr(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var zr=Vr;function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t,r){return t&&$r(e.prototype,t),r&&$r(e,r),e}function Xr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Zr=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADED,u["default"].SUBTITLE_TRACK_LOADED)||this,r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}Xr(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l["isFiniteNumber"])(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l["isFiniteNumber"])(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var e=Jr(this.media.textTracks);e.forEach((function(e){ot(e)})),this.subtitleTrack=-1,this.media=null}},r.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u["default"].SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},r.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,o=a[i];if(r>=a.length||r!==i||!o||this.stopped)this._clearReloadTimer();else if(c["logger"].log("subtitle track "+r+" loaded"),n.live){var s=_e(o.details,n,e.stats.trequest);c["logger"].log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},r.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},r._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(c["logger"].log("Loading subtitle track "+e),r.trigger(u["default"].SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=Jr(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var a=i[n];a&&(a.mode="disabled")}var o=i[e];o&&(o.mode=r?"showing":"hidden")}},r._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l["isFiniteNumber"])(e)||e<-1||e>=r.length||(this.trackId=e,c["logger"].log("Switching to subtitle track "+e),t.trigger(u["default"].SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Jr(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},qr(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),t}(f);function Jr(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var Qr=Zr,en=r("./src/crypt/decrypter.js");function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var nn,an=window,on=an.performance,sn=500,ln=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].ERROR,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].SUBTITLE_TRACKS_UPDATED,u["default"].SUBTITLE_TRACK_SWITCH,u["default"].SUBTITLE_TRACK_LOADED,u["default"].SUBTITLE_FRAG_PROCESSED,u["default"].LEVEL_UPDATED)||this,n.fragmentTracker=r,n.config=t.config,n.state=He.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new en["default"](t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(tn(n)),n}rn(t,e);var r=t.prototype;return r.startLoad=function(){this.stopLoad(),this.state=He.IDLE;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(sn),this.tick())},r.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=He.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,o=0;o<n.length;o++)if(a>=n[o].start&&a<=n[o].end){i=n[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=He.IDLE},r.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=He.STOPPED)},r.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=He.IDLE)},r.onSubtitleTracksUpdated=function(e){var t=this;c["logger"].log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(sn)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t>=i.length||t!==n||!a||(r.live&&ye(a.details,r,this.lastAVStart),a.details=r,this.setInterval(sn))},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE)},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===He.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=on.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=on.now();i.trigger(u["default"].FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},r.onLevelUpdated=function(e){var t=e.details,r=t.fragments;this.lastAVStart=r.length?r[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case He.IDLE:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=re.bufferedInfo(this._getBuffered(),n.currentTime,o),h=d.end,f=d.len,p=i[t].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(f>l)return;var y=this.fragPrevious;h<v?(y&&p.hasProgramDateTime&&(a=De(g,y.endProgramDateTime,s)),a||(a=Pe(y,g,h,s))):a=g[m-1],a&&a.encrypted?(c["logger"].log("Loading key for "+a.sn),this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:a})):a&&r.getState(a)===J.NOT_LOADED&&(this.fragCurrent=a,this.state=He.FRAG_LOADING,this.hls.trigger(u["default"].FRAG_LOADING,{frag:a}))}else this.state=He.IDLE},r.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){if(this.fragCurrent){var e=this.media?this.media.currentTime:0,t=this.config.maxFragLookUpTolerance,r=this.fragCurrent.start-t,n=this.fragCurrent.start+this.fragCurrent.duration+t;(e<r||e>n)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=He.IDLE,this.tick())}},t}(We);(function(e){e["WIDEVINE"]="com.widevine.alpha",e["PLAYREADY"]="com.microsoft.playready"})(nn||(nn={}));var un=function(){return"undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dn(e,t,r){return t&&cn(e.prototype,t),r&&cn(e,r),e}function hn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var fn=3,pn=function(e,t,r){var n={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[n]},gn=function(e,t,r,n){switch(e){case nn.WIDEVINE:return pn(t,r,n);default:throw new Error("Unknown key-system: "+e)}},mn=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHED,u["default"].MANIFEST_PARSED)||this,r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(c["logger"].log('Media is encrypted using "'+e.initDataType+'" init data type'),!r.mediaKeysPromise)return c["logger"].error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}hn(t,e);var r=t.prototype;return r.getLicenseServerUrl=function(e){switch(e){case nn.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},r._attemptKeySystemAccess=function(e,t,r){var n=this,i=gn(e,t,r,this._drmSystemOptions);c["logger"].log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=a.then((function(t){return n._onMediaKeySystemAccessObtained(e,t)})),a.catch((function(t){c["logger"].error('Failed to obtain key-system "'+e+'" access:',t)}))},r._onMediaKeySystemAccessObtained=function(e,t){var r=this;c["logger"].log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return n.mediaKeys=t,c["logger"].log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return i.catch((function(e){c["logger"].error("Failed to create media-keys:",e)})),i},r._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},r._onNewMediaKeySession=function(e){var t=this;c["logger"].log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},r._onKeySessionMessage=function(e,t){c["logger"].log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c["logger"].log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},r._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c["logger"].error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_KEYS,fatal:!0});c["logger"].log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return c["logger"].error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c["logger"].warn("Key-Session already initialized but requested again");else{var i=n.mediaKeysSession;if(!i)return c["logger"].error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c["logger"].warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c["logger"].log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c["logger"].debug("Key-session generation succeeded")})).catch((function(e){c["logger"].error("Error generating key-session request:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},r._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(a){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},r._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c["logger"].log("License request succeeded"),"arraybuffer"!==e.responseType&&c["logger"].warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(c["logger"].error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>fn)return void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=fn-this._requestLicenseFailureCount+1;c["logger"].warn("Retrying license request, "+i+" attempts left"),this._requestLicense(r,n)}break}},r._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case nn.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){c["logger"].log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c["logger"].error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);c["logger"].log("Sending license request to URL: "+n);var a=this._generateLicenseRequestChallenge(r,e);i.send(a)}catch(o){c["logger"].error("Failure requesting DRM license: "+o),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},r.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},r.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(nn.WIDEVINE,t,r)}},dn(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(f),vn=mn;function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){An(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function An(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _n=bn(bn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Bt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:kt,bufferController:Ct,capLevelController:Pt,fpsController:jt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:un,testBandwidth:!0},En()),{},{subtitleStreamController:ln,subtitleTrackController:Qr,timelineController:zr,audioStreamController:Qt,audioTrackController:Ht,emeController:vn});function En(){return{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cn(e,t,r){return t&&Rn(e.prototype,t),r&&Rn(e,r),e}function Ln(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var In=function(e){function t(r){var n;void 0===r&&(r={}),n=e.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=kn(kn({},i),r);var a=wn(n),o=a.config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c["enableLogs"])(o.debug),n._autoLevelCapping=-1;var s=n.abrController=new o.abrController(wn(n)),l=new o.bufferController(wn(n)),u=n.capLevelController=new o.capLevelController(wn(n)),d=new o.fpsController(wn(n)),h=new Y(wn(n)),f=new z(wn(n)),p=new X(wn(n)),g=new dt(wn(n)),m=n.levelController=new nt(wn(n)),v=new Q(wn(n)),y=n.streamController=new Qe(wn(n),v),b=[m,y],A=o.audioStreamController;A&&b.push(new A(wn(n),v)),n.networkControllers=b;var _=[h,f,p,s,l,u,d,g,v];if(A=o.audioTrackController,A){var E=new A(wn(n));n.audioTrackController=E,_.push(E)}if(A=o.subtitleTrackController,A){var T=new A(wn(n));n.subtitleTrackController=T,b.push(T)}if(A=o.emeController,A){var k=new A(wn(n));n.emeController=k,_.push(k)}return A=o.subtitleStreamController,A&&b.push(new A(wn(n),v)),A=o.timelineController,A&&_.push(new A(wn(n))),n.coreComponents=_,n}Ln(t,e),t.isSupported=function(){return ht()},Cn(t,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return u["default"]}},{key:"ErrorTypes",get:function(){return s["ErrorTypes"]}},{key:"ErrorDetails",get:function(){return s["ErrorDetails"]}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:_n},set:function(e){t.defaultConfig=e}}]);var r=t.prototype;return r.destroy=function(){c["logger"].log("destroy"),this.trigger(u["default"].DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){c["logger"].log("attachMedia"),this.media=e,this.trigger(u["default"].MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){c["logger"].log("detachMedia"),this.trigger(u["default"].MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=o["buildAbsoluteURL"](window.location.href,e,{alwaysNormalize:!0}),c["logger"].log("loadSource:"+e),this.url=e,this.trigger(u["default"].MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&&(e=-1),c["logger"].log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},r.stopLoad=function(){c["logger"].log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},r.swapAudioCodec=function(){c["logger"].log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){c["logger"].log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},r.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},Cn(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c["logger"].log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c["logger"].log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c["logger"].log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c["logger"].log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c["logger"].log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c["logger"].log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++){var i=e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate;if(i>t)return n}return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping;return e=-1===r&&t&&t.length?t.length-1:r,e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),t}(ue);In.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,r){r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var n=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,r){function n(){return"undefined"===typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,r){r.r(t),r.d(t,"enableLogs",(function(){return d})),r.d(t,"logger",(function(){return h}));var n=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(e,t){return t="["+e+"] > "+t,t}var l=Object(n["getSelfScope"])();function u(e){var t=l.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=s(e,n[0])),t.apply(l.console,n)}:i}function c(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}var d=function(e){if(l.console&&!0===e||"object"===typeof e){c(e,"debug","log","info","warn","error");try{o.log()}catch(t){o=a}}else o=a},h=o}})["default"]}))})(w);var R=S(w.exports),C=n["f"].now,L=n["f"].assign,I=n["f"].listContainsIgnoreCase,O=-1;n["a"].register("PLAYBACK_FRAGMENT_CHANGED"),n["a"].register("PLAYBACK_FRAGMENT_PARSING_METADATA");var D=function(e){c(r,e);var t=m(r);function r(){var e;o(this,r);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),e.options.playback=a(a({},e.options),e.options.playback),e.options.hlsPlayback=a(a({},e.defaultOptions),e.options.hlsPlayback),e._minDvrSize="undefined"===typeof e.options.hlsMinimumDvrSize?60:e.options.hlsMinimumDvrSize,e._extrapolatedWindowNumSegments=e.options.playback&&"undefined"!==typeof e.options.playback.extrapolatedWindowNumSegments?e.options.playback.extrapolatedWindowNumSegments:2,e._playbackType=n["d"].VOD,e._lastTimeUpdate={current:0,total:0},e._lastDuration=null,e._playableRegionStartTime=0,e._localStartTimeCorrelation=null,e._localEndTimeCorrelation=null,e._playableRegionDuration=0,e._programDateTime=0,e._durationExcludesAfterLiveSyncPoint=!1,e._segmentTargetDuration=null,e._playlistType=null,e._recoverAttemptsRemaining=e.options.hlsRecoverAttempts||16,e}return l(r,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?O:this._currentLevel},set:function(e){this._currentLevel=e,this.trigger(n["a"].PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===n["d"].LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return C()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,r=(e.remote+t)/1e3;return Math.min(r,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,r=this._now-t.local,n=(t.remote+r)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(n,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"_setup",value:function(){var e=this;this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new R(L({},this.options.playback.hlsjsConfig)),this._hls.once(R.Events.MEDIA_ATTACHED,(function(){e.options.hlsPlayback.preload&&e._hls.loadSource(e.options.src)})),this._hls.on(R.Events.MANIFEST_PARSED,(function(){return e._manifestParsed=!0})),this._hls.on(R.Events.LEVEL_LOADED,(function(t,r){return e._updatePlaybackType(t,r)})),this._hls.on(R.Events.LEVEL_UPDATED,(function(t,r){return e._onLevelUpdated(t,r)})),this._hls.on(R.Events.LEVEL_SWITCHING,(function(t,r){return e._onLevelSwitch(t,r)})),this._hls.on(R.Events.FRAG_CHANGED,(function(t,r){return e._onFragmentChanged(t,r)})),this._hls.on(R.Events.FRAG_LOADED,(function(t,r){return e._onFragmentLoaded(t,r)})),this._hls.on(R.Events.FRAG_PARSING_METADATA,(function(t,r){return e._onFragmentParsingMetadata(t,r)})),this._hls.on(R.Events.ERROR,(function(t,r){return e._onHLSJSError(t,r)})),this._hls.on(R.Events.SUBTITLE_TRACK_LOADED,(function(t,r){return e._onSubtitleLoaded(t,r)})),this._hls.on(R.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this.bindCustomListeners(),this._hls.attachMedia(this.el)}},{key:"bindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var r=t.eventName,n=t.once?"once":"on";r&&e._hls["".concat(n)](r,t.callback)}))}},{key:"unbindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var r=t.eventName;r&&e._hls.off(r,t.callback)}))}},{key:"_onFragmentParsingMetadata",value:function(e,t){this.trigger(n["a"].Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:e,data:t})}},{key:"render",value:function(){return this._ready(),y(d(r.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(n["a"].PLAYBACK_READY,this.name))}},{key:"_recover",value:function(e,t,r){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){n["c"].error("hlsjs: failed to recover",{evt:e,data:t}),r.level=n["e"].Levels.FATAL;var i=this.createError(r);this.trigger(n["a"].PLAYBACK_ERROR,i),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(e){e<0&&(n["c"].warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this._startTime,this.el.currentTime=e}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(e){this.trigger(n["a"].PLAYBACK_DVR,e),this.trigger(n["a"].PLAYBACK_STATS_ADD,{dvr:e})}},{key:"_updateSettings",value:function(){this._playbackType===n["d"].VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(n["a"].PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(e,t){var r,i={code:"".concat(t.type,"_").concat(t.details),description:"".concat(this.name," error: type: ").concat(t.type,", details: ").concat(t.details),raw:t};if(t.response&&(i.description+=", response: ".concat(JSON.stringify(t.response))),t.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,t.type){case R.ErrorTypes.NETWORK_ERROR:switch(t.details){case R.ErrorDetails.MANIFEST_LOAD_ERROR:case R.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case R.ErrorDetails.MANIFEST_PARSING_ERROR:case R.ErrorDetails.LEVEL_LOAD_ERROR:case R.ErrorDetails.LEVEL_LOAD_TIMEOUT:n["c"].error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),r=this.createError(i),this.trigger(n["a"].PLAYBACK_ERROR,r),this.stop();break;default:n["c"].warn("hlsjs: trying to recover from network error.",{evt:e,data:t}),i.level=n["e"].Levels.WARN,this._hls.startLoad();break}break;case R.ErrorTypes.MEDIA_ERROR:n["c"].warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),i.level=n["e"].Levels.WARN,this._recover(e,t,i);break;default:n["c"].error("hlsjs: could not recover from error.",{evt:e,data:t}),r=this.createError(i),this.trigger(n["a"].PLAYBACK_ERROR,r),this.stop();break}else n["c"].error("hlsjs: could not recover from error after maximum number of attempts.",{evt:e,data:t}),r=this.createError(i),this.trigger(n["a"].PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(t))return n["c"].error("hlsjs: could not load decrypt key.",{evt:e,data:t}),r=this.createError(i),this.trigger(n["a"].PLAYBACK_ERROR,r),void this.stop();i.level=n["e"].Levels.WARN,n["c"].warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}}},{key:"_keyIsDenied",value:function(e){return e.type===R.ErrorTypes.NETWORK_ERROR&&e.details===R.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},t=this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total;t||(this._lastTimeUpdate=e,this.trigger(n["a"].PLAYBACK_TIMEUPDATE,e,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,y(d(r.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat(b(e),[{start:Math.max(0,this.el.buffered.start(r)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(r)-this._playableRegionStartTime)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var i={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(n["a"].PLAYBACK_PROGRESS,i,e)}}},{key:"play",value:function(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),y(d(r.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(y(d(r.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),y(d(r.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(e,t){this._playbackType=t.details.live?n["d"].LIVE:n["d"].VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===n["d"].LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(n["a"].PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(e,t){this._segmentTargetDuration=t.details.targetduration,this._playlistType=t.details.type||null;var r=!1,i=!1,a=t.details.fragments,o=this._playableRegionStartTime,s=this._playableRegionDuration;if(0!==a.length){if(a[0].rawProgramDateTime&&(this._programDateTime=a[0].rawProgramDateTime),this._playableRegionStartTime!==a[0].start&&(r=!0,this._playableRegionStartTime=a[0].start),r)if(this._localStartTimeCorrelation){var l=this._localStartTimeCorrelation,u=this._now-l.local,c=(l.remote+u)/1e3;c<a[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*a[0].start}:c>o+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(a[0].start,o+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(a[0].start+this._extrapolatedWindowDuration/2)};var d=t.details.totalduration;if(this._playbackType===n["d"].LIVE){var h=t.details.targetduration,f=this.options.playback.hlsjsConfig||{},p=f.liveSyncDurationCount||R.DefaultConfig.liveSyncDurationCount,g=h*p;g<=d?(d-=g,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}d!==this._playableRegionDuration&&(i=!0,this._playableRegionDuration=d);var m=a[0].start+d,v=o+s,y=m!==v;if(y)if(this._localEndTimeCorrelation){var b=this._localEndTimeCorrelation,A=this._now-b.local,_=(b.remote+A)/1e3;_>m?this._localEndTimeCorrelation={local:this._now,remote:1e3*m}:_<m-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(m-this._extrapolatedWindowDuration)}:_>v&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*v})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*m};i&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(e,t){this.trigger(n["a"].Custom.PLAYBACK_FRAGMENT_CHANGED,t)}},{key:"_onFragmentLoaded",value:function(e,t){this.trigger(n["a"].PLAYBACK_FRAGMENT_LOADED,t)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(n["a"].PLAYBACK_SUBTITLE_AVAILABLE);var e=this._playbackType===n["d"].LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(e,t){this.levels.length||this._fillLevels(),this.trigger(n["a"].PLAYBACK_LEVEL_SWITCH_END),this.trigger(n["a"].PLAYBACK_LEVEL_SWITCH,t);var r=this._hls.levels[t.level];r&&(this.highDefinition=r.height>=720||r.bitrate/1e3>=2e3,this.trigger(n["a"].PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(n["a"].PLAYBACK_BITRATE,{height:r.height,width:r.width,bandwidth:r.bitrate,bitrate:r.bitrate,level:t.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===n["d"].LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===n["d"].VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function(){return R}}]),r}(n["b"]);D.canPlay=function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[],n=r.length>1&&"m3u8"===r[1].toLowerCase()||I(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!R.isSupported()||!n)},t["a"]=D}).call(this,r("c8ba"))},"0b25":function(e,t,r){var n=r("a691"),i=r("50c4");e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length or index");return r}},1448:function(e,t,r){var n=r("dfb9"),i=r("b6b7");e.exports=function(e,t){return n(i(e),t)}},"145e":function(e,t,r){"use strict";var n=r("7b0b"),i=r("23cb"),a=r("50c4"),o=Math.min;e.exports=[].copyWithin||function(e,t){var r=n(this),s=a(r.length),l=i(e,s),u=i(t,s),c=arguments.length>2?arguments[2]:void 0,d=o((void 0===c?s:i(c,s))-u,s-l),h=1;u<l&&l<u+d&&(h=-1,u+=d-1,l+=d-1);while(d-- >0)u in r?r[l]=r[u]:delete r[l],l+=h,u+=h;return r}},"170b":function(e,t,r){"use strict";var n=r("ebb5"),i=r("50c4"),a=r("23cb"),o=r("b6b7"),s=n.aTypedArray,l=n.exportTypedArrayMethod;l("subarray",(function(e,t){var r=s(this),n=r.length,l=a(e,n),u=o(r);return new u(r.buffer,r.byteOffset+l*r.BYTES_PER_ELEMENT,i((void 0===t?n:a(t,n))-l))}))},"182d":function(e,t,r){var n=r("f8cd");e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},"219c":function(e,t,r){"use strict";var n=r("ebb5"),i=r("da84"),a=r("d039"),o=r("1c0b"),s=r("50c4"),l=r("addb"),u=r("04d1"),c=r("d998"),d=r("2d00"),h=r("512c"),f=n.aTypedArray,p=n.exportTypedArrayMethod,g=i.Uint16Array,m=g&&g.prototype.sort,v=!!m&&!a((function(){var e=new g(2);e.sort(null),e.sort({})})),y=!!m&&!a((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(h)return h<602;var e,t,r=new g(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(r.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0})),b=function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!==r?-1:t!==t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}};p("sort",(function(e){var t=this;if(void 0!==e&&o(e),y)return m.call(t,e);f(t);var r,n=s(t.length),i=Array(n);for(r=0;r<n;r++)i[r]=t[r];for(i=l(t,b(e)),r=0;r<n;r++)t[r]=i[r];return t}),!y||v)},"25a1":function(e,t,r){"use strict";var n=r("ebb5"),i=r("d58f").right,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2954:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b6b7"),a=r("d039"),o=n.aTypedArray,s=n.exportTypedArrayMethod,l=[].slice,u=a((function(){new Int8Array(1).slice()}));s("slice",(function(e,t){var r=l.call(o(this),e,t),n=i(this),a=0,s=r.length,u=new n(s);while(s>a)u[a]=r[a++];return u}),u)},3280:function(e,t,r){"use strict";var n=r("ebb5"),i=r("e58c"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("lastIndexOf",(function(e){return i.apply(a(this),arguments)}))},"3a7b":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").findIndex,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(e,t,r){"use strict";var n=r("ebb5"),i=r("50c4"),a=r("182d"),o=r("7b0b"),s=r("d039"),l=n.aTypedArray,u=n.exportTypedArrayMethod,c=s((function(){new Int8Array(1).set({})}));u("set",(function(e){l(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=o(e),s=i(n.length),u=0;if(s+t>r)throw RangeError("Wrong length");while(u<s)this[t+u]=n[u++]}),c)},"3fcc":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").map,a=r("b6b7"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(e))(t)}))}))},"42f5":function(e,t,r){(function(t,n){e.exports=n(r("61f9"))})(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="dist/",r(r.s="./src/clappr-dash-shaka-playback.js")}({"./node_modules/shaka-player/dist/shaka-player.compiled.js":
/*!*****************************************************************!*\
  !*** ./node_modules/shaka-player/dist/shaka-player.compiled.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){(function(e){(function(){var r="undefined"!=typeof window?window:e,n={};for(var i in function(e,t){var r,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},a="undefined"!=typeof e&&e===this?this:"undefined"!=typeof t&&null!=t?t:this;function o(){o=function(){},a.Symbol||(a.Symbol=s)}var s=function(){var e=0;return function(t){return"jscomp_symbol_"+(t||"")+e++}}();function l(){o();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&n(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return u(this)}}),l=function(){}}function u(e){var t=0;return c((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function c(e){return l(),e={next:e},e[a.Symbol.iterator]=function(){return this},e}function d(e){l();var t=e[Symbol.iterator];return t?t.call(e):u(e)}function h(e,t){if(t){for(var r=a,i=e.split("."),o=0;o<i.length-1;o++){var s=i[o];s in r||(r[s]={}),r=r[s]}i=i[i.length-1],o=r[i],s=t(o),s!=o&&null!=s&&n(r,i,{configurable:!0,writable:!0,value:s})}}function f(e){function t(t){return e.next(t)}function r(t){return e["throw"](t)}return new Promise((function(n,i){function a(e){e.done?n(e.value):Promise.resolve(e.value).then(t,r).then(a,i)}a(e.next())}))}function p(e){return f(e())}h("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function r(){this.a=null}function n(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},r.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var i=a.setTimeout;r.prototype.c=function(e){i(e,0)},r.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(n){this.g(n)}}}this.a=null},r.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var r=null!=e;break e;case"function":r=!0;break e;default:r=!1}r?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(r){return void this.f(r)}"function"==typeof t?this.C(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new r;return t.prototype.v=function(e){var t=this.c();e.Yb(t.resolve,t.reject)},t.prototype.C=function(e,t){var r=this.c();try{e.call(t,r.resolve,r.reject)}catch(n){r.reject(n)}},t.prototype.then=function(e,r){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(r){a(r)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.Yb(n(e,i),n(r,a)),o},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype.Yb=function(e,t){function r(){switch(n.b){case 1:e(n.g);break;case 2:t(n.g);break;default:throw Error("Unexpected state: "+n.b)}}var n=this;null==this.a?o.b(r):this.a.push(r)},t.resolve=n,t.reject=function(e){return new t((function(t,r){r(e)}))},t.race=function(e){return new t((function(t,r){for(var i=d(e),a=i.next();!a.done;a=i.next())n(a.value).Yb(t,r)}))},t.all=function(e){var r=d(e),i=r.next();return i.done?n([]):new t((function(e,t){function a(t){return function(r){o[t]=r,s--,0==s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,n(i.value).Yb(a(o.length-1),t),i=r.next()}while(!i.done)}))},t})),h("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var g,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)g=Object.setPrototypeOf;else{var v;e:{var y={ne:!0},b={};try{b.__proto__=y,v=b.ne;break e}catch(Af){}v=!1}g=v?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var A=g;function _(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function E(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function T(e,t){e.a={yd:t,Gd:!0},e.j=e.f||e.b}function k(e,t,r){return e.j=r,{value:t}}function S(e){e.j=0}function w(e,t,r){e.f=t,void 0!=r&&(e.b=r)}function R(e,t){e.f=0,e.b=t||0}function C(e,t){e.j=t,e.f=0}function L(e){e.f=0;var t=e.a.yd;return e.a=null,t}function I(e){e.i=[e.a],e.f=0,e.b=0}function O(e,t){var r=e.i.splice(0)[0];(r=e.a=e.a||r)?r.Gd?e.j=e.f||e.b:void 0!=r.A&&e.b<r.A?(e.j=r.A,e.a=null):e.j=e.b:e.j=t}function D(e){this.a=new _,this.b=e}function P(e,t){E(e.a);var r=e.a.c;return r?x(e,"return"in r?r["return"]:function(e){return{value:e,done:!0}},t,e.a["return"]):(e.a["return"](t),N(e))}function x(e,t,r,n){try{var i=t.call(e.a.c,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var a=i.value}catch(o){return e.a.c=null,T(e.a,o),N(e)}return e.a.c=null,n.call(e.a,a),N(e)}function N(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(r){e.a.o=void 0,T(e.a,r)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Gd)throw t.yd;return{value:t["return"],done:!0}}return{value:void 0,done:!0}}function M(e){this.next=function(t){return E(e.a),e.a.c?t=x(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=N(e)),t},this["throw"]=function(t){return E(e.a),e.a.c?t=x(e,e.a.c["throw"],t,e.a.h):(T(e.a,t),t=N(e)),t},this["return"]=function(t){return P(e,t)},l(),this[Symbol.iterator]=function(){return this}}function F(e,t){return M.prototype=e.prototype,new M(new D(t))}function j(e){if(!(e instanceof Array)){e=d(e);for(var t,r=[];!(t=e.next()).done;)r.push(t.value);e=r}return e}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var a=e[i];if(t.call(r,a,i,e))return{Cd:i,ie:a}}return{Cd:-1,ie:void 0}}function G(e,t){l(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n}function K(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""}_.prototype.h=function(e){this.o=e},_.prototype["return"]=function(e){this.a={return:e},this.j=this.b},_.prototype.A=function(e){this.j=e},h("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){o(),l(),e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function r(e){U(e,a)||n(e,a,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return r(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);return 2==n.get(t)&&3==n.get(r)&&(n["delete"](t),n.set(r,4),!n.has(t)&&4==n.get(r))}catch(i){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(r(e),!U(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.a]=t,this},t.prototype.get=function(e){return U(e,a)?e[a][this.a]:void 0},t.prototype.has=function(e){return U(e,a)&&U(e[a],this.a)},t.prototype["delete"]=function(e){return!(!U(e,a)||!U(e[a],this.a))&&delete e[a][this.a]},t})),h("Map",(function(e){function t(){var e={};return e.Ca=e.next=e.head=e}function r(e,t){var r=e.a;return c((function(){if(r){for(;r.head!=e.a;)r=r.Ca;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}))}function n(e,t){var r=t&&typeof t;"object"==r||"function"==r?a.has(t)?r=a.get(t):(r=""+ ++s,a.set(t,r)):r="p_"+t;var n=e.b[r];if(n&&U(e.b,r))for(var i=0;i<n.length;i++){var o=n[i];if(t!==t&&o.key!==o.key||t===o.key)return{id:r,list:n,index:i,X:o}}return{id:r,list:n,index:-1,X:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=d(e);for(var r;!(r=e.next()).done;)r=r.value,this.set(r[0],r[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(d([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=n.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done))}catch(a){return!1}}())return e;o(),l();var a=new WeakMap;i.prototype.set=function(e,t){var r=n(this,e);return r.list||(r.list=this.b[r.id]=[]),r.X?r.X.value=t:(r.X={next:this.a,Ca:this.a.Ca,head:this.a,key:e,value:t},r.list.push(r.X),this.a.Ca.next=r.X,this.a.Ca=r.X,this.size++),this},i.prototype["delete"]=function(e){return e=n(this,e),!(!e.X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ca.next=e.X.next,e.X.next.Ca=e.X.Ca,e.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Ca=t(),this.size=0},i.prototype.has=function(e){return!!n(this,e).X},i.prototype.get=function(e){return(e=n(this,e).X)&&e.value},i.prototype.entries=function(){return r(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return r(this,(function(e){return e.key}))},i.prototype.values=function(){return r(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var r,n=this.entries();!(r=n.next()).done;)r=r.value,e.call(t,r[1],r[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),h("Set",(function(e){function t(e){if(this.a=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(d([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=n.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&n.next().done)}catch(a){return!1}}()?e:(o(),l(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype["delete"]=function(e){return e=this.a["delete"](e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var r=this;this.a.forEach((function(n){return e.call(t,n,n,r)}))},t)})),h("Array.prototype.findIndex",(function(e){return e||function(e,t){return B(this,e,t).Cd}})),h("Array.prototype.keys",(function(e){return e||function(){return G(this,(function(e){return e}))}})),h("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),h("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length,i=t||0;for(0>i&&(i=Math.max(i+n,0));i<n;i++){var a=r[i];if(a===e||Object.is(a,e))return!0}return!1}})),h("String.prototype.includes",(function(e){return e||function(e,t){return-1!==K(this,e,"includes").indexOf(e,t||0)}})),h("Array.from",(function(e){return e||function(e,t,r){l(),t=null!=t?t:function(e){return e};var n=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)n.push(t.call(r,i.value));else{i=e.length;for(var a=0;a<i;a++)n.push(t.call(r,e[a]))}return n}})),h("String.prototype.startsWith",(function(e){return e||function(e,t){for(var r=K(this,e,"startsWith"),n=r.length,i=e.length,a=Math.max(0,Math.min(0|t,r.length)),o=0;o<i&&a<n;)if(r[a++]!=e[o++])return!1;return o>=i}})),h("Array.prototype.find",(function(e){return e||function(e,t){return B(this,e,t).ie}}));var V=this;function Y(e,t){var r,n=e.split("."),i=V;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||void 0===t?i=i[r]?i[r]:i[r]={}:i[r]=t}function H(e,t){function r(){}r.prototype=t.prototype,e.ag=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.og=function(e,r,n){return t.prototype[r].apply(e,Array.prototype.slice.call(arguments,2))}}function W(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function z(e,t,r){var n=Math.pow(e.c,t);r=r*(1-n)+n*e.a,isNaN(r)||(e.a=r,e.b+=t)}function $(e){return e.a/(1-Math.pow(e.c,e.b))}function q(){this.b=new W(2),this.c=new W(5),this.a=0}function X(){}function Z(){}function J(){}V.a=!0,q.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min($(this.b),$(this.c))},e.console&&e.console.log.bind&&(Z=console.warn.bind(console),X=console.error.bind(console));var Q=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ee(e){var t;e instanceof ee?(te(this,e.va),this.$a=e.$a,this.ra=e.ra,re(this,e.xb),this.ia=e.ia,ne(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(Q))?(te(this,t[1]||"",!0),this.$a=ie(t[2]||""),this.ra=ie(t[3]||"",!0),re(this,t[4]),this.ia=ie(t[5]||"",!0),ne(this,t[6]||"",!0),this.Qa=ie(t[7]||"")):this.a=new he(null)}function te(e,t,r){e.va=r?ie(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function re(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.xb=t}else e.xb=null}function ne(e,t,r){t instanceof he?e.a=t:(r||(t=ae(t,ce)),e.a=new he(t))}function ie(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ae(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,oe),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oe(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}r=ee.prototype,r.va="",r.$a="",r.ra="",r.xb=null,r.ia="",r.Qa="",r.toString=function(){var e=[],t=this.va;if(t&&e.push(ae(t,se,!0),":"),t=this.ra){e.push("//");var r=this.$a;r&&e.push(ae(r,se,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.xb,null!=t&&e.push(":",String(t))}return(t=this.ia)&&(this.ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(ae(t,"/"==t.charAt(0)?ue:le,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",ae(t,de)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new ee);var r=!!e.va;r?te(t,e.va):r=!!e.$a,r?t.$a=e.$a:r=!!e.ra,r?t.ra=e.ra:r=null!=e.xb;var n=e.ia;if(r)re(t,e.xb);else if(r=!!e.ia){if("/"!=n.charAt(0))if(this.ra&&!this.ia)n="/"+n;else{var i=t.ia.lastIndexOf("/");-1!=i&&(n=t.ia.substr(0,i+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){i=0==n.lastIndexOf("/",0),n=n.split("/");for(var a=[],o=0;o<n.length;){var s=n[o++];"."==s?i&&o==n.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==n.length&&a.push("")):(a.push(s),i=!0)}n=a.join("/")}}return r?t.ia=n:r=""!==e.a.toString(),r?ne(t,e.a.clone()):r=!!e.Qa,r&&(t.Qa=e.Qa),t},r.clone=function(){return new ee(this)};var se=/[#\/\?@]/g,le=/[#\?:]/g,ue=/[#\?]/g,ce=/[#\?@]/g,de=/#/g;function he(e){this.a=e||null}function fe(e){this.b=e,this.a=null}function pe(e){this.b=e,this.a=null}function ge(e,t){var r=ve();this.i=null==e.maxAttempts?r.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?r.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?r.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?r.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function me(e){return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t["return"](Promise.reject());e.a=1,e.b=e.f}return r=e.a,e.a++,0==r?t["return"]():(n=e.b*(1+(2*Math.random()-1)*e.h),k(t,new Promise((function(e){new pe(e).O(n/1e3)})),2));case 2:e.b*=e.g,S(t)}}))}))}function ve(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function ye(e,t,r,n){for(var i=[],a=3;a<arguments.length;++a)i[a-3]=arguments[a];this.severity=e,this.category=t,this.code=r,this.data=i,this.handled=!1}function be(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return r.resolve=e,r.reject=t,r}function Ae(e,t){this.promise=e,this.Jd=t,this.a=!1}function _e(e){return new Ae(Promise.reject(e),(function(){return Promise.resolve()}))}function Ee(){var e=Promise.reject(new ye(2,7,7001));return e["catch"]((function(){})),new Ae(e,(function(){return Promise.resolve()}))}function Te(e){return new Ae(Promise.resolve(e),(function(){return Promise.resolve()}))}function ke(e){return new Ae(e,(function(){return e["catch"]((function(){}))}))}function Se(e){return new Ae(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function we(e,t,r){try{var n=e(t);return n&&n.promise&&n.abort?(r.resolve(n.promise),function(){return n.abort()}):(r.resolve(n),function(){return Promise.resolve(n).then((function(){}))["catch"]((function(){}))})}catch(i){return r.reject(i),function(){return Promise.resolve()}}}function Re(t,r){for(var n in r=void 0===r?{}:r,r)this[n]=r[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ce(){this.a={}}function Le(){this.Bc=new Ce,this.Vb=this}function Ie(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(r.has(e))return null;var n=e.constructor==Array;if(e.constructor!=Object&&!n)return null;r.add(e);var i,a=n?[]:{};for(i in e)a[i]=t(e[i]);return n&&(a.length=e.length),a}}var r=new Set;return t(e)}function Oe(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}function De(e,t){var r=e.indexOf(t);-1<r&&e.splice(r,1)}function Pe(e,t){var r=0;return e.forEach((function(e){r+=t(e)?1:0})),r}function xe(e,t,r){if(r||(r=Oe),e.length!=t.length)return!1;t=t.slice();var n={};e=d(e);for(var i=e.next();!i.done;n={item:n.item},i=e.next()){if(n.item=i.value,i=t.findIndex(function(e){return function(t){return r(e.item,t)}}(n)),-1==i)return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Ne(){this.a=[]}function Me(e,t){e.a.push(t["finally"]((function(){De(e.a,t)})))}function Fe(e){Le.call(this),this.f=!1,this.g=new Ne,this.a=new Set,this.b=new Set,this.c=e||null}r=he.prototype,r.ha=null,r.$b=null,r.add=function(e,t){if(!this.ha&&(this.ha={},this.$b=0,this.a))for(var r=this.a.split("&"),n=0;n<r.length;n++){var i=r[n].indexOf("="),a=null;if(0<=i){var o=r[n].substring(0,i);a=r[n].substring(i+1)}else o=r[n];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(r=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=r=[]),r.push(t),this.$b++,this},r.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var r=encodeURIComponent(e),n=this.ha[e],i=0;i<n.length;i++){var a=r;""!==n[i]&&(a+="="+encodeURIComponent(n[i])),t.push(a)}return this.a=t.join("&")},r.clone=function(){var e=new he;if(e.a=this.a,this.ha){var t,r={};for(t in this.ha)r[t]=this.ha[t].concat();e.ha=r,e.$b=this.$b}return e},fe.prototype.O=function(t){var r=this;this.stop();var n=!0,i=null;return this.a=function(){e.clearTimeout(i),n=!1},i=e.setTimeout((function(){n&&r.b()}),1e3*t),this},fe.prototype.stop=function(){this.a&&(this.a(),this.a=null)},Y("shaka.util.Timer",pe),pe.prototype.sc=function(){return this.stop(),this.b(),this},pe.prototype.tickNow=pe.prototype.sc,pe.prototype.O=function(e){var t=this;return this.stop(),this.a=new fe((function(){t.b()})).O(e),this},pe.prototype.tickAfter=pe.prototype.O,pe.prototype.La=function(e){var t=this;return this.stop(),this.a=new fe((function(){t.a.O(e),t.b()})).O(e),this},pe.prototype.tickEvery=pe.prototype.La,pe.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},pe.prototype.stop=pe.prototype.stop,Y("shaka.util.Error",ye),ye.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ye.Severity={RECOVERABLE:1,CRITICAL:2},ye.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},ye.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},be.prototype.resolve=function(){},be.prototype.reject=function(){},Y("shaka.util.AbortableOperation",Ae),Ae.failed=_e,Ae.aborted=Ee,Ae.completed=Te,Ae.notAbortable=ke,Ae.prototype.abort=function(){return this.a=!0,this.Jd()},Ae.prototype.abort=Ae.prototype.abort,Ae.all=Se,Ae.prototype["finally"]=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Ae.prototype["finally"]=Ae.prototype["finally"],Ae.prototype.U=function(e,t){function r(){return i.reject(new ye(2,7,7001)),n.abort()}var n=this,i=new be;return this.promise.then((function(t){n.a?i.reject(new ye(2,7,7001)):e?r=we(e,t,i):i.resolve(t)}),(function(e){t?r=we(t,e,i):i.reject(e)})),new Ae(i,(function(){return r()}))},Ae.prototype.chain=Ae.prototype.U,Re.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Re.prototype.stopImmediatePropagation=function(){this.a=!0},Re.prototype.stopPropagation=function(){},r=Ce.prototype,r.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},r.get=function(e){return(e=this.a[e])?e.slice():null},r.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},r.remove=function(e,t){var r=this.a[e];if(r)for(var n=0;n<r.length;++n)r[n]==t&&(r.splice(n,1),--n)},r.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Le.prototype.addEventListener=function(e,t){this.Bc.push(e,t)},Le.prototype.removeEventListener=function(e,t){this.Bc.remove(e,t)},Le.prototype.dispatchEvent=function(e){for(var t=this.Bc.get(e.type)||[],r=0;r<t.length;++r){e.target=this.Vb,e.currentTarget=this.Vb;var n=t[r];try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.a)break}return e.defaultPrevented},Ne.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise["catch"]((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},H(Fe,Le),Y("shaka.net.NetworkingEngine",Fe);var je={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};Fe.RequestType=je,Fe.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Ue={};function Be(e,t,r){r=r||3;var n=Ue[e];(!n||r>=n.priority)&&(Ue[e]={priority:r,zf:t})}function Ge(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Ke(e,t,r){var n=Te(void 0),i={};e=d(e.a);for(var a=e.next();!a.done;i={fd:i.fd},a=e.next())i.fd=a.value,n=n.U(function(e){return function(){return e.fd(t,r)}}(i));return n.U(void 0,(function(e){if(e&&7001==e.code)throw e;throw new ye(2,1,1006,e)}))}function Ve(e,t,r,n,i,a,o){var s=new ee(r.uris[i]),l=s.va,u=!1;l||(l=location.protocol,l=l.slice(0,-1),te(s,l),r.uris[i]=s.toString());var c,d=(l=Ue[l])?l.zf:null;return d?ke(me(n)).U((function(){return e.f?Ee():(c=Date.now(),d(r.uris[i],r,t,(function(r,n,i){e.c&&1==t&&(e.c(r,n),u=!0,o.a=i)})))})).U((function(e){return void 0==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,Ze:u}}),(function(s){if(s&&7001==s.code)throw s;if(e.f)return Ee();if(s&&1==s.severity)return e.dispatchEvent(new Re("retry",{error:s instanceof ye?s:null})),i=(i+1)%r.uris.length,Ve(e,t,r,n,i,s,o);throw s||a})):_e(new ye(2,1,1e3,s))}function Ye(e,t,r){var n=Te(void 0);e=d(e.b);for(var i=e.next();!i.done;i=e.next())n=n.U(i.value.bind(null,t,r.response));return n.U((function(){return r}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof ye&&(t=e.severity),new ye(t,1,1007,e)}))}function He(){this.a=0}function We(e,t,r){Ae.call(this,e,t),this.b=r}Fe.registerScheme=Be,Fe.unregisterScheme=function(e){delete Ue[e]},Fe.prototype.Bf=function(e){this.a.add(e)},Fe.prototype.registerRequestFilter=Fe.prototype.Bf,Fe.prototype.cg=function(e){this.a["delete"](e)},Fe.prototype.unregisterRequestFilter=Fe.prototype.cg,Fe.prototype.we=function(){this.a.clear()},Fe.prototype.clearAllRequestFilters=Fe.prototype.we,Fe.prototype.Cf=function(e){this.b.add(e)},Fe.prototype.registerResponseFilter=Fe.prototype.Cf,Fe.prototype.dg=function(e){this.b["delete"](e)},Fe.prototype.unregisterResponseFilter=Fe.prototype.dg,Fe.prototype.xe=function(){this.b.clear()},Fe.prototype.clearAllResponseFilters=Fe.prototype.xe,Fe.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Fe.prototype.destroy=Fe.prototype.destroy,Fe.prototype.request=function(e,t){var r=this,n=new He;if(this.f){var i=Promise.reject(new ye(2,7,7001));return i["catch"]((function(){})),new We(i,(function(){return Promise.resolve()}),n)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ie(t.retryParameters):ve(),t.uris=Ie(t.uris),i=Ke(this,e,t);var a=i.U((function(){return Ve(r,e,t,new ge(t.retryParameters,!1),0,null,n)})),o=a.U((function(t){return Ye(r,e,t)})),s=Date.now(),l=0;i.promise.then((function(){l=Date.now()-s}),(function(){}));var u=0;return a.promise.then((function(){u=Date.now()}),(function(){})),i=o.U((function(t){var n=Date.now()-u,i=t.response;return i.timeMs+=l,i.timeMs+=n,t.Ze||!r.c||i.fromCache||1!=e||r.c(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e})),i=new We(i.promise,i.Jd,n),Me(this.g,i),i},Fe.prototype.request=Fe.prototype.request,Fe.NumBytesRemainingClass=He;var ze=We;if(ze.prototype=m(Ae.prototype),ze.prototype.constructor=ze,A)A(ze,Ae);else for(var $e in Ae)if("prototype"!=$e)if(Object.defineProperties){var qe=Object.getOwnPropertyDescriptor(Ae,$e);qe&&Object.defineProperty(ze,$e,qe)}else ze[$e]=Ae[$e];function Xe(){}function Ze(){this.a=new Ce}function Je(e,t,r,n){this.target=e,this.type=t,this.listener=r,this.a=Qe(e,n),this.target.addEventListener(t,r,this.a)}function Qe(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var r=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!r.has(e)})),et(e)?t:t.capture||!1}function et(e){var t=tt;if(void 0==t){t=!1;try{var r={},n={get:function(){return t=!0,!1}};Object.defineProperty(r,"passive",n),Object.defineProperty(r,"capture",n),n=function(){},e.addEventListener("test",n,r),e.removeEventListener("test",n,r)}catch(i){t=!1}tt=t}return t||!1}ze.ag=Ae.prototype,Fe.PendingRequest=We,We.all=Se,We.notAbortable=ke,We.completed=Te,We.aborted=Ee,We.failed=_e,Y("shaka.util.IReleasable",Xe),Xe.prototype.release=function(){},Y("shaka.util.EventManager",Ze),Ze.prototype.release=function(){this.Ya(),this.a=null},Ze.prototype.release=Ze.prototype.release,Ze.prototype.w=function(e,t,r,n){this.a&&(e=new Je(e,t,r,n),this.a.push(t,e))},Ze.prototype.listen=Ze.prototype.w,Ze.prototype.da=function(e,t,r,n){function i(n){a.ea(e,t,i),r(n)}var a=this;this.w(e,t,i,n)},Ze.prototype.listenOnce=Ze.prototype.da,Ze.prototype.ea=function(e,t,r){if(this.a){var n=this.a.get(t)||[];n=d(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.target!=e||r!=i.listener&&r||(i.ea(),this.a.remove(t,i))}},Ze.prototype.unlisten=Ze.prototype.ea,Ze.prototype.Ya=function(){if(this.a){var e=this.a.getAll();e=d(e);for(var t=e.next();!t.done;t=e.next())t.value.ea();this.a.a={}}},Ze.prototype.removeAll=Ze.prototype.Ya,Je.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Je.prototype.unlisten=Je.prototype.ea;var tt=void 0;function rt(e){if(e=new Uint8Array(e),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");return e=bt(e.subarray(4),!0),new ee(e).ra}function nt(e,t,r){function n(e){new DataView(a.buffer).setUint32(o,e.byteLength,!0),o+=4,i(e)}function i(e){a.set(e,o),o+=e.byteLength}if(!r||!r.byteLength)throw new ye(2,6,6015);t="string"==typeof t?new Uint8Array(Et(t,!0)):new Uint8Array(t);var a=new Uint8Array(8+e.byteLength+t.byteLength+r.byteLength),o=0;return i(new Uint8Array(e)),n(t),n(new Uint8Array(r)),a}function it(e,t){for(var r=[],n=d(e),i=n.next();!i.done;i=n.next())r.push(t(i.value));return r}function at(e,t){for(var r=d(e),n=r.next();!n.done;n=r.next())if(!t(n.value))return!1;return!0}function ot(e){var t=new Map;return Object.keys(e).forEach((function(r){t.set(r,e[r])})),t}function st(e){var t={};return e.forEach((function(e,r){t[r]=e})),t}function lt(e,t){var r=e;return t&&(r+='; codecs="'+t+'"'),r}function ut(e){var t=[e.mimeType];return dt.forEach((function(r,n){var i=e[n];i&&t.push(r+'="'+i+'"')})),t.join(";")}function ct(e){e=e.split(".");var t=e[0];return e.pop(),[t,e.join(".")]}Y("shaka.util.FairPlayUtils.defaultGetContentId",rt),Y("shaka.util.FairPlayUtils.initDataTransform",nt);var dt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function ht(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function ft(e){return""!=gt().canPlayType(e)}function pt(e){return(navigator.userAgent||"").includes(e)}function gt(){return vt||(mt||(mt=new pe((function(){vt=null}))),(vt=document.querySelector("video")||document.querySelector("audio"))||(vt=document.createElement("video")),mt.O(1),vt)}var mt=null,vt=null;function yt(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=Tt(e),e=escape(e);try{return decodeURIComponent(e)}catch(t){throw new ye(2,2,2004)}}function bt(e,t,r){if(!e)return"";if(!r&&0!=e.byteLength%2)throw new ye(2,2,2004);if(e instanceof ArrayBuffer)var n=e;else r=new Uint8Array(e.byteLength),r.set(new Uint8Array(e)),n=r.buffer;e=Math.floor(e.byteLength/2),r=new Uint16Array(e),n=new DataView(n);for(var i=0;i<e;i++)r[i]=n.getUint16(2*i,t);return Tt(r)}function At(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return yt(t);if(254==t[0]&&255==t[1])return bt(t.subarray(2),!1);if(255==t[0]&&254==t[1])return bt(t.subarray(2),!0);var r=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return bt(e,!1);if(0==t[1]&&0==t[3])return bt(e,!0);if(r(0)&&r(1)&&r(2)&&r(3))return yt(e);throw new ye(2,2,2003)}function _t(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t.buffer}function Et(e,t){for(var r=new Uint8Array(2*e.length),n=new DataView(r.buffer),i=0;i<e.length;++i)n.setUint16(2*i,e.charCodeAt(i),t);return r.buffer}function Tt(e){if(!kt)for(var t=function(e){try{var t=new Uint8Array(e);return j(t),!0}catch(r){return!1}},r={size:65536};0<r.size;r={size:r.size},r.size/=2)if(t(r.size)){kt=function(e){return function(t){for(var r="",n=0;n<t.length;n+=e.size)r+=String.fromCharCode.apply(String,j(t.subarray(n,n+e.size)));return r}}(r);break}return kt(e)}Y("shaka.util.StringUtils.fromUTF8",yt),Y("shaka.util.StringUtils.fromUTF16",bt),Y("shaka.util.StringUtils.fromBytesAutoDetect",At),Y("shaka.util.StringUtils.toUTF8",_t),Y("shaka.util.StringUtils.toUTF16",Et);var kt=null;function St(t,r){var n=Tt(t);return r=void 0==r||r,n=e.btoa(n).replace(/\+/g,"-").replace(/\//g,"_"),r?n:n.replace(/=*$/,"")}function wt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}function Rt(t){for(var r=new Uint8Array(t.length/2),n=0;n<t.length;n+=2)r[n/2]=e.parseInt(t.substr(n,2),16);return r}function Ct(e){for(var t="",r=0;r<e.length;++r){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function Lt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!=t[r])return!1;return!0}function It(e){for(var t=[],r=0;r<arguments.length;++r)t[r]=arguments[r];for(var n=r=0;n<t.length;++n)r+=t[n].length;r=new Uint8Array(r);for(var i=n=0;i<t.length;++i)r.set(t[i],n),n+=t[i].length;return r}function Ot(e){var t=this;this.C=e,this.v=new Set,this.m=this.h=null,this.P=!1,this.a=null,this.i=new Ze,this.b=new Map,this.s=[],this.l=new be,this.c=null,this.g=function(r){t.l.reject(r),e.onError(r)},this.na=new Map,this.T=new Map,this.M=new pe((function(){return Jt(t)})),this.f=!1,this.$=new be,this.D=!1,this.G=[],this.ma=!1,this.W=new pe((function(){rr(t)})).La(1),this.l["catch"]((function(){}))}function Dt(e){return p((function t(){var r;return F(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.l.reject(),e.W.stop(),e.W=null,e.M.stop(),e.M=null,r=Array.from(e.b.keys()),e.b.clear(),k(t,Promise.all(r.map((function(e){return Promise.resolve().then((function(){return p((function t(){return F(t,(function(t){switch(t.j){case 1:return w(t,2),k(t,sr(e),4);case 4:C(t,0);break;case 2:L(t),S(t)}}))}))}))}))),2);case 2:if(!e.m){t.A(3);break}return w(t,4),k(t,e.m.setMediaKeys(null),6);case 6:C(t,5);break;case 4:L(t);case 5:e.m=null;case 3:e.a=null,e.v.clear(),e.h=null,e.s=[],e.c=null,e.g=null,e.C=null,S(t)}}))}))}function Pt(e,t,r){return e.s=[],e.D=r,Mt(e,t)}function xt(e,t,r){return e.s=r,e.D=0<r.length,Mt(e,t)}function Nt(e,t,r,n,i,a){var o=new Map;return o.set(t,{audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:n,initData:null,keyIds:null}]}),Yt(e,o)}function Mt(e,t){var r=t.some((function(e){return 0<e.drmInfos.length}));if(!r){var n=ot(e.c.servers);ir(t,n)}var i=Ht(e);if(i){var a=d(t);for(n=a.next();!n.done;n=a.next())n.value.drmInfos=[i]}for(i=d(t),n=i.next();!n.done;n=i.next())for(n=d(n.value.drmInfos),a=n.next();!a.done;a=n.next())or(a.value,ot(e.c.servers),ot(e.c.advanced||{}));return n=Vt(e,t),n.size?(n=Yt(e,n),r?n:n["catch"]((function(){}))):(e.P=!0,Promise.resolve())}function Ft(e){return p((function t(){var r;return F(t,(function(t){switch(t.j){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return w(t,3),k(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:C(t,0);break;case 3:return r=L(t),t["return"](Promise.reject(new ye(2,6,6004,r.message)))}}))}))}function jt(e,t){return p((function r(){var n,i,a;return F(r,(function(r){switch(r.j){case 1:return k(r,Wt(e,t),2);case 2:return n=r.o,n?(i=[],(a=e.b.get(n))&&(a.xa=new be,i.push(a.xa)),i.push(n.remove()),k(r,Promise.all(i),0)):r["return"]()}}))}))}function Ut(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return zt(e,t.initDataType,t.initData)})),e.s.forEach((function(t){return Wt(e,t)})),t.length||e.s.length||e.l.resolve(),e.l}function Bt(e,t,r){var n=e.b.values();n=d(n);for(var i=n.next();!i.done;i=n.next())if(Lt(r,i.value.initData))return;zt(e,t,r)}function Gt(e,t){return!!pt("Edge/")||e.v.has(t)}function Kt(e){return e=e.b.keys(),e=it(e,(function(e){return e.sessionId})),Array.from(e)}function Vt(e,t){for(var r=new Set,n=d(t),i=n.next();!i.done;i=n.next()){var a=d(i.value.drmInfos);for(i=a.next();!i.done;i=a.next())r.add(i.value)}for(n=d(r),i=n.next();!i.done;i=n.next())or(i.value,ot(e.c.servers),ot(e.c.advanced||{}));a=e.D?"required":"optional";var o=e.D?["persistent-license"]:["temporary"];for(n=new Map,r=d(r),i=r.next();!i.done;i=r.next())i=i.value,n.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:i.keySystem,drmInfos:[]});for(r=d(t),i=r.next();!i.done;i=r.next()){i=i.value,a=i.audio,o=i.video;var s=a?lt(a.mimeType,a.codecs):"",l=o?lt(o.mimeType,o.codecs):"",u=d(i.drmInfos);for(i=u.next();!i.done;i=u.next()){i=i.value;var c=n.get(i.keySystem);c.drmInfos.push(i),i.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),i.persistentStateRequired&&(c.persistentState="required"),a&&c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),o&&c.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:l})}}return n}function Yt(e,t){if(1==t.size&&t.has(""))return Promise.reject(new ye(2,6,6e3));for(var r=d(t.values()),n=r.next();!n.done;n=r.next())n=n.value,0==n.audioCapabilities.length&&delete n.audioCapabilities,0==n.videoCapabilities.length&&delete n.videoCapabilities;var i=r=new be;return[!0,!1].forEach(function(e){var r=this;t.forEach((function(t,n){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(i=i["catch"](function(){if(!this.f)return navigator.requestMediaKeySystemAccess(n,[t])}.bind(r)))}))}.bind(e)),i=i["catch"]((function(){return Promise.reject(new ye(2,6,6001))})),i=i.then(function(e){if(this.f)return Promise.reject();this.v.clear();var r=e.getConfiguration(),n=r.videoCapabilities||[],i=d(r.audioCapabilities||[]);for(r=i.next();!r.done;r=i.next())this.v.add(r.value.contentType);for(n=d(n),r=n.next();!r.done;r=n.next())this.v.add(r.value.contentType);n=e.keySystem,r=t.get(e.keySystem),i=[];var a=[],o=[],s=[];return ar(r.drmInfos,i,a,o,s),this.a={keySystem:n,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==r.distinctiveIdentifier,persistentStateRequired:"required"==r.persistentState,audioRobustness:r.audioCapabilities?r.audioCapabilities[0].robustness:"",videoRobustness:r.videoCapabilities?r.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new ye(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.f)return Promise.reject();this.h=e,this.P=!0}.bind(e))["catch"](function(e){if(!this.f)return this.a=null,this.v.clear(),e instanceof ye?Promise.reject(e):Promise.reject(new ye(2,6,6002,e.message))}.bind(e)),r.reject(),i}function Ht(t){if(t=ot(t.c.clearKeys),0==t.size)return null;var r=[],n=[];t.forEach((function(e,t){var i=Rt(t),a=Rt(e);i={kty:"oct",kid:St(i,!1),k:St(a,!1)},r.push(i),n.push(i.kid)})),t=JSON.stringify({keys:r});var i=JSON.stringify({kids:n});return i=[{initData:new Uint8Array(_t(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}function Wt(e,t){try{var r=e.h.createSession("persistent-license")}catch(a){var n=new ye(2,6,6005,a.message);return e.g(n),Promise.reject(n)}e.i.w(r,"message",e.Rd.bind(e)),e.i.w(r,"keystatuseschange",e.Pd.bind(e));var i={initData:null,loaded:!1,Yc:1/0,xa:null};return e.b.set(r,i),r.load(t).then(function(e){return this.f?Promise.reject():e?(i.loaded=!0,nr(this)&&this.l.resolve(),r):(this.b["delete"](r),void this.g(new ye(2,6,6013)))}.bind(e),function(e){this.f||(this.b["delete"](r),this.g(new ye(2,6,6005,e.message)))}.bind(e))}function zt(e,t,r){try{var n=e.D?e.h.createSession("persistent-license"):e.h.createSession()}catch(o){return void e.g(new ye(2,6,6005,o.message))}e.i.w(n,"message",e.Rd.bind(e)),e.i.w(n,"keystatuseschange",e.Pd.bind(e)),e.b.set(n,{initData:r,loaded:!1,Yc:1/0,xa:null});try{if(e.c.initDataTransform)r=e.c.initDataTransform(r);else if(e.keySystem().startsWith("com.apple.fps")){var i=e.a.serverCertificate,a=rt(r);r=nt(r,a,i)}}catch(o){return t=o,o instanceof ye||(t=new ye(2,6,6016,o)),void e.g(t)}n.generateRequest(t,r.buffer)["catch"]((function(t){if(!e.f){if(e.b["delete"](n),t.errorCode&&t.errorCode.systemCode){var r=t.errorCode.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.g(new ye(2,6,6006,t.message,t,r))}}))}function $t(e,t){var r=t.target,n=e.b.get(r),i=e.a.licenseServerUri,a=e.c.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),i=Ge([i],e.c.retryParameters),i.body=t.message,i.method="POST",i.licenseRequestType=t.messageType,i.sessionId=r.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||qt(i),e.a.keySystem.startsWith("com.apple.fps")&&e.c.fairPlayTransform&&Xt(i),e.C.rb.request(2,i).promise.then(function(e){return this.f?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.c.fairPlayTransform&&Zt(e),r.update(e.data).then(function(){var e=this;this.C.onEvent(new Re("drmsessionupdate")),n&&(n.xa&&n.xa.resolve(),new pe((function(){n.loaded=!0,nr(e)&&e.l.resolve()})).O(ur))}.bind(this)))}.bind(e),function(e){this.f||(e=new ye(2,6,6007,e),this.g(e),n&&n.xa&&n.xa.reject(e))}.bind(e))["catch"](function(e){this.f||(e=new ye(2,6,6008,e.message),this.g(e),n&&n.xa&&n.xa.reject(e))}.bind(e))}function qt(e){var t=bt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){t=(new DOMParser).parseFromString(t,"application/xml");for(var r=t.getElementsByTagName("HttpHeader"),n=0;n<r.length;++n)e.headers[r[n].querySelector("name").textContent]=r[n].querySelector("value").textContent;e.body=wt(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}function Xt(e){var t=new Uint8Array(e.body);t="spc="+St(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=_t(t)}function Zt(e){try{var t=yt(e.data)}catch(r){return}t=t.trim(),"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(r){}e.data=wt(t).buffer}function Jt(e){var t=e.na,r=e.T;r.clear(),t.forEach((function(e,t){return r.set(t,e)})),t=Array.from(r.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.g(new ye(2,6,6014)),e.C.kc(st(r))}function Qt(){function e(e){return p((function t(){var i,a,o;return F(t,(function(t){switch(t.j){case 1:return w(t,2),k(t,navigator.requestMediaKeySystemAccess(e,r),4);case 4:return i=t.o,o=!!(a=i.getConfiguration().sessionTypes)&&a.includes("persistent-license"),pt("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),k(t,i.createMediaKeys(),5);case 5:C(t,0);break;case 2:L(t),n.set(e,null),S(t)}}))}))}var t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],r=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],n=new Map;return t="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(t){return e(t)})),Promise.all(t).then((function(){return st(n)}))}function er(e,t){var r=t.audio,n=t.video;if(r&&r.encrypted&&!Gt(e,lt(r.mimeType,r.codecs))||n&&n.encrypted&&!Gt(e,lt(n.mimeType,n.codecs)))return!1;var i=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==i}))}function tr(e,t){if(!e.length)return t;if(!t.length)return e;for(var r=[],n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n].keySystem==t[i].keySystem){var a=e[n];i=t[i];var o=[];o=o.concat(a.initData||[]),o=o.concat(i.initData||[]);var s=[];s=s.concat(a.keyIds),s=s.concat(i.keyIds),r.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||i.persistentStateRequired,videoRobustness:a.videoRobustness||i.videoRobustness,audioRobustness:a.audioRobustness||i.audioRobustness,serverCertificate:a.serverCertificate||i.serverCertificate,initData:o,keyIds:s});break}return r}function rr(e){e.b.forEach((function(t,r){var n=t.Yc,i=r.expiration;isNaN(i)&&(i=1/0),i!=n&&(e.C.onExpirationUpdated(r.sessionId,i),t.Yc=i)}))}function nr(e){return e=e.b.values(),at(e,(function(e){return e.loaded}))}function ir(e,t){var r=[];t.forEach((function(e,t){r.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var n=d(e),i=n.next();!i.done;i=n.next())i.value.drmInfos=r}function ar(e,t,r,n,i){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(r.some((function(t){return Lt(t,e.serverCertificate)}))||r.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){n.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&Lt(t.initData,e.initData)}))||n.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)i.includes(e.keyIds[a])||i.push(e.keyIds[a])}))}function or(t,r,n){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(r.size&&(r=r.get(t.keySystem)||"",t.licenseServerUri=r),t.keyIds||(t.keyIds=[]),(n=n.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}function sr(e){return p((function t(){var r;return F(t,(function(t){switch(t.j){case 1:return r=new Promise((function(e){new pe(e).O(lr)})),k(t,Promise.race([e.close().then((function(){return!0})),r.then((function(){return!1}))]),2);case 2:S(t)}}))}))}Y("shaka.util.Uint8ArrayUtils.toBase64",St),Y("shaka.util.Uint8ArrayUtils.fromBase64",wt),Y("shaka.util.Uint8ArrayUtils.fromHex",Rt),Y("shaka.util.Uint8ArrayUtils.toHex",Ct),Y("shaka.util.Uint8ArrayUtils.equal",Lt),Y("shaka.util.Uint8ArrayUtils.concat",It),r=Ot.prototype,r.destroy=function(){var e=this;return p((function t(){return F(t,(function(t){switch(t.j){case 1:return e.f?k(t,e.$,0):(e.f=!0,k(t,Dt(e),4));case 4:e.$.resolve(),t.A(0)}}))}))},r.configure=function(e){this.c=e},r.Cb=function(e){var t=this;if(!this.h)return this.i.da(e,"encrypted",(function(){t.g(new ye(2,6,6010))})),Promise.resolve();this.m=e,this.i.da(this.m,"play",(function(){for(var e=0;e<t.G.length;e++)$t(t,t.G[e]);t.ma=!0,t.G=[]})),e=this.m.setMediaKeys(this.h),e=e["catch"]((function(e){return Promise.reject(new ye(2,6,6003,e.message))}));var r=Ft(this);return Promise.all([e,r]).then((function(){if(t.f)return Promise.reject();Ut(t),t.a.initData.length||t.s.length||t.i.w(t.m,"encrypted",(function(e){return Bt(t,e.initDataType,new Uint8Array(e.initData))}))}))["catch"]((function(e){if(!t.f)return Promise.reject(e)}))},r.keySystem=function(){return this.a?this.a.keySystem:""},r.dc=function(){var e=1/0,t=this.b.keys();t=d(t);for(var r=t.next();!r.done;r=t.next())r=r.value,isNaN(r.expiration)||(e=Math.min(e,r.expiration));return e},r.Rd=function(e){this.c.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ma?this.G.push(e):$t(this,e)},r.Pd=function(e){e=e.target;var t=this.b.get(e),r=!1;e.keyStatuses.forEach(function(e,n){if("string"==typeof n){var i=n;n=e,e=i}if("com.microsoft.playready"==this.a.keySystem&&16==n.byteLength&&!pt("Tizen")){i=new DataView(n);var a=i.getUint32(0,!0),o=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,o,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(r=!0),i=Ct(new Uint8Array(n)),this.na.set(i,e)}.bind(this));var n=e.expiration-Date.now();(0>n||r&&1e3>n)&&t&&!t.xa&&(this.b["delete"](e),e.close()["catch"]((function(){}))),nr(this)&&(this.l.resolve(),this.M.O(cr))};var lr=1,ur=5,cr=.5;function dr(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function hr(){}function fr(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function pr(e,t,r){return r=void 0===r?0:r,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+r>=e.start(0)}function gr(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var r=0,n=e.length-1;0<=n&&e.end(n)>t;--n)r+=e.end(n)-Math.max(e.start(n),t);return r}function mr(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}dr.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},dr.prototype.b=function(e,t){var r=new Uint8Array(e);(r=this.a.parse(r,this.g,this.f))&&r.captions&&t(r.captions),this.a.clearParsedCaptions()},dr.prototype.c=function(){this.a.resetCaptionStream()},hr.prototype.init=function(){},hr.prototype.b=function(){},hr.prototype.c=function(){};var vr={ye:function(e,t){return e.reduce(function(e,t,r){return t["catch"](e.bind(null,r))}.bind(null,t),Promise.reject())},yc:function(e,t){return e.concat(t)},ic:function(){},Ga:function(e){return null!=e}};function yr(e,t){if(0==t.length)return e;var r=t.map((function(e){return new ee(e)}));return e.map((function(e){return new ee(e)})).map((function(e){return r.map(e.resolve.bind(e))})).reduce(vr.yc,[]).map((function(e){return e.toString()}))}function br(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Ar={Na:"video",Ab:"audio",qa:"text",kg:"application"},_r=1/15;function Er(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Tr(t,r){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(r?MediaSource.isTypeSupported(kr(r,t)):MediaSource.isTypeSupported(kr("audio",t))||MediaSource.isTypeSupported(kr("video",t)))}function kr(e,t){var r=t.replace(/mp2t/i,"mp4");"audio"==e&&(r=r.replace("video","audio"));var n=/avc1\.(66|77|100)\.(\d+)/.exec(r);if(n){var i="avc1.",a=n[1],o=Number(n[2]);i=("66"==a?i+"4200":"77"==a?i+"4d00":i+"6400")+(o>>4).toString(16),i+=(15&o).toString(16),r=r.replace(n[0],i)}return r}function Sr(e,t){e.f=!0,e.b=new be,e.g=[],e.c=[];var r=new Uint8Array(t);return e.a.push(r),e.a.flush(),e.f&&e.b.reject(new ye(2,3,3018)),e.b}function wr(e,t,r){this.startTime=e,this.direction=Dr,this.endTime=t,this.payload=r,this.region=new Br,this.position=null,this.positionAlign=Rr,this.size=100,this.textAlign=Cr,this.writingMode=Pr,this.lineInterpretation=xr,this.line=null,this.lineHeight="",this.lineAlign=Nr,this.displayAlign=Ir,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Fr,this.fontStyle=jr,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}Er.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Er.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Er.prototype.h=function(){var e={data:It.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},Y("shaka.text.Cue",wr);var Rr="auto";wr.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Rr};var Cr="center",Lr={LEFT:"left",RIGHT:"right",CENTER:Cr,START:"start",END:"end"};wr.textAlign=Lr;var Ir="after",Or={BEFORE:"before",CENTER:"center",AFTER:Ir};wr.displayAlign=Or;var Dr="ltr";wr.direction={HORIZONTAL_LEFT_TO_RIGHT:Dr,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Pr="horizontal-tb";wr.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Pr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var xr=0;wr.lineInterpretation={LINE_NUMBER:xr,PERCENTAGE:1};var Nr="start",Mr={CENTER:"center",START:Nr,END:"end"};wr.lineAlign=Mr;var Fr=400;wr.fontWeight={NORMAL:Fr,BOLD:700};var jr="normal",Ur={NORMAL:jr,ITALIC:"italic",OBLIQUE:"oblique"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Gr,this.scroll=Kr}wr.fontStyle=Ur,wr.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Y("shaka.text.CueRegion",Br);var Gr=1;Br.units={PX:0,PERCENTAGE:Gr,LINES:2};var Kr="";function Vr(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}Br.scrollMode={NONE:Kr,UP:"up"};var Yr={};function Hr(t){return!!(Yr[t]||e.muxjs&&"application/cea-608"==t)}function Wr(e,t){"application/cea-608"!=t&&(e.g=new Yr[t])}function zr(e,t,r,n){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==r||null==n)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:r,segmentEnd:n};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(r,this.f)),this.b=Math.min(n,this.h)}}.bind(e))}function $r(e,t,r,n,i){var a=r+" "+n,o=new Map;t=d(t);for(var s=t.next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=i,l.endTime+=i,l.startTime>=e.f&&l.startTime<e.h&&(l=new wr(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.l&&e.c.append([l]))}for(i=d(o.keys()),a=i.next();!a.done;a=i.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),t=d(o.get(a).keys()),s=t.next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.i.get(a).set(s,l);e.a=null==e.a?Math.max(r,e.f):Math.min(e.a,Math.max(r,e.f)),e.b=Math.max(e.b,Math.min(n,e.h))}function qr(e,t,r){this.f=e,this.g=r,this.b={},this.a=null,this.c={},this.i=new Ze,this.v=!1,this.l={},this.m=t,e=this.s=new be,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=Xr(t),this.h=t}Y("shaka.text.TextEngine.registerParser",(function(e,t){Yr[e]=t})),Y("shaka.text.TextEngine.unregisterParser",(function(e){delete Yr[e]})),Vr.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},Vr.prototype.Mc=function(e){var t={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.g.parseMedia(new Uint8Array(e),t)[0].startTime}catch(r){throw new ye(2,2,2009,r)}},Vr.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},Vr.prototype.qe=function(e){this.c.append(e)},Vr.prototype.appendCues=Vr.prototype.qe,Vr.prototype.rc=function(e,t){this.l=e;var r=this.i.get(e);if(r)for(var n=d(r.keys()),i=n.next();!i.done;i=n.next())(i=r.get(i.value))&&(i=i.filter((function(e){return e.endTime<=t})),this.c.append(i))},Vr.prototype.setSelectedClosedCaptionId=Vr.prototype.rc;var Xr=e.URL.createObjectURL;function Zr(e){var t=lt(e.mimeType,e.codecs),r=ut(e);return Hr(t)||MediaSource.isTypeSupported(r)||Tr(t,e.type)}function Jr(e,t){e.a||(e.a=new Vr(e.g)),Wr(e.a,t)}function Qr(e){return!e.h||"ended"==e.h.readyState}function en(e,t){if("text"==t)var r=e.a.a;else r=nn(e,t),r=!r||1==r.length&&1e-6>r.end(0)-r.start(0)?null:1==r.length&&0>r.start(0)?0:r.length?r.start(0):null;return r}function tn(e,t){return"text"==t?e.a.b:fr(nn(e,t))}function rn(e,t,r){return"text"==t?(e=e.a,null==e.b||e.b<r?0:e.b-Math.max(r,e.a)):(e=nn(e,t),gr(e,r))}function nn(e,t){try{return e.b[t].buffered}catch(r){return null}}function an(t,r,n,i,a,o){return"text"==r?zr(t.a,n,i,a):t.l[r]?Sr(t.l[r],n).then(function(e){return this.a||Jr(this,"text/vtt"),e.captions&&$r(this.a,e.captions,i,a,this.b.video.timestampOffset),ln(this,r,this.ee.bind(this,r,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.a||Jr(t,"text/vtt"),null==i&&null==a?t.m.init(n):t.m.b(n,(function(e){e.length&&$r(t.a,e,i,a,t.b.video.timestampOffset)}))),ln(t,r,t.ee.bind(t,r,n)))}function on(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():ln(e,t,e.fe.bind(e,t,0,e.h.duration))}function sn(e,t,r,n,i){return"text"==t?(e.a.m=r,e=e.a,e.f=n,e.h=i,Promise.resolve()):Promise.all([ln(e,t,e.oe.bind(e,t)),ln(e,t,e.Sf.bind(e,t,r)),ln(e,t,e.Pf.bind(e,t,n,i))])}function ln(e,t,r){if(e.v)return Promise.reject();if(r={start:r,p:new be},e.c[t].push(r),1==e.c[t].length)try{r.start()}catch(n){"QuotaExceededError"==n.name?r.p.reject(new ye(2,3,3017,t)):r.p.reject(new ye(2,3,3015,n)),cn(e,t)}return r.p}function un(e,t){if(e.v)return Promise.reject();var r,n=[];for(r in e.b){var i=new be,a={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[r].push(a),n.push(i),1==e.c[r].length&&a.start()}return Promise.all(n).then(function(){try{t()}catch(n){var e=Promise.reject(new ye(2,3,3015,n))}for(var r in this.b)cn(this,r);return e}.bind(e),function(e){throw e}.bind(e))}function cn(e,t){e.c[t].shift();var r=e.c[t][0];if(r)try{r.start()}catch(n){r.p.reject(new ye(2,3,3015,n)),cn(e,t)}}function dn(e,t){return e=fn(e),t=fn(t),e.split("-")[0]==t.split("-")[0]}function hn(e,t){e=fn(e),t=fn(t);var r=e.split("-"),n=t.split("-");return r[0]==n[0]&&1==r.length&&2==n.length}function fn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=mn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function pn(e){return e.language?fn(e.language):e.audio&&e.audio.language?fn(e.audio.language):e.video&&e.video.language?fn(e.video.language):"und"}function gn(e,t){for(var r=fn(e),n=new Set,i=d(t),a=i.next();!a.done;a=i.next())n.add(fn(a.value));for(i=d(n),a=i.next();!a.done;a=i.next())if(a=a.value,a==r)return a;for(i=d(n),a=i.next();!a.done;a=i.next())if(a=a.value,hn(a,r))return a;for(i=d(n),a=i.next();!a.done;a=i.next()){var o=a=a.value,s=r;if(o=fn(o),s=fn(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(n=d(n),a=n.next();!a.done;a=n.next())if(i=a.value,hn(r,i))return i;return null}r=qr.prototype,r.destroy=function(){var e=this;this.v=!0;var t,r=[];for(t in this.c){var n=this.c[t],i=n[0];for(this.c[t]=n.slice(0,1),i&&r.push(i.p["catch"](vr.ic)),i=1;i<n.length;++i)n[i].p.reject()}for(var a in this.a&&r.push(this.a.destroy()),this.g&&r.push(this.g.destroy()),this.l)r.push(this.l[a].destroy());return Promise.all(r).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}}))},r.init=function(e,t){var r=this;return p((function n(){var i;return F(n,(function(n){switch(n.j){case 1:return i=Ar,k(n,r.s,2);case 2:e.forEach((function(e,n){var a=lt(e.mimeType,e.codecs);n==i.qa?Jr(r,a):(!t&&MediaSource.isTypeSupported(a)||!Tr(a,n)||(r.l[n]=new Er,a=kr(n,a)),a=r.h.addSourceBuffer(a),r.i.w(a,"error",r.Tf.bind(r,n)),r.i.w(a,"updateend",r.ub.bind(r,n)),r.b[n]=a,r.c[n]=[])})),S(n)}}))}))},r.Jc=function(e){if(e.total=mr(this.f.buffered),e.audio=mr(nn(this,"audio")),e.video=mr(nn(this,"video")),e.text=[],this.a){var t=this.a.a,r=this.a.b;null!=t&&null!=r&&e.text.push({start:t,end:r})}},r.rc=function(e){var t=tn(this,"video")||0;this.a.rc(e,t)},r.remove=function(e,t,r){return"text"==e?this.a.remove(t,r):ln(this,e,this.fe.bind(this,e,t,r))},r.flush=function(e){return"text"==e?Promise.resolve():ln(this,e,this.Ce.bind(this,e))},r.endOfStream=function(e){return un(this,function(){Qr(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},r.wa=function(e){return un(this,function(){this.h.duration=e}.bind(this))},r.Y=function(){return this.h.duration},r.ee=function(e,t){this.b[e].appendBuffer(t)},r.fe=function(e,t,r){r<=t?this.ub(e):this.b[e].remove(t,r)},r.oe=function(e){var t=this.b[e].appendWindowStart,r=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=r,this.ub(e)},r.Ce=function(e){this.f.currentTime-=.001,this.ub(e)},r.Sf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.ub(e)},r.Pf=function(e,t,r){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=r,this.b[e].appendWindowStart=t,this.ub(e)},r.Tf=function(e){this.c[e][0].p.reject(new ye(2,3,3014,this.f.error?this.f.error.code:0))},r.ub=function(e){var t=this.c[e][0];t&&(t.p.resolve(),cn(this,e))};var mn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function vn(e,t,r){function n(e,t,r){return e>=t&&e<=r}var i=e.video;return!(i&&i.width&&i.height&&!(n(i.width,t.minWidth,Math.min(t.maxWidth,r.width))&&n(i.height,t.minHeight,Math.min(t.maxHeight,r.height))&&n(i.width*i.height,t.minPixels,t.maxPixels))||!n(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function yn(e,t,r){var n=!1;return e.forEach((function(e){var i=e.allowedByApplication;e.allowedByApplication=vn(e,t,r),i!=e.allowedByApplication&&(n=!0)})),n}function bn(e,t,r,n){n.variants=n.variants.filter((function(n){if(e&&e.P&&!er(e,n))return!1;var i=n.audio;return n=n.video,!(i&&!Zr(i)||n&&!Zr(n)||i&&t&&!An(i,t)||n&&r&&!An(n,r))})),n.textStreams=n.textStreams.filter((function(e){return Hr(lt(e.mimeType,e.codecs))}))}function An(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function _n(e){var t=e.audio,r=e.video,n=t?t.codecs:null,i=r?r.codecs:null,a=[];i&&a.push(i),n&&a.push(n);var o=[];r&&o.push(r.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),r&&s.push(r.kind),s=s[0]||null;var l=new Set;return t&&t.roles.forEach((function(e){return l.add(e)})),r&&r.roles.forEach((function(e){return l.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:n,videoCodec:i,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},r&&(e.videoId=r.id,e.originalVideoId=r.originalId,e.width=r.width||null,e.height=r.height||null,e.frameRate=r.frameRate||null,e.videoBandwidth=r.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function En(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Tn(e){return e.__shaka_id||(e.__shaka_id=kn++),e.__shaka_id}var kn=0;function Sn(e){return{id:Tn(e),active:!1,type:"",bandwidth:0,language:fn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function wn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Rn(e){return e.filter((function(e){return wn(e)}))}function Cn(e,t){var r=e.filter((function(e){return e.audio&&e.audio.channelsCount})),n=new Map;r=d(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var a=i.audio.channelsCount;n.has(a)||n.set(a,[]),n.get(a).push(i)}return r=Array.from(n.keys()),0==r.length?e:(i=r.filter((function(e){return e<=t})),i.length?n.get(Math.max.apply(null,i)):n.get(Math.min.apply(null,r)))}function Ln(e,t,r){var n=e,i=e.filter((function(e){return e.primary}));i.length&&(n=i);var a=n.length?n[0].language:"";if(n=n.filter((function(e){return e.language==a})),t){var o=gn(fn(t),e.map((function(e){return e.language})));o&&(n=e.filter((function(e){return fn(e.language)==o})))}if(r){if(e=In(n,r),e.length)return e}else if(e=n.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=n.map((function(e){return e.roles})).reduce(vr.yc,[]),e.length?In(n,e[0]):n}function In(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function On(e,t,r){for(var n=0;n<r.length;n++)if(r[n].audio==e&&r[n].video==t)return r[n];return null}function Dn(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function Pn(){this.h=null,this.f=!1,this.b=new q,this.c=[],this.i=!1,this.a=this.g=null}function xn(e,t){return e&&(t=t.filter((function(t){return vn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Nn(e,t){this.a=e,this.b=t}function Mn(e,t){var r=new Nn(2,6),n=Un,i=n.a,a=r.b-i.b;(0<(r.a-i.a||a)?n.c:n.b)(n.a,r,e,t)}function Fn(e,t,r,n){Z([r,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",n].join(" "))}function jn(e,t,r,n){X([r,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",n].join(""))}Y("shaka.abr.SimpleAbrManager",Pn),Pn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Pn.prototype.stop=Pn.prototype.stop,Pn.prototype.init=function(e){this.h=e},Pn.prototype.init=Pn.prototype.init,Pn.prototype.chooseVariant=function(){var e=xn(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=xn(null,this.c),e=[e[0]]);for(var r=e[0]||null,n=0;n<e.length;++n){var i=e[n],a=(e[n+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=i.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(r=i)}return this.g=Date.now(),r},Pn.prototype.chooseVariant=Pn.prototype.chooseVariant,Pn.prototype.enable=function(){this.f=!0},Pn.prototype.enable=Pn.prototype.enable,Pn.prototype.disable=function(){this.f=!1},Pn.prototype.disable=Pn.prototype.disable,Pn.prototype.segmentDownloaded=function(e,t){var r=this.b;if(!(16e3>t)){var n=8e3*t/e,i=e/1e3;r.a+=t,z(r.b,i,n),z(r.c,i,n)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}r=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(r)}},Pn.prototype.segmentDownloaded=Pn.prototype.segmentDownloaded,Pn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Pn.prototype.getBandwidthEstimate=Pn.prototype.getBandwidthEstimate,Pn.prototype.setVariants=function(e){this.c=e},Pn.prototype.setVariants=Pn.prototype.setVariants,Pn.prototype.configure=function(e){this.a=e},Pn.prototype.configure=Pn.prototype.configure,Nn.prototype.toString=function(){return"v"+this.a+"."+this.b};var Un=null,Bn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Gn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Kn=["loop","playbackRate"],Vn=["pause","play"],Yn="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),Hn={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Wn={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},zn=[["getConfiguration","configure"]],$n=[["isTextTrackVisible","setTextTrackVisibility"]],qn="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Xn=["attach","detach","load","unload"];function Zn(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Re){var r,n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof TimeRanges)for(n={__type__:"TimeRanges",length:t.length,start:[],end:[]},r=0;r<t.length;++r)n.start.push(t.start(r)),n.end.push(t.end(r));else n=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return n}}))}function Jn(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?Qn(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t}))}function Qn(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function ei(e,t,r,n,i,a){this.T=e,this.f=new pe(t),this.P=r,this.l=!1,this.G=n,this.M=i,this.C=a,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Nd.bind(this),this.s=this.kf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var ti=!1,ri=null;function ni(e){var t=ri;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function ii(e){for(var t in e.c){var r=e.c[t];delete e.c[t],r.reject(new ye(1,7,7e3))}}function ai(e){e=Zn(e),ri.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),J)}function oi(e,t,r){var n=this;Le.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,(this.m=r)&&(this.a=new ei(r,(function(){return ui(n)}),(function(){return ci(n)}),(function(e,t){return hi(n,e,t)}),(function(){return di(n)}),(function(){return li(n)}))),si(this)}function si(e){for(var t in e.a&&e.a.init(),e.i=new Ze,Bn.forEach(function(e){this.i.w(this.c,e,this.ig.bind(this))}.bind(e)),Yn.forEach(function(e){this.i.w(this.b,e,this.yf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.hg.bind(e,t),set:e.jg.bind(e,t)});for(var r in e.l={},e.b)Object.defineProperty(e.l,r,{configurable:!1,enumerable:!0,get:e.Ud.bind(e,r)});e.f=new Le,e.f.Vb=e.h,e.g=new Le,e.g.Vb=e.l}function li(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.bc(),startTime:null};return e.c.pause(),Kn.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),zn.forEach(function(e){var r=e[1];e=this.b[e[0]](),t.player[r]=e}.bind(e)),$n.forEach(function(e){var r=e[1];e=this.b[e[0]](),t.playerAfterLoad[r]=e}.bind(e)),t}function ui(e){e.dispatchEvent(new Re("caststatuschanged"))}function ci(e){e.f.dispatchEvent(new Re(e.h.paused?"pause":"play"))}function di(e){zn.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),r=e.a.get("video","ended"),n=Promise.resolve(),i=e.c.autoplay,a=null;r||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,n=e.b.load(t,a));var o={};Kn.forEach(function(e){o[e]=this.a.get("video",e)}.bind(e)),n.then((function(){e.c&&(Kn.forEach(function(e){this.c[e]=o[e]}.bind(e)),$n.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Re("error",{detail:t}))}))}function hi(e,t,r){e.a.ga()&&("video"==t?e.f.dispatchEvent(r):"player"==t&&e.g.dispatchEvent(r))}function fi(e,t,r,n){var i=this;Le.call(this),this.a=e,this.b=t,this.c=new Ze,this.D={video:e,player:t},this.s=r||function(){},this.G=n||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.C=new pe((function(){vi(i)})),pi(this)}function pi(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Qd.bind(e),t.onSenderDisconnected=e.Qd.bind(e),t.onSystemVolumeChanged=e.Be.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.ef.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.rf.bind(e),t.start(),Bn.forEach(function(e){this.c.w(this.a,e,this.Wd.bind(this,"video"))}.bind(e)),Yn.forEach(function(e){this.c.w(this.b,e,this.Wd.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.kd(3840,2160):e.b.kd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,gi(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,gi(this)}.bind(e)),e.c.w(e.a,"pause",function(){gi(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,gi(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new pe((function(){e.a&&e.a.ended&&(e.h=!0,gi(e))})).O(5)}.bind(e))}function gi(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Re("caststatuschanged")),yi(this)||_i(this,0))}.bind(e))}function mi(e,t,r){for(var n in t.player)e.b[n](t.player[n]);e.s(r),r=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,r=e.b.load(t.manifest,t.startTime)),r.then((function(){if(e.b){for(var r in t.video)e.a[r]=t.video[r];for(var n in t.playerAfterLoad)e.b[n](t.playerAfterLoad[n]);e.a.autoplay=i,t.manifest&&(e.a.play(),_i(e,0))}}),(function(t){e.b.dispatchEvent(new Re("error",{detail:t}))}))}function vi(e){e.C.O(.5);var t={video:{},player:{}};if(Gn.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var r in Wn)0==e.g%Wn[r]&&(t.player[r]=e.b[r]());for(var n in Hn)0==e.g%Hn[n]&&(t.player[n]=e.b[n]());(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=r.level,t.video.muted=r.muted),e.m&&(e.g+=1),Ai(e,{type:"update",update:t},e.f),yi(e)}function yi(e){return!(!e.l||!e.a.duration&&!e.b.V())&&(bi(e),e.l=!1,!0)}function bi(e){var t={contentId:e.b.bc(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};_i(e,0,t)}function Ai(e,t,r,n){e.v&&(e=Zn(t),n?r.getCastChannel(n).send(e):r.broadcast(e))}function _i(e,t,r){var n=e.a.playbackRate,i=Ei;i=e.h?i.IDLE:e.b.Oc()?i.je:e.a.paused?i.le:i.me,n={mediaSessionId:0,playbackRate:n,playerState:i,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},r&&(n.media=r),Ai(e,{requestId:t,type:"MEDIA_STATUS",status:[n]},e.i)}r=ei.prototype,r.destroy=function(){return ii(this),ri&&ni(this),this.f&&(this.f.stop(),this.f=null),this.M=this.G=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},r.ga=function(){return this.b},r.cd=function(){return this.D},r.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.sc();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,this.Od.bind(this),this.pf.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),ti&&this.f.O(.02),(t=ri)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Od(t):ri=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},r.jd=function(e){this.i=e,this.b&&ai({type:"appData",appData:this.i})},r.cast=function(e){return this.h?ti?this.b?Promise.reject(new ye(1,8,8002)):(this.g=new be,chrome.cast.requestSession(this.$c.bind(this,e),this.Md.bind(this)),this.g):Promise.reject(new ye(1,8,8001)):Promise.reject(new ye(1,8,8e3))},r.Eb=function(){this.b&&(ii(this),ri&&(ni(this),ri.stop((function(){}),(function(){})),ri=null))},r.get=function(e,t){if("video"==e){if(Vn.includes(t))return this.Yd.bind(this,e,t)}else if("player"==e){if(Wn[t]&&!this.get("player","isLive")())return function(){};if(qn.includes(t))return this.Yd.bind(this,e,t);if(Xn.includes(t))return this.Ef.bind(this,e,t);if(Hn[t])return this.Vd.bind(this,e,t)}return this.Vd(e,t)},r.set=function(e,t,r){this.a[e][t]=r,ai({type:"set",targetName:e,property:t,value:r})},r.$c=function(e,t){ri=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Nd(),ai({type:"init",initState:e,appData:this.i}),this.g.resolve()},r.Md=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new ye(2,8,t,e))},r.Vd=function(e,t){return this.a[e][t]},r.Yd=function(e,t,r){for(var n=[],i=2;i<arguments.length;++i)n[i-2]=arguments[i];ai({type:"call",targetName:e,methodName:t,args:n})},r.Ef=function(e,t,r){for(var n=[],i=2;i<arguments.length;++i)n[i-2]=arguments[i];i=new be;var a=this.v.toString();return this.v++,this.c[a]=i,ai({type:"asyncCall",targetName:e,methodName:t,args:n,id:a}),i},r.Od=function(e){var t=this.C();this.g=new be,this.l=!0,this.$c(t,e)},r.pf=function(e){ti="available"==e,this.f.sc()},r.Nd=function(){var e=!!ri&&"connected"==ri.status;if(this.b&&!e){for(var t in this.M(),this.a)this.a[t]={};ii(this)}this.D=(this.b=e)?ri.receiver.friendlyName:"",this.f.sc()},r.kf=function(e,t){var r=Jn(t);switch(r.type){case"event":var n=r.event;this.G(r.targetName,new Re(n.type,n));break;case"update":for(var i in n=r.update,n)for(var a in r=this.a[i]||{},n[i])r[a]=n[i][a];this.l&&(this.P(),this.l=!1);break;case"asyncComplete":if(i=r.id,r=r.error,a=this.c[i],delete this.c[i],a)if(r){for(n in i=new ye(r.severity,r.category,r.code),r)i[n]=r[n];a.reject(i)}else a.resolve()}},H(oi,Le),Y("shaka.cast.CastProxy",oi),oi.prototype.destroy=function(e){return e&&this.a&&this.a.Eb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},oi.prototype.destroy=oi.prototype.destroy,oi.prototype.Ye=function(){return this.h},oi.prototype.getVideo=oi.prototype.Ye,oi.prototype.Re=function(){return this.l},oi.prototype.getPlayer=oi.prototype.Re,oi.prototype.se=function(){return!!this.a&&(this.a.h&&ti)},oi.prototype.canCast=oi.prototype.se,oi.prototype.ga=function(){return!!this.a&&this.a.ga()},oi.prototype.isCasting=oi.prototype.ga,oi.prototype.cd=function(){return this.a?this.a.cd():""},oi.prototype.receiverName=oi.prototype.cd,oi.prototype.cast=function(){if(!this.a)throw new ye(1,8,8007);var e=li(this);return this.a.cast(e).then(function(){if(this.b)return this.b.rd()}.bind(this))},oi.prototype.cast=oi.prototype.cast,oi.prototype.jd=function(e){this.a&&this.a.jd(e)},oi.prototype.setAppData=oi.prototype.jd,oi.prototype.$f=function(){if(this.a){var e=this.a;if(e.b){var t=e.C();chrome.cast.requestSession(e.$c.bind(e,t),e.Md.bind(e))}}},oi.prototype.suggestDisconnect=oi.prototype.$f,oi.prototype.ve=function(e){var t=this;return p((function r(){return F(r,(function(r){switch(r.j){case 1:if(e==t.m)return r["return"]();if(t.m=e,!t.a){r.A(2);break}return t.a.Eb(),k(r,t.a.destroy(),3);case 3:t.a=null;case 2:t.a=new ei(e,(function(){return ui(t)}),(function(){return ci(t)}),(function(e,r){return hi(t,e,r)}),(function(){return di(t)}),(function(){return li(t)})),t.a.init(),S(r)}}))}))},oi.prototype.changeReceiverId=oi.prototype.ve,oi.prototype.Eb=function(){this.a&&this.a.Eb()},oi.prototype.forceDisconnect=oi.prototype.Eb,r=oi.prototype,r.hg=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a&&this.a.ga()?this.a.get("video",e):(e=this.c[e],"function"==typeof e&&(e=e.bind(this.c)),e)},r.jg=function(e,t){this.a&&this.a.ga()?this.a.set("video",e,t):this.c[e]=t},r.ig=function(e){this.a&&this.a.ga()||this.f.dispatchEvent(new Re(e.type,e))},r.Ud=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==e)return this.b.Fb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==e||"drmInfo"==e)return function(){return Z(e+"() does not work while casting!"),null};if("getManifestUri"==e)return Mn("getManifestUri",'Please use "getAssetUri" instead.'),this.Ud("getAssetUri");if("attach"==e||"detach"==e)return function(){return Z(e+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&Hn[e]||!this.a||!this.a.ga()?this.b[e].bind(this.b):this.a.get("player",e)},r.yf=function(e){this.a&&this.a.ga()||this.g.dispatchEvent(e)},H(fi,Le),Y("shaka.cast.CastReceiver",fi),fi.prototype.isConnected=function(){return this.v},fi.prototype.isConnected=fi.prototype.isConnected,fi.prototype.bf=function(){return this.h},fi.prototype.isIdle=fi.prototype.bf,fi.prototype.destroy=function(){var e=this;return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),r=[],e.b&&(r.push(e.b.destroy()),e.b=null),e.C&&(e.C.stop(),e.C=null),e.a=null,e.D=null,e.s=null,e.v=!1,e.h=!0,e.f=null,e.i=null,k(t,Promise.all(r),2);case 2:n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),S(t)}}))}))},fi.prototype.destroy=fi.prototype.destroy,r=fi.prototype,r.Qd=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,gi(this)},r.Wd=function(e,t){this.b&&(vi(this),Ai(this,{type:"event",targetName:e,event:t},this.f))},r.Be=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Ai(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Ai(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},r.rf=function(e){var t=Jn(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,mi(this,t.initState,t.appData),vi(this);break;case"appData":this.s(t.appData);break;case"set":var r=t.targetName,n=t.property;if(t=t.value,"video"==r){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==n){i.setSystemVolumeLevel(t);break}if("muted"==n){i.setSystemVolumeMuted(t);break}}this.D[r][n]=t;break;case"call":r=this.D[t.targetName],r[t.methodName].apply(r,t.args);break;case"asyncCall":r=t.targetName,n=t.methodName,"player"==r&&"load"==n&&(this.g=0,this.m=!1),i=t.id,e=e.senderId;var a=this.D[r];t=a[n].apply(a,t.args),"player"==r&&"load"==n&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.be.bind(this,e,i,null),this.be.bind(this,e,i))}},r.ef=function(e){var t=Jn(e.data);switch(t.type){case"PLAY":this.a.play(),_i(this,0);break;case"PAUSE":this.a.pause(),_i(this,0);break;case"SEEK":e=t.currentTime;var r=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),r&&"PLAYBACK_START"==r?(this.a.play(),_i(this,0)):r&&"PLAYBACK_PAUSE"==r&&(this.a.pause(),_i(this,0));break;case"STOP":this.b.rd().then(function(){this.b&&_i(this,0)}.bind(this));break;case"GET_STATUS":_i(this,Number(t.requestId));break;case"VOLUME":r=t.volume,e=r.level,r=r.muted;var n=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=r&&(this.a.muted=r),n==this.a.volume&&i==this.a.muted||_i(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,r=t.currentTime,n=this.G(e.contentId),i=t.autoplay||!0,this.s(e.customData),i&&(this.a.autoplay=!0),this.b.load(n,r).then(function(){this.b&&bi(this)}.bind(this))["catch"](function(e){var r="LOAD_FAILED";7==e.category&&7e3==e.code&&(r="LOAD_CANCELLED"),Ai(this,{requestId:Number(t.requestId),type:r},this.i)}.bind(this));break;default:Ai(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},r.be=function(e,t,r){this.b&&Ai(this,{type:"asyncComplete",id:t,error:r},this.f,e)};var Ei={IDLE:"IDLE",me:"PLAYING",je:"BUFFERING",le:"PAUSED"};function Ti(e,t){this.K=e,this.b=t==ki,this.a=0}Y("shaka.util.DataViewReader",Ti);var ki=1;function Si(){throw new ye(2,3,3e3)}function wi(){this.c=[],this.b=[],this.a=!1}function Ri(e){for(;e.reader.sa()&&!e.parser.a;)e.parser.mc(e.start,e.reader,e.partialOkay)}function Ci(e){for(var t=e.reader.F();0<t&&!e.parser.a;--t)e.parser.mc(e.start,e.reader,e.partialOkay)}function Li(e){return function(t){e(t.reader.Xa(t.reader.K.byteLength-t.reader.ba()))}}function Ii(e){for(var t=0,r=0;r<e.length;r++)t=t<<8|e.charCodeAt(r);return t}function Oi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Di(e){this.f=[],this.b=[],this.a=[],(new wi).fa("pssh",this.c.bind(this)).parse(e.buffer)}Ti.Endianness={lg:0,mg:ki},Ti.prototype.sa=function(){return this.a<this.K.byteLength},Ti.prototype.hasMoreData=Ti.prototype.sa,Ti.prototype.ba=function(){return this.a},Ti.prototype.getPosition=Ti.prototype.ba,Ti.prototype.Ie=function(){return this.K.byteLength},Ti.prototype.getLength=Ti.prototype.Ie,Ti.prototype.ka=function(){try{var e=this.K.getUint8(this.a);return this.a+=1,e}catch(t){Si()}},Ti.prototype.readUint8=Ti.prototype.ka,Ti.prototype.Mb=function(){try{var e=this.K.getUint16(this.a,this.b);return this.a+=2,e}catch(t){Si()}},Ti.prototype.readUint16=Ti.prototype.Mb,Ti.prototype.F=function(){try{var e=this.K.getUint32(this.a,this.b);return this.a+=4,e}catch(t){Si()}},Ti.prototype.readUint32=Ti.prototype.F,Ti.prototype.Xd=function(){try{var e=this.K.getInt32(this.a,this.b);return this.a+=4,e}catch(t){Si()}},Ti.prototype.readInt32=Ti.prototype.Xd,Ti.prototype.yb=function(){try{if(this.b)var e=this.K.getUint32(this.a,!0),t=this.K.getUint32(this.a+4,!0);else t=this.K.getUint32(this.a,!1),e=this.K.getUint32(this.a+4,!1)}catch(r){Si()}if(2097151<t)throw new ye(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Ti.prototype.readUint64=Ti.prototype.yb,Ti.prototype.Xa=function(e){this.a+e>this.K.byteLength&&Si();var t=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},Ti.prototype.readBytes=Ti.prototype.Xa,Ti.prototype.L=function(e){this.a+e>this.K.byteLength&&Si(),this.a+=e},Ti.prototype.skip=Ti.prototype.L,Ti.prototype.$d=function(e){this.a<e&&Si(),this.a-=e},Ti.prototype.rewind=Ti.prototype.$d,Ti.prototype.seek=function(e){(0>e||e>this.K.byteLength)&&Si(),this.a=e},Ti.prototype.seek=Ti.prototype.seek,Ti.prototype.bd=function(){for(var e=this.a;this.sa()&&0!=this.K.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.K.buffer,this.K.byteOffset+e,this.a-e),this.a+=1,yt(e)},Ti.prototype.readTerminatedString=Ti.prototype.bd,Y("shaka.util.Mp4Parser",wi),wi.prototype.H=function(e,t){var r=Ii(e);return this.c[r]=0,this.b[r]=t,this},wi.prototype.box=wi.prototype.H,wi.prototype.fa=function(e,t){var r=Ii(e);return this.c[r]=1,this.b[r]=t,this},wi.prototype.fullBox=wi.prototype.fa,wi.prototype.stop=function(){this.a=!0},wi.prototype.stop=wi.prototype.stop,wi.prototype.parse=function(e,t){var r=new Uint8Array(e);for(r=new Ti(new DataView(r.buffer,r.byteOffset,r.byteLength),0),this.a=!1;r.sa()&&!this.a;)this.mc(0,r,t)},wi.prototype.parse=wi.prototype.parse,wi.prototype.mc=function(e,t,r){var n=t.ba(),i=t.F(),a=t.F();switch(i){case 0:i=t.K.byteLength-n;break;case 1:i=t.yb()}var o=this.b[a];if(o){var s=null,l=null;1==this.c[a]&&(l=t.F(),s=l>>>24,l&=16777215),a=n+i,r&&a>t.K.byteLength&&(a=t.K.byteLength),a-=t.ba(),t=0<a?t.Xa(a):new Uint8Array(0),t=new Ti(new DataView(t.buffer,t.byteOffset,t.byteLength),0),o({parser:this,partialOkay:r||!1,version:s,flags:l,reader:t,size:i,start:n+e})}else t.L(Math.min(n+i-t.ba(),t.K.byteLength-t.ba()))},wi.prototype.parseNext=wi.prototype.mc,wi.children=Ri,wi.sampleDescription=Ci,wi.allData=Li,wi.typeToString=Oi,Di.prototype.c=function(e){if(!(1<e.version)){var t=Ct(e.reader.Xa(16)),r=[];if(0<e.version)for(var n=e.reader.F(),i=0;i<n;++i){var a=Ct(e.reader.Xa(16));r.push(a)}n=e.reader.F(),e.reader.L(n),this.b.push.apply(this.b,r),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}};var Pi={ac:function(e,t){var r=Pi.R(e,t);return 1!=r.length?null:r[0]},Gc:function(e,t,r){return e=Pi.zd(e,t,r),1!=e.length?null:e[0]},R:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},zd:function(e,t,r){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==r&&e.namespaceURI==t}))},getAttributeNS:function(e,t,r){return e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null},cc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},J:function(e,t,r,n){n=void 0===n?null:n;var i=null;return e=e.getAttribute(t),null!=e&&(i=r(e)),null==i?n:i},vf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ba:function(e){return e?(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e),e?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null):null},oc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return e=Number(e),0===e%1?e:null},nc:function(e){return e=Number(e),0===e%1&&0<e?e:null},vb:function(e){return e=Number(e),0===e%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ae:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Td:function(e,t){var r=new DOMParser;try{var n=r.parseFromString(e,"text/xml")}catch(a){}if(n&&n.documentElement.tagName==t)var i=n.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},Sd:function(e,t){try{var r=yt(e);return Pi.Td(r,t)}catch(n){}}},xi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Ni(e,t,r){var n=Ki(e),i=null;e=[];var a=[],o=new Set(n.map((function(e){return e.keyId})));if(o["delete"](null),1<o.size)throw new ye(2,4,4010);if(r||(a=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.ae||(i=e.init||i,!1)})),a.length&&(e=Ui(i,t,a),0==e.length&&(e=[br("",i)]))),n.length&&(r||!a.length))for(e=[],t=d(xi.values()),r=t.next();!r.done;r=t.next())r=r.value,"org.w3.clearkey"!=r&&e.push(br(r,i));if(o=Array.from(o)[0]||null)for(t=d(e),r=t.next();!r.done;r=t.next())for(r=d(r.value.initData),n=r.next();!n.done;n=r.next())n.value.keyId=o;return{wd:o,pg:i,drmInfos:e,Ad:!0}}function Mi(e,t,r,n){var i=Ni(e,t,n);if(r.Ad)e=1==r.drmInfos.length&&!r.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==r.drmInfos.length||e&&!t)&&(r.drmInfos=i.drmInfos),r.Ad=!1;else if(0<i.drmInfos.length&&(r.drmInfos=r.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==r.drmInfos.length))throw new ye(2,4,4008);return i.wd||r.wd}function Fi(e){var t=0,r=new DataView(e).getUint32(t,!0);if(r!==e.byteLength)return[];t+=6,r=[];for(var n=new DataView(e);t<e.byteLength-1;){var i=n.getUint16(t,!0);t+=2;var a=n.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);r.push({type:i,value:o}),t+=a}return r}function ji(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}function Ui(e,t,r){var n=[];r=d(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var a=xi.get(i.ae);if(a){var o;if(o=Pi.Gc(i.node,"urn:microsoft:playready","pro")){o=wt(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,u=s.length+16+l,c=new ArrayBuffer(u),h=new Uint8Array(c);c=new DataView(c);var f=0;c.setUint32(f,u),f+=4,c.setUint32(f,1886614376),f+=4,c.setUint32(f,0),f+=4,h.set(s,f),f+=s.length,c.setUint32(f,l),f+=4,h.set(o,f),o=[{initData:h,initDataType:"cenc",keyId:i.keyId}]}else o=null;o=br(a,i.init||e||o),(a=Gi.get(a))&&(o.licenseServerUri=a(i)),n.push(o)}else for(i=t(i.node)||[],i=d(i),a=i.next();!a.done;a=i.next())n.push(a.value)}return n}var Bi,Gi=(new Map).set("com.widevine.alpha",(function(e){return(e=Pi.Gc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return e=Pi.Gc(e.node,"urn:microsoft:playready","pro"),e?(e=wt(e.textContent),e=Fi(e.buffer).filter((function(e){return 1===e.type}))[0],e?(e=bt(e.value,!0),(e=Pi.Td(e,"WRMHEADER"))?ji(e):""):""):""}));function Ki(e){var t=[];e=d(e);for(var r=e.next();!r.done;r=e.next())(r=Vi(r.value))&&t.push(r);return t}function Vi(e){var t=e.getAttribute("schemeIdUri"),r=Pi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),n=Pi.zd(e,"urn:mpeg:cenc:2013","pssh").map(Pi.cc);if(!t)return null;if(t=t.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase(),r.includes(" ")))throw new ye(2,4,4009);var i=[];try{i=n.map((function(e){return{initDataType:"cenc",initData:wt(e),keyId:null}}))}catch(a){throw new ye(2,4,4007)}return{node:e,ae:t,keyId:r,init:0<i.length?i:null}}function Yi(t,r,n,i,a){var o={RepresentationID:r,Number:n,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,r,n,i){if("$$"==t)return"$";var a=o[r];if(null==a)return t;switch("RepresentationID"==r&&n&&(n=void 0),"Time"==r&&(a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return n=e.parseInt(n,10)||1,Array(Math.max(0,n-t.length)+1).join("0")+t}))}function Hi(e,t){var r=Wi(e,t,"timescale"),n=1;r&&(n=Pi.nc(r)||1),r=Wi(e,t,"duration"),(r=Pi.nc(r||""))&&(r/=n);var i=Wi(e,t,"startNumber"),a=Number(Wi(e,t,"presentationTimeOffset"))||0,o=Pi.vb(i||"");null!=i&&null!=o||(o=1);var s=zi(e,t,"SegmentTimeline");if(i=null,s){i=n;var l=e.S.duration||1/0;s=Pi.R(s,"S");for(var u=[],c=0,d=0;d<s.length;++d){var h=s[d],f=Pi.J(h,"t",Pi.vb),p=Pi.J(h,"d",Pi.vb);if(h=Pi.J(h,"r",Pi.parseInt),null!=f&&(f-=a),!p)break;if(f=null!=f?f:c,h=h||0,0>h)if(d+1<s.length){if(h=Pi.J(s[d+1],"t",Pi.vb),null==h)break;if(f>=h)break;h=Math.ceil((h-f)/p)-1}else{if(1/0==l)break;if(f/i>=l)break;h=Math.ceil((l*i-f)/p)-1}0<u.length&&f!=c&&(u[u.length-1].end=f/i);for(var g=0;g<=h;++g)c=f+p,u.push({start:f/i,end:c/i,eg:f}),f=c}i=u}return{timescale:n,Z:r,Za:o,la:a/n||0,sd:a,N:i}}function Wi(e,t,r){return[t(e.B),t(e.ca),t(e.ja)].filter(vr.Ga).map((function(e){return e.getAttribute(r)})).reduce((function(e,t){return e||t}))}function zi(e,t,r){return[t(e.B),t(e.ca),t(e.ja)].filter(vr.Ga).map((function(e){return Pi.ac(e,r)})).reduce((function(e,t){return e||t}))}function $i(e,t,r,n,i,a){for(var o=Pi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Pi.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=0;l<e.attributes.length;l++){var u=e.attributes[l];"http://www.w3.org/1999/xlink"==u.namespaceURI&&(e.removeAttributeNS(u.namespaceURI,u.localName),--l)}if(5<=a)return _e(new ye(2,4,4028));if("onLoad"!=s)return _e(new ye(2,4,4027));var c=yr([n],[o]);return i.request(0,Ge(c,t)).U((function(n){if(n=Pi.Sd(n.data,e.tagName),!n)return _e(new ye(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;n.childNodes.length;){var s=n.childNodes[0];n.removeChild(s),e.appendChild(s)}for(s=0;s<n.attributes.length;s++){var l=n.attributes[s].nodeName,u=n.getAttribute(l);e.setAttribute(l,u)}return qi(e,t,r,c[0],i,a+1)}))}function qi(e,t,r,n,i,a){if(a=void 0===a?0:a,Pi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=$i(e,t,r,n,i,a);return r&&(o=o.U(void 0,(function(){return qi(e,t,r,n,i,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var l=e.childNodes[s];l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Pi.getAttributeNS(l,"http://www.w3.org/1999/xlink","href")?(e.removeChild(l),--s):"SegmentTimeline"!=l.tagName&&o.push(qi(l,t,r,n,i,a)))}return Se(o).U((function(){return e}))}function Xi(e,t,r){this.c=e,this.b=t,this.a=r}function Zi(e,t,r,n,i,a){this.position=e,this.startTime=t,this.endTime=r,this.c=n,this.b=i,this.a=a}function Ji(e,t,r,n){var i,a=(new wi).fa("sidx",(function(e){i=Qi(t,n,r,e)}));if(e&&a.parse(e),i)return i;throw new ye(2,3,3004)}function Qi(e,t,r,n){var i=[];n.reader.L(4);var a=n.reader.F();if(0==a)throw new ye(2,3,3005);if(0==n.version)var o=n.reader.F(),s=n.reader.F();else o=n.reader.yb(),s=n.reader.yb();n.reader.L(2);var l=n.reader.Mb();for(e=e+n.size+s,s=0;s<l;s++){var u=n.reader.F(),c=(2147483648&u)>>>31;u&=2147483647;var d=n.reader.F();if(n.reader.L(4),1==c)throw new ye(2,3,3006);i.push(new Zi(i.length,o/a-t,(o+d)/a-t,(function(){return r}),e,e+u-1)),o+=d,e+=u}return n.parser.stop(),i}function ea(e){this.a=e}function ta(e,t){for(;e.a.length;){if(!(e.a[e.a.length-1].startTime>=t))break;e.a.pop()}for(;e.a.length;){if(!(0>=e.a[0].endTime))break;e.a.shift()}if(0!=e.a.length){var r=e.a[e.a.length-1];e.a[e.a.length-1]=new Zi(r.position,r.startTime,t,r.c,r.b,r.a)}}function ra(e){this.b=e,this.a=new Ti(e,0),Bi||(Bi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function na(e){var t=ia(e);if(7<t.length)throw new ye(2,3,3002);for(var r=0,n=0;n<t.length;n++)r=256*r+t[n];t=r,r=ia(e);e:{for(n=0;n<Bi.length;n++)if(Lt(r,Bi[n])){n=!0;break e}n=!1}if(n)r=e.b.byteLength-e.a.ba();else{if(8==r.length&&224&r[1])throw new ye(2,3,3001);n=r[0]&(1<<8-r.length)-1;for(var i=1;i<r.length;i++)n=256*n+r[i];r=n}return r=e.a.ba()+r<=e.b.byteLength?r:e.b.byteLength-e.a.ba(),n=new DataView(e.b.buffer,e.b.byteOffset+e.a.ba(),r),e.a.L(r),new aa(t,n)}function ia(e){var t,r=e.a.ka();for(t=1;8>=t&&!(r&1<<8-t);t++);if(8<t)throw new ye(2,3,3002);var n=new Uint8Array(t);for(n[0]=r,r=1;r<t;r++)n[r]=e.a.ka();return n}function aa(e,t){this.id=e,this.a=t}function oa(e){if(8<e.a.byteLength)throw new ye(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new ye(2,3,3001);for(var t=0,r=0;r<e.a.byteLength;r++){var n=e.a.getUint8(r);t=256*t+n}return t}function sa(){}function la(e,t,r,n,i,a){function o(){return i}var s=[];e=new ra(e.a);for(var l=null,u=null;e.sa();){var c=na(e);if(187==c.id){var d=ua(c);d&&(c=r*d.fg,d=t+d.Df,null!=l&&s.push(new Zi(s.length,l-a,c-a,o,u,d-1)),l=c,u=d)}}return null!=l&&s.push(new Zi(s.length,l-a,n-a,o,u,null)),s}function ua(e){var t=new ra(e.a);if(e=na(t),179!=e.id)throw new ye(2,3,3013);if(e=oa(e),t=na(t),183!=t.id)throw new ye(2,3,3012);t=new ra(t.a);for(var r=0;t.sa();){var n=na(t);if(241==n.id){r=oa(n);break}}return{fg:e,Df:r}}function ca(e,t){var r=zi(e,t,"Initialization");if(!r)return null;var n=e.B.oa,i=r.getAttribute("sourceURL");i&&(n=yr(e.B.oa,[i])),i=0;var a=null;return(r=Pi.J(r,"range",Pi.oc))&&(i=r.start,a=r.end),new Xi((function(){return n}),i,a)}function da(e,t){var r=Number(Wi(e,fa,"presentationTimeOffset"))||0,n=Wi(e,fa,"timescale"),i=1;n&&(i=Pi.nc(n)||1),r=r/i||0,n=ca(e,fa);var a=e.B.contentType;if(i=e.B.mimeType.split("/")[1],"text"!=a&&"mp4"!=i&&"webm"!=i)throw new ye(2,4,4006);if("webm"==i&&!n)throw new ye(2,4,4005);a=zi(e,fa,"RepresentationIndex");var o=Wi(e,fa,"indexRange"),s=e.B.oa;if(o=Pi.oc(o||""),a){var l=a.getAttribute("sourceURL");l&&(s=yr(e.B.oa,[l])),o=Pi.J(a,"range",Pi.oc,o)}if(!o)throw new ye(2,4,4002);return i=ha(e,t,n,s,o.start,o.end,i,r),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:n,la:r}}function ha(e,t,r,n,i,a,o,s){var l=e.presentationTimeline,u=!e.kb||!e.S.Qc,c=e.S.start,d=e.S.duration,h=t,f=null;return{createSegmentIndex:function(){var e=[h(n,i,a),"webm"==o?h(r.c(),r.b,r.a):null];return h=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?Ji(t,i,n,s):(new sa).parse(t,e,n,s),l.sb(t,c),f=new ea(t),u&&ta(f,d)}))},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function fa(e){return e.Ob}function pa(e,t){var r=ca(e,ga),n=va(e),i=Hi(e,ga),a=i.Za;0==a&&(a=1);var o=0;if(i.Z?o=i.Z*(a-1):i.N&&0<i.N.length&&(o=i.N[0].start),n={Z:i.Z,startTime:o,Za:a,la:i.la,N:i.N,qb:n},!n.Z&&!n.N&&1<n.qb.length)throw new ye(2,4,4002);if(!n.Z&&!e.S.duration&&!n.N&&1==n.qb.length)throw new ye(2,4,4002);if(n.N&&0==n.N.length)throw new ye(2,4,4002);return a=i=null,e.ja.id&&e.B.id&&(a=e.ja.id+","+e.B.id,i=t[a]),o=ma(e.S.duration,n.Za,e.B.oa,n),i?(i.Tc(o),a=e.presentationTimeline.Hb(),i.Dc(a-e.S.start)):(e.presentationTimeline.sb(o,e.S.start),i=new ea(o),a&&e.kb&&(t[a]=i)),e.kb&&e.S.Qc||ta(i,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:r,la:n.la}}function ga(e){return e.Ja}function ma(e,t,r,n){var i=n.qb.length;n.N&&n.N.length!=n.qb.length&&(i=Math.min(n.N.length,n.qb.length));for(var a=[],o=n.startTime,s=0;s<i;s++){var l=n.qb[s],u=yr(r,[l.cf]),c=void 0;c=null!=n.Z?o+n.Z:n.N?n.N[s].end:o+e,a.push(new Zi(s+t,o,c,function(e){return e}.bind(null,u),l.start,l.end)),o=c}return a}function va(e){return[e.B.Ja,e.ca.Ja,e.ja.Ja].filter(vr.Ga).map((function(e){return Pi.R(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0);var r=t.getAttribute("media");return t=Pi.J(t,"mediaRange",Pi.oc,{start:0,end:null}),{cf:r,start:t.start,end:t.end}}))}function ya(e,t,r,n){var i=Ea(e),a=Hi(e,ba),o=Wi(e,ba,"media"),s=Wi(e,ba,"index");if(a={Z:a.Z,timescale:a.timescale,Za:a.Za,la:a.la,sd:a.sd,N:a.N,Sc:o,Jb:s},o=a.Jb?1:0,o+=a.N?1:0,o+=a.Z?1:0,0==o)throw new ye(2,4,4002);if(1!=o&&(a.Jb&&(a.N=null),a.Z=null),!a.Jb&&!a.Sc)throw new ye(2,4,4002);if(a.Jb){if(r=e.B.mimeType.split("/")[1],"mp4"!=r&&"webm"!=r)throw new ye(2,4,4006);if("webm"==r&&!i)throw new ye(2,4,4005);n=Yi(a.Jb,e.B.id,null,e.bandwidth||null,null),n=yr(e.B.oa,[n]),e=ha(e,t,i,n,0,null,r,a.la)}else a.Z?(n||(e.presentationTimeline.Vc(a.Z),e.presentationTimeline.Wc(e.S.start)),e=Aa(e,a)):(o=t=null,e.ja.id&&e.B.id&&(o=e.ja.id+","+e.B.id,t=r[o]),s=_a(e,a),n=!e.kb||!e.S.Qc,t?(n&&ta(new ea(s),e.S.duration),t.Tc(s),r=e.presentationTimeline.Hb(),t.Dc(r-e.S.start)):(e.presentationTimeline.sb(s,e.S.start),t=new ea(s),o&&e.kb&&(r[o]=t)),n&&ta(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,la:a.la}}function ba(e){return e.Qb}function Aa(e,t){var r=e.S.duration,n=t.Z,i=t.Za,a=t.timescale,o=t.Sc,s=e.bandwidth||null,l=e.B.id,u=e.B.oa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||r&&e>=r?null:Math.floor(e/n)},getSegmentReference:function(e){var t=e*n,c=t+n;return r&&(c=Math.min(c,r)),0>c||r&&t>=r?null:new Zi(e,t,c,(function(){var r=Yi(o,l,e+i,s,t*a);return yr(u,[r])}),0,null)}}}function _a(e,t){for(var r=[],n=0;n<t.N.length;n++){var i=n+t.Za;r.push(new Zi(i,t.N[n].start,t.N[n].end,function(e,t,r,n,i,a){return e=Yi(e,t,i,r,a),yr(n,[e]).map((function(e){return e.toString()}))}.bind(null,t.Sc,e.B.id,e.bandwidth||null,e.B.oa,i,t.N[n].eg+t.sd),0,null))}return r}function Ea(e){var t=Wi(e,ba,"initialization");if(!t)return null;var r=e.B.id,n=e.bandwidth||null,i=e.B.oa;return new Xi((function(){var e=Yi(t,r,null,n,null);return yr(i,[e])}),0,null)}Y("shaka.media.InitSegmentReference",Xi),Xi.prototype.Ac=function(){return this.c()},Xi.prototype.createUris=Xi.prototype.Ac,Xi.prototype.Lc=function(){return this.b},Xi.prototype.getStartByte=Xi.prototype.Lc,Xi.prototype.Kc=function(){return this.a},Xi.prototype.getEndByte=Xi.prototype.Kc,Y("shaka.media.SegmentReference",Zi),Zi.prototype.ba=function(){return this.position},Zi.prototype.getPosition=Zi.prototype.ba,Zi.prototype.Mc=function(){return this.startTime},Zi.prototype.getStartTime=Zi.prototype.Mc,Zi.prototype.Ge=function(){return this.endTime},Zi.prototype.getEndTime=Zi.prototype.Ge,Zi.prototype.Ac=function(){return this.c()},Zi.prototype.createUris=Zi.prototype.Ac,Zi.prototype.Lc=function(){return this.b},Zi.prototype.getStartByte=Zi.prototype.Lc,Zi.prototype.Kc=function(){return this.a},Zi.prototype.getEndByte=Zi.prototype.Kc,Y("shaka.media.SegmentIndex",ea),ea.prototype.destroy=function(){return this.a=null,Promise.resolve()},ea.prototype.destroy=ea.prototype.destroy,ea.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var r=this.a[t];if(e>=r.startTime&&e<r.endTime)return r.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},ea.prototype.find=ea.prototype.find,ea.prototype.get=function(e){return 0==this.a.length?null:(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e])},ea.prototype.get=ea.prototype.get,ea.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},ea.prototype.offset=ea.prototype.offset,ea.prototype.Tc=function(e){for(var t=[],r=0,n=0;r<this.a.length&&n<e.length;){var i=this.a[r],a=e[n];i.startTime<a.startTime?(t.push(i),r++):(i.startTime>a.startTime?0==r&&t.push(a):(.1<Math.abs(i.endTime-a.endTime)?t.push(new Zi(i.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(i),r++),n++)}for(;r<this.a.length;)t.push(this.a[r++]);if(t.length)for(r=t[t.length-1].position+1;n<e.length;)i=e[n++],i=new Zi(r++,i.startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},ea.prototype.merge=ea.prototype.Tc,ea.prototype.Dc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},ea.prototype.evict=ea.prototype.Dc,ra.prototype.sa=function(){return this.a.sa()},sa.prototype.parse=function(e,t,r,n){var i;if(t=new ra(new DataView(t)),440786851!=na(t).id)throw new ye(2,3,3008);var a=na(t);if(408125543!=a.id)throw new ye(2,3,3009);for(t=a.a.byteOffset,a=new ra(a.a),i=null;a.sa();){var o=na(a);if(357149030==o.id){i=o;break}}if(!i)throw new ye(2,3,3010);for(a=new ra(i.a),i=1e6,o=null;a.sa();){var s=na(a);if(2807729==s.id)i=oa(s);else if(17545==s.id)if(o=s,4==o.a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new ye(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new ye(2,3,3011);if(a=i/1e9,i=o*a,e=na(new ra(new DataView(e))),475249515!=e.id)throw new ye(2,3,3007);return la(e,t,a,i,r,n)};var Ta={wb:{},Lb:{},ed:function(e,t){Ta.Lb[e]=t}};function ka(e,t,r){this.f=e,this.pc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===r||r}function Sa(e,t,r,n){return e=Ge(e,n),0==t&&null==r||(e.headers.Range=r?"bytes="+t+"-"+r:"bytes="+t+"-"),e}function wa(){var e=this;this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new W(5),this.i=new pe((function(){Pa(e)})),this.g=new Ne}function Ra(e){var t=Date.now(),r=e.a.networkingEngine.request(0,Ge(e.f,e.b.retryParameters));return Me(e.g,r),r.promise.then((function(t){if(e.a)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),Ca(e,t.data,t.uri)})).then((function(){var r=(Date.now()-t)/1e3;return z(e.v,1,r),r}))}function Ca(e,t,r){if(t=Pi.Sd(t,"MPD"),!t)throw new ye(2,4,4001,r);return t=qi(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,r,e.a.networkingEngine),Me(e.g,t),t.promise.then((function(t){return La(e,t,r)}))}function La(e,t,r){return p((function n(){var i,a,o,s,l,u,c,d,h,f,p,g,m,v,y,b,A,_,E,T,w,R,C,L,I;return F(n,(function(n){switch(n.j){case 1:s=vr,l=Pi,u=[r],c=l.R(t,"Location").map(l.cc).filter(s.Ga),0<c.length&&(d=yr(u,c),u=e.f=d),h=l.R(t,"BaseURL").map(l.cc),f=yr(u,h),p=e.b.dash.ignoreMinBufferTime,g=0,p||(g=l.J(t,"minBufferTime",l.Ba)),e.s=l.J(t,"minimumUpdatePeriod",l.Ba,-1),m=l.J(t,"availabilityStartTime",l.vf),v=l.J(t,"timeShiftBufferDepth",l.Ba),y=l.J(t,"suggestedPresentationDelay",l.Ba),b=l.J(t,"maxSegmentDuration",l.Ba),A=t.getAttribute("type")||"static",e.c?_=e.c.presentationTimeline:(E=Math.max(e.b.dash.defaultPresentationDelay,1.5*g),T=null!=y?y:E,_=new ka(m,T,e.b.dash.autoCorrectDrift)),w={kb:"static"!=A,presentationTimeline:_,ja:null,S:null,ca:null,B:null,bandwidth:0,Fd:!1};for(var O=w,D=f,P=Pi.J(t,"mediaPresentationDuration",Pi.Ba),x=[],N=0,M=Pi.R(t,"Period"),F=0;F<M.length;F++){var j=M[F];N=Pi.J(j,"start",Pi.Ba,N);var U=Pi.J(j,"duration",Pi.Ba),B=null;if(F!=M.length-1){var G=Pi.J(M[F+1],"start",Pi.Ba);null!=G&&(B=G-N)}else null!=P&&(B=P-N);if(null==B&&(B=U),j=Ia(e,O,D,{start:N,duration:B,node:j,Qc:null==B||F==M.length-1}),x.push(j),U=O.ja.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.a.filterNewPeriod(j),e.c.periods.push(j))),null==B){N=null;break}N+=B}if(null==e.c&&e.a.filterAllPeriods(x),null!=P?(i=x,a=P,o=!1):(i=x,a=N,o=!0),R=a,C=i,_.Rb("static"==A),"static"!=A&&o||_.wa(R||1/0),_.V()&&!isNaN(e.b.availabilityWindowOverride)&&(v=e.b.availabilityWindowOverride),null==v&&(v=1/0),_.md(v),_.Vc(b||1),e.c){n.A(0);break}if(e.c={presentationTimeline:_,periods:C,offlineSessionIds:[],minBufferTime:g||0},!_.he()){n.A(0);break}return L=l.R(t,"UTCTiming"),k(n,Ua(e,f,L),4);case 4:if(I=n.o,!e.a)return n["return"]();_.ce(I),S(n)}}))}))}function Ia(e,t,r,n){if(t.ja=Na(n.node,null,r),t.S=n,t.ja.id||(t.ja.id="__shaka_period_"+n.start),Pi.R(n.node,"EventStream").forEach(e.wf.bind(e,n.start,n.duration)),r=Pi.R(n.node,"AdaptationSet").map(e.uf.bind(e,t)).filter(vr.Ga),t.kb){t=[];for(var i=d(r),a=i.next();!a.done;a=i.next()){a=d(a.value.Gf);for(var o=a.next();!o.done;o=a.next())t.push(o.value)}if(t.length!=new Set(t).size)throw new ye(2,4,4018)}var s=r.filter((function(e){return!e.qd}));if(r.filter((function(e){return e.qd})).forEach((function(e){var t=e.streams[0],r=e.qd;s.forEach((function(e){e.id==r&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Oa(s,"video"),i=Oa(s,"audio"),!t.length&&!i.length)throw new ye(2,4,4004);for(i.length||(i=[null]),t.length||(t=[null]),r=[],a=0;a<i.length;a++)for(o=0;o<t.length;o++)Da(e,i[a],t[o],r);for(e=Oa(s,"text"),t=[],i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:n.start,textStreams:t,variants:r}}function Oa(e,t){return e.filter((function(e){return e.contentType==t}))}function Da(e,t,r,n){if(t||r)if(t&&r){var i=t.drmInfos,a=r.drmInfos;if(!i.length||!a.length||0<tr(i,a).length){a=tr(t.drmInfos,r.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<r.streams.length;s++)i=(r.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),i={id:e.h++,language:t.language,primary:t.Rc||r.Rc,audio:t.streams[o],video:r.streams[s],bandwidth:i,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},n.push(i)}}else for(a=t||r,o=0;o<a.streams.length;o++)i=a.streams[o].bandwidth||0,i={id:e.h++,language:a.language||"und",primary:a.Rc,audio:t?a.streams[o]:null,video:r?a.streams[o]:null,bandwidth:i,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(i)}function Pa(e){p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return r=0,w(t,2),k(t,Ra(e),4);case 4:r=t.o,C(t,3);break;case 2:n=L(t),e.a&&(n.severity=1,e.a.onError(n));case 3:if(!e.a)return t["return"]();xa(e,r),S(t)}}))}))}function xa(e,t){0>e.s||e.i.O(Math.max(3,e.s-t,$(e.v)))}function Na(e,t,r){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Xc:null},r=r||t.oa;var n=Pi.vb,i=Pi.Ae,a=Pi.R(e,"BaseURL").map(Pi.cc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,l=e.getAttribute("codecs")||t.codecs;i=Pi.J(e,"frameRate",i)||t.frameRate;var u=Pi.R(e,"InbandEventStream"),c=t.emsgSchemeIdUris.slice();u=d(u);for(var h=u.next();!h.done;h=u.next())h=h.value.getAttribute("schemeIdUri"),c.includes(h)||c.push(h);return u=Pi.R(e,"AudioChannelConfiguration"),u=Ma(u)||t.Xc,o||(o=Ba(s,l)),{oa:yr(r,a),Ob:Pi.ac(e,"SegmentBase")||t.Ob,Ja:Pi.ac(e,"SegmentList")||t.Ja,Qb:Pi.ac(e,"SegmentTemplate")||t.Qb,width:Pi.J(e,"width",n)||t.width,height:Pi.J(e,"height",n)||t.height,contentType:o,mimeType:s,codecs:l,frameRate:i,emsgSchemeIdUris:c,id:e.getAttribute("id"),Xc:u}}function Ma(e){for(var t=0;t<e.length;++t){var r=e[t],n=r.getAttribute("schemeIdUri");if(n&&(r=r.getAttribute("value")))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(n=parseInt(r,10),!n)continue;return n;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=parseInt(r,16)){for(e=0;n;)1&n&&++e,n>>=1;return e}}}return null}function Fa(e){var t=e.Ob?1:0;return t+=e.Ja?1:0,t+=e.Qb?1:0,0==t?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Ob&&(e.Ja=null),e.Qb=null),!0)}function ja(e,t,r,n){return t=yr(t,[r]),t=Ge(t,e.b.retryParameters),t.method=n,t=e.a.networkingEngine.request(4,t),Me(e.g,t),t.promise.then((function(e){if("HEAD"==n){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=yt(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Ua(e,t,r){r=r.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var n=e.b.dash.clockSyncUri;return!r.length&&n&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:n}),vr.ye(r,function(e){var r=e.scheme;switch(e=e.value,r){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return ja(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return ja(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return r=Date.parse(e),isNaN(r)?0:r-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Z("NTP UTCTiming scheme is not supported"),Promise.reject();default:return Z("Unrecognized scheme in UTCTiming element",r),Promise.reject()}}.bind(e))["catch"]((function(){return Z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}function Ba(e,t){return Hr(lt(e,t))?"text":e.split("/")[0]}function Ga(e,t,r,n){this.b=e,this.type=t,this.a=r,this.segments=n||null}function Ka(e,t,r,n){this.id=e,this.name=t,this.a=r,this.value=void 0===n?null:n}function Va(e,t){this.name=e,this.value=t}function Ya(e,t,r){return(e=e.getAttribute(t))?e.value:r||null}function Ha(e,t){this.b=t,this.a=e}Y("shaka.media.ManifestParser.registerParserByExtension",Ta.ed),Ta.Nb=function(e,t){Ta.wb[e]=t},Y("shaka.media.ManifestParser.registerParserByMime",Ta.Nb),Ta.Af=function(){var e={};if(ht()){for(var t in Ta.wb)e[t]=!0;for(var r in Ta.Lb)e[r]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},r=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var n=r.next();!n.done;n=r.next())n=n.value,e[n]=ht()?!!Ta.wb[n]:ft(n);for(var i in t)e[i]=ht()?!!Ta.Lb[i]:ft(t[i]);return e},Ta.create=function(e,t,r,n){return p((function i(){var a,o;return F(i,(function(i){switch(i.j){case 1:return w(i,2),k(i,Ta.He(e,t,r,n),4);case 4:return a=i.o,i["return"](new a);case 2:throw o=L(i),o.severity=2,o}}))}))},Ta.He=function(e,t,r,n){return p((function i(){var a,o,s,l,u;return F(i,(function(i){switch(i.j){case 1:if(a=Ta,n&&(o=a.wb[n.toLowerCase()]))return i["return"](o);if((s=a.getExtension(e))&&(l=a.Lb[s]))return i["return"](l);if(n){i.A(2);break}return k(i,a.Oe(e,t,r),3);case 3:if((n=i.o)&&(u=Ta.wb[n]))return i["return"](u);case 2:throw new ye(2,4,4e3,e)}}))}))},Ta.Oe=function(e,t,r){return p((function n(){var i,a,o;return F(n,(function(n){switch(n.j){case 1:return i=Ge([e],r),i.method="HEAD",k(n,t.request(0,i).promise,2);case 2:return a=n.o,o=a.headers["content-type"],n["return"](o?o.toLowerCase():"")}}))}))},Ta.getExtension=function(e){return e=new ee(e).ia.split("/").pop().split("."),1==e.length?"":e.pop().toLowerCase()},Ta.isSupported=function(e,t){return!!ht()&&(t in Ta.wb||Ta.getExtension(e)in Ta.Lb)},Y("shaka.media.PresentationTimeline",ka),ka.prototype.Y=function(){return this.g},ka.prototype.getDuration=ka.prototype.Y,ka.prototype.wa=function(e){this.g=e},ka.prototype.setDuration=ka.prototype.wa,ka.prototype.Te=function(){return this.f},ka.prototype.getPresentationStartTime=ka.prototype.Te,ka.prototype.ce=function(e){this.l=e},ka.prototype.setClockOffset=ka.prototype.ce,ka.prototype.Rb=function(e){this.m=e},ka.prototype.setStatic=ka.prototype.Rb,ka.prototype.md=function(e){this.h=e},ka.prototype.setSegmentAvailabilityDuration=ka.prototype.md,ka.prototype.Qf=function(e){this.pc=e},ka.prototype.setDelay=ka.prototype.Qf,ka.prototype.Fe=function(){return this.pc},ka.prototype.getDelay=ka.prototype.Fe,ka.prototype.sb=function(e,t){if(0!=e.length){var r=e[e.length-1].endTime+t;this.Wc(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,r),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},ka.prototype.notifySegments=ka.prototype.sb,ka.prototype.Wc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},ka.prototype.notifyMinSegmentStartTime=ka.prototype.Wc,ka.prototype.Vc=function(e){this.a=Math.max(this.a,e)},ka.prototype.notifyMaxSegmentDuration=ka.prototype.Vc,ka.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},ka.prototype.offset=ka.prototype.offset,ka.prototype.V=function(){return 1/0==this.g&&!this.m},ka.prototype.isLive=ka.prototype.V,ka.prototype.Va=function(){return 1/0!=this.g&&!this.m},ka.prototype.isInProgress=ka.prototype.Va,ka.prototype.Hb=function(){if(1/0==this.h)return this.i;var e=this.nb()-this.h;return Math.max(this.i,e)},ka.prototype.getSegmentAvailabilityStart=ka.prototype.Hb,ka.prototype.de=function(e){this.i=e},ka.prototype.setUserSeekStart=ka.prototype.de,ka.prototype.nb=function(){return this.V()||this.Va()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},ka.prototype.getSegmentAvailabilityEnd=ka.prototype.nb,ka.prototype.Gb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var r=this.nb()-this.h;return e=Math.min(r+e,this.za()),Math.max(t,e)},ka.prototype.getSafeSeekRangeStart=ka.prototype.Gb,ka.prototype.mb=function(){return this.Gb(0)},ka.prototype.getSeekRangeStart=ka.prototype.mb,ka.prototype.za=function(){var e=this.V()||this.Va()?this.pc:0;return Math.max(0,this.nb()-e)},ka.prototype.getSeekRangeEnd=ka.prototype.za,ka.prototype.he=function(){return null!=this.f&&null==this.b},ka.prototype.usingPresentationStartTime=ka.prototype.he,Y("shaka.dash.DashParser",wa),r=wa.prototype,r.configure=function(e){this.b=e},r.start=function(e,t){var r=this;return p((function n(){var i;return F(n,(function(n){switch(n.j){case 1:return r.f=[e],r.a=t,k(n,Ra(r),2);case 2:if(i=n.o,r.a&&xa(r,i),!r.a)throw new ye(2,7,7001);return n["return"](r.c)}}))}))},r.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},r.update=function(){Ra(this)["catch"](function(e){this.a&&this.a.onError(e)}.bind(this))},r.onExpirationUpdated=function(){},r.uf=function(e,t){e.ca=Na(t,e.ja,null);var r=!1,n=Pi.R(t,"Role"),i=n.map((function(e){return e.getAttribute("value")})).filter(vr.Ga),a=void 0,o="text"==e.ca.contentType;o&&(a="subtitle");for(var s=0;s<n.length;s++){var l=n[s].getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(l=n[s].getAttribute("value"),l){case"main":r=!0;break;case"caption":case"subtitle":a=l}}var u=null,c=!1;Pi.R(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0})),s=Pi.R(t,"Accessibility");var h=new Map;for(n={},s=d(s),l=s.next();!l.done;n={Db:n.Db},l=s.next()){var f=l.value;l=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==l||"urn:scte:dash:cc:cea-708:2015"==l?(n.Db=1,null!=f?f.split(";").forEach(function(e){return function(t){if(t.includes("=")){t=t.split("=");var r=t[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else r="CC"+e.Db,e.Db+=2;h.set(r,fn(t))}}(n)):h.set("CC1","und")):"urn:mpeg:dash:role:2011"==l&&null!=f&&(i.push(f),"captions"==f&&(a="caption"))}if(c)return null;n=Pi.R(t,"ContentProtection");var p=Ni(n,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(n=fn(t.getAttribute("lang")||"und"),l=t.getAttribute("label"),s=Pi.R(t,"Representation"),i=s.map(this.xf.bind(this,e,p,a,n,l,r,i,h)).filter((function(e){return!!e})),0==i.length){if(o)return null;throw new ye(2,4,4003)}return e.ca.contentType&&"application"!=e.ca.contentType||(e.ca.contentType=Ba(i[0].mimeType,i[0].codecs),i.forEach((function(t){t.type=e.ca.contentType}))),i.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=s.map((function(e){return e.getAttribute("id")})).filter(vr.Ga),{id:e.ca.id||"__fake__"+this.h++,contentType:e.ca.contentType,language:n,Rc:r,streams:i,drmInfos:p.drmInfos,qd:u,Gf:o}},r.xf=function(e,t,r,n,i,a,o,s,l){if(e.B=Na(l,e.ca,null),!Fa(e.B))return null;e.bandwidth=Pi.J(l,"bandwidth",Pi.nc)||0;var u=e.B.contentType;u="text"==u||"application"==u;try{var c=this.Hf.bind(this);if(e.B.Ob)var d=da(e,c);else if(e.B.Ja)d=pa(e,this.m);else if(e.B.Qb)d=ya(e,c,this.m,!!this.c);else{var h=e.B.oa,f=e.S.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new Zi(1,0,f,(function(){return h}),0,null)},initSegmentReference:null,la:0}}}catch(p){if(u&&4002==p.code)return null;throw p}return l=Pi.R(l,"ContentProtection"),l=Mi(l,this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:e.B.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.la,mimeType:e.B.mimeType,codecs:e.B.codecs,frameRate:e.B.frameRate,bandwidth:e.bandwidth,width:e.B.width,height:e.B.height,kind:r,encrypted:0<t.drmInfos.length,keyId:l,language:n,label:i,type:e.ca.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.B.emsgSchemeIdUris,roles:o,channelsCount:e.B.Xc,closedCaptions:s}},r.wf=function(e,t,r){var n=Pi.vb,i=r.getAttribute("schemeIdUri")||"",a=r.getAttribute("value")||"",o=Pi.J(r,"timescale",n)||1;Pi.R(r,"Event").forEach(function(r){var s=Pi.J(r,"presentationTime",n)||0,l=Pi.J(r,"duration",n)||0;s=s/o+e,l=s+l/o,null!=t&&(s=Math.min(s,e+t),l=Math.min(l,e+t)),r={schemeIdUri:i,value:a,startTime:s,endTime:l,id:r.getAttribute("id")||"",eventElement:r},this.a.onTimelineRegionAdded(r)}.bind(this))},r.Hf=function(e,t,r){return e=Sa(e,t,r,this.b.retryParameters),e=this.a.networkingEngine.request(1,e),Me(this.g,e),e.promise.then((function(e){return e.data}))},Ta.ed("mpd",wa),Ta.Nb("application/dash+xml",wa),Ka.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,r=this.a?this.a.map(e):[];return this.value&&r.unshift(this.value),0<r.length&&(t+=":"+r.join(",")),t},Ka.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Wa={lb:function(e,t){return e.filter((function(e){return e.name==t}))},Ra:function(e,t){var r=Wa.lb(e,t);return r.length?r[0]:null},Hc:function(e,t,r){return e.filter((function(e){var n=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),n.value==t&&e.value==r}))},zc:function(e,t){return yr([e],[t])[0]},Pc:function(e){return/^#(?!EXT)/m.test(e)}};function za(e){this.b=e,this.a=0}function $a(e){qa(e,/[ \t]+/gm)}function qa(e,t){t.lastIndex=e.a;var r=t.exec(e.b);return r=null==r?null:{position:r.index,length:r[0].length,Jf:r},e.a==e.b.length||null==r||r.position!=e.a?null:(e.a+=r.length,r.Jf)}function Xa(e){return e.a==e.b.length?null:(e=qa(e,/[^ \t\n]*/gm))?e[0]:null}function Za(){this.a=0}function Ja(e,t,r){t=yt(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new ye(2,4,4015);t=0;for(var i=1;i<n.length;i++)if(!Wa.Pc(n[i])){var a=eo(e,n[i]);if(--e.a,to.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i+=1)}for(i=[],a=1;a<n.length;)if(Wa.Pc(n[a]))a+=1;else{var o=eo(e,n[a]);if(ro.includes(o.name)){if(1!=t)throw new ye(2,4,4017);return n=n.splice(a,n.length-a),e=Qa(e,r,n,i),new Ga(r,t,i,e)}i.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Va("URI",n[a])),a+=1)}return new Ga(r,t,i)}function Qa(e,t,r,n){var i=[],a=[];return r.forEach((function(r){if(/^(#EXT)/.test(r))r=eo(e,r),to.includes(r.name)?n.push(r):a.push(r);else{if(Wa.Pc(r))return[];r=Wa.zc(t,r.trim()),i.push(new Ha(r,a)),a=[]}})),i}function eo(e,t){var r=e.a++,n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ye(2,4,4016,t);var i,a=n[1],o=n[2];if(n=[],o){var s;o=new za(o),(s=qa(o,/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=qa(o,l);)n.push(new Va(s[1],s[2]||s[3]))}return new Ka(r,a,n,i)}var to="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),ro="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function no(e){try{var t=no.parse(e);return Te({uri:e,ad:e,data:t.data,headers:{"content-type":t.contentType}})}catch(r){return _e(r)}}function io(){var e=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new Za,this.P=0,this.h=new pe((function(){Fo(e)})),this.f=Go,this.m=null,this.C=0,this.G=1/0,this.i=new Ne,this.M=[],this.l=new Map,this.W=!1}function ao(e,t){return p((function r(){var n,i,a,o,s,l,u,c,d,h;return F(r,(function(r){switch(r.j){case 1:return n=Wa,i=Ko,a=t.pe,k(r,xo(e,a),2);case 2:if(o=r.o,s=Ja(e.s,o.data,o.uri),1!=s.type)throw new ye(2,4,4017);return u=(l=n.Ra(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(l.value):0,c=t.stream,k(r,Eo(e,t.tc,s,u,c.mimeType,c.codecs),3);case 3:d=r.o,t.Pb.a=d,h=d[d.length-1],n.Ra(s.a,"EXT-X-ENDLIST")&&(jo(e,i.Oa),e.b.wa(h.endTime)),S(r)}}))}))}function oo(e,t){return p((function r(){var n,i,a,o,s,l,u,c,h,f,p;return F(r,(function(r){switch(r.j){case 1:if(n=Ja(e.s,t,e.v),0!=n.type)throw new ye(2,4,4022);return k(r,so(e,n),2);case 2:if(i=r.o,!e.g)throw new ye(2,7,7001);if(e.W&&0==i.variants.length)throw new ye(2,4,4034);e.g.filterAllPeriods([i]),a=1/0,o=0,s=1/0;for(var g=d(e.a.values()),m=g.next();!m.done;m=g.next())l=m.value,a=Math.min(a,l.Uc),o=Math.max(o,l.Uc),"text"!=l.stream.type&&(s=Math.min(s,l.duration));if(e.f!=Ko.Oa?(e.b=new ka(0,3*e.C),e.b.Rb(!1)):(e.b=new ka(null,0),e.b.Rb(!0)),_o(e),e.f!=Ko.Oa){for(e.P=e.G,u=Ko,e.f==u.td&&(c=e.b.pc,isNaN(e.c.availabilityWindowOverride)||(c=e.c.availabilityWindowOverride),e.b.md(c)),h=0;95443.7176888889<=o;)h+=95443.7176888889,o-=95443.7176888889;if(h)for(g=d(e.a.values()),m=g.next();!m.done;m=g.next())f=m.value,95443.7176888889>f.Uc&&(f.stream.presentationTimeOffset=-h,f.Pb.offset(h))}else for(e.b.wa(s),e.b.offset(-a),g=d(e.a.values()),m=g.next();!m.done;m=g.next())p=m.value,p.stream.presentationTimeOffset=a,p.Pb.offset(-a),ta(p.Pb,s);e.m={presentationTimeline:e.b,periods:[i],offlineSessionIds:[],minBufferTime:0},S(r)}}))}))}function so(e,t){return p((function r(){var n,i,a,o,s,l,u,c,d,h,f,g;return F(r,(function(r){switch(r.j){case 1:return n=Wa,i=vr,a=t.a,o=n.lb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==Do(e,"TYPE")}.bind(e)),l=s.map(function(e){var t=this;return p((function r(){var n;return F(r,(function(r){switch(r.j){case 1:return w(r,2),k(r,fo(t,e),4);case 4:return r["return"](r.o);case 2:if(n=L(r),t.c.hls.ignoreTextStreamFailures)return r["return"](null);throw n}}))}))}.bind(e)),u=o.filter((function(e){return"CLOSED-CAPTIONS"==Do(e,"TYPE")})),po(e,u),k(r,Promise.all(l),2);case 2:return c=r.o,d=n.lb(a,"EXT-X-STREAM-INF"),h=d.map(function(e){return lo(this,e,t)}.bind(e)),k(r,Promise.all(h),3);case 3:return f=r.o,g=f.reduce(i.yc,[]),g=g.filter((function(e){return null!=e})),r["return"]({startTime:0,variants:g,textStreams:c.filter((function(e){return null!=e}))})}}))}))}function lo(e,t,r){return p((function n(){var i,a,o,s,l,u,c,d,h,f,p,g,m,v,y,b,A,_,E,T,S,w,R,C,L,I,O;return F(n,(function(n){switch(n.j){case 1:return i=Ar,a=Wa,o=Ya(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=Co(o.split(/\s*,\s*/)),l=t.getAttribute("RESOLUTION"),c=u=null,d=Ya(t,"FRAME-RATE"),h=Number(Do(t,"BANDWIDTH")),l&&(f=l.value.split("x"),u=f[0],c=f[1]),p=a.lb(r.a,"EXT-X-MEDIA"),p=p.filter((function(e){return"CLOSED-CAPTIONS"!=Do(e,"TYPE")})),p=p.filter((function(e){var t=Ya(e,"URI")||"";return"SUBTITLES"==(Ya(e,"TYPE")||"")||""!=t})),g=Ya(t,"AUDIO"),m=Ya(t,"VIDEO"),g?p=a.Hc(p,"AUDIO",g):m&&(p=a.Hc(p,"VIDEO",m)),(v=Lo(i.qa,s))&&((y=Ya(t,"SUBTITLES"))&&(b=a.Hc(p,"SUBTITLES",y),b.length&&(A=e.D.get(b[0].id))&&(A.stream.codecs=v)),De(s,v)),_=p.map(function(e){return go(this,e,s)}.bind(e)),E=[],T=[],k(n,Promise.all(_),2);case 2:if(w=n.o,w=w.filter((function(e){return null!=e})),g?E=w:m&&(T=w),C=!1,E.length||T.length?E.length?(I=Do(t,"URI"),O=E[0].tc,I==O?(R=i.Ab,C=!0):R=i.Na):R=i.Ab:1==s.length?(L=Lo(i.Na,s),R=l||d||L?i.Na:i.Ab):(R=i.Na,s=[s.join(",")]),C){n.A(3);break}return k(n,mo(e,t,s,R),4);case 4:S=n.o;case 3:if(S)S.stream.type==i.Ab?E=[S]:T=[S];else if(null===S)return n["return"]([]);return T&&uo(T),E&&uo(E),n["return"](co(e,E,T,h,u,c,d))}}))}))}function uo(e){e.forEach((function(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}))}function co(e,t,r,n,i,a,o){r.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),r.length||(r=[null]);var s=[];t=d(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;for(var u=d(r),c=u.next();!c.done;c=u.next()){var h=c.value;c=l?l.stream:null;var f=h?h.stream:null,p=l?l.drmInfos:null,g=h?h.drmInfos:null;h=(h?h.tc:"")+" - "+(l?l.tc:"");var m=void 0;if(c&&f){if(p.length&&g.length&&!(0<tr(p,g).length))continue;m=tr(p,g)}else c?m=p:f&&(m=g);e.T.has(h)||(c=ho(e,c,f,n,m),s.push(c),e.T.add(h))}}return s}function ho(e,t,r,n,i){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!r&&r.primary,audio:t,video:r,bandwidth:n,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function fo(e,t){return p((function r(){var n;return F(r,(function(r){switch(r.j){case 1:return Do(t,"TYPE"),k(r,go(e,t,[]),2);case 2:return n=r.o,r["return"](n.stream)}}))}))}function po(e,t){for(var r=d(t),n=r.next();!n.done;n=r.next()){n=n.value,Do(n,"TYPE");var i=Ya(n,"LANGUAGE")||"und";i=fn(i);var a=Do(n,"GROUP-ID");n=Do(n,"INSTREAM-ID"),e.l.get(a)||e.l.set(a,new Map),e.l.get(a).set(n,i)}}function go(e,t,r){return p((function n(){var i,a,o,s,l,u,c,d,h,f,p;return F(n,(function(n){switch(n.j){case 1:if(i=Do(t,"URI"),e.a.has(i))return n["return"](e.a.get(i));if(a=Do(t,"TYPE").toLowerCase(),o=Ar,"subtitles"==a&&(a=o.qa),s=fn(Ya(t,"LANGUAGE","und")),l=Ya(t,"NAME"),u=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),d=Ya(t,"CHANNELS"),"audio"==a)if(d){var g=d.split("/")[0];g=parseInt(g,10)}else g=null;else g=null;return h=g,f=!!u||!!c,k(n,vo(e,i,r,a,s,f,l,h,null),2);case 2:return p=n.o,null==p?n["return"](null):e.a.has(i)?n["return"](e.a.get(i)):(e.D.set(t.id,p),e.a.set(i,p),n["return"](p))}}))}))}function mo(e,t,r,n){return p((function i(){var a,o,s,l,u;return F(i,(function(i){switch(i.j){case 1:return a=Ar,o=Do(t,"URI"),e.a.has(o)?i["return"](e.a.get(o)):(s=Ya(t,"CLOSED-CAPTIONS"),l=null,n==a.Na&&s&&"NONE"!=s&&(l=e.l.get(s)),k(i,vo(e,o,r,n,"und",!1,null,null,l),2));case 2:return u=i.o,null==u?i["return"](null):e.a.has(o)?i["return"](e.a.get(o)):(e.a.set(o,u),i["return"](u))}}))}))}function vo(e,t,r,n,i,a,o,s,l){return p((function u(){var c,h,f,p,g,m,v,y,b,A,_,E,T,S,w,R,C,L,I,O,D,P,x,N,M;return F(u,(function(u){switch(u.j){case 1:return c=Wa,h=c.zc(e.v,t),p="",k(u,xo(e,h),2);case 2:if(m=u.o,h=m.uri,f=Ja(e.s,m.data,h),1!=f.type)throw new ye(2,4,4017);v=[],f.segments.forEach((function(e){e=c.lb(e.b,"EXT-X-KEY"),v.push.apply(v,e)})),y=!1,b=[],A=null;for(var F=d(v),j=F.next();!j.done;j=F.next())if(_=j.value,E=Do(_,"METHOD"),"NONE"!=E){if(y=!0,"AES-128"==E)return e.W=!0,u["return"](null);T=Do(_,"KEYFORMAT"),(w=(S=Bo[T])?S(_):null)&&(w.keyIds.length&&(A=w.keyIds[0]),b.push(w))}if(y&&!b.length)throw new ye(2,4,4026);return yo(e,f),p=Io(n,r),k(u,Oo(e,n,p,f),3);case 3:return g=u.o,C=(R=c.Ra(f.a,"EXT-X-MEDIA-SEQUENCE"))?Number(R.value):0,k(u,Eo(e,t,f,C,g,p),4);case 4:return L=u.o,I=L[0].startTime,O=L[L.length-1].endTime,D=O-I,P=new ea(L),x=bo(f),N=void 0,"text"==n&&(N="subtitle"),M={id:e.$++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:P.find.bind(P),getSegmentReference:P.get.bind(P),initSegmentReference:x,presentationTimeOffset:0,mimeType:g,codecs:p,kind:N,encrypted:y,keyId:A,language:i,label:o,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:l},u["return"]({stream:M,Pb:P,drmInfos:b,tc:t,pe:h,Uc:I,qg:O,duration:D})}}))}))}function yo(e,t){var r=Ko,n=Wa.Ra(t.a,"EXT-X-PLAYLIST-TYPE"),i=Wa.Ra(t.a,"EXT-X-ENDLIST");i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i?jo(e,r.Oa):(jo(e,n?r.td:r.ke),r=Po(t.a,"EXT-X-TARGETDURATION"),r=Number(r.value),e.C=Math.max(r,e.C),e.G=Math.min(r,e.G))}function bo(e){var t=Wa.lb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new ye(2,4,4020);t=t[0];var r=Do(t,"URI"),n=Wa.zc(e.b,r);return e=0,r=null,(t=Ya(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),r=e+t-1),new Xi((function(){return[n]}),e,r)}function Ao(e,t,r,n){var i=t.b,a=t.a;t=Po(i,"EXTINF").value.split(","),t=n+Number(t[0]);var o=0,s=null;return(i=Wa.Ra(i,"EXT-X-BYTERANGE"))&&(o=i.value.split("@"),i=Number(o[0]),o=o[1]?Number(o[1]):e.a+1,s=o+i-1),new Zi(r,n,t,(function(){return[a]}),o,s)}function _o(e){e.b&&(e.M.forEach((function(t){e.b.sb(t,0)})),e.M=[])}function Eo(e,t,r,n,i,a){return p((function o(){var s,l,u,c,d,h,f,p,g,m,v;return F(o,(function(o){switch(o.j){case 1:return s=r.segments,l=[],u=s[0].a,c=Ao(null,s[0],n,0),d=bo(r),k(o,ko(e,t,d,c,i,a),2);case 2:h=o.o,u.split("/").pop();for(var y=0;y<s.length;++y)f=s[y],p=l[l.length-1],g=0==y?h:p.endTime,m=n+y,v=Ao(p,f,m,g),l.push(v);return e.M.push(l),_o(e),o["return"](l)}}))}))}function To(e,t){return p((function r(){var n,i,a,o,s,l;return F(r,(function(r){switch(r.j){case 1:return n=je,i=Sa(t.c(),t.b,t.b+2048-1,e.c.retryParameters),a=Sa(t.c(),t.b,t.a,e.c.retryParameters),w(r,2),k(r,Uo(e,i,n.ud),4);case 4:return o=r.o,r["return"](o);case 2:if(s=L(r),7001==s.code)throw s;return Z("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),k(r,Uo(e,a,n.ud),5);case 5:return l=r.o,r["return"](l)}}))}))}function ko(e,t,r,n,i,a){return p((function o(){var s,l,u,c,d,h,f,p,g;return F(o,(function(o){switch(o.j){case 1:if(e.m&&(s=e.a.get(t),l=s.Pb,u=l.get(n.position)))return o["return"](u.startTime);if("audio/mpeg"==i)return o["return"](0);if("video/mp4"!=i&&"audio/mp4"!=i){o.A(2);break}return c=[To(e,n)],r&&c.push(To(e,r)),k(o,Promise.all(c),3);case 3:return d=o.o,h=d[0],f=d[1]||d[0],o["return"](So(h.data,f.data));case 2:if("video/mp2t"!=i){o.A(4);break}return k(o,To(e,n),5);case 5:return p=o.o,o["return"](wo(p.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){o.A(6);break}return k(o,To(e,n),7);case 7:return g=o.o,o["return"](Ro(i,a,g.data));case 6:if("video/webm"==i)return o["return"](null);throw new ye(2,4,4030)}}))}))}function So(e,t){var r=0;if((new wi).H("moov",Ri).H("trak",Ri).H("mdia",Ri).fa("mdhd",(function(e){e.reader.L(0==e.version?8:16),r=e.reader.F(),e.parser.stop()})).parse(t,!0),!r)throw new ye(2,4,4030);var n=0,i=!1;if((new wi).H("moof",Ri).H("traf",Ri).fa("tfdt",(function(e){n=(0==e.version?e.reader.F():e.reader.yb())/r,i=!0,e.parser.stop()})).parse(e,!0),!i)throw new ye(2,4,4030);return n}function wo(e){function t(){throw new ye(2,4,4030)}e=new Ti(new DataView(e),0);for(var r=0,n=0;;){if(r=e.ba(),n=e.ka(),71!=n&&t(),16384&e.Mb()||t(),n=(48&e.ka())>>4,0!=n&&2!=n||t(),3==n&&(n=e.ka(),e.L(n)),1==e.F()>>8)return e.L(3),r=e.ka()>>6,0!=r&&1!=r||t(),0==e.ka()&&t(),r=e.ka(),n=e.Mb(),e=e.Mb(),(1073741824*((14&r)>>1)+((65534&n)<<14|(65534&e)>>1))/9e4;e.seek(r+188),n=e.ka(),71!=n&&(e.seek(r+192),n=e.ka()),71!=n&&(e.seek(r+204),n=e.ka()),71!=n&&t(),e.$d(1)}}function Ro(e,t,r){return e=lt(e,t),Hr(e)?(t=new Vr(null),Wr(t,e),t.Mc(r)):0}function Co(e){var t=new Set,r=[];e=d(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=ct(n)[0];t.has(i)||(r.push(n),t.add(i))}return r}function Lo(e,t){for(var r=No[e],n=0;n<r.length;n++)for(var i=0;i<t.length;i++)if(r[n].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function Io(e,t){if(1==t.length)return t[0];var r=Lo(e,t);if(null!=r)return r;throw new ye(2,4,4025,t)}function Oo(e,t,r,n){return p((function i(){var a,o,s,l,u,c,d,h,f,p;return F(i,(function(i){switch(i.j){case 1:return a=Ar,o=je,s=n.segments[0].a,l=new ee(s),u=l.ia.split(".").pop(),c=Mo[t],(d=c[u])?i["return"](d):t==a.qa?r&&"vtt"!=r?i["return"]("application/mp4"):i["return"]("text/vtt"):(h=Ge([s],e.c.retryParameters),h.method="HEAD",k(i,Uo(e,h,o.ud),2));case 2:if(f=i.o,p=f.headers["content-type"],!p)throw new ye(2,4,4021,u);return i["return"](p.split(";")[0])}}))}))}function Do(e,t){var r=e.getAttribute(t);if(!r)throw new ye(2,4,4023,t);return r.value}function Po(e,t){var r=Wa.Ra(e,t);if(!r)throw new ye(2,4,4024,t);return r}function xo(e,t){return Uo(e,Ge([t],e.c.retryParameters),je.ng)}Y("shaka.net.DataUriPlugin",no),no.parse=function(t){var r=t.split(":");if(2>r.length||"data"!=r[0])throw new ye(2,1,1004,t);if(r=r.slice(1).join(":").split(","),2>r.length)throw new ye(2,1,1004,t);var n=r[0];r=e.decodeURIComponent(r.slice(1).join(",")),n=n.split(";");var i=null;if(1<n.length&&(i=n[1]),"base64"==i)t=wt(r).buffer;else{if(i)throw new ye(2,1,1005,t);t=_t(r)}return{data:t,contentType:n[0]}},Be("data",no),Y("shaka.hls.HlsParser",io),r=io.prototype,r.configure=function(e){this.c=e},r.start=function(e,t){var r=this;return p((function n(){var i,a;return F(n,(function(n){switch(n.j){case 1:return r.g=t,k(n,xo(r,e),2);case 2:return i=n.o,r.v=i.uri,k(n,oo(r,i.data),3);case 3:return a=r.P,0<a&&r.h.O(a),n["return"](r.m)}}))}))},r.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(e)},r.update=function(){if(this.f!=Ko.Oa){for(var e=[],t=d(this.a.values()),r=t.next();!r.done;r=t.next())e.push(ao(this,r.value));return Promise.all(e)}},r.onExpirationUpdated=function(){};var No={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Mo={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function Fo(e){p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return e.g?(w(t,2),k(t,e.update(),4)):t["return"]();case 4:r=e.P,e.h.O(r),C(t,0);break;case 2:n=L(t),n.severity=1,e.g.onError(n),e.h.O(.1),S(t)}}))}))}function jo(e,t){e.f=t,e.b&&e.b.Rb(e.f==Ko.Oa),e.f!=Ko.Oa||e.h.stop()}function Uo(e,t,r){if(!e.i)throw new ye(2,7,7001);return t=e.g.networkingEngine.request(r,t),Me(e.i,t),t.promise}var Bo={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Do(e,"METHOD");return Mn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=Do(e,"URI"),t=no.parse(t),t=new Uint8Array(t.data),t=br("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=Ya(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},Go="VOD",Ko={Oa:Go,ke:"EVENT",td:"LIVE"};function Vo(){this.a=new Map}function Yo(e,t,r){Ho(e,t).text=r}function Ho(e,t){return e.a.has(t)||e.a.set(t,new Wo),e.a.get(t)}function Wo(){this.text=this.variant=null}function zo(e,t){this.a=e,this.b=new Set([e]),t=t||[];for(var r=d(t),n=r.next();!n.done;n=r.next())this.add(n.value)}function $o(e,t){var r;if(!(r=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(r=e.audio&&t.audio)){r=e.audio;var n=t.audio;r=!(r.channelsCount==n.channelsCount&&qo(r,n)&&Xo(r.roles,n.roles))}return!r&&(r=e.video&&t.video)&&(r=e.video,n=t.video,r=!(qo(r,n)&&Xo(r.roles,n.roles))),!r}function qo(e,t){if(e.mimeType!=t.mimeType)return!1;var r=e.codecs.split(",").map((function(e){return ct(e)[0]})),n=t.codecs.split(",").map((function(e){return ct(e)[0]}));if(r.length!=n.length)return!1;r.sort(),n.sort();for(var i=0;i<r.length;i++)if(r[i]!=n[i])return!1;return!0}function Xo(e,t){var r=new Set(e),n=new Set(t);if(r["delete"]("main"),n["delete"]("main"),r.size!=n.size)return!1;r=d(r);for(var i=r.next();!i.done;i=r.next())if(!n.has(i.value))return!1;return!0}function Zo(e){this.a=e,this.b=new Jo(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Jo(e,t,r){this.c=e,this.b=t,this.a=r}function Qo(e,t){var r=fn(t),n=gn(r,e.map((function(e){return pn(e)})));return n?e.filter((function(e){return n==pn(e)})):[]}function es(e,t){return e.filter((function(e){var r=e.audio;return e=e.video,r&&0<=r.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}function ts(e,t){this.a=ns,this.b=(new Map).set(ns,t).set(rs,e)}Ta.ed("m3u8",io),Ta.Nb("application/x-mpegurl",io),Ta.Nb("application/vnd.apple.mpegurl",io),zo.prototype.add=function(e){return!!$o(this.a,e)&&(this.b.add(e),!0)},zo.prototype.values=function(){return this.b.values()},Zo.prototype.create=function(e){var t=this,r=e.filter((function(e){return $o(t.a,e)}));return r.length?new zo(r[0],r):this.b.create(e)},Jo.prototype.create=function(e){var t=[];t=Qo(e,this.c);var r=e.filter((function(e){return e.primary}));for(t=t.length?t:r.length?r:e,this.b&&(e=es(t,this.b),e.length&&(t=e)),this.a&&(e=Cn(t,this.a),e.length&&(t=e)),e=new zo(t[0]),t=d(t),r=t.next();!r.done;r=t.next())r=r.value,$o(e.a,r)&&e.add(r);return e};var rs=0,ns=1;function is(e,t){this.f=e,this.g=ss(e),this.b=e.a.currentTime,this.c=Date.now()/1e3,this.h=t,this.a=function(){}}function as(e,t){e.a=t}function os(e){this.a=e}function ss(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var r=0;r<t.length;r++){var n=t.start(r),i=t.end(r);if(!(e<n||e>i-.5)){t=!0;break e}}t=!1}return t}function ls(e,t,r,n,i){var a=this;this.a=e,this.v=t,this.s=r,this.l=i,this.f=new Ze,this.i=!1,this.m=e.readyState,this.c=!1,this.b=n,this.h=!1,this.f.w(e,"waiting",(function(){return us(a)})),this.g=new pe((function(){us(a)})).La(.25)}function us(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,r=e.a.currentTime,n=e.a.buffered;e:{if(n&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0)))for(var i=pt("Edge/")||pt("Trident/")||pt("Tizen")||pt("CrKey")?.5:.1,a=0;a<n.length;a++)if(n.start(a)>r&&(0==a||n.end(a-1)-r<=i)){i=a;break e}i=null}if(null==i)e.b&&(e=e.b,r=e.f,n=ss(r),r=r.a.currentTime,i=Date.now()/1e3,e.b==r&&e.g==n||(e.c=i,e.b=r,e.g=n),r=i-e.c,r>=e.h&&n&&e.a(e.b,r));else if(0!=i||e.h){a=n.start(i);var o=e.v.za();if(!(a>=o)){o=a-r,t=o<=t;var s=!1;.001>o||(t||e.c||(e.c=!0,r=new Re("largegap",{currentTime:r,gapSize:o}),r.cancelable=!0,e.l(r),e.s.jumpLargeGaps&&!r.defaultPrevented&&(s=!0)),!t&&!s)||(0!=i&&n.end(i-1),e.a.currentTime=a)}}}}}function cs(e){var t=this;this.c=e,this.a=new Set,this.b=new pe((function(){ds(t,!1)})).La(.25)}function ds(e,t){for(var r=d(e.a),n=r.next();!n.done;n=r.next())n.value.g(e.c.currentTime,t)}function hs(e){var t=[];e=d(e);for(var r=e.next();!r.done;r=e.next()){r=d(r.value.variants);for(var n=r.next();!n.done;n=r.next())t.push(n.value)}return t}function fs(e,t){for(var r=null,n=d(e),i=n.next();!i.done;i=n.next())i=i.value,t>=i.startTime&&(r=i);return r}function ps(e){this.c=e,this.a=null,this.b=function(){}}function gs(e,t){e.b=t}function ms(e){var t=this;this.a=e,this.f=!1,this.c=this.a.ec(),this.b=new pe((function(){t.a.Id(.25*t.c)}))}function vs(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.ec()!=t&&e.a.ld(t))}catch(r){}e.b.La(.25),0!=e.a.ec()&&e.a.ld(0)}function ys(e,t,r){this.a=e,this.f=t,this.g=r,this.h=!1,this.b=new Ze,this.c=new Ts(e),0<e.readyState?_s(this,r):As(this,r)}function bs(e){return e.h?e.a.currentTime:e.g}function As(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",(function(){_s(e,t)}))}function _s(e,t){.001>Math.abs(e.a.currentTime-t)?Es(e):(e.b.da(e.a,"seeking",(function(){Es(e)})),ks(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Es(e){e.h=!0,e.b.w(e.a,"seeking",(function(){return e.f()}))}function Ts(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new pe((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function ks(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.La(.1)}function Ss(e){function t(){null==r.c?r.f=!0:(r.b.da(r.a,"seeking",(function(){r.f=!0})),r.a.currentTime=r.c)}var r=this;this.a=e,this.f=!1,this.c=null,this.b=new Ze,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",t):t()}function ws(e,t,r,n,i,a){var o=this;this.b=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.g=r,this.v=i,this.l=null,this.f=new ls(e,t.presentationTimeline,r,Os(e,r),a),this.c=new ys(e,(function(){var e=o.f;e.i=!0,e.h=!1,e.c=!1;var t=bs(o.c);return e=Ls(o,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!o.l||o.l<t-1)?(o.l=t,t=o.c,0<t.a.readyState?ks(t.c,e):As(t,e),e=void 0):(o.v(),e=void 0),e}),Rs(this,n)),this.i=new pe((function(){if(0!=o.b.readyState&&!o.b.paused){var e=o.b.currentTime,t=o.a.mb(),r=o.a.za();3>r-t&&(t=r-3),e<t&&(e=Ls(o,e),o.b.currentTime=e)}})).La(.25)}function Rs(e,t){return null==t?t=1/0>e.a.Y()?e.a.mb():e.a.za():0>t&&(t=e.a.za()+t),Cs(e,Is(e,t))}function Cs(e,t){var r=e.a.Y();return t>=r?r-e.g.durationBackoff:t}function Ls(e,t){var r=pr.bind(null,e.b.buffered),n=Math.max(e.C,e.g.rebufferingGoal),i=e.g.safeSeekOffset,a=e.a.mb(),o=e.a.za(),s=e.a.Y();3>o-a&&(a=o-3);var l=e.a.Gb(n),u=e.a.Gb(i);return n=e.a.Gb(n+i),t>=s?Cs(e,t):t>o?o:t<a?r(u)?u:n:t>=l||r(t)?t:n}function Is(e,t){var r=e.a.mb();return t<r?r:(r=e.a.za(),t>r?r:t)}function Os(e,t){if(!t.stallEnabled)return null;var r=t.stallSkip,n=new is(new os(e),t.stallThreshold);return as(n,(function(){e.currentTime+=r})),n}function Ds(){this.b=function(){},this.a=new Set}function Ps(e,t){e.b=t}function xs(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{bb:null,ab:Fs,Ua:function(e,r){return t.a(e,r)}},{bb:Ms,ab:Fs,Ua:function(e,r){return t.a(e,r)}},{bb:js,ab:Fs,Ua:function(e,r){return t.a(e,r)}},{bb:Fs,ab:Ms,Ua:function(e,r){return t.b(e,r)}},{bb:Fs,ab:js,Ua:function(e,r){return t.b(e,r)}},{bb:Ms,ab:js,Ua:function(e,r){return t.c(e,r)}},{bb:js,ab:Ms,Ua:function(e,r){return t.c(e,r)}}]}function Ns(e,t,r,n){e.a=t,e.b=r,e.c=n}is.prototype.release=function(){this.f=null,this.a=function(){}},ls.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},ls.prototype.Zc=function(){this.h=!0,us(this)},cs.prototype.release=function(){this.b.stop();for(var e=d(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},ps.prototype.release=function(){this.a=this.c=null,this.b=function(){}},ps.prototype.g=function(e){var t=this.a,r=this.c.periods;e=fs(r,e)||r[0],t!=e&&this.b(e),this.a=e},ms.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},ms.prototype.set=function(e){this.c=e,vs(this)},ys.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Ts.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Ss.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Ss.prototype.m=function(e){this.c=this.f?this.c:e},Ss.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},Ss.prototype.s=function(){},ws.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},ws.prototype.m=function(e){var t=this.c;0<t.a.readyState?ks(t.c,e):As(t,e)},ws.prototype.h=function(){var e=bs(this.c);return 0<this.b.readyState&&!this.b.paused?Is(this,e):e},ws.prototype.s=function(){this.f.Zc()},Ds.prototype.release=function(){this.b=function(){},this.a.clear()},xs.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},xs.prototype.g=function(e,t){for(var r=d(this.h.a),n=r.next();!n.done;n=r.next()){n=n.value;var i=this.f.get(n),a=e<n.startTime?Ms:e>n.endTime?js:Fs;this.f.set(n,a);for(var o=d(this.i),s=o.next();!s.done;s=o.next())s=s.value,s.bb==i&&s.ab==a&&s.Ua(n,t)}};var Ms=1,Fs=2,js=3;function Us(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.G=null,this.D=this.f=this.m=!1,this.C=0}function Bs(e){return Ks(e,"audio")}function Gs(e){return Ks(e,"video")}function Ks(e,t){var r=e.b.get(t);return r?r.Ia||r.stream:null}function Vs(e,t){return p((function r(){var n,i,a,o,s,l,u,c,d;return F(r,(function(r){switch(r.j){case 1:return n=Ar,k(r,on(e.a.I,n.qa),2);case 2:return e.C++,e.D=!1,i=e.C,a=e.a.I,o=new Map,s=new Set,o.set(n.qa,t),s.add(t),k(r,a.init(o,!1),3);case 3:return e.f?r["return"]():k(r,Qs(e,s),4);case 4:if(e.f)return r["return"]();l=e.a.I.g.isTextVisible()||e.g.alwaysStreamText,e.C!=i||e.b.has(n.qa)||e.D||!l||(u=e.a.Sa(),c=gl(e,u),d=Zs(t,c,0),e.b.set(n.qa,d),bl(e,d,0)),S(r)}}))}))}function Ys(e,t){var r=e.b.get("video");if(r){var n=r.stream;if(n)if(t){var i=n.trickModeVideo;i&&!r.Ia&&(Ws(e,i,!1,0,!1),r.Ia=n)}else(n=r.Ia)&&(r.Ia=null,Ws(e,n,!0,0,!1))}}function Hs(e,t,r,n){t.video&&Ws(e,t.video,r,n,!1),t.audio&&Ws(e,t.audio,r,n,!1)}function Ws(e,t,r,n,i){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)Vs(e,t);else if(a){var o=ml(e,t),s=Array.from(e.b.values()).every((function(e){return e.pa==a.pa}));r&&o!=a.pa&&s?e.b.forEach((function(t){qs(e,t)})):(a.Ia&&(t.trickModeVideo?(a.Ia=t,t=t.trickModeVideo):a.Ia=null),(s=e.h[o])&&s.zb&&(s=e.i.get(t.id))&&s.zb&&(a.stream!=t||i)&&("text"==t.type&&Jr(e.a.I,lt(t.mimeType,t.codecs)),a.stream=t,a.hc=!0,zs(e,a,o)&&a.Kb.abort(),r&&(a.Pa?a.uc=!0:a.Ha?(a.Ma=!0,a.Zb=n,a.uc=!0):(Al(a),yl(e,a,!0,n)["catch"]((function(t){e.a&&e.a.onError(t)}))))))}}function zs(e,t,r){if(!t.Kb)return!1;var n=e.a.Sa(),i=tn(e.a.I,t.type);if(r=(r=il(e,t,n,i,r))&&r.a?r.a-r.b:null,null==r)return!1;var a=t.stream.initSegmentReference;return a&&(r+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*r/a<i-n-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Kb.b.a>r}function $s(e){function t(t){var i=e.a.I;return"text"==t?(t=i.a,t=null!=t.a&&null!=t.b&&(r>=t.a&&r<t.b)):(t=nn(i,t),t=pr(t,r,n)),t}var r=e.a.Sa(),n=e.g.smallGapLimit,i=gl(e,r);if(at(e.b.values(),(function(e){return e.pa==i})))for(var a=d(e.b.keys()),o=a.next();!o.done;o=a.next())o=o.value,t(o)||qs(e,e.b.get(o));else at(e.b.keys(),t)||e.b.forEach((function(t){qs(e,t)}))}function qs(e,t){t.Pa||t.Ma||(t.Ha?(t.Ma=!0,t.Zb=0):null==en(e.a.I,t.type)?null==t.Da&&bl(e,t,0):(Al(t),yl(e,t,!1,0)["catch"]((function(t){e.a&&e.a.onError(t)}))))}function Xs(e,t,r,n,i){return p((function a(){var o,s,l,u,c,d,h;return F(a,(function(a){switch(a.j){case 1:return o=e.a.Sa(),s=gl(e,o),l=Ar,u=new Map,c=new Set,t&&(u.set(l.Ab,t),c.add(t)),r&&(u.set(l.Na,r),c.add(r)),n&&(u.set(l.qa,n),c.add(n)),d=e.a.I,h=e.g.forceTransmuxTS,k(a,d.init(u,h),2);case 2:return e.f?a["return"]():(el(e),k(a,Qs(e,c),3));case 3:if(e.f)return a["return"]();u.forEach((function(t,r){if(!e.b.has(r)){var n=Zs(t,s,i);e.b.set(r,n),bl(e,n,0)}})),S(a)}}))}))}function Zs(e,t,r){return{stream:e,type:e.type,pb:null,Aa:null,Ia:null,hc:!0,pa:t,endOfStream:!1,Ha:!1,Da:null,Ma:!1,Zb:0,uc:!1,Pa:!1,dd:!1,Ib:!1,Zd:r||0,Kb:null}}function Js(e,t){var r=e.h[t];if(r)return r.promise;r={promise:new be,zb:!1},e.h[t]=r;for(var n=new Set,i=d(e.c.periods[t].variants),a=i.next();!a.done;a=i.next())a=a.value,a.video&&n.add(a.video),a.video&&a.video.trickModeVideo&&n.add(a.video.trickModeVideo),a.audio&&n.add(a.audio);for(i=d(e.c.periods[t].textStreams),a=i.next();!a.done;a=i.next())n.add(a.value);return e.v=e.v.then(function(){if(!this.f)return Qs(this,n)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].zb=!0)}.bind(e))["catch"](function(e){this.f||(this.h[t].promise["catch"]((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),r.promise}function Qs(e,t){return p((function r(){var n,i,a,o,s,l,u;return F(r,(function(r){switch(r.j){case 1:n=[];for(var c=d(t),h=c.next();!h.done;h=c.next())i=h.value,(a=e.i.get(i.id))?n.push(a.promise):(e.i.set(i.id,{promise:new be,zb:!1}),n.push(i.createSegmentIndex()));return w(r,2),k(r,Promise.all(n),4);case 4:if(e.f)return r["return"]();C(r,3);break;case 2:if(o=L(r),e.f)return r["return"]();for(r=d(t),h=r.next();!h.done;h=r.next())s=h.value,e.i.get(s.id).promise["catch"]((function(){})),e.i.get(s.id).promise.reject(),e.i["delete"](s.id);throw o;case 3:for(c=d(t),h=c.next();!h.done;h=c.next())l=h.value,u=e.i.get(l.id),u.zb||(u.promise.resolve(),u.zb=!0);S(r)}}))}))}function el(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.I.wa(t):e.a.I.wa(Math.pow(2,32))}function tl(e,t){if(!e.f&&!t.Ha&&null!=t.Da&&!t.Pa)if(t.Da=null,t.Ma)yl(e,t,t.uc,t.Zb);else{try{var r=rl(e,t);null!=r&&(bl(e,t,r),t.Ib=!1)}catch(n){return void _l(e,n)}r=Array.from(e.b.values()),hl(e,t),e.s&&r.every((function(e){return e.endOfStream}))&&e.a.I.endOfStream().then(function(){if(!this.f){var e=this.a.I.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(e)}}.bind(e))}}function rl(e,t){if(fl(t))return e.a.I.rc(t.stream.originalId||""),null;var r=e.a.Sa(),n=nl(e,t,r),i=ml(e,t.stream),a=gl(e,n),o=rn(e.a.I,t.type,r),s=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(n>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(n=e.b.get("text"))&&"application/cea-608"==n.stream.mimeType&&(n.endOfStream=!0),null;if(t.endOfStream=!1,t.pa=a,a!=i)return null;if(o>=s)return.5;if(a=tn(e.a.I,t.type),a=il(e,t,r,a,i),!a)return 1;var l=1/0;return Array.from(e.b.values()).forEach((function(t){fl(t)||(t=nl(e,t,r),l=Math.min(l,t))})),n>=l+e.c.presentationTimeline.a?1:(t.Zd=0,ol(e,t,r,i,a),null)}function nl(e,t,r){return t.pb&&t.Aa?(r=ml(e,t.pb),e.c.periods[r].startTime+t.Aa.endTime):Math.max(r,t.Zd)}function il(e,t,r,n,i){if(t.Aa&&t.stream==t.pb)return al(e,t,i,t.Aa.position+1);if(t.Aa?(r=ml(e,t.pb),r=t.stream.findSegmentPosition(Math.max(0,e.c.periods[r].startTime+t.Aa.endTime-e.c.periods[i].startTime))):r=t.stream.findSegmentPosition(Math.max(0,(n||r)-e.c.periods[i].startTime)),null==r)return null;var a=null;return null==n&&(a=al(e,t,i,Math.max(0,r-1))),a||al(e,t,i,r)}function al(e,t,r,n){return r=e.c.periods[r],t=t.stream.getSegmentReference(n),t?(n=e.c.presentationTimeline,e=n.Hb(),n=n.nb(),r.startTime+t.endTime<e||r.startTime+t.startTime>n?null:t):null}function ol(e,t,r,n,i){var a=e.c.periods[n],o=t.stream,s=e.c.presentationTimeline.Y(),l=e.c.periods[n+1];n=ll(e,t,n,Math.max(0,a.startTime-.1),l?l.startTime+.01:s),t.Ha=!0,t.hc=!1,s=vl(e,t,i),Promise.all([n,s]).then(function(e){if(!this.f&&!this.m)return ul(this,t,r,a,o,i,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ha=!1,t.dd=!1,t.Ma||this.a.Zc(),bl(this,t,0),dl(this,o))}.bind(e))["catch"](function(e){this.f||this.m||(t.Ha=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b["delete"]("text"):7001==e.code?(t.Ha=!1,t.Da=null,bl(this,t,0)):3017==e.code?sl(this,t,e):(t.Ib=!0,e.severity=2,_l(this,e)))}.bind(e))}function sl(e,t,r){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.dd}))){var n=Math.round(100*e.l);if(20<n)e.l-=.2;else{if(!(4<n))return t.Ib=!0,e.m=!0,void e.a.onError(r);e.l-=.04}t.dd=!0}bl(e,t,4)}function ll(e,t,r,n,i){return t.hc?(r=sn(e.a.I,t.type,e.c.periods[r].startTime-t.stream.presentationTimeOffset,n,i),t.stream.initSegmentReference?(e=vl(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return an(this.a.I,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e))["catch"]((function(e){return t.hc=!0,Promise.reject(e)})),Promise.all([r,e])):r):Promise.resolve()}function ul(e,t,r,n,i,a,o){var s=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new wi).fa("emsg",e.M.bind(e,n,a,i.emsgSchemeIdUris)).parse(o),cl(e,t,r).then(function(){if(!this.f)return an(this.a.I,t.type,o,a.startTime+n.startTime,a.endTime+n.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.pb=i,t.Aa=a,Promise.resolve()}.bind(e))}function cl(e,t,r){var n=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),i=en(e.a.I,t.type);return null==i?Promise.resolve():(r=r-i-n,0>=r?Promise.resolve():e.a.I.remove(t.type,i,i+r).then(function(){}.bind(e)))}function dl(e,t){if(!e.s){var r=Array.from(e.b.values());if(1==r.length&&"text"==r[0].type||(e.s=r.every((function(e){return"text"==e.type||!e.Ma&&!e.Pa&&e.Aa}))),e.s){for(r=ml(e,t),e.h[r]||Js(e,r).then(function(){this.f||this.a.Kd()}.bind(e))["catch"](vr.ic),r=0;r<e.c.periods.length;++r)Js(e,r)["catch"](vr.ic);e.a.sf&&e.a.sf()}}}function hl(e,t){var r=ml(e,t.stream);if(t.pa!=r){var n=t.pa,i=Array.from(e.b.values());i.every((function(e){return e.pa==n||fl(e)}))&&i.every(pl)&&Js(e,n).then(function(){if(!this.f&&i.every(function(e){var t=pl(e),r=ml(this,e.stream);return!!fl(e)||t&&e.pa==n&&r!=n}.bind(this))){var e=this.c.periods[n],t=this.a.Ld(e),r=new Map;t.variant&&t.variant.video&&r.set("video",t.variant.video),t.variant&&t.variant.audio&&r.set("audio",t.variant.audio),t.text&&r.set("text",t.text);var a=d(this.b.keys());for(t=a.next();!t.done;t=a.next())if(t=t.value,!r.has(t)&&"text"!=t)return void this.a.onError(new ye(2,5,5005));for(a=d(Array.from(r.keys())),t=a.next();!t.done;t=a.next())if(t=t.value,!this.b.has(t)){if("text"!=t)return void this.a.onError(new ye(2,5,5005));Xs(this,null,null,r.get("text"),e.startTime),r["delete"](t)}for(e=d(Array.from(this.b.keys())),t=e.next();!t.done;t=e.next())t=t.value,(a=r.get(t))?(Ws(this,a,!1,0,!1),bl(this,this.b.get(t),0)):this.b["delete"](t);this.a.Kd()}}.bind(e))["catch"](vr.ic)}}function fl(e){return"text"==e.type&&"application/cea-608"==e.stream.mimeType}function pl(e){return!e.Ha&&null==e.Da&&!e.Ma&&!e.Pa}function gl(e,t){var r=fs(e.c.periods,t+_r);return r?e.c.periods.indexOf(r):0}function ml(e,t){for(var r=e.c.periods,n=0;n<r.length;n++){for(var i=r[n],a=new Set,o=d(i.variants),s=o.next();!s.done;s=o.next())s=s.value,s.audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(i=d(i.textStreams),o=i.next();!o.done;o=i.next())a.add(o.value);if(a.has(t))return n}return-1}function vl(e,t,r){return r=Sa(r.c(),r.b,r.a,e.g.retryParameters),e=e.a.rb.request(1,r),t.Kb=e,e.promise.then((function(e){return t.Kb=null,e.data}))}function yl(e,t,r,n){return p((function i(){var a,o,s;return F(i,(function(i){switch(i.j){case 1:return t.Ma=!1,t.uc=!1,t.Zb=0,t.Pa=!0,n?(o=e.a.Sa(),s=e.a.I.Y(),a=e.a.I.remove(t.type,o+n,s)):a=on(e.a.I,t.type).then(function(){if(!this.f&&r)return this.a.I.flush(t.type)}.bind(e)),k(i,a,2);case 2:if(e.f)return i["return"]();t.pb=null,t.Aa=null,t.Pa=!1,t.endOfStream=!1,bl(e,t,0),S(i)}}))}))}function bl(e,t,r){t.Da=new fe((function(){return p((function r(){var n;return F(r,(function(r){switch(r.j){case 1:return w(r,2),k(r,tl(e,t),4);case 4:C(r,0);break;case 2:n=L(r),e.a&&e.a.onError(n),S(r)}}))}))})).O(r)}function Al(e){null!=e.Da&&(e.Da.stop(),e.Da=null)}function _l(e,t){me(e.G).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function El(e,t,r,n,i,a){if(200<=r&&299>=r&&202!=r)return{uri:i||n,ad:n,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=At(t)}catch(o){}throw new ye(401==r||403==r?2:1,1,1001,n,r,i,e,a)}function Tl(e,t,r,n){var i=new Tl.b;ot(t.headers).forEach((function(e,t){i.append(t,e)}));var a=new Tl.a,o={vd:!1,ge:!1};if(e=Tl.l(e,r,{body:t.body||void 0,headers:i,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,n),e=new Ae(e,(function(){return o.vd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new pe((function(){o.ge=!0,a.abort()}));s.O(t/1e3),e["finally"]((function(){s.stop()}))}return e}function kl(e,t,r,n){var i=new kl.f,a=Date.now(),o=0,s=new Promise((function(s,l){for(var u in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){l(new ye(1,1,7001,e,r))},i.onload=function(t){t=t.target;var n=t.getAllResponseHeaders().trim().split("\r\n"),i={};n=d(n);for(var a=n.next();!a.done;a=n.next())a=a.value.split(": "),i[a[0].toLowerCase()]=a.slice(1).join(": ");try{var o=El(i,t.response,t.status,e,t.responseURL,r);s(o)}catch(u){l(u)}},i.onerror=function(t){l(new ye(1,1,1002,e,t,r))},i.ontimeout=function(){l(new ye(1,1,1003,e,r))},i.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(n(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)i.setRequestHeader(u.toLowerCase(),t.headers[u]);i.send(t.body)}));return new Ae(s,(function(){return i.abort(),Promise.resolve()}))}function Sl(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function wl(e,t){e.b+=t;var r=e.g;return e.g++,e.c.set(r,t),r}function Rl(e,t){this.g=e,this.b=new Map,this.c=!1,this.f=t,this.a=new Sl}function Cl(e,t,r,n,i){var a=wl(e.a,n);n=e.b.get(t)||Promise.resolve(),e.b.set(t,n.then((function(){return p((function t(){var n;return F(t,(function(t){switch(t.j){case 1:return k(t,Il(e,r),2);case 2:if(n=t.o,e.c)throw new ye(2,9,7001);e.a.close(a,n.byteLength);var o=e.a;return e.f(0==o.b?0:o.f/o.b,e.a.a),t["return"](i(n))}}))}))})))}function Ll(e){return p((function t(){return F(t,(function(t){switch(t.j){case 1:return k(t,Promise.all(e.b.values()),2);case 2:return t["return"](e.a.a)}}))}))}function Il(e,t){return p((function r(){var n,i;return F(r,(function(r){switch(r.j){case 1:return n=e.g.request(1,t),k(r,n.promise,2);case 2:return i=r.o,r["return"](i.data)}}))}))}function Ol(e,t){var r=this;this.c=e,this.b=e.objectStore(t),this.a=new be,e.onabort=function(e){e.preventDefault(),r.a.reject()},e.onerror=function(e){e.preventDefault(),r.a.reject()},e.oncomplete=function(){r.a.resolve()}}function Dl(e,t){return new Promise((function(r,n){var i=e.b.openCursor();i.onerror=n,i.onsuccess=function(e){if(e=e.target.result,!e)return r();t(e.key,e.value,e),e["continue"]()}}))}function Pl(e){this.b=e,this.a=[]}function xl(e,t){return Ml(e,t,"readonly")}function Nl(e,t){return Ml(e,t,"readwrite")}function Ml(e,t,r){r=e.b.transaction([t],r);var n=new Ol(r,t);return e.a.push(n),n.promise().then((function(){De(e.a,n)}),(function(){De(e.a,n)})),n}function Fl(e){this.a=new Pl(e)}function jl(){this.a=new Map}function Ul(e){var t=null;if(e.a.forEach((function(e,r){e.getCells().forEach((function(e,n){e.hasFixedKeySpace()||t||(t={path:{ua:r,aa:n},aa:e})}))})),t)return t;throw new ye(2,9,9013,"Could not find a cell that supports add-operations")}function Bl(e,t){e.a.forEach((function(e,r){e.getCells().forEach((function(e,n){t({ua:r,aa:n},e)}))}))}function Gl(e,t,r){if(e=e.a.get(t),!e)throw new ye(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(r),!t)throw new ye(2,9,9013,"Could not find cell with name "+r);return t}function Kl(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}function Vl(e){var t=Array.from(e.a.keys());if(!t.length)throw new ye(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}function Yl(e,t){Hl.set(e,t)}Us.prototype.destroy=function(){for(var e=d(this.b.values()),t=e.next();!t.done;t=e.next())Al(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},Us.prototype.configure=function(e){this.g=e,this.G=new ge({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Us.prototype.start=function(){var e=this;return p((function t(){var r,n,i;return F(t,(function(t){switch(t.j){case 1:return r=e.a.Sa(),n=gl(e,r),i=e.a.Ld(e.c.periods[n]),i.variant||i.text?k(t,Xs(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,r),2):t["return"](new ye(2,5,5005));case 2:if(e.f)return t["return"]();e.a&&e.a.gf&&e.a.gf(),S(t)}}))}))},Us.prototype.M=function(e,t,r,n){var i=n.reader.bd(),a=n.reader.bd(),o=n.reader.F(),s=n.reader.F(),l=n.reader.F(),u=n.reader.F();n=n.reader.Xa(n.reader.K.byteLength-n.reader.ba()),e=e.startTime+t.startTime+s/o,r.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.hf():this.a.onEvent(new Re("emsg",{detail:{startTime:e,endTime:e+l/o,schemeIdUri:i,value:a,timescale:o,presentationTimeDelta:s,eventDuration:l,id:u,messageData:n}})))},Y("shaka.net.HttpFetchPlugin",Tl),Tl.l=function(e,t,r,n,i){return p((function a(){var o,s,l,u,c,d,h,f,g,m,v,y,b,A;return F(a,(function(a){switch(a.j){case 1:return o=Tl.g,s=Tl.c,d=c=0,h=Date.now(),w(a,2),k(a,o(e,r),4);case 4:return l=a.o,f=l.clone().body.getReader(),m=(g=l.headers.get("Content-Length"))?parseInt(g,10):0,v=function(e){function t(){return p((function r(){var n,a;return F(r,(function(r){switch(r.j){case 1:return w(r,2),k(r,f.read(),4);case 4:n=r.o,C(r,3);break;case 2:return L(r),r["return"]();case 3:n.done||(c+=n.value.byteLength),a=Date.now(),(100<a-h||n.done)&&(i(a-h,c-d,m-c),d=c,h=a),n.done?e.close():(e.enqueue(n.value),t()),S(r)}}))}))}t()},new s({start:v}),k(a,l.arrayBuffer(),5);case 5:u=a.o,C(a,3);break;case 2:if(y=L(a),n.vd)throw new ye(1,1,7001,e,t);if(n.ge)throw new ye(1,1,1003,e,t);throw new ye(1,1,1002,e,y,t);case 3:return b={},A=l.headers,A.forEach((function(e,t){b[t.trim()]=e})),a["return"](El(b,u,l.status,e,l.url,t))}}))}))},Tl.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(Af){return!1}return!(!e.fetch||!e.AbortController)},Tl.isSupported=Tl.isSupported,Tl.g=e.fetch,Tl.a=e.AbortController,Tl.c=e.ReadableStream,Tl.b=e.Headers,Tl.isSupported()&&(Be("http",Tl,2),Be("https",Tl,2)),Y("shaka.net.HttpXHRPlugin",kl),kl.f=e.XMLHttpRequest,Be("http",kl,1),Be("https",kl,1),Sl.prototype.close=function(e,t){if(this.c.has(e)){var r=this.c.get(e);this.c["delete"](e),this.f+=r,this.a+=t}},Rl.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Ol.prototype.abort=function(){try{this.c.abort()}catch(Af){}return this.a["catch"]((function(){}))},Ol.prototype.store=function(){return this.b},Ol.prototype.promise=function(){return this.a},Pl.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},Fl.prototype.destroy=function(){return this.a.destroy()},Fl.prototype.getAll=function(){var e=this;return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return r=xl(e.a,"session-ids"),n=[],k(t,Dl(r,(function(e,t){n.push(t)})),2);case 2:return k(t,r.promise(),3);case 3:return t["return"](n)}}))}))},Fl.prototype.add=function(e){var t=Nl(this.a,"session-ids"),r=t.store();e=d(e);for(var n=e.next();!n.done;n=e.next())r.add(n.value);return t.promise()},Fl.prototype.remove=function(e){var t=this;return p((function r(){var n;return F(r,(function(r){switch(r.j){case 1:return n=Nl(t.a,"session-ids"),k(r,Dl(n,(function(t,r,n){0<=e.indexOf(r.sessionId)&&n["delete"]()})),2);case 2:return k(r,n.promise(),0)}}))}))},jl.prototype.destroy=function(){for(var e=[],t=d(this.a.values()),r=t.next();!r.done;r=t.next())e.push(r.value.destroy());return this.a.clear(),Promise.all(e)},jl.prototype.init=function(){var e=this;Hl.forEach((function(t,r){var n=t();n&&e.a.set(r,n)}));for(var t=[],r=d(this.a.values()),n=r.next();!n.done;n=r.next())t.push(n.value.init());return Promise.all(t)},jl.prototype.erase=function(){var e=this;return p((function t(){var r,n,i;return F(t,(function(t){switch(t.j){case 1:return r=Array.from(e.a.values()),n=0<r.length,n||(i=Hl,i.forEach((function(e){(e=e())&&r.push(e)}))),k(t,Promise.all(r.map((function(e){return e.erase()}))),2);case 2:if(!n)return k(t,Promise.all(r.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},Y("shaka.offline.StorageMuxer.register",Yl),Y("shaka.offline.StorageMuxer.unregister",(function(e){Hl["delete"](e)}));var Hl=new Map;function Wl(e){this.a=new Pl(e)}function zl(e){return Promise.reject(new ye(2,9,9011,"Cannot add new value to "+e))}function $l(e,t,r,n){e=Nl(e.a,t);var i=e.store();return r.forEach((function(e){i["delete"](e).onsuccess=function(){return n(e)}})),e.promise()}function ql(e,t,r){e=xl(e.a,t);var n=e.store(),i={},a=[];return r.forEach((function(e){n.get(e).onsuccess=function(t){t=t.target.result,void 0==t&&a.push(e),i[e]=t}})),e.promise().then((function(){return a.length?Promise.reject(new ye(2,9,9012,"Could not find values for "+a)):r.map((function(e){return i[e]}))}))}function Xl(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Zl),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function Zl(e){return ru(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(Jl)}}function Jl(e){var t=e.$e?tu(e.$e):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(Ql),variantIds:e.variantIds}}function Ql(e){var t=tu(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function eu(e){return{data:e.data}}function tu(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ye(2,9,9004,"Could not parse uri "+e)}function ru(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),r=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!r.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),r.forEach((function(e){e.variantIds=[]}));var n=0;if(r.length&&!t.length){var i=n++;r.forEach((function(e){e.variantIds.push(i)}))}if(!r.length&&t.length){var a=n++;t.forEach((function(e){e.variantIds.push(a)}))}r.length&&t.length&&t.forEach((function(e){r.forEach((function(t){var r=n++;e.variantIds.push(r),t.variantIds.push(r)}))}))}}function nu(e,t,r,n){this.a=new Pl(e),this.c=t,this.b=r,this.f=n}function iu(e,t,r){if(e.f)return Promise.reject(new ye(1,9,9011,"Cannot add new value to "+t));e=Nl(e.a,t);var n=e.store(),i=[];return r.forEach((function(e){n.add(e).onsuccess=function(e){i.push(e.target.result)}})),e.promise().then((function(){return i}))}function au(e,t,r,n){e=Nl(e.a,t);var i=e.store();return r.forEach((function(e){i["delete"](e).onsuccess=function(){return n(e)}})),e.promise()}function ou(e,t,r){e=xl(e.a,t);var n=e.store(),i={},a=[];return r.forEach((function(e){var t=n.get(e);t.onsuccess=function(){void 0==t.result&&a.push(e),i[e]=t.result}})),e.promise().then((function(){return a.length?Promise.reject(new ye(1,9,9012,"Could not find values for "+a)):r.map((function(e){return i[e]}))}))}function su(){this.g=this.c=this.b=this.a=this.f=null}function lu(){var t=new be,r=e.indexedDB.deleteDatabase("shaka_offline_db");return r.onblocked=function(){},r.onsuccess=function(){t.resolve()},r.onerror=function(e){t.reject(new ye(2,9,9001,r.error)),e.preventDefault()},t}function uu(e,t,r,n){this.a=e,this.g=t,this.f=r,this.c=n,this.b=["offline:",e,"/",t,"/",r,"/",n].join("")}function cu(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var r=e[2];if(!r)return null;var n=e[3];return n&&null!=t?new uu(t,r,n,Number(e[4])):null}function du(e,t){this.b=e,this.a=t}function hu(e,t){var r=new ka(null,0);r.wa(t.duration);var n=t.periods.map((function(t){return fu(e,t,r)})),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&n.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=i}))})),{presentationTimeline:r,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:n}}function fu(e,t,r){var n=t.streams.filter((function(e){return"audio"==e.contentType})),i=t.streams.filter((function(e){return"video"==e.contentType}));return n=pu(e,n,i),i=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return gu(e,t)})),t.streams.forEach((function(n){n=n.segments.map((function(t,r){return mu(e,r,t)})),r.sb(n,t.startTime)})),{startTime:t.startTime,variants:Array.from(n.values()),textStreams:i}}function pu(e,t,r){for(var n=new Set,i=d(t),a=i.next();!a.done;a=i.next()){var o=d(a.value.variantIds);for(a=o.next();!a.done;a=o.next())n.add(a.value)}for(i=d(r),a=i.next();!a.done;a=i.next())for(o=d(a.value.variantIds),a=o.next();!a.done;a=o.next())n.add(a.value);for(i=new Map,n=d(n),a=n.next();!a.done;a=n.next())a=a.value,i.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=d(t),n=t.next();!n.done;n=t.next())for(n=n.value,a=gu(e,n),o=d(n.variantIds),n=o.next();!n.done;n=o.next())n=i.get(n.value),n.language=a.language,n.primary=n.primary||a.primary,n.audio=a;for(r=d(r),t=r.next();!t.done;t=r.next())for(n=t.value,t=gu(e,n),a=d(n.variantIds),n=a.next();!n.done;n=a.next())n=i.get(n.value),n.primary=n.primary||t.primary,n.video=t;return i}function gu(e,t){var r=t.segments.map((function(t,r){return mu(e,r,t)})),n=new ea(r);return r={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return n.find(e)},getSegmentReference:function(e){return n.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(r.initSegmentReference=vu(e,t.initSegmentKey)),r}function mu(e,t,r){var n=new uu("segment",e.b,e.a,r.dataKey);return new Zi(t,r.startTime,r.endTime,(function(){return[n.toString()]}),0,null)}function vu(e,t){var r=new uu("segment",e.b,e.a,t);return new Xi((function(){return[r.toString()]}),0,null)}function yu(){this.a=null}function bu(e){var t=cu(e);return t&&"manifest"==t.a?bu.h(e):t&&"segment"==t.a?bu.i(t.key(),t):_e(new ye(2,1,9004,e))}function Au(e,t,r){return p((function n(){var i,a,o,s,l,u;return F(n,(function(n){switch(n.j){case 1:i=[];for(var c=[],h=d(r),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=d(c),m=g.next();!m.done;m=g.next())if(m=m.value,Eu(m.info,f)){m.sessionIds.push(f.sessionId),p=!0;break}p||c.push({info:f,sessionIds:[f.sessionId]})}a=d(c),o=a.next();case 2:if(o.done){n.A(4);break}return s=o.value,l=_u(e,t,s),k(n,l,5);case 5:u=n.o,i=i.concat(u),o=a.next(),n.A(2);break;case 4:return n["return"](i)}}))}))}function _u(e,t,r){return p((function n(){var i,a;return F(n,(function(n){switch(n.j){case 1:return i=new Ot({rb:t,onError:function(){},kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),w(n,2),i.configure(e),k(n,Nt(i,r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities),4);case 4:C(n,3);break;case 2:return L(n),k(n,i.destroy(),5);case 5:return n["return"]([]);case 3:return w(n,6),k(n,Ft(i),8);case 8:C(n,7);break;case 6:return L(n),k(n,i.destroy(),9);case 9:return n["return"]([]);case 7:return a=[],k(n,Promise.all(r.sessionIds.map((function(e){return p((function t(){return F(t,(function(t){switch(t.j){case 1:return w(t,2),k(t,jt(i,e),4);case 4:a.push(e),C(t,0);break;case 2:L(t),S(t)}}))}))}))),10);case 10:return k(n,i.destroy(),11);case 11:return n["return"](a)}}))}))}function Eu(e,t){function r(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&xe(e.audioCapabilities,t.audioCapabilities,r)&&xe(e.videoCapabilities,t.videoCapabilities,r)}function Tu(e,t){var r=Hc(),n=this;this.g=t,this.c=e,this.i=r,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then((function(){return Su(n)}))}function ku(e,t){var r={tb:function(){},jc:function(){},Wa:function(){},onError:function(){},lc:function(){},sg:function(){}};return e.f.push({create:t,ta:r}),e.b&&e.b.abort(),Ru(e),r}function Su(e){return p((function t(){return F(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.f.length||e.a&&!e.a.Ta)var r=!1;else{e.a&&(e.a.ta.Wa(),e.a=null),r=e.f.shift();var n=r.create(e.i);n?(r.ta.tb(),e.a={node:n.node,payload:n.payload,Ta:n.Ta,ta:r.ta}):r.ta.lc(),r=!0}return r?r=Promise.resolve():e.a?r=wu(e):(e.g.ff(e.c),e.h=new be,r=e.h),k(t,r,1)}t.A(0)}}))}))}function wu(e){return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return e.c=e.g.Pe(e.c,e.i,e.a.node,e.a.payload),w(t,2),e.b=e.g.ze(e.c,e.i,e.a.payload),k(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.jc(),e.a=null),C(t,0);break;case 2:return r=L(t),7001==r.code?e.a.ta.Wa():e.a.ta.onError(r),e.a=null,e.b=null,n=e,k(t,e.g.handleError(e.i,r),5);case 5:n.c=t.o,S(t)}}))}))}function Ru(e){e.h&&(e.h.resolve(),e.h=null)}function Cu(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var r=e.textTracks[t];r.mode="disabled","Shaka Player TextTrack"==r.label&&(this.a=r)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Lu(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(r){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function Iu(e,t){var r=e.mode;e.mode="showing"==r?"showing":"hidden";for(var n=e.cues,i=n.length-1;0<=i;i--){var a=n[i];a&&t(a)&&e.removeCue(a)}e.mode=r}function Ou(e,t,r,n,i){var a,o=i in n,s=!0;for(a in t){var l=i+"."+a,u=o?n[i]:r[a];o||a in r?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=Ie(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ie(u)),l=Ou(e[a],t[a],u,n,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||t[a].constructor!=u.constructor?s=!1:e[a]=t[a]:s=!1}return s}function Du(e,t){for(var r={},n=r,i=0,a=0;;){if(i=e.indexOf(".",i),0>i)break;0!=i&&"\\"==e[i-1]||(a=e.substring(a,i).replace(/\\\./g,"."),n[a]={},n=n[a],a=i+1),i+=1}return n[e.substring(a).replace(/\\\./g,".")]=t,r}function Pu(){}function xu(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var r={retryParameters:ve(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e){return e},fairPlayTransform:!0},n={retryParameters:ve(),availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},i={retryParameters:ve(),failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};pt("Web0S")&&(i.stallEnabled=!1);var a={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},o={drm:r,manifest:n,streaming:i,offline:a,abrFactory:Pn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return Mu(e,o.preferredAudioLanguage)},o}function Nu(e,t,r){var n={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ou(e,t,r||xu(),n,"")}function Mu(e,t){var r=e.filter((function(e){return"variant"==e.type})),n=[],i=gn(t,r.map((function(e){return e.language})));i&&(n=r.filter((function(e){return fn(e.language)==i}))),0==n.length&&(n=r.filter((function(e){return e.primary}))),0==n.length&&(r.map((function(e){return e.language})),n=r);var a=n.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),n=a.filter((function(e){return e.height==a[0].height}))),r=[],n.length){var o=Math.floor(n.length/2);n.sort((function(e,t){return e.bandwidth-t.bandwidth})),r.push(n[o])}for(n=d(e),o=n.next();!o.done;o=n.next())o=o.value,"text"==o.type&&r.push(o);return r}function Fu(){this.a=null,this.b=[]}function ju(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var r=Date.now()/1e3;e.a.duration=r-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:r,state:t,duration:0})}}function Uu(e,t){var r=0;e.a&&e.a.state==t&&(r+=e.a.duration);for(var n=d(e.b),i=n.next();!i.done;i=n.next())i=i.value,r+=i.state==t?i.duration:0;return r}function Bu(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var r=[],n=d(e.b),i=n.next();!i.done;i=n.next())r.push(t(i.value));return e.a&&r.push(t(e.a)),r}function Gu(){this.b=this.c=null,this.a=[]}function Ku(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new Fu,this.c=new Gu}function Vu(t,r){var n=this;Le.call(this),this.h=$c,this.a=null,this.eb=!1,this.i=new Ze,this.vc=this.l=this.Bb=this.c=this.m=this.f=this.Sb=this.P=this.Tb=this.W=this.gb=this.s=this.D=this.g=this.G=null,this.Hd=1e9,this.Wb=new Set,this.ib=!0,this.Ea=null,this.Dd=!1,this.Bd=0,this.na=null,this.$=new Vo,this.b=fc(this),this.Xb={width:1/0,height:1/0},this.v=null,this.Ub=new Jo(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ma=this.b.preferredTextLanguage,this.cb=this.b.preferredTextRole,r&&r(this),this.G=ac(this),this.i.w(e,"online",(function(){n.gd()})),this.C={name:"detach"},this.M={name:"attach"},this.Fa={name:"unload"},this.Ec={name:"manifest-parser"},this.Cc={name:"manifest"},this.fb={name:"media-source"},this.wc={name:"drm-engine"},this.T={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.hb={name:"src-equals"};var i=new Map;i.set(this.M,(function(e,t){return ke($u(n,e,t))})),i.set(this.C,(function(e){return e.u&&(n.i.ea(e.u,"error"),e.u=null),n.a=null,e=Promise.resolve(),ke(e)})),i.set(this.Fa,(function(e){return ke(qu(n,e))})),i.set(this.fb,(function(e){return e=Xu(n,e),ke(e)})),i.set(this.Ec,(function(e,t){var r=Zu(n,e,t);return ke(r)})),i.set(this.Cc,(function(e){return Ju(n,e)})),i.set(this.wc,(function(){var e=Qu(n);return ke(e)})),i.set(this.T,(function(e,t){return ke(ec(n,e,t))})),i.set(this.Ic,(function(e){return e=tc(n,e),ke(e)})),i.set(this.hb,(function(e,t){return rc(n,e,t)})),this.jb=new Tu(this.C,{Pe:function(e,t,r,i){var a=null;return e==n.C&&(a=r==n.C?n.C:n.M),e==n.M&&(a=r==n.C||t.u!=i.u?n.C:r==n.M?n.M:r==n.fb||r==n.T?n.fb:r==n.hb?n.Ic:null),e==n.fb&&(a=r==n.T&&t.u==i.u?n.Ec:n.Fa),e==n.Ec&&(a=Yc(n.T,n.Cc,n.Fa,r,t,i)),e==n.Cc&&(a=Yc(n.T,n.wc,n.Fa,r,t,i)),e==n.wc&&(a=Yc(n.T,n.T,n.Fa,r,t,i)),e==n.Ic&&(a=r==n.hb&&t.u==i.u?n.hb:n.Fa),e!=n.T&&e!=n.hb||(a=n.Fa),e==n.Fa&&(a=i.u&&t.u==i.u?n.M:n.C),a},ze:function(e,t,r){return n.dispatchEvent(new Re("onstatechange",{state:e.name})),i.get(e)(t,r)},handleError:function(e){return p((function t(){return F(t,(function(t){switch(t.j){case 1:return k(t,qu(n,e),2);case 2:return t["return"](e.u?n.M:n.C)}}))}))},ff:function(e){n.dispatchEvent(new Re("onstateidle",{state:e.name}))}}),t&&this.Cb(t,!0)}r=Wl.prototype,r.destroy=function(){return this.a.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return zl("segment")},r.removeSegments=function(e,t){return $l(this,"segment",e,t)},r.getSegments=function(e){return ql(this,"segment",e).then((function(e){return e.map(eu)}))},r.addManifests=function(){return zl("manifest")},r.updateManifestExpiration=function(e,t){var r=Nl(this.a,"manifest"),n=r.store(),i=new be;return n.get(e).onsuccess=function(r){(r=r.target.result)?(r.expiration=t,n.put(r),i.resolve()):i.reject(new ye(2,9,9012,"Could not find values for "+e))},r.promise().then((function(){return i}))},r.removeManifests=function(e,t){return $l(this,"manifest",e,t)},r.getManifests=function(e){return ql(this,"manifest",e).then((function(e){return e.map(Xl)}))},r.getAllManifests=function(){var e=this;return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return r=xl(e.a,"manifest"),n=new Map,k(t,Dl(r,(function(e,t){n.set(e,Xl(t))})),2);case 2:return k(t,r.promise(),3);case 3:return t["return"](n)}}))}))},r=nu.prototype,r.destroy=function(){return this.a.destroy()},r.hasFixedKeySpace=function(){return this.f},r.addSegments=function(e){return iu(this,this.c,e)},r.removeSegments=function(e,t){return au(this,this.c,e,t)},r.getSegments=function(e){return ou(this,this.c,e)},r.addManifests=function(e){return iu(this,this.b,e)},r.updateManifestExpiration=function(e,t){var r=Nl(this.a,this.b),n=r.store();return n.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,n.put(r,e))},r.promise()},r.removeManifests=function(e,t){return au(this,this.b,e,t)},r.getManifests=function(e){return ou(this,this.b,e)},r.getAllManifests=function(){var e=this;return p((function t(){var r,n;return F(t,(function(t){switch(t.j){case 1:return r=xl(e.a,e.b),n=new Map,k(t,Dl(r,(function(e,t){n.set(e,t)})),2);case 2:return k(t,r.promise(),3);case 3:return t["return"](n)}}))}))},r=su.prototype,r.init=function(){var t=this,r=new be,n=e.indexedDB.open("shaka_offline_db",4);return n.onsuccess=function(e){e=e.target.result,t.f=e;var n=e.objectStoreNames;n=n.contains("manifest")&&n.contains("segment")?new Wl(e):null,t.a=n,n=e.objectStoreNames,n=n.contains("manifest-v2")&&n.contains("segment-v2")?new nu(e,"segment-v2","manifest-v2",!0):null,t.b=n,n=e.objectStoreNames,n=n.contains("manifest-v3")&&n.contains("segment-v3")?new nu(e,"segment-v3","manifest-v3",!1):null,t.c=n,e=e.objectStoreNames.contains("session-ids")?new Fl(e):null,t.g=e,r.resolve()},n.onupgradeneeded=function(e){e=e.target.result;for(var t=d(["segment-v3","manifest-v3","session-ids"]),r=t.next();!r.done;r=t.next())r=r.value,e.objectStoreNames.contains(r)||e.createObjectStore(r,{autoIncrement:!0})},n.onerror=function(e){r.reject(new ye(2,9,9001,n.error)),e.preventDefault()},r},r.destroy=function(){var e=this;return p((function t(){return F(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return k(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return k(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return k(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return k(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),S(t)}}))}))},r.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},r.getEmeSessionCell=function(){return this.g},r.erase=function(){var e=this;return p((function t(){return F(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return k(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return k(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return k(t,e.c.destroy(),6);case 6:return e.f&&e.f.close(),k(t,lu(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,k(t,e.init(),0)}}))}))},Yl("idb",(function(){return e.indexedDB?new su:null})),uu.prototype.ua=function(){return this.g},uu.prototype.aa=function(){return this.f},uu.prototype.key=function(){return this.c},uu.prototype.toString=function(){return this.b},r=yu.prototype,r.configure=function(){},r.start=function(e){var t=this;return p((function r(){var n,i,a,o,s,l;return F(r,(function(r){switch(r.j){case 1:return n=cu(e),t.a=n,null==n||"manifest"!=n.a?r["return"](Promise.reject(new ye(2,1,9004,n))):(i=new jl,R(r,2),k(r,i.init(),4));case 4:return k(r,Gl(i,n.ua(),n.aa()),5);case 5:return a=r.o,k(r,a.getManifests([n.key()]),6);case 6:return o=r.o,s=o[0],l=new du(n.ua(),n.aa()),r["return"](hu(l,s));case 2:return I(r),k(r,i.destroy(),7);case 7:O(r,0)}}))}))},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var r=this;return p((function n(){var i,a,o,s,l,u,c;return F(n,(function(n){switch(n.j){case 1:return i=r.a,a=new jl,w(n,2,3),k(n,a.init(),5);case 5:return k(n,Gl(a,i.ua(),i.aa()),6);case 6:return o=n.o,k(n,o.getManifests([i.key()]),7);case 7:if(s=n.o,l=s[0],u=l.sessionIds.includes(e),c=void 0==l.expiration||l.expiration>t,!u||!c){n.A(3);break}return k(n,o.updateManifestExpiration(i.key(),t),3);case 3:return I(n),k(n,a.destroy(),10);case 10:O(n,0);break;case 2:L(n),n.A(3)}}))}))},Ta.Nb("application/x-offline-manifest",yu),Y("shaka.offline.OfflineScheme",bu),bu.h=function(e){return e={uri:e,ad:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},Te(e)},bu.i=function(e,t){var r=new jl;return Te(void 0).U((function(){return r.init()})).U((function(){return Gl(r,t.ua(),t.aa())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,ad:t,data:e[0].data,headers:{}}}))["finally"]((function(){return r.destroy()}))},Be("offline",bu),Tu.prototype.destroy=function(){var e=this;return p((function t(){var r;return F(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),Ru(e),k(t,e.m,2);case 2:e.a&&e.a.ta.Wa();for(var n=d(e.f),i=n.next();!i.done;i=n.next())r=i.value,r.ta.Wa();e.a=null,e.f=[],e.g=null,S(t)}}))}))},Y("shaka.text.SimpleTextDisplayer",Cu),Cu.prototype.remove=function(e,t){return!!this.a&&(Iu(this.a,(function(r){return r.startTime<t&&r.endTime>e})),!0)},Cu.prototype.remove=Cu.prototype.remove,Cu.prototype.append=function(e){for(var t=Lu,r=[],n=0;n<e.length;n++){var i=t(e[n]);i&&r.push(i)}r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},Cu.prototype.append=Cu.prototype.append,Cu.prototype.destroy=function(){return this.a&&Iu(this.a,(function(){return!0})),this.a=null,Promise.resolve()},Cu.prototype.destroy=Cu.prototype.destroy,Cu.prototype.isTextVisible=function(){return"showing"==this.a.mode},Cu.prototype.isTextVisible=Cu.prototype.isTextVisible,Cu.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Cu.prototype.setTextVisibility=Cu.prototype.setTextVisibility,Y("shaka.util.ConfigUtils.mergeConfigObjects",Ou),Y("shaka.util.ConfigUtils.convertToConfigObject",Du),Y("shaka.util.PlayerConfiguration",Pu),Pu.mergeConfigObjects=Nu,H(Vu,Le),Y("shaka.Player",Vu),Vu.prototype.destroy=function(){var e=this;return p((function t(){var r;return F(t,(function(t){switch(t.j){case 1:return e.h==zc?t["return"]():(e.h=zc,r=ku(e.jb,(function(){return{node:e.C,payload:Hc(),Ta:!1}})),k(t,new Promise((function(e){r.tb=function(){},r.jc=function(){e()},r.Wa=function(){e()},r.onError=function(){e()},r.lc=function(){e()}})),2));case 2:return k(t,e.jb.destroy(),3);case 3:if(e.i&&(e.i.release(),e.i=null),e.vc=null,e.l=null,e.b=null,!e.G){t.A(0);break}return k(t,e.G.destroy(),5);case 5:e.G=null,S(t)}}))}))},Vu.prototype.destroy=Vu.prototype.destroy,Vu.version="v2.5.5";var Yu=["2","5"];Un=new function(e){this.a=e,this.c=Fn,this.b=jn}(new Nn(Number(Yu[0]),Number(Yu[1])));var Hu=["output-restricted","internal-error"],Wu={};function zu(e){if(e.ya)return!1;if(!ht())return!0;var t=e.mimeType;return e=e.uri||"",t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[Ta.getExtension(e)]),!!t&&(!!ft(t)&&(!Ta.isSupported(e,t)||!!navigator.vendor&&navigator.vendor.includes("Apple")))}function $u(e,t,r){return null==t.u&&(t.u=r.u,e.i.w(t.u,"error",(function(){var t=Ic(e);t&&e.Ka(t)}))),e.a=t.u,Promise.resolve()}function qu(e,t){return p((function r(){return F(r,(function(r){switch(r.j){case 1:if(e.h!=zc&&(e.h=$c),e.dispatchEvent(new Re("unloading")),t.ya=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.i.ea(t.u,"loadeddata"),e.i.ea(t.u,"playing"),e.i.ea(t.u,"pause"),e.i.ea(t.u,"ended"),e.i.ea(t.u,"ratechange")),e.gb&&(e.gb.release(),e.gb=null),e.Tb&&(e.Tb.stop(),e.Tb=null),!e.m){r.A(2);break}return k(r,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.l){r.A(4);break}return k(r,e.l.stop(),4);case 4:if(!e.f){r.A(6);break}return k(r,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.s&&(e.s.release(),e.s=null),!e.D){r.A(8);break}return k(r,e.D.destroy(),9);case 9:e.D=null;case 8:if(t.u&&t.u.src&&(t.u.removeAttribute("src"),t.u.load()),!e.g){r.A(10);break}return k(r,e.g.destroy(),11);case 11:e.g=null;case 10:e.$.a.clear(),e.Bb=null,e.P=null,e.Wb.clear(),e.c=null,e.v=null,e.xc=null,e.ib=!0,bc(e),S(r)}}))}))}function Xu(t,r){return p((function n(){var i,a,o,s;return F(n,(function(n){switch(n.j){case 1:return i=e.muxjs?new dr:new hr,a=t.b.textDisplayFactory,o=new a,t.xc=a,s=new qr(r.u,i,o),k(n,s.s,2);case 2:t.D=s,S(n)}}))}))}function Zu(e,t,r){return p((function n(){var i,a,o;return F(n,(function(n){switch(n.j){case 1:if(t.ya=r.ya,t.mimeType=r.mimeType,t.uri=r.uri,i=t.uri,a=e.G,e.Bb=i,t.ya){e.m=t.ya(),n.A(2);break}return o=e,k(n,Ta.create(i,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.m=n.o;case 2:e.m.configure(e.b.manifest),S(n)}}))}))}function Ju(e,t){var r=t.uri,n=e.G;e.Sb=new Ds,Ps(e.Sb,(function(t){Lc(e,"timelineregionadded",t)}));var i={networkingEngine:n,filterNewPeriod:function(t){return e.Fc(t)},filterAllPeriods:function(t){return gc(e,t)},onTimelineRegionAdded:function(t){var r=e.Sb;e:{for(var n=d(r.a),i=n.next();!i.done;i=n.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.startTime==t.startTime&&i.endTime==t.endTime){n=i;break e}n=null}null==n&&(r.a.add(t),r.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ka(t)}};return new Ae(Promise.resolve().then((function(){return p((function t(){var n;return F(t,(function(t){switch(t.j){case 1:return n=e,k(t,e.m.start(r,i),2);case 2:if(n.c=t.o,e.dispatchEvent(new Re("manifestparsed")),0==e.c.periods.length)throw new ye(2,4,4014);nc(e.c.periods),S(t)}}))}))})),(function(){return e.m.stop()}))}function Qu(e){return p((function t(){return F(t,(function(t){switch(t.j){case 1:return e.g=new Ot({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){Oc(e,t)},onExpirationUpdated:function(t,r){Dc(e,t,r)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),k(t,xt(e.g,hs(e.c.periods),e.c.offlineSessionIds),2);case 2:gc(e,e.c.periods),S(t)}}))}))}function ec(e,t,r){return p((function n(){var i,a,o,s,l,u,c,h,f;return F(n,(function(n){switch(n.j){case 1:return t.startTime=r.startTime,i=t.u,a=t.uri,e.Bb=a,e.v=new Ku,o=function(){return Ac(e)},s=function(){var t=e.a.playbackRate;0!=t&&e.W.set(t)},e.i.w(i,"playing",o),e.i.w(i,"pause",o),e.i.w(i,"ended",o),e.i.w(i,"ratechange",s),l=e.b.abrFactory,e.l&&e.vc==l||(e.vc=l,e.l=new l,e.l.configure(e.b.abr)),pc(e,e.c.periods),e.Ub=new Jo(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.ma=e.b.preferredTextLanguage,Pc(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),k(n,e.g.Cb(i),2);case 2:return e.l.init((function(t,r,n){r=void 0!==r&&r,n=void 0===n?0:n;e:{for(var i=d(e.c.periods),a=i.next();!a.done;a=i.next())if(a=a.value,a.variants.includes(t)){i=a;break e}i=null}dc(e,i,t,!0),e.f&&(Hs(e.f,t,r,n),Tc(e))})),e.s=oc(e,t.startTime),e.gb=sc(e),e.W=new ms({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),u=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),lc(e,u),e.f=uc(e),e.f.configure(e.b.streaming),ic(e),e.h=qc,e.dispatchEvent(new Re("streaming")),k(n,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(c=e.s.h(),h=yc(e,c),e.s.m(h)),e.c.periods.forEach(e.Fc.bind(e)),kc(e),Tc(e),f=Bc(e)||e.c.periods[0],f.variants.some((function(e){return e.primary})),_c(e,f.variants),e.i.da(i,"loadeddata",(function(){e.v.b=Date.now()/1e3-r.od})),S(n)}}))}))}function tc(e,t){return p((function r(){var n,i;return F(r,(function(r){switch(r.j){case 1:return n=Ar,e.g=new Ot({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){Oc(e,t)},onExpirationUpdated:function(t,r){Dc(e,t,r)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:n.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},k(r,xt(e.g,[i],[]),2);case 2:return k(r,e.g.Cb(t.u),0)}}))}))}function rc(e,t,r){function n(){return Ac(e)}if(t.uri=r.uri,t.startTime=r.startTime,e.Bb=t.uri,e.v=new Ku,e.s=new Ss(t.u),null!=t.startTime&&e.s.m(t.startTime),e.W=new ms({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),lc(e,e.b.streaming.rebufferingGoal),e.i.w(t.u,"playing",n),e.i.w(t.u,"pause",n),e.i.w(t.u,"ended",n),e.i.da(t.u,"loadeddata",(function(){e.v.b=Date.now()/1e3-r.od})),e.a.audioTracks&&(e.i.w(e.a.audioTracks,"addtrack",(function(){return kc(e)})),e.i.w(e.a.audioTracks,"removetrack",(function(){return kc(e)}))),e.a.textTracks){var i=e.a.textTracks;e.i.w(i,"addtrack",(function(){return kc(e)})),e.i.w(i,"removetrack",(function(){return kc(e)}))}t.u.src=t.uri,e.h=Xc,e.dispatchEvent(new Re("streaming"));var a=new be;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?a.resolve():e.a.error?a.reject(Ic(e)):(e.i.da(e.a,"loadeddata",(function(){a.resolve()})),e.i.da(e.a,"error",(function(){a.reject(Ic(e))}))),new Ae(a,(function(){return a.reject(new ye(2,7,7001)),Promise.resolve()}))}function nc(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}function ic(e){function t(e){var t="";e.video&&(t=ct(e.video.codecs)[0]);var r="";return e.audio&&(r=ct(e.audio.codecs)[0]),t+"-"+r}var r=e.c.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);r=Cn(r,e.b.preferredAudioChannelCount);var n=new Ce;r.forEach((function(e){var r=t(e);n.push(r,e)}));var i=null,a=1/0;n.forEach((function(e,t){var r=0,n=0;t.forEach((function(e){r+=e.bandwidth||0,++n}));var o=r/n;o<a&&(i=e,a=o)})),e.c.periods.forEach((function(e){e.variants=e.variants.filter((function(e){return t(e)==i}))}))}function ac(e){return new Fe((function(t,r){e.l&&e.l.segmentDownloaded(t,r)}))}function oc(e,t){return new ws(e.a,e.c,e.b.streaming,t,(function(){e.gb&&ds(e.gb,!0),e.f&&$s(e.f)}),(function(t){return e.dispatchEvent(t)}))}function sc(e){var t=new ps(e.c);gs(t,(function(){kc(e)}));var r=new xs(e.Sb);Ns(r,(function(t){Lc(e,"timelineregionenter",t)}),(function(t){Lc(e,"timelineregionexit",t)}),(function(t,r){r||(Lc(e,"timelineregionenter",t),Lc(e,"timelineregionexit",t))}));var n=new cs(e.a);return n.a.add(t),n.a.add(r),n}function lc(e,t){e.P=new ts(t,Math.min(.5,t/2)),e.P.a=rs,bc(e),e.Tb=new pe((function(){switch(e.h){case Xc:var t=!!e.a.ended||fr(e.a.buffered)>=e.a.duration-.1;break;case qc:e:if(e.a.ended||Qr(e.D))t=!0;else{if(e.c.presentationTimeline.V()){var r=e.c.presentationTimeline.nb();if(fr(e.a.buffered)>=r){t=!0;break e}}t=!1}break;default:t=!1}var n=gr(e.a.buffered,e.a.currentTime);r=e.P;var i=t,a=r.b.get(r.a);t=r.a,n=i||n>=a?ns:rs,r.a=n,t!=n&&bc(e)})).La(.25)}function uc(e){return new Us(e.c,{Sa:function(){return e.s.h()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},I:e.D,rb:e.G,Ld:e.df.bind(e),Kd:e.te.bind(e),onError:e.Ka.bind(e),onEvent:function(t){return e.dispatchEvent(t)},hf:e.jf.bind(e),Zc:e.qf.bind(e)})}function cc(e){if(e.m&&e.m.configure(e.b.manifest),e.g&&e.g.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Fc.bind(e))}catch(a){e.Ka(a)}var t=Bs(e.f),r=Gs(e.f),n=Bc(e);t=On(t,r,n.variants),e.l&&t&&t.allowedByApplication&&t.allowedByKeySystem?_c(e,n.variants):Ec(e,n)}if(e.D&&(n=e.b.textDisplayFactory,e.xc!=n)){t=new n,r=e.D;var i=r.g;r.g=t,i&&(t.setTextVisibility(i.isTextVisible()),i.destroy()),r.a&&(r.a.c=t),e.xc=n,e.f&&(n=e.f,(t=n.b.get("text"))&&Ws(n,t.stream,!0,0,!0))}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.ib?e.l.enable():e.l.disable(),Cc(e))}function dc(e,t,r,n){Ho(e.$,t).variant=r,e=e.v.c,e.c!=r&&(e.c=r,e.a.push({timestamp:Date.now()/1e3,id:r.id,type:"variant",fromAdaptation:n,bandwidth:r.bandwidth}))}function hc(e,t,r,n){Yo(e.$,t,r),e=e.v.c,e.b!=r&&(e.b=r,e.a.push({timestamp:Date.now()/1e3,id:r.id,type:"text",fromAdaptation:n,bandwidth:null}))}function fc(e){var t=xu();return t.streaming.failureCallback=function(t){var r=[1001,1002,1003];e.V()&&r.includes(t.code)&&(t.severity=1,e.gd())},t.textDisplayFactory=function(){return new Cu(e.a)},t}function pc(e,t){for(var r=0;r<t.length;r++){for(var n=t[r],i=new Map,a=d(n.variants),o=a.next();!o.done;o=a.next())if(o=o.value,o.video&&o.video.closedCaptions){o=o.video;for(var s=d(o.closedCaptions.keys()),l=s.next();!l.done;l=s.next())if(l=l.value,!i.has(l)){var u={id:e.Hd++,originalId:l,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(l),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,closedCaptions:null};i.set(l,u)}}for(i=d(i.values()),a=i.next();!a.done;a=i.next())n.textStreams.push(a.value)}}function gc(e,t){var r=e.f?Bs(e.f):null,n=e.f?Gs(e.f):null;if(t.forEach(bn.bind(null,e.g,r,n)),r=Pe(t,(function(e){return e.variants.some(wn)})),0==r)throw new ye(2,4,4032);if(r<t.length)throw new ye(2,4,4011);t.forEach(function(e){yn(e.variants,this.b.restrictions,this.Xb)&&this.f&&Bc(this)==e&&kc(this),xc(this,e.variants)}.bind(e))}function mc(e,t,r,n){r=void 0!==r&&r,n=void 0===n?0:n,e.ib?(e.Ea=t,e.Dd=r,e.Bd=n):(Hs(e.f,t,r,n),Sc(e))}function vc(e,t){e.ib?e.na=t:(Ws(e.f,t,!0,0,!1),wc(e))}function yc(e,t){function r(e,t){if(!e)return null;var r=e.findSegmentPosition(t-a.startTime);return null==r?null:(r=e.getSegmentReference(r))?r.startTime+a.startTime:null}var n=Bs(e.f),i=Gs(e.f),a=Bc(e);return n=r(n,t),i=r(i,t),null!=i&&null!=n?Math.max(i,n):null!=i?i:null!=n?n:t}function bc(e){var t=e.Oc();if(e.v&&e.P&&e.s){var r=e.W;r.f=t,vs(r),Ac(e)}e.dispatchEvent(new Re("buffering",{buffering:t}))}function Ac(e){if(e.v&&e.P){var t=e.v.a;e.P.a==rs?ju(t,"buffering"):e.a.paused?ju(t,"paused"):e.a.ended?ju(t,"ended"):ju(t,"playing")}}function _c(e,t){try{xc(e,t)}catch(n){return e.Ka(n),null}var r=t.filter((function(e){return wn(e)}));return r=e.Ub.create(r),e.l.setVariants(Array.from(r.values())),e.l.chooseVariant()}function Ec(e,t){var r=_c(e,t.variants);r&&(dc(e,t,r,!0),mc(e,r,!0)),(r=Ln(t.textStreams,e.ma,e.cb)[0]||null)&&(e.b.streaming.alwaysStreamText||e.gc())&&(hc(e,t,r,!0),vc(e,r)),Tc(e)}function Tc(e){Nc(e,new Re("adaptation"))}function kc(e){Nc(e,new Re("trackschanged"))}function Sc(e){Nc(e,new Re("variantchanged"))}function wc(e){Nc(e,new Re("textchanged"))}function Rc(e){Nc(e,new Re("texttrackvisibility"))}function Cc(e){Nc(e,new Re("abrstatuschanged",{rg:e.b.abr.enabled}))}function Lc(e,t,r){e.dispatchEvent(new Re(t,{detail:{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement}}))}function Ic(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var r=e.a.error.msExtendedCode;return r&&(0>r&&(r+=Math.pow(2,32)),r=r.toString(16)),new ye(2,3,3016,t,r,e.a.error.message)}function Oc(e,t){if(e.f){var r=Bc(e),n=!1,i=Object.keys(t),a=1==i.length&&"00"==i[0];i.length&&r.variants.forEach((function(e){Dn(e).forEach((function(r){var i=e.allowedByKeySystem;r.keyId&&(r=t[a?"00":r.keyId],e.allowedByKeySystem=!!r&&!Hu.includes(r)),i!=e.allowedByKeySystem&&(n=!0)}))})),i=Bs(e.f);var o=Gs(e.f);(i=On(i,o,r.variants))&&!i.allowedByKeySystem&&Ec(e,r),n&&(kc(e),_c(e,r.variants))}}function Dc(e,t,r){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,r),e.dispatchEvent(new Re("expirationupdated"))}function Pc(e,t,r){0<t&&(e.V()||e.de(t)),r<e.Y()&&(e.V()||e.wa(r))}function xc(e,t){var r=e.g?st(e.g.T):{},n=Object.keys(r);n=n.length&&"00"==n[0];for(var i=!1,a=!1,o=[],s=[],l=d(t),u=l.next();!u.done;u=l.next()){u=u.value;var c=[];u.audio&&c.push(u.audio),u.video&&c.push(u.video),c=d(c);for(var h=c.next();!h.done;h=c.next())if(h=h.value,h.keyId){var f=r[n?"00":h.keyId];f?Hu.includes(f)&&(s.includes(f)||s.push(f)):o.includes(h.keyId)||o.push(h.keyId)}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):a=!0}if(!i)throw new ye(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function Nc(e,t){p((function r(){return F(r,(function(r){switch(r.j){case 1:return k(r,Promise.resolve(),2);case 2:e.h!=zc&&e.dispatchEvent(t),S(r)}}))}))}function Mc(e){var t=new Set;e=d(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.language?t.add(fn(r.language)):t.add("und");return t}function Fc(e){var t=new Map;e=d(e);for(var r=e.next();!r.done;r=e.next()){var n=r.value;r="und";var i=[];for(n.language&&(r=fn(n.language)),i="variant"==n.type?n.audioRoles:n.roles,i&&i.length||(i=[""]),t.has(r)||t.set(r,new Set),n=d(i),i=n.next();!i.done;i=n.next())i=i.value,t.get(r).add(i)}var a=[];return t.forEach((function(e,t){for(var r=d(e),n=r.next();!n.done;n=r.next())a.push({language:t,role:n.value})})),a}function jc(e){return e=Bc(e),null==e?[]:e.variants.filter((function(e){return wn(e)}))}function Uc(e){var t=Bc(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Wb.has(t)}))}function Bc(e){var t=e.s.h(),r=null;e=d(e.c.periods);for(var n=e.next();!n.done;n=e.next())n=n.value,n.startTime<=t&&(r=n);return r}function Gc(e){var t=Bc(e);return Ho(e.$,t).variant}function Kc(e){var t=Bc(e);if(null==t)return null;if(!Ho(e.$,t).text){var r=Ln(t.textStreams,e.ma,e.cb);r.length&&Yo(e.$,t,r[0])}return Ho(e.$,t).text}function Vc(){return new ye(2,7,7e3)}function Yc(e,t,r,n,i,a){return n==e&&i.u==a.u&&i.uri==a.uri&&i.mimeType==a.mimeType&&i.ya==a.ya?t:r}function Hc(){return{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null}}function Wc(e){return new Promise((function(t,r){e.Wa=function(){return r(Vc())},e.jc=function(){return t()},e.onError=function(e){return r(e)},e.lc=function(){return r(Vc())}}))}Vu.registerSupportPlugin=function(e,t){Wu[e]=t},Vu.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!ht()||ft("application/x-mpegurl"))},Vu.probeSupport=function(){return Qt().then((function(e){for(var t=Ta.Af(),r={},n=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=n.next();!i.done;i=n.next()){i=i.value,r[i]=ht()?!!Hr(i)||(MediaSource.isTypeSupported(i)||Tr(i)):ft(i);var a=i.split(";")[0];r[a]=r[a]||r[i]}for(var o in e={manifest:t,media:r,drm:e},Wu)e[o]=Wu[o]();return e}))},Vu.prototype.Cb=function(e,t){if(t=void 0===t||t,this.h==zc)return Promise.reject(Vc());var r=Hc();r.u=e,ht()||(t=!1);var n=t?this.fb:this.M,i=ku(this.jb,(function(){return{node:n,payload:r,Ta:!1}}));return i.tb=function(){},Wc(i)},Vu.prototype.attach=Vu.prototype.Cb,Vu.prototype.detach=function(){var e=this;if(this.h==zc)return Promise.reject(Vc());var t=ku(this.jb,(function(){return{node:e.C,payload:Hc(),Ta:!1}}));return t.tb=function(){},Wc(t)},Vu.prototype.detach=Vu.prototype.detach,Vu.prototype.rd=function(e){var t=this;if(e=void 0===e||e,this.h==zc)return Promise.reject(Vc());ht()||(e=!1);var r=Hc(),n=ku(this.jb,(function(n){var i=n.u&&e?t.fb:n.u?t.M:t.C;return r.u=n.u,{node:i,payload:r,Ta:!1}}));return n.tb=function(){},Wc(n)},Vu.prototype.unload=Vu.prototype.rd,Vu.prototype.load=function(e,t,r){if(this.h==zc)return Promise.reject(Vc());this.dispatchEvent(new Re("loading"));var n=Hc();n.uri=e,n.od=Date.now()/1e3,r&&"string"!=typeof r&&(Mn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),n.ya=function(){return new r}),r&&"string"==typeof r&&(n.mimeType=r),void 0!==t&&(n.startTime=t);var i=zu(n)?this.hb:this.T,a=ku(this.jb,(function(e){return null==e.u?null:(n.u=e.u,{node:i,payload:n,Ta:!0})}));return a.tb=function(){},new Promise((function(e,t){a.lc=function(){return t(new ye(2,7,7002))},a.jc=function(){return e()},a.Wa=function(){return t(Vc())},a.onError=function(e){return t(e)}}))},Vu.prototype.load=Vu.prototype.load,Vu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Du(e,t));var r=Nu(this.b,e,fc(this));return cc(this),r},Vu.prototype.configure=Vu.prototype.configure,Vu.prototype.getConfiguration=function(){var e=fc(this);return Nu(e,this.b,fc(this)),e},Vu.prototype.getConfiguration=Vu.prototype.getConfiguration,Vu.prototype.If=function(){for(var e in this.b)delete this.b[e];Nu(this.b,fc(this),fc(this)),cc(this)},Vu.prototype.resetConfiguration=Vu.prototype.If,Vu.prototype.Je=function(){return this.h},Vu.prototype.getLoadMode=Vu.prototype.Je,Vu.prototype.Ne=function(){return this.a},Vu.prototype.getMediaElement=Vu.prototype.Ne,Vu.prototype.Fb=function(){return this.G},Vu.prototype.getNetworkingEngine=Vu.prototype.Fb,Vu.prototype.bc=function(){return this.Bb},Vu.prototype.getAssetUri=Vu.prototype.bc,Vu.prototype.Me=function(){return Mn("getManifestUri",'Please use "getAssetUri" instead.'),this.bc()},Vu.prototype.getManifestUri=Vu.prototype.Me,Vu.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},Vu.prototype.isLive=Vu.prototype.V,Vu.prototype.Va=function(){return!!this.c&&this.c.presentationTimeline.Va()},Vu.prototype.isInProgress=Vu.prototype.Va,Vu.prototype.af=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Vu.prototype.isAudioOnly=Vu.prototype.af,Vu.prototype.Kf=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.mb(),end:e.za()}}return this.a&&this.a.src&&(e=this.a.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Vu.prototype.seekRange=Vu.prototype.Kf,Vu.prototype.keySystem=function(){return this.g?this.g.keySystem():""},Vu.prototype.keySystem=Vu.prototype.keySystem,Vu.prototype.drmInfo=function(){return this.g?this.g.a:null},Vu.prototype.drmInfo=Vu.prototype.drmInfo,Vu.prototype.dc=function(){return this.g?this.g.dc():1/0},Vu.prototype.getExpiration=Vu.prototype.dc,Vu.prototype.Oc=function(){return!!this.P&&this.P.a==rs},Vu.prototype.isBuffering=Vu.prototype.Oc,Vu.prototype.Qe=function(){if(this.W){var e=this.W;e=e.f?0:e.c}else e=0;return e},Vu.prototype.getPlaybackRate=Vu.prototype.Qe,Vu.prototype.bg=function(e){0==e?Z("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(e),this.h==qc&&Ys(this.f,1<Math.abs(e)))},Vu.prototype.trickPlay=Vu.prototype.bg,Vu.prototype.ue=function(){this.h==Xc&&this.W.set(1),this.h==qc&&(this.W.set(1),Ys(this.f,!1))},Vu.prototype.cancelTrickPlay=Vu.prototype.ue,Vu.prototype.Nc=function(){if(this.c&&this.s){for(var e=Gc(this),t=[],r=d(jc(this)),n=r.next();!n.done;n=r.next()){n=n.value;var i=_n(n);i.active=n==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){var t=Sn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t})):[]},Vu.prototype.getVariantTracks=Vu.prototype.Nc,Vu.prototype.ob=function(){if(this.c&&this.s){for(var e=Kc(this),t=[],r=d(Uc(this)),n=r.next();!n.done;n=r.next()){n=n.value;var i=En(n);i.active=n==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map((function(e){var t=Sn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t})):[]},Vu.prototype.getTextTracks=Vu.prototype.ob,Vu.prototype.hd=function(e){if(this.c&&this.f){var t=Bc(this),r=t.textStreams.find((function(t){return t.id==e.id}));r&&(hc(this,t,r,!1),vc(this,r),this.ma=r.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(t=Array.from(this.a.textTracks),t=d(t),r=t.next();!r.done;r=t.next())r=r.value,Tn(r)==e.id?r.mode=this.eb?"showing":"hidden":r.mode="disabled";wc(this)}},Vu.prototype.selectTextTrack=Vu.prototype.hd,Vu.prototype.Mf=function(){Mn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ob().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.hd(e[0])},Vu.prototype.selectEmbeddedTextTrack=Vu.prototype.Mf,Vu.prototype.gg=function(){Mn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ob().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Vu.prototype.usingEmbeddedTextTrack=Vu.prototype.gg,Vu.prototype.Of=function(e,t,r){if(r=void 0===r?0:r,this.c&&this.f){var n=Bc(this);this.b.abr.enabled&&Z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=n.variants.find((function(t){return t.id==e.id}));i&&wn(i)&&(dc(this,n,i,!1),mc(this,i,t,r),this.Ub=new Zo(i),_c(this,n.variants))}else if(this.a&&this.a.audioTracks){for(t=Array.from(this.a.audioTracks),t=d(t),r=t.next();!r.done;r=t.next())r=r.value,Tn(r)==e.id&&(r.enabled=!0);Sc(this)}},Vu.prototype.selectVariantTrack=Vu.prototype.Of,Vu.prototype.Ee=function(){return Fc(this.Nc())},Vu.prototype.getAudioLanguagesAndRoles=Vu.prototype.Ee,Vu.prototype.Xe=function(){return Fc(this.ob())},Vu.prototype.getTextLanguagesAndRoles=Vu.prototype.Xe,Vu.prototype.De=function(){return Array.from(Mc(this.Nc()))},Vu.prototype.getAudioLanguages=Vu.prototype.De,Vu.prototype.We=function(){return Array.from(Mc(this.ob()))},Vu.prototype.getTextLanguages=Vu.prototype.We,Vu.prototype.Lf=function(e,t){if(this.c&&this.s){var r=Bc(this);this.Ub=new Jo(e,t||"",0),Ec(this,r)}else if(this.a&&this.a.audioTracks){r=Array.from(this.a.audioTracks),r=d(r);for(var n=r.next();!n.done;n=r.next())n=n.value,n.language==e&&(n.enabled=!0);Sc(this)}},Vu.prototype.selectAudioLanguage=Vu.prototype.Lf,Vu.prototype.Nf=function(e,t){if(this.c&&this.s){var r=Bc(this);this.ma=e,this.cb=t||"";var n=Ln(r.textStreams,this.ma,this.cb)[0]||null;n&&(hc(this,r,n,!1),(this.b.streaming.alwaysStreamText||this.gc())&&vc(this,n))}else(r=this.ob().filter((function(t){return t.language==e}))[0])&&this.hd(r)},Vu.prototype.selectTextLanguage=Vu.prototype.Nf,Vu.prototype.gc=function(){var e=this.eb;return this.c?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some((function(e){return"showing"==e.mode})):e},Vu.prototype.isTextTrackVisible=Vu.prototype.gc,Vu.prototype.Rf=function(e){var t=this;return p((function r(){var n,i,a,o,s,l;return F(r,(function(r){switch(r.j){case 1:if(n=t.eb,i=e,n==i)return r["return"]();if(t.eb=i,t.h!=qc){if(t.a&&t.a.src&&t.a.textTracks){a=Array.from(t.a.textTracks);for(var u=d(a),c=u.next();!c.done;c=u.next())o=c.value,"disabled"!=o.mode&&(o.mode=e?"showing":"hidden")}r.A(2);break}if(t.D.g.setTextVisibility(e),t.b.streaming.alwaysStreamText){r.A(2);break}if(!e){u=t.f,u.D=!0,(c=u.b.get("text"))&&(Al(c),u.b["delete"]("text")),r.A(2);break}if(s=Bc(t),l=Ln(s.textStreams,t.ma,t.cb),!(0<l.length)){r.A(2);break}return k(r,Vs(t.f,l[0]),2);case 2:Rc(t),S(r)}}))}))},Vu.prototype.setTextTrackVisibility=Vu.prototype.Rf,Vu.prototype.Se=function(){if(!this.V())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},Vu.prototype.getPlayheadTimeAsDate=Vu.prototype.Se,Vu.prototype.Ue=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Vu.prototype.getPresentationStartTimeAsDate=Vu.prototype.Ue,Vu.prototype.Jc=function(){var e={total:[],audio:[],video:[],text:[]};return this.h==Xc&&(e.total=mr(this.a.buffered)),this.h==qc&&this.D.Jc(e),e},Vu.prototype.getBufferedInfo=Vu.prototype.Jc,Vu.prototype.getStats=function(){if(this.h!=qc&&this.h!=Xc)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};Ac(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,r=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=r}this.h==qc&&((e=Gc(this))&&(this.v.l=e.bandwidth),e&&e.video&&(t=this.v,r=e.video.height||NaN,t.m=e.video.width||NaN,t.g=r),e=this.l.getBandwidthEstimate(),this.v.f=e);var n=this.v;e=n.m,t=n.g,r=n.l;var i=n.h,a=n.i,o=n.f,s=n.b,l=Uu(n.a,"playing"),u=Uu(n.a,"paused"),c=Uu(n.a,"buffering"),h=Bu(n.a),f=[];n=d(n.c.a);for(var p=n.next();!p.done;p=n.next())p=p.value,f.push({timestamp:p.timestamp,id:p.id,type:p.type,fromAdaptation:p.fromAdaptation,bandwidth:p.bandwidth});return{width:e,height:t,streamBandwidth:r,decodedFrames:i,droppedFrames:a,estimatedBandwidth:o,loadLatency:s,playTime:l,pauseTime:u,bufferingTime:c,stateHistory:h,switchHistory:f}},Vu.prototype.getStats=Vu.prototype.getStats,Vu.prototype.addTextTrack=function(e,t,r,n,i,a){var o=this;return p((function s(){var l,u,c,d,h,f,p,g,m;return F(s,(function(s){switch(s.j){case 1:if(o.h==Xc)throw Error("State error!");if(o.h!=qc)throw Error("State error!");if(l=Bc(o),u=Ar,c=o.c.periods.indexOf(l),d=c+1,h=d>=o.c.periods.length?o.c.presentationTimeline.Y():o.c.periods[d].startTime,f=h-l.startTime,1/0==f)throw new ye(1,4,4033);return p=new Zi(1,0,f,(function(){return[e]}),0,null),g={id:o.Hd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:n,codecs:i||"",kind:r,encrypted:!1,keyId:null,language:t,label:a||null,type:u.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},o.Wb.add(g),l.textStreams.push(g),k(s,Vs(o.f,g),2);case 2:return(m=Ks(o.f,"text"))&&Yo(o.$,l,m),o.Wb["delete"](g),Ec(o,l),kc(o),s["return"](En(g))}}))}))},Vu.prototype.addTextTrack=Vu.prototype.addTextTrack,Vu.prototype.kd=function(e,t){this.Xb.width=e,this.Xb.height=t},Vu.prototype.setMaxHardwareResolution=Vu.prototype.kd,Vu.prototype.gd=function(){if(this.h==qc){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=d(e.b.values()),r=t.next();!r.done;r=t.next())r=r.value,r.Ib&&(r.Ib=!1,bl(e,r,.1));e=!0}}else e=!1;return e},Vu.prototype.retryStreaming=Vu.prototype.gd,Vu.prototype.Ke=function(){return this.c},Vu.prototype.getManifest=Vu.prototype.Ke,Vu.prototype.Le=function(){return this.m?this.m.constructor:null},Vu.prototype.getManifestParserFactory=Vu.prototype.Le,r=Vu.prototype,r.Fc=function(e){var t=this.f?Bs(this.f):null,r=this.f?Gs(this.f):null;if(bn(this.g,t,r,e),t=e.variants,!t.some(wn))throw new ye(2,4,4011);if(xc(this,e.variants),yn(t,this.b.restrictions,this.Xb)&&this.f&&Bc(this)==e&&kc(this),e=this.g?this.g.a:null)for(t=d(t),r=t.next();!r.done;r=t.next()){r=d(r.value.drmInfos);for(var n=r.next();!n.done;n=r.next())if(n=n.value,n.keySystem==e.keySystem){n=d(n.initData||[]);for(var i=n.next();!i.done;i=n.next())i=i.value,Bt(this.g,i.initDataType,i.initData)}}},r.df=function(e){try{this.ib=!0,this.l.disable(),Cc(this);var t=_c(this,e.variants),r=Ln(e.textStreams,this.ma,this.cb)[0]||null;this.Ea&&(e.variants.includes(this.Ea)&&(t=this.Ea),this.Ea=null),this.na&&(e.textStreams.includes(this.na)&&(r=this.na),this.na=null),t&&dc(this,e,t,!0),r&&hc(this,e,r,!0);var n=this.f,i=n.b.get("video");if(i)var a=n.c.periods[i.pa];else{var o=n.b.get("audio");a=o?n.c.periods[o.pa]:null}var s=t?t.audio:null;if(!a&&r){var l;if(l=s){e=r;var u=fn(this.b.preferredTextLanguage),c=fn(s.language),d=fn(e.language);l=dn(d,u)&&!dn(c,d)}l&&(this.eb=!0),this.eb&&this.D.g.setTextVisibility(!0),Rc(this)}return this.b.streaming.alwaysStreamText||this.gc()?{variant:t,text:r}:{variant:t,text:null}}catch(h){return this.Ka(h),{variant:null,text:null}}},r.te=function(){this.ib=!1,this.b.abr.enabled&&(this.l.enable(),Cc(this)),this.Ea&&(Hs(this.f,this.Ea,this.Dd,this.Bd),Sc(this),this.Ea=null),this.na&&(Ws(this.f,this.na,!0,0,!1),wc(this),this.na=null)},r.jf=function(){this.m&&this.m.update&&this.m.update()},r.qf=function(){this.s&&this.s.s()},r.Ka=function(e){if(this.h!=zc){var t=new Re("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var zc=0,$c=1,qc=2,Xc=3;function Zc(e,t,r){var n=void 0==t.expiration?1/0:t.expiration,i=t.presentationTimeline.Y();return t=Qc(t.periods[0]),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:n,tracks:t,appMetadata:r}}function Jc(e,t){var r=fu(new du(e.ua(),e.aa()),t.periods[0],new ka(null,0)),n=t.appMetadata||{};return r=Qc(r),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:r,appMetadata:n}}function Qc(e){var t=[],r=Rn(e.variants);r=d(r);for(var n=r.next();!n.done;n=r.next())t.push(_n(n.value));for(e=d(e.textStreams),r=e.next();!r.done;r=e.next())t.push(En(r.value));return t}function ed(){this.a={}}function td(e,t,r){return r=r.endTime-r.startTime,rd(e,t)*r}function rd(e,t){var r=e.a[t];return null==r&&(r=0),r}function nd(e){this.a=!1,this.b=new be,this.c=e}function id(e,t){for(var r={width:1/0,height:1/0},n=d(e.periods),i=n.next();!i.done;i=n.next())i=i.value,i.variants=i.variants.filter((function(e){return vn(e,t,r)}))}function ad(e){e=d(e.periods);for(var t=e.next();!t.done;t=e.next())t=t.value,t.variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&Zr(e.audio)),e.video&&(t=t&&Zr(e.video)),t}))}function od(e,t){for(var r=d(e.periods),n=r.next();!n.done;n=r.next())n=n.value,n.variants=n.variants.filter((function(e){return er(t,e)}))}function sd(e){var t=new cd;e.periods.forEach((function(e,r){var n=fd(e.variants);if(0==r){n=d(n.a);for(var i=n.next();!i.done;i=n.next())t.add(i.value)}else dd(t,n)})),e=d(e.periods);for(var r=e.next();!r.done;r=e.next())r=r.value,r.variants=r.variants.filter((function(e){return hd(t,new ud(e))}))}function ld(e,t){var r=new cd;e.periods.forEach((function(e,n){0<n&&(e.variants=e.variants.filter((function(e){return hd(r,new ud(e))}))),t(e),r=fd(e.variants)}))}function ud(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function cd(){this.a=[]}function dd(e,t){e.a=e.a.filter((function(e){return hd(t,e)}))}function hd(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function fd(e){var t=new cd;e=d(e);for(var r=e.next();!r.done;r=e.next())t.add(new ud(r.value));return t}function pd(e){var t=this;if(e&&e.constructor!=Vu)throw new ye(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Fb()):(this.a=xu(),this.b=new Fe),this.f=!1,this.c=[],this.g=[];var r=!e;this.h=new nd((function(){return p((function e(){var n;return F(e,(function(e){switch(e.j){case 1:return n=function(){},k(e,Promise.all(t.g.map((function(e){return e.then(n,n)}))),2);case 2:if(!r){e.A(3);break}return k(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,S(e)}}))}))}))}function gd(){if(ht())e:{for(var e=d(Hl.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function md(e,t,r,n){return p((function i(){var a,o,s,l,u,c,d,h,f,p;return F(i,(function(i){switch(i.j){case 1:return Dd(),e.f?i["return"](Promise.reject(new ye(2,9,9006))):(e.f=!0,k(i,Sd(e,t,n),2));case 2:if(a=i.o,Od(e),o=!a.presentationTimeline.V()&&!a.presentationTimeline.Va(),!o)throw new ye(2,9,9005,t);return s=null,l=new jl,c=u=null,w(i,3,4),k(i,wd(e,a,(function(e){c=c||e})),6);case 6:if(s=i.o,Od(e),c)throw c;return vd(e,a,s),k(i,l.init(),7);case 7:return Od(e),k(i,Ul(l),8);case 8:return u=i.o,Od(e),k(i,yd(e,u.aa,s,a,t,r),9);case 9:if(d=i.o,Od(e),c)throw c;return k(i,u.aa.addManifests([d]),10);case 10:return h=i.o,Od(e),f=new uu("manifest",u.path.ua,u.path.aa,h[0]),i["return"](Jc(f,d));case 4:return I(i),e.f=!1,e.c=[],k(i,l.destroy(),11);case 11:if(!s){i.A(12);break}return k(i,s.destroy(),12);case 12:O(i,0);break;case 3:if(p=L(i),!u){i.A(14);break}return k(i,u.aa.removeSegments(e.c,(function(){})),14);case 14:throw c||p}}))}))}function vd(e,t,r){id(t,e.a.restrictions),ad(t),od(t,r),sd(t),ld(t,(function(t){for(var r=[],n=d(t.variants),i=n.next();!i.done;i=n.next())r.push(_n(i.value));for(n=d(t.textStreams),i=n.next();!i.done;i=n.next())r.push(En(i.value));r=e.a.offline.trackSelectionCallback(r);var a=new Set,o=new Set;for(r=d(r),n=r.next();!n.done;n=r.next())n=n.value,"variant"==n.type&&a.add(n.id),"text"==n.type&&o.add(n.id);t.variants=t.variants.filter((function(e){return a.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return o.has(e.id)}))})),Fd(t)}function yd(e,t,r,n,i,a){return p((function o(){var s,l,u,c;return F(o,(function(o){switch(o.j){case 1:return s=Zc(i,n,a),l=new Rl(e.b,(function(t,r){s.size=r,e.a.offline.progressCallback(s,t)})),R(o,2),c=u=Rd(e,l,t,r,n,i,a),k(o,Ll(l),4);case 4:return c.size=o.o,o["return"](u);case 2:return I(o),k(o,l.destroy(),5);case 5:O(o,0)}}))}))}function bd(e,t){return p((function r(){var n,i,a,o,s,l;return F(r,(function(r){switch(r.j){case 1:return Dd(),n=cu(t),null==n||"manifest"!=n.a?r["return"](Promise.reject(new ye(2,9,9004,t))):(i=n,a=new jl,R(r,2),k(r,a.init(),4));case 4:return k(r,Gl(a,i.ua(),i.aa()),5);case 5:return o=r.o,k(r,o.getManifests([i.key()]),6);case 6:return s=r.o,l=s[0],k(r,Promise.all([_d(e,l,a),Ed(e,o,i,l)]),2);case 2:return I(r),k(r,a.destroy(),8);case 8:O(r,0)}}))}))}function Ad(e,t){for(var r=[],n=d(e.periods),i=n.next();!i.done;i=n.next()){i=d(i.value.streams);for(var a=i.next();!a.done;a=i.next())a=a.value,t&&"video"==a.contentType?r.push({contentType:lt(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||r.push({contentType:lt(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness})}return r}function _d(e,t,r){return p((function n(){return F(n,(function(n){switch(n.j){case 1:return k(n,Nd(e.b,e.a.drm,r,t),0)}}))}))}function Ed(e,t,r,n){function i(){s+=1,e.a.offline.progressCallback(l,s/o)}var a=xd(n),o=a.length+1,s=0,l=Jc(r,n);return Promise.all([t.removeSegments(a,i),t.removeManifests([r.key()],i)])}function Td(e){return p((function t(){var r,n,i,a,o,s,l,u,c;return F(t,(function(t){switch(t.j){case 1:return Dd(),r=e.b,n=e.a.drm,i=new jl,a=!1,R(t,2),k(t,i.init(),4);case 4:for(o=[],Kl(i,(function(e){return o.push(e)})),s=Promise.resolve(),l={},u=d(o),c=u.next();!c.done;l={qc:l.qc},c=u.next())l.qc=c.value,s=s.then(function(e){return function(){return p((function t(){var i,o;return F(t,(function(t){switch(t.j){case 1:return k(t,e.qc.getAll(),2);case 2:return i=t.o,k(t,Au(n,r,i),3);case 3:return o=t.o,k(t,e.qc.remove(o),4);case 4:o.length!=i.length&&(a=!0),S(t)}}))}))}}(l));return k(t,s,2);case 2:return I(t),k(t,i.destroy(),6);case 6:O(t,3);break;case 3:return t["return"](!a)}}))}))}function kd(){return p((function e(){var t,r,n;return F(e,(function(e){switch(e.j){case 1:return Dd(),t=[],r=new jl,R(e,2),k(e,r.init(),4);case 4:return n=Promise.resolve(),Bl(r,(function(e,r){n=n.then((function(){return p((function n(){var i;return F(n,(function(n){switch(n.j){case 1:return k(n,r.getAllManifests(),2);case 2:i=n.o,i.forEach((function(r,n){var i=Jc(new uu("manifest",e.ua,e.aa,n),r);t.push(i)})),S(n)}}))}))}))})),k(e,n,2);case 2:return I(e),k(e,r.destroy(),6);case 6:O(e,3);break;case 3:return e["return"](t)}}))}))}function Sd(e,t,r){return p((function n(){var i,a,o,s,l,u;return F(n,(function(n){switch(n.j){case 1:return i=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},k(n,r(),2);case 2:return s=n.o,s.configure(e.a.manifest),Od(e),R(n,3),k(n,s.start(t,o),5);case 5:return l=n.o,Od(e),u=Md(l),k(n,Promise.all(Array.from(u).map((function(e){return e.createSegmentIndex()}))),6);case 6:if(Od(e),i)throw i;return n["return"](l);case 3:return I(n),k(n,s.stop(),7);case 7:O(n,0)}}))}))}function wd(e,t,r){return p((function n(){var i,a,o;return F(n,(function(n){switch(n.j){case 1:return i=new Ot({rb:e.b,onError:r,kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=hs(t.periods),o=e.a,i.configure(o.drm),k(n,Pt(i,a,o.offline.usePersistentLicense),2);case 2:return k(n,Ft(i),3);case 3:return k(n,Ut(i),4);case 4:return n["return"](i)}}))}))}function Rd(e,t,r,n,i,a,o){var s=new ed,l=i.periods.map((function(n){return Cd(e,t,r,s,i,n)})),u=n.a,c=Kt(n);if(u&&e.a.offline.usePersistentLicense){if(!c.length)throw new ye(2,9,9007,a);u.initData=[]}return{originalManifestUri:a,duration:i.presentationTimeline.Y(),size:0,expiration:n.dc(),periods:l,sessionIds:e.a.offline.usePersistentLicense?c:[],drmInfo:u,appMetadata:o}}function Cd(e,t,r,n,i,a){i.periods.forEach((function(e){e.variants.forEach((function(e){var t=e.audio,r=e.video;if(t&&!r&&(n.a[t.id]=t.bandwidth||e.bandwidth),!t&&r&&(n.a[r.id]=r.bandwidth||e.bandwidth),t&&r){var i=t.bandwidth||393216,a=r.bandwidth||e.bandwidth-i;0>=a&&(a=e.bandwidth),n.a[t.id]=i,n.a[r.id]=a}})),e.textStreams.forEach((function(e){n.a[e.id]=52}))}));var o=Md(i),s=new Map;o=d(o);for(var l=o.next();!l.done;l=o.next()){l=l.value;var u=Ld(e,t,r,n,i,l);s.set(l.id,u)}return a.variants.forEach((function(e){e.audio&&s.get(e.audio.id).variantIds.push(e.id),e.video&&s.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(s.values())}}function Ld(e,t,r,n,i,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Hb();var s=a.id;return Id(a,i,(function(i){var l=Sa(i.c(),i.b,i.a,e.a.streaming.retryParameters);Cl(t,s,l,td(n,a.id,i),(function(t){return r.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]})}))}))})),(i=a.initSegmentReference)&&(i=Sa(i.c(),i.b,i.a,e.a.streaming.retryParameters),Cl(t,s,i,.5*rd(n,a.id),(function(t){return r.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.initSegmentKey=t[0]}))}))),o}function Id(e,t,r){t=e.findSegmentPosition(t);for(var n=null==t?null:e.getSegmentReference(t);n;)r(n),n=e.getSegmentReference(++t)}function Od(e){if(e.h.a)throw new ye(2,9,7001)}function Dd(){if(!gd())throw new ye(2,9,9e3)}function Pd(e,t){return p((function r(){return F(r,(function(r){switch(r.j){case 1:return e.g.push(t),R(r,2),k(r,t,4);case 4:return r["return"](r.o);case 2:I(r),De(e.g,t),O(r,0)}}))}))}function xd(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}function Nd(e,t,r,n){return p((function i(){var a,o,s;return F(i,(function(i){switch(i.j){case 1:return n.drmInfo?(a=Vl(r),o=n.sessionIds.map((function(e){return{sessionId:e,keySystem:n.drmInfo.keySystem,licenseUri:n.drmInfo.licenseServerUri,serverCertificate:n.drmInfo.serverCertificate,audioCapabilities:Ad(n,!1),videoCapabilities:Ad(n,!0)}})),k(i,Au(t,e,o),2)):i["return"]();case 2:return s=i.o,k(i,a.remove(s),3);case 3:return k(i,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}function Md(e){var t=new Set;e=d(e.periods);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var n=d(r.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(r=d(r.variants),n=r.next();!n.done;n=r.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video)}return t}function Fd(e){if(0==e.periods.length)throw new ye(2,4,4014);e=d(e.periods);for(var t=e.next();!t.done;t=e.next())jd(t.value)}function jd(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var r=d(t),n=r.next();!n.done;n=r.next()){n=d(t);for(var i=n.next();!i.done;i=n.next());}for(t=d(e),r=t.next();!r.done;r=t.next())for(r=d(e),n=r.next();!n.done;n=r.next());}Vu.LoadMode={DESTROYED:zc,NOT_LOADED:$c,MEDIA_SOURCE:qc,SRC_EQUALS:Xc},nd.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},cd.prototype.add=function(e){hd(this,e)||this.a.push(e)},Y("shaka.offline.Storage",pd),pd.support=gd,pd.prototype.destroy=function(){return this.h.destroy()},pd.prototype.destroy=pd.prototype.destroy,pd.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Du(e,t));var r=e,n=!1;return null!=r.trackSelectionCallback&&(n=!0,r.offline=r.offline||{},r.offline.trackSelectionCallback=r.trackSelectionCallback,delete r.trackSelectionCallback),null!=r.progressCallback&&(n=!0,r.offline=r.offline||{},r.offline.progressCallback=r.progressCallback,delete r.progressCallback),null!=r.usePersistentLicense&&(n=!0,r.offline=r.offline||{},r.offline.usePersistentLicense=r.usePersistentLicense,delete r.usePersistentLicense),n&&Mn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Nu(this.a,e)},pd.prototype.configure=pd.prototype.configure,pd.prototype.getConfiguration=function(){var e=xu();return Nu(e,this.a,xu()),e},pd.prototype.getConfiguration=pd.prototype.getConfiguration,pd.prototype.Fb=function(){return this.b},pd.prototype.getNetworkingEngine=pd.prototype.Fb,pd.prototype.store=function(e,t,r){var n=this;return Pd(this,md(this,e,t||{},(function(){return p((function t(){var i,a;return F(t,(function(t){switch(t.j){case 1:return r&&"string"!=typeof r?(Mn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=r,t["return"](new i)):k(t,Ta.create(e,n.b,n.a.manifest.retryParameters,r),2);case 2:return a=t.o,t["return"](a)}}))}))})))},pd.prototype.store=pd.prototype.store,pd.prototype.Ve=function(){return this.f},pd.prototype.getStoreInProgress=pd.prototype.Ve,pd.prototype.remove=function(e){return Pd(this,bd(this,e))},pd.prototype.remove=pd.prototype.remove,pd.prototype.Ff=function(){return Pd(this,Td(this))},pd.prototype.removeEmeSessions=pd.prototype.Ff,pd.prototype.list=function(){return Pd(this,kd())},pd.prototype.list=pd.prototype.list,pd.deleteAll=function(){return p((function e(){var t;return F(e,(function(e){switch(e.j){case 1:return t=new jl,R(e,2),k(e,t.erase(),2);case 2:return I(e),k(e,t.destroy(),5);case 5:O(e,0)}}))}))},Wu.offline=gd,Y("shaka.polyfill.installAll",(function(){for(var e=0;e<Gd.length;++e)Gd[e].re()}));var Ud,Bd,Gd=[];function Kd(e,t){t=t||0;for(var r={priority:t,re:e},n=0;n<Gd.length;n++)if(Gd[n].priority<t)return void Gd.splice(n,0,r);Gd.push(r)}function Vd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var r=new Event(t,e);else r=document.createEvent("Event"),r.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(r)}function Yd(e,t,r){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,r)}function Hd(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var r=[],n=0;n<arguments.length;++n)r[n]=arguments[n];return r=e.apply(this,r),r.abort=function(){},r}}function Wd(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,r){return e.call(this,t,r-.001)}}function zd(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(t){for(var r=[],n=0;n<arguments.length;++n)r[n]=arguments[n];for(var i=n=0;i<this.sourceBuffers.length;++i){var a=this.sourceBuffers[i];a=a.buffered.end(a.buffered.length-1),n=Math.max(n,a)}if(!isNaN(this.duration)&&n<this.duration)for(this.Ed=!0,n=0;n<this.sourceBuffers.length;++n)this.sourceBuffers[n].xd=!1;return e.apply(this,r)};var t=!1,r=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return n=r.apply(this,n),n.mediaSource_=this,n.addEventListener("updateend",$d,!1),t||(this.addEventListener("sourceclose",qd,!1),t=!0),n}}function $d(e){var t=e.target,r=t.mediaSource_;if(r.Ed){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.xd=!0,e=0;e<r.sourceBuffers.length;++e)if(0==r.sourceBuffers[e].xd)return;r.Ed=!1}}function qd(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",$d,!1);e.removeEventListener("sourceclose",qd,!1)}function Xd(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}function Zd(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=ct(t)[0]&&e(t)}}function Jd(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(r){for(var n=r.split(/ *; */),i=n[0],a={},o=1;o<n.length;++o){var s=n[o].split("="),l=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[l]=s}if(n=a.codecs,!n)return e(r);var u=!1,c=!1;for(var d in r=n.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(u=!0),!0})),c&&(u=!1),a.codecs=r.join(","),u&&(a.eotf="smpte2084"),a)i+="; "+d+'="'+a[d]+'"';return cast.__platform__.canDisplayType(i)}}function Qd(e,t){try{var r=new eh(e,t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function eh(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var r=d(t),n=r.next();!n.done;n=r.next()){var i=n.value;if("required"==i.persistentState)n=null;else{n={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var a=!1,o=!1;if(i.audioCapabilities)for(var s=d(i.audioCapabilities),l=s.next();!l.done;l=s.next())if(l=l.value,l.contentType){a=!0;var u=l.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(n.audioCapabilities.push(l),o=!0)}if(i.videoCapabilities)for(i=d(i.videoCapabilities),l=i.next();!l.done;l=i.next())s=l.value,s.contentType&&(a=!0,l=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(n.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),n=o?n:null}if(n)return void(this.a=n)}throw r=Error("Unsupported keySystem"),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r}function th(e){var t=this.mediaKeys;return t&&t!=e&&nh(t,null),delete this.mediaKeys,(this.mediaKeys=e)?nh(e,this):Promise.resolve()}function rh(e){this.b=new WebKitMediaKeys(e),this.a=new Ze}function nh(e,t){if(e.a.Ya(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",ah);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(r){return Promise.reject(r)}}function ih(e){Le.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new Ze,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new sh}function ah(e){var t=new Event("encrypted");t.initDataType="cenc",t.initData=e.initData,this.dispatchEvent(t)}function oh(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1,r.a=t,e.dispatchEvent(new Re("keystatuseschange"))}function sh(){this.size=0,this.a=void 0}function lh(e,t){try{var r=new uh(e,t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function uh(e,t){this.keySystem=e;for(var r=!1,n=0;n<t.length;++n){var i=t[n],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},o=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var l=i.audioCapabilities[s];if(l.contentType){o=!0;var u=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(l),r=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)l=i.videoCapabilities[s],l.contentType&&(o=!0,u=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(l),r=!0));if(o||(r=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(r=!1),r)return void(this.a=a)}throw r=Error("Unsupported keySystem"),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r}function ch(e){var t=this.mediaKeys;return t&&t!=e&&hh(t,null),delete this.mediaKeys,(this.mediaKeys=e)?hh(e,this):Promise.resolve()}function dh(e){this.a=new MSMediaKeys(e),this.b=new Ze}function hh(e,t){function r(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",r)}if(e.b.Ya(),!t)return Promise.resolve();e.b.w(t,"msneedkey",ph);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",r),Promise.resolve()}catch(i){return Promise.reject(i)}}function fh(e){Le.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Ze,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new vh}function ph(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=gh(e.initData),this.dispatchEvent(t)}}function gh(e){if(!e)return e;var t=new Di(e);if(1>=t.a.length)return e;for(var r=[],n=0;n<t.a.length;n++)r.push(e.subarray(t.a[n].start,t.a[n].end+1));for(e=[],t={},n=d(r),r=n.next();!r.done;t={fc:t.fc},r=n.next())t.fc=r.value,e.some(function(e){return function(t){return Lt(t,e.fc)}}(t))||e.push(t.fc);for(t=0,n=d(e),r=n.next();!r.done;r=n.next())t+=r.value.length;for(t=new Uint8Array(t),n=0,e=d(e),r=e.next();!r.done;r=e.next())r=r.value,t.set(r,n),n+=r.length;return t}function mh(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1,r.a=t,e.dispatchEvent(new Re("keystatuseschange"))}function vh(){this.size=0,this.a=void 0}function yh(){return Promise.reject(Error("The key system specified is not supported."))}function bh(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ah(){throw new TypeError("Illegal constructor.")}function _h(){throw new TypeError("Illegal constructor.")}Y("shaka.polyfill.register",Kd),Kd((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Vd),document.addEventListener("webkitfullscreenerror",Vd),document.addEventListener("mozfullscreenchange",Vd),document.addEventListener("mozfullscreenerror",Vd),document.addEventListener("MSFullscreenChange",Vd),document.addEventListener("MSFullscreenError",Vd)}})),Kd((function(){pt("CrKey")&&delete e.indexedDB})),Kd((function(){pt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Yd)})),Kd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Kd((function(){})),Kd((function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)Jd();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion;Xd(),t.includes("Version/8")?e.MediaSource=null:t.includes("Version/9")?Hd():t.includes("Version/10")?(Hd(),zd()):(t.includes("Version/11")||t.includes("Version/12"))&&(Hd(),Wd())}else pt("Tizen")&&Zd()})),eh.prototype.createMediaKeys=function(){var e=new rh(this.keySystem);return Promise.resolve(e)},eh.prototype.getConfiguration=function(){return this.a},rh.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ih(this.b,e)},rh.prototype.setServerCertificate=function(e){return e&&new Uint8Array(e),Promise.resolve(!0)},H(ih,Le),r=ih.prototype,r.generateRequest=function(e,t){this.a=new be;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Wf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Uf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Vf.bind(this)),oh(this,"status-pending")}catch(r){this.a.reject(r)}return this.a},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.c=new be;try{this.b.update(new Uint8Array(e))}catch(t){this.c.reject(t)}return this.c},r.close=function(){try{this.b.close(),this.closed.resolve(),this.f.Ya()}catch(Af){this.closed.reject(Af)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.Wf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Re("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},r.Uf=function(){this.c&&(oh(this,"usable"),this.c.resolve(),this.c=null)},r.Vf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:oh(this,"output-not-allowed");break;default:oh(this,"internal-error")}},r=sh.prototype,r.forEach=function(e){this.a&&e(this.a,Ud)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=Ud;return!(!this.a||!Lt(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Kd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(Ud=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=th,e.MediaKeys=rh,e.MediaKeySystemAccess=eh,navigator.requestMediaKeySystemAccess=Qd)})),uh.prototype.createMediaKeys=function(){var e=new dh(this.keySystem);return Promise.resolve(e)},uh.prototype.getConfiguration=function(){return this.a},dh.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new fh(this.a,e)},dh.prototype.setServerCertificate=function(){return Promise.resolve(!1)},H(fh,Le),r=fh.prototype,r.generateRequest=function(e,t){this.a=new be;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.nf.bind(this)),this.f.w(this.c,"mskeyadded",this.lf.bind(this)),this.f.w(this.c,"mskeyerror",this.mf.bind(this)),mh(this,"status-pending")}catch(r){this.a.reject(r)}return this.a},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.b=new be;try{this.c.update(new Uint8Array(e))}catch(t){this.b.reject(t)}return this.b},r.close=function(){try{this.c.close(),this.closed.resolve(),this.f.Ya()}catch(Af){this.closed.reject(Af)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.nf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Re("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},r.lf=function(){this.a?(mh(this,"usable"),this.a.resolve(),this.a=null):this.b&&(mh(this,"usable"),this.b.resolve(),this.b=null)},r.mf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:mh(this,"output-not-allowed");break;default:mh(this,"internal-error")}},r=vh.prototype,r.forEach=function(e){this.a&&e(this.a,Bd)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=Bd;return!(!this.a||!Lt(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Kd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Bd=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ch,e.MediaKeys=dh,e.MediaKeySystemAccess=uh,navigator.requestMediaKeySystemAccess=lh)})),Ah.prototype.createSession=function(){},Ah.prototype.setServerCertificate=function(){},_h.prototype.getConfiguration=function(){},_h.prototype.createMediaKeys=function(){},Kd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=yh,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bh,e.MediaKeys=Ah,e.MediaKeySystemAccess=_h)}),-10);var Eh,Th="";function kh(e){var t=Th;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Sh(e,t){try{var r=new Rh(e,t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function wh(e){var t=this.mediaKeys;return t&&t!=e&&Lh(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Lh(e,this),Promise.resolve()}function Rh(e,t){this.a=this.keySystem=e;var r=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",r=!1);var n=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var u=0;u<o.audioCapabilities.length;++u){var c=o.audioCapabilities[u];if(c.contentType){l=!0;var d=c.contentType.split(";")[0];i.canPlayType(d,this.a)&&(s.audioCapabilities.push(c),n=!0)}}if(o.videoCapabilities)for(u=0;u<o.videoCapabilities.length;++u)c=o.videoCapabilities[u],c.contentType&&(l=!0,i.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),n=!0));if(l||(n=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(r?(s.persistentState="required",s.sessionTypes=["persistent-license"]):n=!1),n)return void(this.b=s)}throw r="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(r="None of the requested configurations were supported."),r=Error(r),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r}function Ch(e){this.g=e,this.b=null,this.a=new Ze,this.c=[],this.f={}}function Lh(e,t){e.b=t,e.a.Ya();var r=Th;t&&(e.a.w(t,r+"needkey",e.tf.bind(e)),e.a.w(t,r+"keymessage",e.Zf.bind(e)),e.a.w(t,r+"keyadded",e.Xf.bind(e)),e.a.w(t,r+"keyerror",e.Yf.bind(e)))}function Ih(e,t){var r=e.f[t];return r||((r=e.c.shift())?(r.sessionId=t,e.f[t]=r):null)}function Oh(e,t,r){Le.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=r,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new xh}function Dh(e,t,r){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(r)var n=new Uint8Array(_t("LOAD_SESSION|"+r));else{var a=_t("PERSISTENT|"),o=new Uint8Array(a.byteLength+t.byteLength);o.set(new Uint8Array(a),0),o.set(new Uint8Array(t),a.byteLength),n=o}else n=new Uint8Array(t)}catch(i){return Promise.reject(i)}e.b=new be;var s=kh("generateKeyRequest");try{e.f[s](e.c,n)}catch(i){if("InvalidStateError"!=i.name)return e.b=null,Promise.reject(i);new pe((function(){try{e.f[s](e.c,n)}catch(t){e.b.reject(t),e.b=null}})).O(.01)}return e.b}function Ph(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1,r.a=t,e.dispatchEvent(new Re("keystatuseschange"))}function xh(){this.size=0,this.a=void 0}function Nh(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Mh(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Fh(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function jh(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Uh(t,r,n){return new e.TextTrackCue(t,r,n)}function Bh(t,r,n){return new e.TextTrackCue(t+"-"+r+"-"+n,t,r,n)}function Gh(){}Rh.prototype.createMediaKeys=function(){var e=new Ch(this.a);return Promise.resolve(e)},Rh.prototype.getConfiguration=function(){return this.b},r=Ch.prototype,r.createSession=function(e){if(e=e||"temporary","temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Oh(t,this.g,e),this.c.push(e),e},r.setServerCertificate=function(){return Promise.resolve(!1)},r.tf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},r.Zf=function(e){var t=Ih(this,e.sessionId);t&&(e=new Re("message",{messageType:void 0==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},r.Xf=function(e){(e=Ih(this,e.sessionId))&&(Ph(e,"usable"),e.a&&e.a.resolve(),e.a=null)},r.Yf=function(e){var t=Ih(this,e.sessionId);t&&t.handleError(e)},H(Oh,Le),r=Oh.prototype,r.handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ph(this,"output-restricted"):Ph(this,1==t?"expired":"internal-error"))},r.nd=function(e,t){if(this.a)this.a.then(this.nd.bind(this,e,t))["catch"](this.nd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var r=yt(t),n=JSON.parse(r);"oct"!=n.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),r=wt(n.keys[0].k),n=wt(n.keys[0].kid)}else r=new Uint8Array(t),n=null;var i=kh("addKey");try{this.f[i](this.c,r,n,this.sessionId)}catch(a){this.a.reject(a),this.a=null}}},r.generateRequest=function(e,t){return Dh(this,t,null)},r.load=function(e){return"persistent-license"==this.g?Dh(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){var t=new be;return this.nd(t,e),t},r.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=kh("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},r.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},r=xh.prototype,r.forEach=function(e){this.a&&e(this.a,Eh)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=Eh;return!(!this.a||!Lt(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Kd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Th="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;Eh=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Sh,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wh,e.MediaKeys=Ch,e.MediaKeySystemAccess=Rh}})),Kd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Mh,document.exitPictureInPicture=Fh,document.addEventListener("webkitpresentationmodechanged",Nh,!0))}})),Kd((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e["catch"]((function(){})),e}}})),Kd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=jh)}})),Kd((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Uh;else if(6==t)e.VTTCue=Bh;else{try{var r=!!Uh(1,2,"")}catch(n){r=!1}r&&(e.VTTCue=Uh)}}})),Gh.prototype.parseInit=function(){},Gh.prototype.parseMedia=function(e,t){var r=yt(e),n=[],i=new DOMParser,a=null;try{a=i.parseFromString(r,"text/xml")}catch(b){throw new ye(2,2,2005)}if(a){if(!(a=a.getElementsByTagName("tt")[0]))throw new ye(2,2,2005);var o=Pi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Pi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=Pi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),u=Pi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","tickRate");if(r=a.getAttribute("xml:space")||"default",i=a.getAttribute("tts:extent"),"default"!=r&&"preserve"!=r)throw new ye(2,2,2005);r="default"==r,o=new df(o,s,l,u),s=Qh(a.getElementsByTagName("metadata")[0]),l=Qh(a.getElementsByTagName("styling")[0]),u=Qh(a.getElementsByTagName("layout")[0]);for(var c=[],d=0;d<u.length;d++){var h,f,p=u[d],g=l,m=i,v=new Br,y=p.getAttribute("xml:id");if(y)v.id=y,y=null,m&&(y=Kh.exec(m)||Yh.exec(m)),m=y?Number(y[1]):null,y=y?Number(y[2]):null,(h=of(p,g,"extent"))&&(h=(f=Kh.exec(h))||Yh.exec(h),null!=h&&(v.width=null!=m?100*Number(h[1])/m:Number(h[1]),v.height=null!=y?100*Number(h[2])/y:Number(h[2]),v.widthUnits=f||null!=m?Gr:0,v.heightUnits=f||null!=y?Gr:0)),(p=of(p,g,"origin"))&&(h=(f=Kh.exec(p))||Yh.exec(p),null!=h&&(v.viewportAnchorX=null!=y?100*Number(h[1])/y:Number(h[1]),v.viewportAnchorY=null!=m?100*Number(h[2])/m:Number(h[2]),v.viewportAnchorUnits=f||null!=m?Gr:0));else v=null;v&&c.push(v)}for(i=Qh(a.getElementsByTagName("body")[0]),a=0;a<i.length;a++)(d=tf(i[a],t.periodStart,o,s,l,u,c,r))&&n.push(d)}return n};var Kh=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Vh=/^(\d+px|\d+em)$/,Yh=/^(\d+)px (\d+)px$/,Hh=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wh=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,zh=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,$h=/^(\d*(?:\.\d*)?)f$/,qh=/^(\d*(?:\.\d*)?)t$/,Xh=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Zh={left:Nr,center:"center",right:"end",start:Nr,end:"end"},Jh={left:"line-left",center:"center",right:"line-right"};function Qh(e){var t=[];if(!e)return t;for(var r=e.childNodes,n=0;n<r.length;n++){var i="span"==r[n].nodeName&&"p"==e.nodeName;r[n].nodeType!=Node.ELEMENT_NODE||"br"==r[n].nodeName||i||(i=Qh(r[n]),t=t.concat(i))}return t.length||t.push(e),t}function ef(e,t){for(var r=e.childNodes,n=0;n<r.length;n++)if("br"==r[n].nodeName&&0<n)r[n-1].textContent+="\n";else if(0<r[n].childNodes.length)ef(r[n],t);else if(t){var i=r[n].textContent.trim();i=i.replace(/\s+/g," "),r[n].textContent=i}}function tf(e,t,r,n,i,a,o,s){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;ef(e,s),s=uf(e.getAttribute("begin"),r);var l=uf(e.getAttribute("end"),r);r=uf(e.getAttribute("dur"),r);var u=e.textContent;if(null==l&&null!=r&&(l=s+r),null==s||null==l)throw new ye(2,2,2001);if(t=new wr(s+t,l+t,u),(a=lf(e,"region",a,""))&&a.getAttribute("xml:id")){var c=a.getAttribute("xml:id");o=o.filter((function(e){return e.id==c})),t.region=o[0]}return n=lf(e,"smpte:backgroundImage",n,"#"),rf(t,e,a,n,i),t}function rf(e,t,r,n,i){"rtl"==af(t,r,i,"direction")&&(e.direction="rtl");var a=af(t,r,i,"writingMode");if("tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Dr),(a=af(t,r,i,"textAlign"))&&(e.positionAlign=Jh[a],e.lineAlign=Zh[a],e.textAlign=Lr[a.toUpperCase()]),(a=af(t,r,i,"displayAlign"))&&(e.displayAlign=Or[a.toUpperCase()]),(a=af(t,r,i,"color"))&&(e.color=a),(a=af(t,r,i,"backgroundColor"))&&(e.backgroundColor=a),(a=af(t,r,i,"fontFamily"))&&(e.fontFamily=a),(a=af(t,r,i,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=af(t,r,i,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=af(t,r,i,"lineHeight"))&&a.match(Vh)&&(e.lineHeight=a),(a=af(t,r,i,"fontSize"))&&a.match(Vh)&&(e.fontSize=a),(a=af(t,r,i,"fontStyle"))&&(e.fontStyle=Ur[a.toUpperCase()]),n){a=n.getAttribute("imagetype");var o=n.getAttribute("encoding");n=n.textContent.trim(),"PNG"==a&&"Base64"==o&&n&&(e.backgroundImage="data:image/png;base64,"+n)}(r=of(r,i,"textDecoration"))&&nf(e,r),(t=sf(t,i,"textDecoration"))&&nf(e,t)}function nf(e,t){for(var r=t.split(" "),n=0;n<r.length;n++)switch(r[n]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&De(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&De(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&De(e.textDecoration,"overline")}}function af(e,t,r,n){return(e=sf(e,r,n))?e:of(t,r,n)}function of(e,t,r){for(var n=Qh(e),i=0;i<n.length;i++){var a=Pi.getAttributeNS(n[i],"http://www.w3.org/ns/ttml#styling",r);if(a)return a}return(e=lf(e,"style",t,""))?Pi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",r):null}function sf(e,t,r){return(e=lf(e,"style",t,""))?Pi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",r):null}function lf(e,t,r,n){if(!e||1>r.length)return null;var i=null,a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode,a instanceof Element););if(t=e)for(e=0;e<r.length;e++)if(n+r[e].getAttribute("xml:id")==t){i=r[e];break}return i}function uf(e,t){var r=null;if(Hh.test(e)){r=Hh.exec(e);var n=Number(r[1]),i=Number(r[2]),a=Number(r[3]),o=Number(r[4]);o+=(Number(r[5])||0)/t.b,a+=o/t.frameRate,r=a+60*i+3600*n}else Wh.test(e)?r=cf(Wh,e):zh.test(e)?r=cf(zh,e):$h.test(e)?(r=$h.exec(e),r=Number(r[1])/t.frameRate):qh.test(e)?(r=qh.exec(e),r=Number(r[1])/t.a):Xh.test(e)&&(r=cf(Xh,e));return r}function cf(e,t){var r=e.exec(t);return null==r||""==r[0]?null:(Number(r[4])||0)/1e3+(Number(r[3])||0)+60*(Number(r[2])||0)+3600*(Number(r[1])||0)}function df(e,t,r,n){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(n),0==this.a&&(this.a=e?this.frameRate*this.b:1),r&&(e=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function hf(){this.a=new Gh}function ff(){}function pf(e,t,r){var n;(n=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=n[1],e.textAlign="middle"==t?Cr:Lr[t.toUpperCase()]):(n=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==n[1]?"vertical-lr":"vertical-rl":(n=/^size:([\d.]+)%$/.exec(t))?e.size=Number(n[1]):(n=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(n[1]),n[2]&&(t=n[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(n=/^region:(.*)$/.exec(t))?(t=gf(r,n[1]))&&(e.region=t):(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(r[1]),r[2]&&(e.lineAlign=Mr[r[2].toUpperCase()])):(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=xr,e.line=Number(r[1]),r[2]&&(e.lineAlign=Mr[r[2].toUpperCase()]))}function gf(e,t){var r=e.filter((function(e){return e.id==t}));return r.length?r[0]:null}function mf(e){if(e=qa(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),null==e)return null;var t=Number(e[2]),r=Number(e[3]);return 59<t||59<r?null:Number(e[4])/1e3+r+60*t+3600*(Number(e[1])||0)}function vf(){this.a=null}function yf(e,t,r){var n,i,a;return(new wi).H("payl",Li((function(e){n=yt(e)}))).H("iden",Li((function(e){i=yt(e)}))).H("sttg",Li((function(e){a=yt(e)}))).parse(e),n?bf(n,i,a,t,r):null}function bf(e,t,r,n,i){if(e=new wr(n,i,e),t&&(e.id=t),r)for(t=new za(r),r=Xa(t);r;)pf(e,r,[]),$a(t),r=Xa(t);return e}Yr["application/ttml+xml"]=Gh,hf.prototype.parseInit=function(e){var t=!1;if((new wi).H("moov",Ri).H("trak",Ri).H("mdia",Ri).H("minf",Ri).H("stbl",Ri).fa("stsd",Ci).H("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new ye(2,2,2007)},hf.prototype.parseMedia=function(e,t){var r=!1,n=[];if((new wi).H("mdat",Li(function(e){r=!0,n=n.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!r)throw new ye(2,2,2007);return n},Yr['application/mp4; codecs="stpp"']=hf,Yr['application/mp4; codecs="stpp.TTML.im1t"']=hf,ff.prototype.parseInit=function(){},ff.prototype.parseMedia=function(e,t){var r=yt(e);if(r=r.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),r=r.split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new ye(2,2,2e3);var n=t.segmentStart;if(null==n&&(n=0,r[0].includes("X-TIMESTAMP-MAP"))){var i=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=r[0].match(/MPEGTS:(\d+)/m);if(i&&a){if(n=mf(new za(i[1])),null==n)throw new ye(2,2,2e3);n=t.periodStart+(Number(a[1])/9e4-n)}}a=[];var o=r[0].split("\n");for(i=1;i<o.length;i++)if(/^Region:/.test(o[i])){var s=new za(o[i]),l=new Br;Xa(s),$a(s);for(var u=Xa(s);u;){var c=l,d=u;(u=/^id=(.*)$/.exec(d))?c.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(d))?(c.height=Number(u[1]),c.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(u[1]),c.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(u[1]),c.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),$a(s),u=Xa(s)}a.push(l)}for(i=[],s=1;s<r.length;s++){if(o=r[s].split("\n"),u=o,d=n,o=a,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0])o=null;else{l=null,u[0].includes("--\x3e")||(l=u[0],u.splice(0,1)),c=new za(u[0]);var h=mf(c),f=qa(c,/[ \t]+--\x3e[ \t]+/g),p=mf(c);if(null==h||null==f||null==p)throw new ye(2,2,2001);for(u=new wr(h+d,p+d,u.slice(1).join("\n").trim()),$a(c),d=Xa(c);d;)pf(u,d,o),$a(c),d=Xa(c);null!=l&&(u.id=l),o=u}o&&i.push(o)}return i},Yr["text/vtt"]=ff,Yr['text/vtt; codecs="vtt"']=ff,vf.prototype.parseInit=function(e){var t=!1;if((new wi).H("moov",Ri).H("trak",Ri).H("mdia",Ri).fa("mdhd",function(e){0==e.version?(e.reader.L(4),e.reader.L(4),this.a=e.reader.F(),e.reader.L(4)):(e.reader.L(8),e.reader.L(8),this.a=e.reader.F(),e.reader.L(8)),e.reader.L(4)}.bind(this)).H("minf",Ri).H("stbl",Ri).fa("stsd",Ci).H("wvtt",(function(){t=!0})).parse(e),!this.a)throw new ye(2,2,2008);if(!t)throw new ye(2,2,2008)},vf.prototype.parseMedia=function(e,t){var r=this;if(!this.a)throw new ye(2,2,2008);var n,i=0,a=[],o=[],s=!1,l=!1,u=!1,c=null;if((new wi).H("moof",Ri).H("traf",Ri).fa("tfdt",(function(e){s=!0,i=0==e.version?e.reader.F():e.reader.yb()})).fa("tfhd",(function(e){var t=e.flags;e=e.reader,e.L(4),1&t&&e.L(8),2&t&&e.L(4),c=8&t?e.F():null})).fa("trun",(function(e){l=!0;var t=e.version,r=e.flags;e=e.reader;var n=e.F();1&r&&e.L(4),4&r&&e.L(4);for(var i=[],o=0;o<n;o++){var s={duration:null,sampleSize:null,pd:null};256&r&&(s.duration=e.F()),512&r&&(s.sampleSize=e.F()),1024&r&&e.L(4),2048&r&&(s.pd=0==t?e.F():e.Xd()),i.push(s)}a=i})).H("mdat",Li((function(e){u=!0,n=e}))).parse(e),!u&&!s&&!l)throw new ye(2,2,2008);var d=i,h=new DataView(n.buffer,n.byteOffset,n.byteLength),f=new Ti(h,0);return a.forEach((function(e){var n=e.duration||c,a=e.pd?i+e.pd:d;d=a+(n||0);var s=0;do{var l=f.F();s+=l;var u=f.F(),h=null;"vttc"==Oi(u)?8<l&&(h=f.Xa(l-8)):f.L(l-8),n&&h&&o.push(yf(h,t.periodStart+a/r.a,t.periodStart+d/r.a))}while(e.sampleSize&&s<e.sampleSize)})),o.filter(vr.Ga)},Yr['application/mp4; codecs="wvtt"']=vf,Y("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),Y("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),Y("shaka.util.Dom.asHTMLElement",(function(e){return e})),Y("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),Y("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}.call(n,r,r),n.shaka)t[i]=n.shaka[i]})()}).call(this,r(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
  !*** ./src/clappr-dash-shaka-playback.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(/*! clappr */"clappr"),o=r(/*! shaka-player */"./node_modules/shaka-player/dist/shaka-player.compiled.js"),s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=3e4,f=-1,p=function(e){function t(){var e;u(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return a._levels=[],a._pendingAdaptationEvent=!1,a._isShakaReadyState=!1,a._minDvrSize="undefined"===typeof a.options.shakaMinimumDvrSize?60:a.options.shakaMinimumDvrSize,a}return d(t,e),i(t,[{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getMediaElement().currentTime-this.seekRange.start:0}},{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return s.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.seekRange():{start:0,end:0}}},{key:"currentLevel",set:function(e){var t=this;this._currentLevelId=e;var r=this._currentLevelId===f;this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_START),r?(this._player.configure({abr:{enabled:!0}}),this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))},get:function(){return this._currentLevelId||f}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationTimeline",get:function(){if(this.shakaPlayerInstance)return this.shakaPlayerInstance.getManifest().presentationTimeline}},{key:"bandwidthEstimate",get:function(){if(this.shakaPlayerInstance)return this.shakaPlayerInstance.getStats().estimatedBandwidth}}],[{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s.default.polyfill.installAll();var r=s.default.Player.isBrowserSupported(),n=e.split("?")[0].match(/.*\.(.*)$/)||[];return r&&("mpd"===n[1]||t.indexOf("application/dash+xml")>-1)}},{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return s.default}}]),i(t,[{key:"getProgramDateTime",value:function(){return this.shakaPlayerInstance?new Date(1e3*(this.presentationTimeline.getPresentationStartTime()+this.seekRange.start)):0}},{key:"_updateDvr",value:function(e){this.trigger(a.Events.PLAYBACK_DVR,e),this.trigger(a.Events.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(a.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),this.dvrEnabled&&this._updateDvr(e<this._duration-3),e+=this._startTime,this.el.currentTime=e}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"play",value:function(){this._player||this._setup(),this.isReady?(this._stopped=!1,this._src=this.el.src,n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),this._startTimeUpdateTimer()):this.once(t.Events.SHAKA_READY,this.play)}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(t.Events.SHAKA_READY),this.trigger(a.Events.PLAYBACK_READY,this.name)}},{key:"error",value:function(e){a.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._stopped=!0,this._player?(this._sendStats(),this._player.unload().then((function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){a.Log.error("shaka could not be unloaded")}))):n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(a.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),a.Log.error("shaka could not be destroyed")})):this._destroy(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1,this._player=this._createPlayer(),this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player);var t=this._player.load(this._options.src);t.then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_createPlayer",value:function(){var e=new s.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},t=this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total;t||(this._lastTimeUpdate=e,this.trigger(a.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:e.height+"p"}})).reverse(),this.trigger(a.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this,t=this._options.shakaSendStatsInterval||h;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_sendStats",value:function(){this.trigger(a.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var r={shakaError:e,videoError:this.el.error},i=r.shakaError.detail||r.shakaError,o=i.category,l=i.code,u=i.severity;if(r.videoError||!l&&!o)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onError",this).call(this);var c=u===s.default.util.Error.Severity.CRITICAL,d={code:o+"_"+l,description:"Category: "+o+", code: "+l+", severity: "+u,level:c?a.PlayerError.Levels.FATAL:a.PlayerError.Levels.WARN,raw:e},h=this.createError(d);a.Log.error("Shaka error event:",h),this.trigger(a.Events.PLAYBACK_ERROR,h)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),a.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(a.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(a.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(a.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,a.Log.debug("shaka was destroyed")}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"closedCaptionsTracks",get:function(){var e=0,t=function(){return e++},r=this.textTracks||[];return r.filter((function(e){return"subtitle"===e.kind})).map((function(e){return{id:t(),name:e.label||e.language,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t=this.closedCaptionsTracks,r=void 0;if(-1!==e){if(r=t.find((function(t){return t.id===e})),!r)return void a.Log.warn('Track id "'+e+'" not found');if(this._shakaTTVisible&&!0===r.track.active)return void a.Log.info('Track id "'+e+'" already showing')}r?(this._player.selectTextTrack(r.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(a.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}}]),t}(a.HTML5Video);t.default=p,e.exports=t["default"]},clappr:
/*!******************************************************************************************!*\
  !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
  \******************************************************************************************/
/*! no static exports found */function(t,r){t.exports=e}})}))},5912:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%",width:"100%"}},[r("div",{ref:"videoPlayer",staticStyle:{height:"100%",width:"100%"}})])},i=[],a=r("1da1"),o=(r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("96cf"),r("ab44")),s=r("0a52"),l=r("42f5"),u=r.n(l),c=r("cfeb"),d=r.n(c),h={name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},created:function(){},mounted:function(){this.getPlayer()},beforeDestroy:function(){this.player&&this.player.destroy(),this.player=null},methods:{getBingeDRM:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("https://ss.binge.buzz/tv/vu/token",{headers:{Authorization:atob("QmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwWkNJNk9ETTJOek13TENKd2FHOXVaU0k2SWpFNE1URXlNRFk1TlRraUxDSnpkR0YwZFhNaU9pSkdjbVZsSWl3aVkzSmxZWFJsWkVGMElqb2lZM0psWVhSbElHUmhkR1VpTENKMWNHUmhkR1ZrUVhRaU9pSjFjR1JoZEdVZ1pHRjBaU0lzSW5SNWNHVWlPaUowYjJ0bGJpSXNJbVY0ZEhKaElqb2lkR2hwY3lCM2FXeHNJR05oY25KNUlHVjRkSEpoSUdSaGRHRWdkMmhsYmlCeVpYRjFhWEpsWkNJc0ltbGhkQ0k2TVRZd09ERXlOalV6TW4wLnFWNVVWYlJjTVBJOXdReFdzblVJOW92eDl1cG84M25PbG1HQXg2cEhVQW8=")}});case 3:if(r=t.sent,200!=r.status){t.next=6;break}return t.abrupt("return",r.data.data.oriToken);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return","");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getPlayer:function(){var e=this;this.player=new o["Player"]({parent:this.$refs.videoPlayer,source:this.options.sources[0].src,mimeType:this.options.sources[0].type,poster:"../resources/loading.gif",plugins:[s["a"],u.a,d.a],shakaConfiguration:{manifest:{retryParameters:{timeout:0,maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},streaming:{bufferBehind:1,bufferingGoal:120,rebufferingGoal:1,retryParameters:{timeout:0,maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},drm:{servers:{"com.widevine.alpha":"https://widevine-license.vudrm.tech/proxy"},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}}},shakaOnBeforeLoad:function(t){t.getNetworkingEngine().registerRequestFilter(function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(n,i){var a,o,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(2==n){r.next=2;break}return r.abrupt("return");case 2:if(a=t.drmInfo(),"com.widevine.alpha"===a.keySystem){r.next=5;break}return r.abrupt("return");case 5:return o=a.keyIds[0].toUpperCase(),r.next=8,e.getBingeDRM();case 8:s=r.sent,l={token:s,drm_info:Array.apply(null,new Uint8Array(i.body)),kid:o},l=JSON.stringify(l),i.body=l,i.headers["Content-Type"]="application/json";case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},levelSelectorConfig:{title:"Quality",labelCallback:function(e){return e.level.height+"p"}},playback:{hlsjsConfig:{debug:!1,xhrSetup:function(e,t){t.indexOf("//ss.binge.buzz/binge-drm/secured")>-1&&e.setRequestHeader("Authorization",atob("QmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwWkNJNk9ETTJOek13TENKd2FHOXVaU0k2SWpFNE1URXlNRFk1TlRraUxDSnpkR0YwZFhNaU9pSkdjbVZsSWl3aVkzSmxZWFJsWkVGMElqb2lZM0psWVhSbElHUmhkR1VpTENKMWNHUmhkR1ZrUVhRaU9pSjFjR1JoZEdVZ1pHRjBaU0lzSW5SNWNHVWlPaUowYjJ0bGJpSXNJbVY0ZEhKaElqb2lkR2hwY3lCM2FXeHNJR05oY25KNUlHVjRkSEpoSUdSaGRHRWdkMmhsYmlCeVpYRjFhWEpsWkNJc0ltbGhkQ0k2TVRZd09ERXlOalV6TW4wLnFWNVVWYlJjTVBJOXdReFdzblVJOW92eDl1cG84M25PbG1HQXg2cEhVQW8="))}}},autoPlay:!0,width:"100%",height:"100%",events:{onError:function(t){"dash_shaka_playback:6_6014"===t.code?console.log(t):e.$emit("onVideoPlayerError",t)}}})}}},f=h,p=r("2877"),g=Object(p["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"5cc6":function(e,t,r){var n=r("74e8");n("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"5e89":function(e,t,r){var n=r("861d"),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},"5f96":function(e,t,r){"use strict";var n=r("ebb5"),i=n.aTypedArray,a=n.exportTypedArrayMethod,o=[].join;a("join",(function(e){return o.apply(i(this),arguments)}))},"60bd":function(e,t,r){"use strict";var n=r("da84"),i=r("ebb5"),a=r("e260"),o=r("b622"),s=o("iterator"),l=n.Uint8Array,u=a.values,c=a.keys,d=a.entries,h=i.aTypedArray,f=i.exportTypedArrayMethod,p=l&&l.prototype[s],g=!!p&&("values"==p.name||void 0==p.name),m=function(){return u.call(h(this))};f("entries",(function(){return d.call(h(this))})),f("keys",(function(){return c.call(h(this))})),f("values",m,!g),f(s,m,!g)},"61f9":function(e,t,r){(function(t,r){e.exports=r()})(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="dist/",r(r.s="./src/main.js")}({"./node_modules/babel-runtime/core-js/array/from.js":
/*!**********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/array/from.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/array/from */"./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/get-iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/get-iterator.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/get-iterator */"./node_modules/core-js/library/fn/get-iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/json/stringify.js":
/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/json/stringify.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/json/stringify */"./node_modules/core-js/library/fn/json/stringify.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":
/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/assign.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/assign */"./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":
/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/create.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/create */"./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":
/*!**********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/define-property */"./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/get-own-property-descriptor */"./node_modules/core-js/library/fn/object/get-own-property-descriptor.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/keys.js":
/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/keys.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/keys */"./node_modules/core-js/library/fn/object/keys.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":
/*!***********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/set-prototype-of.js ***!
  \***********************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/set-prototype-of */"./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":
/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol.js ***!
  \******************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/symbol */"./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":
/*!***************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol/iterator.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/symbol/iterator */"./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":
/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":
/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../core-js/object/define-property */"./node_modules/babel-runtime/core-js/object/define-property.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},"./node_modules/babel-runtime/helpers/extends.js":
/*!*******************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/extends.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},"./node_modules/babel-runtime/helpers/inherits.js":
/*!********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/inherits.js ***!
  \********************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../core-js/object/set-prototype-of */"./node_modules/babel-runtime/core-js/object/set-prototype-of.js"),i=u(n),a=r(/*! ../core-js/object/create */"./node_modules/babel-runtime/core-js/object/create.js"),o=u(a),s=r(/*! ../helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,l.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":
/*!*************************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js ***!
  \*************************************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},"./node_modules/babel-runtime/helpers/toConsumableArray.js":
/*!*****************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/toConsumableArray.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../core-js/array/from */"./node_modules/babel-runtime/core-js/array/from.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}},"./node_modules/babel-runtime/helpers/typeof.js":
/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/typeof.js ***!
  \******************************************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n=r(/*! ../core-js/symbol/iterator */"./node_modules/babel-runtime/core-js/symbol/iterator.js"),i=l(n),a=r(/*! ../core-js/symbol */"./node_modules/babel-runtime/core-js/symbol.js"),o=l(a),s="function"===typeof o.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof o.default&&"symbol"===s(i.default)?function(e){return"undefined"===typeof e?"undefined":s(e)}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":"undefined"===typeof e?"undefined":s(e)}},"./node_modules/clappr-zepto/zepto.js":
/*!********************************************!*\
  !*** ./node_modules/clappr-zepto/zepto.js ***!
  \********************************************/
/*! no static exports found */function(e,t){var r=function(){var e,t,r,n,i,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],A=["after","prepend","before","append"],_=c.createElement("table"),E=c.createElement("tr"),T={tr:c.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:E,th:E,"*":c.createElement("div")},k=/complete|loaded|interactive/,S=/^[\w-]*$/,w={},R=w.toString,C={},L=c.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};function D(e){return null==e?String(e):w[R.call(e)]||"object"}function P(e){return"function"==D(e)}function x(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==D(e)}function F(e){return M(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){var t=!!e&&"length"in e&&e.length,n=r.type(e);return"function"!=n&&!x(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return l.call(e,(function(e){return null!=e}))}function B(e){return e.length>0?r.fn.concat.apply([],e):e}function G(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function K(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||f[G(e)]?t:t+"px"}function Y(e){var t,r;return d[e]||(t=c.createElement(e),c.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),d[e]=r),d[e]}function H(e){return"children"in e?u.call(e.children):r.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function W(e,t){var r,n=e?e.length:0;for(r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function z(r,n,i){for(t in n)i&&(F(n[t])||O(n[t]))?(F(n[t])&&!F(r[t])&&(r[t]={}),O(n[t])&&!O(r[t])&&(r[t]=[]),z(r[t],n[t],i)):n[t]!==e&&(r[t]=n[t])}function $(e,t){return null==t?r(e):r(e).filter(t)}function q(e,t,r,n){return P(t)?t.call(e,r,n):t}function X(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function Z(t,r){var n=t.className||"",i=n&&n.baseVal!==e;if(r===e)return i?n.baseVal:n;i?n.baseVal=r:t.className=r}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?r.parseJSON(e):e):e}catch(t){return e}}function Q(e,t){t(e);for(var r=0,n=e.childNodes.length;r<n;r++)Q(e.childNodes[r],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,a=!i;return a&&(i=L).appendChild(e),n=~C.qsa(i,t).indexOf(e),a&&L.removeChild(e),n},i=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,r){return e.indexOf(t)==r}))},C.fragment=function(t,n,i){var a,o,s;return g.test(t)&&(a=r(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in T||(n="*"),s=T[n],s.innerHTML=""+t,a=r.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),F(i)&&(o=r(a),r.each(i,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new W(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,n){var i;if(!t)return C.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=C.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}else{if(P(t))return r(c).ready(t);if(C.isZ(t))return t;if(O(t))i=U(t);else if(M(t))i=[t],t=null;else if(p.test(t))i=C.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}}return C.Z(i,t)},r=function(e,t){return C.init(e,t)},r.extend=function(e){var t,r=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=r.shift()),r.forEach((function(r){z(e,r,t)})),e},C.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],a=n||i?t.slice(1):t,o=S.test(a);return e.getElementById&&o&&n?(r=e.getElementById(a))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},r.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},r.type=D,r.isFunction=P,r.isWindow=x,r.isArray=O,r.isPlainObject=F,r.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},r.isNumeric=function(e){var t=Number(e),r=typeof e;return null!=e&&"boolean"!=r&&("string"!=r||e.length)&&!isNaN(t)&&isFinite(t)||!1},r.inArray=function(e,t,r){return o.indexOf.call(t,e,r)},r.camelCase=i,r.trim=function(e){return null==e?"":String.prototype.trim.call(e)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(e,t){var r,n,i,a=[];if(j(e))for(n=0;n<e.length;n++)r=t(e[n],n),null!=r&&a.push(r);else for(i in e)r=t(e[i],i),null!=r&&a.push(r);return B(a)},r.each=function(e,t){var r,n;if(j(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},r.grep=function(e,t){return l.call(e,t)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),r.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,r=[];for(e=0;e<arguments.length;e++)t=arguments[e],r[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,r)},map:function(e){return r(r.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return r(u.apply(this,arguments))},ready:function(e){return k.test(c.readyState)&&c.body?e(r):c.addEventListener("DOMContentLoaded",(function(){e(r)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,r){return!1!==e.call(t,r,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):r(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return r(a(this.concat(r(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var n=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||n.push(this)}));else{var i="string"==typeof t?this.filter(t):j(t)&&P(t.item)?u.call(t):r(t);this.forEach((function(e){i.indexOf(e)<0&&n.push(e)}))}return r(n)},has:function(e){return this.filter((function(){return M(e)?r.contains(this,e):r(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:r(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:r(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?r(e).filter((function(){var e=this;return o.some.call(n,(function(t){return r.contains(t,e)}))})):1==this.length?r(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):r(),t},closest:function(e,t){var n=[],i="object"==typeof e&&r(e);return this.each((function(r,a){while(a&&!(i?i.indexOf(a)>=0:C.matches(a,e)))a=a!==t&&!N(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),r(n)},parents:function(e){var t=[],n=this;while(n.length>0)n=r.map(n,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return $(t,e)},parent:function(e){return $(a(this.pluck("parentNode")),e)},children:function(e){return $(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return $(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return r.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=Y(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var n=r(e).get(0),i=n.parentNode||this.length>1;return this.each((function(a){r(this).wrapAll(t?e.call(this,a):i?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){var t;r(this[0]).before(e=r(e));while((t=e.children()).length)e=t.first();r(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(n){var i=r(this),a=i.contents(),o=t?e.call(this,n):e;a.length?a.wrapAll(o):i.append(o)}))},unwrap:function(){return this.parent().each((function(){r(this).replaceWith(r(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()}))},prev:function(e){return r(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return r(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var n=this.innerHTML;r(this).empty().append(q(this,e,t,n))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var r=q(this,e,t,this.textContent);this.textContent=null==r?"":""+r})):0 in this?this.pluck("textContent").join(""):null},attr:function(r,n){var i;return"string"!=typeof r||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(r))for(t in r)X(this,t,r[t]);else X(this,r,q(this,n,e,this.getAttribute(r)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(r))?i:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){X(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(r){this[e]=q(this,t,r,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(t,r){var n="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,r):this.attr(n);return null!==i?J(i):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=q(this,e,t,this.value)}))):this[0]&&(this[0].multiple?r(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=r(this),i=q(this,e,t,n.offset()),a=n.offsetParent().offset(),o={top:i.top-a.top,left:i.left-a.left};"static"==n.css("position")&&(o["position"]="relative"),n.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!r.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[i(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(O(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return r.each(e,(function(e,t){o[t]=a.style[i(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==D(e))n||0===n?l=G(e)+":"+V(e,n):this.each((function(){this.style.removeProperty(G(e))}));else for(t in e)e[t]||0===e[t]?l+=G(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(G(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(r(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Z(e))}),K(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){n=[];var i=Z(this),a=q(this,e,t,i);a.split(/\s+/g).forEach((function(e){r(this).hasClass(e)||n.push(e)}),this),n.length&&Z(this,i+(i?" ":"")+n.join(" "))}})):this},removeClass:function(t){return this.each((function(r){if("className"in this){if(t===e)return Z(this,"");n=Z(this),q(this,t,r,n).split(/\s+/g).forEach((function(e){n=n.replace(K(e)," ")})),Z(this,n.trim())}}))},toggleClass:function(t,n){return t?this.each((function(i){var a=r(this),o=q(this,t,i,Z(this));o.split(/\s+/g).forEach((function(t){(n===e?!a.hasClass(t):n)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var r="scrollTop"in this[0];return t===e?r?this[0].scrollTop:this[0].pageYOffset:this.each(r?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var r="scrollLeft"in this[0];return t===e?r?this[0].scrollLeft:this[0].pageXOffset:this.each(r?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(r(e).css("margin-top"))||0,n.left-=parseFloat(r(e).css("margin-left"))||0,i.top+=parseFloat(r(t[0]).css("border-top-width"))||0,i.left+=parseFloat(r(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent||c.body;while(e&&!v.test(e.nodeName)&&"static"==r(e).css("position"))e=e.offsetParent;return e}))}},r.fn.detach=r.fn.remove,["width","height"].forEach((function(t){var n=t.replace(/./,(function(e){return e[0].toUpperCase()}));r.fn[t]=function(i){var a,o=this[0];return i===e?x(o)?o["inner"+n]:N(o)?o.documentElement["scroll"+n]:(a=this.offset())&&a[t]:this.each((function(e){o=r(this),o.css(t,q(this,i,e,o[t]()))}))}})),A.forEach((function(t,n){var i=n%2;r.fn[t]=function(){var t,a,o=r.map(arguments,(function(n){var i=[];return t=D(n),"array"==t?(n.forEach((function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(C.fragment(t)))})),i):"object"==t||null==n?n:C.fragment(n)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var l=r.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return r(e).remove();a.insertBefore(e,t),l&&Q(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t["eval"].call(t,e.innerHTML)}}))}))}))},r.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return r(e)[t](this),this}})),C.Z.prototype=W.prototype=r.fn,C.uniq=a,C.deserializeValue=J,r.zepto=C,r}();window.Zepto=r,void 0===window.$&&(window.$=r),function(e){var t,r,n=+new Date,i=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=i.createElement("a");function h(t,r,n){var i=e.Event(r);return e(t).trigger(i,n),!i.isDefaultPrevented()}function f(e,t,r,n){if(e.global)return h(t||i,r,n)}function p(t){t.global&&0===e.active++&&f(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&f(t,null,"ajaxStop")}function m(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===f(t,r,"ajaxBeforeSend",[e,t]))return!1;f(t,r,"ajaxSend",[e,t])}function v(e,t,r,n){var i=r.context,a="success";r.success.call(i,e,a,t),n&&n.resolveWith(i,[e,a,t]),f(r,i,"ajaxSuccess",[t,r,e]),b(a,t,r)}function y(e,t,r,n,i){var a=n.context;n.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),f(n,a,"ajaxError",[r,n,e||t]),b(t,r,n)}function b(e,t,r){var n=r.context;r.complete.call(n,t,e),f(r,n,"ajaxComplete",[t,r]),g(r)}function A(e,t,r){if(r.dataFilter==_)return e;var n=r.context;return r.dataFilter.call(n,e,t)}function _(){}function E(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}function T(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function k(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function S(t,r,n,i){return e.isFunction(r)&&(i=n,n=r,r=void 0),e.isFunction(n)||(i=n,n=void 0),{url:t,data:r,success:n,dataType:i}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,r){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+n++,u=i.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return r&&r.promise(h),e(u).on("load error",(function(n,i){clearTimeout(o),e(u).off().remove(),"error"!=n.type&&a?v(a[0],h,t,r):y(null,i||"error",h,t,r),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===m(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),i.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:_},e.ajax=function(n){var a,o,s=e.extend({},n||{}),l=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===s[t]&&(s[t]=e.ajaxSettings[t]);p(s),s.crossDomain||(a=i.createElement("a"),a.href=s.url,a.href=a.href,s.crossDomain=d.protocol+"//"+d.host!==a.protocol+"//"+a.host),s.url||(s.url=window.location.toString()),(o=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,o)),k(s);var u=s.dataType,h=/\?.+=\?/.test(s.url);if(h&&(u="jsonp"),!1!==s.cache&&(n&&!0===n.cache||"script"!=u&&"jsonp"!=u)||(s.url=T(s.url,"_="+Date.now())),"jsonp"==u)return h||(s.url=T(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),e.ajaxJSONP(s,l);var f,g=s.accepts[u],b={},S=function(e,t){b[e.toLowerCase()]=[e,t]},w=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:window.location.protocol,R=s.xhr(),C=R.setRequestHeader;if(l&&l.promise(R),s.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",g||"*/*"),(g=s.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),R.overrideMimeType&&R.overrideMimeType(g)),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&S("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(r in s.headers)S(r,s.headers[r]);if(R.setRequestHeader=S,R.onreadystatechange=function(){if(4==R.readyState){R.onreadystatechange=_,clearTimeout(f);var t,r=!1;if(R.status>=200&&R.status<300||304==R.status||0==R.status&&"file:"==w){if(u=u||E(s.mimeType||R.getResponseHeader("content-type")),"arraybuffer"==R.responseType||"blob"==R.responseType)t=R.response;else{t=R.responseText;try{t=A(t,u,s),"script"==u?(0,eval)(t):"xml"==u?t=R.responseXML:"json"==u&&(t=c.test(t)?null:e.parseJSON(t))}catch(n){r=n}if(r)return y(r,"parsererror",R,s,l)}v(t,R,s,l)}else y(R.statusText||null,R.status?"error":"abort",R,s,l)}},!1===m(R,s))return R.abort(),y(null,"abort",R,s,l),R;var L=!("async"in s)||s.async;if(R.open(s.type,s.url,L,s.username,s.password),s.xhrFields)for(r in s.xhrFields)R[r]=s.xhrFields[r];for(r in b)C.apply(R,b[r]);return s.timeout>0&&(f=setTimeout((function(){R.onreadystatechange=_,R.abort(),y(null,"timeout",R,s,l)}),s.timeout)),R.send(s.data?s.data:null),R},e.get=function(){return e.ajax(S.apply(null,arguments))},e.post=function(){var t=S.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=S.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,r,n){if(!this.length)return this;var i,o=this,s=t.split(/\s/),l=S(t,r,n),u=l.success;return s.length>1&&(l.url=s[0],i=s[1]),l.success=function(t){o.html(i?e("<div>").html(t.replace(a,"")).find(i):t),u&&u.apply(o,arguments)},e.ajax(l),this};var w=encodeURIComponent;function R(t,r,n,i){var a,o=e.isArray(r),s=e.isPlainObject(r);e.each(r,(function(r,l){a=e.type(l),i&&(r=n?i:i+"["+(s||"object"==a||"array"==a?r:"")+"]"),!i&&o?t.add(l.name,l.value):"array"==a||!n&&"object"==a?R(t,l,n,r):t.add(r,l)}))}e.param=function(t,r){var n=[];return n.add=function(t,r){e.isFunction(r)&&(r=r()),null==r&&(r=""),this.push(w(t)+"="+w(r))},R(n,t,r),n.join("&").replace(/%20/g,"+")}}(r),function(e){e.Callbacks=function(t){t=e.extend({},t);var r,n,i,a,o,s,l=[],u=!t.once&&[],c=function(e){for(r=t.memory&&e,n=!0,s=a||0,a=0,o=l.length,i=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){r=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):r?l.length=0:d.disable())},d={add:function(){if(l){var n=l.length,s=function(r){e.each(r,(function(e,r){"function"===typeof r?t.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==typeof r&&s(r)}))};s(arguments),i?o=l.length:r&&(a=n,c(r))}return this},remove:function(){return l&&e.each(arguments,(function(t,r){var n;while((n=e.inArray(r,l,n))>-1)l.splice(n,1),i&&(n<=o&&--o,n<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=r=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,r||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!n}};return d}}(r),function(e){var t=Array.prototype.slice;function r(t){var n=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",a={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r((function(r){e.each(n,(function(n,i){var s=e.isFunction(t[n])&&t[n];o[i[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var n=this===a?r.promise():this,o=s?[t]:arguments;r[i[0]+"With"](n,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(n,(function(e,t){var r=t[2],s=t[3];a[t[1]]=r.add,s&&r.add((function(){i=s}),n[1^e][2].disable,n[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=r.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(n){var i,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||n&&e.isFunction(n.promise)?l:0,d=1===c?n:r(),h=function(e,r,n){return function(a){r[e]=this,n[e]=arguments.length>1?t.call(arguments):a,n===i?d.notifyWith(r,n):--c||d.resolveWith(r,n)}};if(l>1)for(i=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,i)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=r}(r),function(e){var t,r=1,n=Array.prototype.slice,i=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=r++)}function h(e,t,r,n){if(t=f(t),t.ns)var i=p(t.ns);return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||d(e.fn)===d(r))&&(!n||e.sel==n)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function g(e,t){return e.del&&!l&&e.e in u||!!t}function m(e){return c[e]||l&&u[e]||e}function v(r,n,i,a,s,l,u){var h=d(r),p=o[h]||(o[h]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(i);var o=f(n);o.fn=i,o.sel=s,o.e in c&&(i=function(t){var r=t.relatedTarget;if(!r||r!==this&&!e.contains(this,r))return o.fn.apply(this,arguments)}),o.del=l;var d=l||i;o.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=a;var n=d.apply(r,e._args==t?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},o.i=p.length,p.push(o),"addEventListener"in r&&r.addEventListener(m(o.e),o.proxy,g(o,u))}))}function y(e,t,r,n,i){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,r,n).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,g(t,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:v,remove:y},e.proxy=function(t,r){var o=2 in arguments&&n.call(arguments,2);if(i(t)){var s=function(){return t.apply(r,o?o.concat(n.call(arguments)):arguments)};return s._zid=d(t),s}if(a(r))return o?(o.unshift(t[r],t),e.proxy.apply(null,o)):e.proxy(t[r],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,r){return this.on(e,t,r)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var b=function(){return!0},A=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function T(r,n){return!n&&r.isDefaultPrevented||(n||(n=r),e.each(E,(function(e,t){var i=n[e];r[e]=function(){return this[t]=b,i&&i.apply(n,arguments)},r[t]=A})),r.timeStamp||(r.timeStamp=Date.now()),(n.defaultPrevented!==t?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(r.isDefaultPrevented=b)),r}function k(e){var r,n={originalEvent:e};for(r in e)_.test(r)||e[r]===t||(n[r]=e[r]);return T(n,e)}e.fn.delegate=function(e,t,r){return this.on(t,e,r)},e.fn.undelegate=function(e,t,r){return this.off(t,e,r)},e.fn.live=function(t,r){return e(document.body).delegate(this.selector,t,r),this},e.fn.die=function(t,r){return e(document.body).undelegate(this.selector,t,r),this},e.fn.on=function(r,o,s,l,u){var c,d,h=this;return r&&!a(r)?(e.each(r,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||i(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=A),h.each((function(t,i){u&&(c=function(e){return y(i,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var r,a=e(t.target).closest(o,i).get(0);if(a&&a!==i)return r=e.extend(k(t),{currentTarget:a,liveFired:i}),(c||l).apply(a,[r].concat(n.call(arguments,1)))}),v(i,r,l,s,o,d||c)})))},e.fn.off=function(r,n,o){var s=this;return r&&!a(r)?(e.each(r,(function(e,t){s.off(e,n,t)})),s):(a(n)||i(o)||!1===o||(o=n,n=t),!1===o&&(o=A),s.each((function(){y(this,r,o,n)})))},e.fn.trigger=function(t,r){return t=a(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=r,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,r)}))},e.fn.triggerHandler=function(t,r){var n,i;return this.each((function(o,s){n=k(a(t)?e.Event(t):t),n._args=r,n.target=s,e.each(h(s,t.type||t),(function(e,t){if(i=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(t=e,e=t.type);var r=document.createEvent(s[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),T(r)}}(r),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(r,n){try{return e(r,n)}catch(t){return null}}}}(),function(e){var t=e.zepto,r=t.qsa,n=t.matches;function i(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(i(this))return this},hidden:function(){if(!i(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,r){if(e===r)return this},contains:function(t,r,n){if(e(this).text().indexOf(n)>-1)return this},has:function(e,r,n){if(t.qsa(this,n).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=o.exec(e);if(i&&i[2]in a&&(r=a[i[2]],n=i[3],e=i[1],n)){var s=Number(n);n=isNaN(s)?n.replace(/^["']|["']$/g,""):s}return t(e,r,n)}t.qsa=function(n,i){return u(i,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(n).addClass(l),a="."+l+" "+a);var d=r(n,a)}catch(h){throw console.error("error performing selector: %o",i),h}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,r,i){return(!t||n(e,t))&&(!r||r.call(e,null,i)===e)}))}}(r),e.exports=r},"./node_modules/core-js/library/fn/array/from.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/fn/array/from.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../../modules/es6.array.from */"./node_modules/core-js/library/modules/es6.array.from.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/get-iterator.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/fn/get-iterator.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../modules/web.dom.iterable */"./node_modules/core-js/library/modules/web.dom.iterable.js"),r(/*! ../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),e.exports=r(/*! ../modules/core.get-iterator */"./node_modules/core-js/library/modules/core.get-iterator.js")},"./node_modules/core-js/library/fn/json/stringify.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/fn/json/stringify.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},"./node_modules/core-js/library/fn/object/assign.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/assign.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.assign */"./node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/object/create.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/create.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.create */"./node_modules/core-js/library/modules/es6.object.create.js");var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return n.create(e,t)}},"./node_modules/core-js/library/fn/object/define-property.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/define-property.js ***!
  \*******************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.define-property */"./node_modules/core-js/library/modules/es6.object.define-property.js");var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"./node_modules/core-js/library/fn/object/get-own-property-descriptor.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js ***!
  \*******************************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.get-own-property-descriptor */"./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js");var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},"./node_modules/core-js/library/fn/object/keys.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/keys.js ***!
  \********************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.keys */"./node_modules/core-js/library/modules/es6.object.keys.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.keys},"./node_modules/core-js/library/fn/object/set-prototype-of.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/set-prototype-of.js ***!
  \********************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.object.set-prototype-of */"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/symbol/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/index.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.symbol */"./node_modules/core-js/library/modules/es6.symbol.js"),r(/*! ../../modules/es6.object.to-string */"./node_modules/core-js/library/modules/es6.object.to-string.js"),r(/*! ../../modules/es7.symbol.async-iterator */"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),r(/*! ../../modules/es7.symbol.observable */"./node_modules/core-js/library/modules/es7.symbol.observable.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/iterator.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ../../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../../modules/web.dom.iterable */"./node_modules/core-js/library/modules/web.dom.iterable.js"),e.exports=r(/*! ../../modules/_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_a-function.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_add-to-unscopables.js ***!
  \*********************************************************************/
/*! no static exports found */function(e,t){e.exports=function(){}},"./node_modules/core-js/library/modules/_an-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_an-object.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_array-includes.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-includes.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),i=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),a=r(/*! ./_to-index */"./node_modules/core-js/library/modules/_to-index.js");e.exports=function(e){return function(t,r,o){var s,l=n(t),u=i(l.length),c=a(o,u);if(e&&r!=r){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},"./node_modules/core-js/library/modules/_classof.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_classof.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(r){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},"./node_modules/core-js/library/modules/_cof.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_cof.js ***!
  \******************************************************/
/*! no static exports found */function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"./node_modules/core-js/library/modules/_core.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_core.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},"./node_modules/core-js/library/modules/_create-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_create-property.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},"./node_modules/core-js/library/modules/_ctx.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ctx.js ***!
  \******************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_a-function */"./node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_defined.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_descriptors.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){e.exports=!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_dom-create.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_dom-create.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),i=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-bug-keys.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-keys.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),i=r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js"),a=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js");e.exports=function(e){var t=n(e),r=i.f;if(r){var o,s=r(e),l=a.f,u=0;while(s.length>u)l.call(e,o=s[u++])&&t.push(o)}return t}},"./node_modules/core-js/library/modules/_export.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_export.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),a=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),o=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),s="prototype",l=function(e,t,r){var u,c,d,h=e&l.F,f=e&l.G,p=e&l.S,g=e&l.P,m=e&l.B,v=e&l.W,y=f?i:i[t]||(i[t]={}),b=y[s],A=f?n:p?n[t]:(n[t]||{})[s];for(u in f&&(r=t),r)c=!h&&A&&void 0!==A[u],c&&u in y||(d=c?A[u]:r[u],y[u]=f&&"function"!=typeof A[u]?r[u]:m&&c?a(d,n):v&&A[u]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):g&&"function"==typeof d?a(Function.call,d):d,g&&((y.virtual||(y.virtual={}))[u]=d,e&l.R&&b&&!b[u]&&o(b,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"./node_modules/core-js/library/modules/_fails.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_fails.js ***!
  \********************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"./node_modules/core-js/library/modules/_global.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_global.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"./node_modules/core-js/library/modules/_has.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_has.js ***!
  \******************************************************/
/*! no static exports found */function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"./node_modules/core-js/library/modules/_hide.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_hide.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js");e.exports=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},"./node_modules/core-js/library/modules/_html.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_html.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").document&&document.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ie8-dom-define.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){e.exports=!r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")&&!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty(r(/*! ./_dom-create */"./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_iobject.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iobject.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"./node_modules/core-js/library/modules/_is-array-iter.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array-iter.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},"./node_modules/core-js/library/modules/_is-array.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"./node_modules/core-js/library/modules/_is-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-object.js ***!
  \************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/library/modules/_iter-call.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-call.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(o){var a=e["return"];throw void 0!==a&&n(a.call(e)),o}}},"./node_modules/core-js/library/modules/_iter-create.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-create.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),a=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),o={};r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")(o,r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-define.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js"),i=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),a=r(/*! ./_redefine */"./node_modules/core-js/library/modules/_redefine.js"),o=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),s=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),l=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),u=r(/*! ./_iter-create */"./node_modules/core-js/library/modules/_iter-create.js"),c=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),d=r(/*! ./_object-gpo */"./node_modules/core-js/library/modules/_object-gpo.js"),h=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",m="values",v=function(){return this};e.exports=function(e,t,r,y,b,A,_){u(r,t,y);var E,T,k,S=function(e){if(!f&&e in L)return L[e];switch(e){case g:return function(){return new r(this,e)};case m:return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",R=b==m,C=!1,L=e.prototype,I=L[h]||L[p]||b&&L[b],O=I||S(b),D=b?R?S("entries"):O:void 0,P="Array"==t&&L.entries||I;if(P&&(k=d(P.call(new e)),k!==Object.prototype&&(c(k,w,!0),n||s(k,h)||o(k,h,v))),R&&I&&I.name!==m&&(C=!0,O=function(){return I.call(this)}),n&&!_||!f&&!C&&L[h]||o(L,h,O),l[t]=O,l[w]=v,b)if(E={values:R?O:S(m),keys:A?O:S(g),entries:D},_)for(T in E)T in L||a(L,T,E[T]);else i(i.P+i.F*(f||C),t,E);return E}},"./node_modules/core-js/library/modules/_iter-detect.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-detect.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),i=!1;try{var a=[7][n]();a["return"]=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(o){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],s=a[n]();s.next=function(){return{done:r=!0}},a[n]=function(){return s},e(a)}catch(o){}return r}},"./node_modules/core-js/library/modules/_iter-step.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-step.js ***!
  \************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iterators.js ***!
  \************************************************************/
/*! no static exports found */function(e,t){e.exports={}},"./node_modules/core-js/library/modules/_keyof.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_keyof.js ***!
  \********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),i=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js");e.exports=function(e,t){var r,a=i(e),o=n(a),s=o.length,l=0;while(s>l)if(a[r=o[l++]]===t)return r}},"./node_modules/core-js/library/modules/_library.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_library.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t){e.exports=!0},"./node_modules/core-js/library/modules/_meta.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_meta.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js")("meta"),i=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),a=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),o=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,s=0,l=Object.isExtensible||function(){return!0},u=!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return l(Object.preventExtensions({}))})),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},h=function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},f=function(e){return u&&p.NEED&&l(e)&&!a(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},"./node_modules/core-js/library/modules/_object-assign.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-assign.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),i=r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js"),a=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js"),o=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),s=r(/*! ./_iobject */"./node_modules/core-js/library/modules/_iobject.js"),l=Object.assign;e.exports=!l||r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n}))?function(e,t){var r=o(e),l=arguments.length,u=1,c=i.f,d=a.f;while(l>u){var h,f=s(arguments[u++]),p=c?n(f).concat(c(f)):n(f),g=p.length,m=0;while(g>m)d.call(f,h=p[m++])&&(r[h]=f[h])}return r}:l},"./node_modules/core-js/library/modules/_object-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-create.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),i=r(/*! ./_object-dps */"./node_modules/core-js/library/modules/_object-dps.js"),a=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js"),o=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),s=function(){},l="prototype",u=function(){var e,t=r(/*! ./_dom-create */"./node_modules/core-js/library/modules/_dom-create.js")("iframe"),n=a.length,i="<",o=">";t.style.display="none",r(/*! ./_html */"./node_modules/core-js/library/modules/_html.js").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+o+"document.F=Object"+i+"/script"+o),e.close(),u=e.F;while(n--)delete u[l][a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[l]=n(e),r=new s,s[l]=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},"./node_modules/core-js/library/modules/_object-dp.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dp.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),i=r(/*! ./_ie8-dom-define */"./node_modules/core-js/library/modules/_ie8-dom-define.js"),a=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),o=Object.defineProperty;t.f=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},"./node_modules/core-js/library/modules/_object-dps.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dps.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),a=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js");e.exports=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(e,t){i(e);var r,o=a(t),s=o.length,l=0;while(s>l)n.f(e,r=o[l++],t[r]);return e}},"./node_modules/core-js/library/modules/_object-gopd.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopd.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),a=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),o=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),s=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),l=r(/*! ./_ie8-dom-define */"./node_modules/core-js/library/modules/_ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(r){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn-ext.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),i=r(/*! ./_object-gopn */"./node_modules/core-js/library/modules/_object-gopn.js").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},"./node_modules/core-js/library/modules/_object-gopn.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-keys-internal */"./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-gops.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gops.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gpo.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),i=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),a=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys-internal.js ***!
  \***********************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),i=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),a=r(/*! ./_array-includes */"./node_modules/core-js/library/modules/_array-includes.js")(!1),o=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=o&&n(s,r)&&u.push(r);while(t.length>l)n(s,r=t[l++])&&(~a(u,r)||u.push(r));return u}},"./node_modules/core-js/library/modules/_object-keys.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-keys-internal */"./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-pie.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-pie.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t){t.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-sap.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),a=r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",o)}},"./node_modules/core-js/library/modules/_property-desc.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_property-desc.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/library/modules/_redefine.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_redefine.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-proto.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-proto.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),i=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js")(Function.call,r(/*! ./_object-gopd */"./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-to-string-tag.js ***!
  \********************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,i=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),a=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},"./node_modules/core-js/library/modules/_shared-key.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared-key.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js")("keys"),i=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return n[e]||(n[e]=i(e))}},"./node_modules/core-js/library/modules/_shared.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i="__core-js_shared__",a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},"./node_modules/core-js/library/modules/_string-at.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_string-at.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},"./node_modules/core-js/library/modules/_to-index.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-index.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},"./node_modules/core-js/library/modules/_to-integer.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-integer.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"./node_modules/core-js/library/modules/_to-iobject.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-iobject.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_iobject */"./node_modules/core-js/library/modules/_iobject.js"),i=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return n(i(e))}},"./node_modules/core-js/library/modules/_to-length.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-length.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-object.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(n(e))}},"./node_modules/core-js/library/modules/_to-primitive.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-primitive.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_uid.js ***!
  \******************************************************/
/*! no static exports found */function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},"./node_modules/core-js/library/modules/_wks-define.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-define.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),a=r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js"),o=r(/*! ./_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js"),s=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},"./node_modules/core-js/library/modules/_wks-ext.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-ext.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){t.f=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks.js ***!
  \******************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js")("wks"),i=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js"),a=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").Symbol,o="function"==typeof a,s=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=n},"./node_modules/core-js/library/modules/core.get-iterator-method.js":
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/core.get-iterator-method.js ***!
  \**************************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_classof */"./node_modules/core-js/library/modules/_classof.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),a=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js");e.exports=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},"./node_modules/core-js/library/modules/core.get-iterator.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/core.get-iterator.js ***!
  \*******************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),i=r(/*! ./core.get-iterator-method */"./node_modules/core-js/library/modules/core.get-iterator-method.js");e.exports=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"./node_modules/core-js/library/modules/es6.array.from.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.from.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),i=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),a=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),o=r(/*! ./_iter-call */"./node_modules/core-js/library/modules/_iter-call.js"),s=r(/*! ./_is-array-iter */"./node_modules/core-js/library/modules/_is-array-iter.js"),l=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),u=r(/*! ./_create-property */"./node_modules/core-js/library/modules/_create-property.js"),c=r(/*! ./core.get-iterator-method */"./node_modules/core-js/library/modules/core.get-iterator-method.js");i(i.S+i.F*!r(/*! ./_iter-detect */"./node_modules/core-js/library/modules/_iter-detect.js")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,d,h=a(e),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(h);if(m&&(g=n(g,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(t=l(h.length),r=new f(t);t>v;v++)u(r,v,m?g(h[v],v):h[v]);else for(d=y.call(h),r=new f;!(i=d.next()).done;v++)u(r,v,m?o(d,g,[i.value,v],!0):i.value);return r.length=v,r}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.iterator.js ***!
  \********************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_add-to-unscopables */"./node_modules/core-js/library/modules/_add-to-unscopables.js"),i=r(/*! ./_iter-step */"./node_modules/core-js/library/modules/_iter-step.js"),a=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),o=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js");e.exports=r(/*! ./_iter-define */"./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},"./node_modules/core-js/library/modules/es6.object.assign.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.assign.js ***!
  \*******************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S+n.F,"Object",{assign:r(/*! ./_object-assign */"./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.create.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.create.js ***!
  \*******************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{create:r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.define-property.js ***!
  \****************************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S+n.F*!r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js ***!
  \****************************************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),i=r(/*! ./_object-gopd */"./node_modules/core-js/library/modules/_object-gopd.js").f;r(/*! ./_object-sap */"./node_modules/core-js/library/modules/_object-sap.js")("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},"./node_modules/core-js/library/modules/es6.object.keys.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.keys.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),i=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js");r(/*! ./_object-sap */"./node_modules/core-js/library/modules/_object-sap.js")("keys",(function(){return function(e){return i(n(e))}}))},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js ***!
  \*****************************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{setPrototypeOf:r(/*! ./_set-proto */"./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.to-string.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){},"./node_modules/core-js/library/modules/es6.string.iterator.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.string.iterator.js ***!
  \*********************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_string-at */"./node_modules/core-js/library/modules/_string-at.js")(!0);r(/*! ./_iter-define */"./node_modules/core-js/library/modules/_iter-define.js")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/library/modules/es6.symbol.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.symbol.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),a=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),o=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),s=r(/*! ./_redefine */"./node_modules/core-js/library/modules/_redefine.js"),l=r(/*! ./_meta */"./node_modules/core-js/library/modules/_meta.js").KEY,u=r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js"),c=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js"),d=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),h=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js"),f=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js"),p=r(/*! ./_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js"),g=r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js"),m=r(/*! ./_keyof */"./node_modules/core-js/library/modules/_keyof.js"),v=r(/*! ./_enum-keys */"./node_modules/core-js/library/modules/_enum-keys.js"),y=r(/*! ./_is-array */"./node_modules/core-js/library/modules/_is-array.js"),b=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),A=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),_=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),E=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),T=r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js"),k=r(/*! ./_object-gopn-ext */"./node_modules/core-js/library/modules/_object-gopn-ext.js"),S=r(/*! ./_object-gopd */"./node_modules/core-js/library/modules/_object-gopd.js"),w=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),R=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),C=S.f,L=w.f,I=k.f,O=n.Symbol,D=n.JSON,P=D&&D.stringify,x="prototype",N=f("_hidden"),M=f("toPrimitive"),F={}.propertyIsEnumerable,j=c("symbol-registry"),U=c("symbols"),B=c("op-symbols"),G=Object[x],K="function"==typeof O,V=n.QObject,Y=!V||!V[x]||!V[x].findChild,H=a&&u((function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=C(G,t);n&&delete G[t],L(e,t,r),n&&e!==G&&L(G,t,n)}:L,W=function(e){var t=U[e]=T(O[x]);return t._k=e,t},z=K&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},$=function(e,t,r){return e===G&&$(B,t,r),b(e),t=_(t,!0),b(r),i(U,t)?(r.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),r=T(r,{enumerable:E(0,!1)})):(i(e,N)||L(e,N,E(1,{})),e[N][t]=!0),H(e,t,r)):L(e,t,r)},q=function(e,t){b(e);var r,n=v(t=A(t)),i=0,a=n.length;while(a>i)$(e,r=n[i++],t[r]);return e},X=function(e,t){return void 0===t?T(e):q(T(e),t)},Z=function(e){var t=F.call(this,e=_(e,!0));return!(this===G&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,N)&&this[N][e])||t)},J=function(e,t){if(e=A(e),t=_(t,!0),e!==G||!i(U,t)||i(B,t)){var r=C(e,t);return!r||!i(U,t)||i(e,N)&&e[N][t]||(r.enumerable=!0),r}},Q=function(e){var t,r=I(A(e)),n=[],a=0;while(r.length>a)i(U,t=r[a++])||t==N||t==l||n.push(t);return n},ee=function(e){var t,r=e===G,n=I(r?B:A(e)),a=[],o=0;while(n.length>o)!i(U,t=n[o++])||r&&!i(G,t)||a.push(U[t]);return a};K||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call(B,r),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),H(this,e,E(1,r))};return a&&Y&&H(G,e,{configurable:!0,set:t}),W(e)},s(O[x],"toString",(function(){return this._k})),S.f=J,w.f=$,r(/*! ./_object-gopn */"./node_modules/core-js/library/modules/_object-gopn.js").f=k.f=Q,r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js").f=Z,r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js").f=ee,a&&!r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js")&&s(G,"propertyIsEnumerable",Z,!0),p.f=function(e){return W(f(e))}),o(o.G+o.W+o.F*!K,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)f(te[re++]);for(te=R(f.store),re=0;te.length>re;)g(te[re++]);o(o.S+o.F*!K,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=O(e)},keyFor:function(e){if(z(e))return m(j,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),o(o.S+o.F*!K,"Object",{create:X,defineProperty:$,defineProperties:q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),D&&o(o.S+o.F*(!K||u((function(){var e=O();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!z(e)){var t,r,n=[e],i=1;while(arguments.length>i)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!z(t))return t}),n[1]=t,P.apply(D,n)}}}),O[x][M]||r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")(O[x],M,O[x].valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js ***!
  \***************************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.observable.js ***!
  \***********************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/web.dom.iterable.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,r){r(/*! ./es6.array.iterator */"./node_modules/core-js/library/modules/es6.array.iterator.js");for(var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),a=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),o=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=n[u],d=c&&c.prototype;d&&!d[o]&&i(d,o,u),a[u]=a.Array}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/container/public/style.scss":
/*!*****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/container/public/style.scss ***!
  \*****************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/core/public/style.scss":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/core/public/style.scss ***!
  \************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n  [data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n  [data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n  [data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n  [data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n  [data-player] b, [data-player] u, [data-player] i, [data-player] center,\n  [data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n  [data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n  [data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n  [data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n  [data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n  [data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n  [data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font: inherit;\n    font-size: 100%;\n    vertical-align: baseline; }\n  [data-player] table {\n    border-collapse: collapse;\n    border-spacing: 0; }\n  [data-player] caption, [data-player] th, [data-player] td {\n    text-align: left;\n    font-weight: normal;\n    vertical-align: middle; }\n  [data-player] q, [data-player] blockquote {\n    quotes: none; }\n    [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n      content: "";\n      content: none; }\n  [data-player] a img {\n    border: none; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    max-width: none;\n    box-sizing: inherit;\n    float: none; }\n  [data-player] div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss ***!
  \**************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".clappr-flash-playback[data-flash-playback] {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  pointer-events: none; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss ***!
  \******************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss":
/*!***************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss ***!
  \***************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss ***!
  \************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss ***!
  \******************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss ***!
  \************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss ***!
  \************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"div.player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n  div.player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  div.player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  div.player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  div.player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  div.player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss ***!
  \**************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../../../../node_modules/css-loader/lib/url/escape.js */"./node_modules/css-loader/lib/url/escape.js");t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important;\n    cursor: url("+n(r(/*! ./closed-hand.cur */"./src/plugins/media_control/public/closed-hand.cur"))+"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      cursor: url("+n(r(/*! ./closed-hand.cur */"./src/plugins/media_control/public/closed-hand.cur"))+'), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    bottom: -50px; }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    bottom: 7px;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        -webkit-transform: translateX(-50%);\n                transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          -webkit-transform: translateX(-50%);\n                  transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: -webkit-transform .2s ease-out;\n          transition: transform .2s ease-out;\n          transition: transform .2s ease-out, -webkit-transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            -webkit-transform: scaleY(1.5);\n                    transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/poster/public/poster.scss":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/poster/public/poster.scss ***!
  \************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".player-poster[data-poster] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: #000;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss ***!
  \******************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss":
/*!***************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss ***!
  \***************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\n            animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    -webkit-animation-delay: -0.32s;\n            animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    -webkit-animation-delay: -0.16s;\n            animation-delay: -0.16s; }\n\n@-webkit-keyframes bouncedelay {\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  40% {\n    -webkit-transform: scale(1);\n            transform: scale(1); } }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  40% {\n    -webkit-transform: scale(1);\n            transform: scale(1); } }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss ***!
  \******************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".clappr-watermark[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n.clappr-watermark[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n.clappr-watermark[data-watermark] img {\n  max-width: 100%; }\n\n.clappr-watermark[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n.clappr-watermark[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n",""])},"./node_modules/css-loader/lib/css-base.js":
/*!*************************************************!*\
  !*** ./node_modules/css-loader/lib/css-base.js ***!
  \*************************************************/
/*! no static exports found */function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"===typeof btoa){var a=n(i),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}function n(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+r+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,r){"string"===typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"===typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"===typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},"./node_modules/css-loader/lib/url/escape.js":
/*!***************************************************!*\
  !*** ./node_modules/css-loader/lib/url/escape.js ***!
  \***************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){return"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},"./node_modules/hls.js/dist/hls.js":
/*!*****************************************!*\
  !*** ./node_modules/hls.js/dist/hls.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,r){"undefined"!==typeof window&&function(t,r){e.exports=r()}(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=new Array(a);n<a;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(i,"");while(e.length!==(e=e.replace(a,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,n){var l={};l[n]=[];var u=t.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;var d,h=c[1],f=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");while(d=f.exec(u))"dll-reference"!==d[3]&&l[n].push(d[3]);f=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");while(d=f.exec(u))e[d[2]]||(l[n].push(d[1]),e[d[2]]=r(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var p=Object.keys(l),g=0;g<p.length;g++)for(var m=0;m<l[p[g]].length;m++)s(l[p[g]][m])&&(l[p[g]][m]=1*l[p[g]][m]);return l}function u(e){var t=Object.keys(e);return t.reduce((function(t,r){return t||e[r].length>0}),!1)}function c(e,t){var r={main:[t]},n={main:[]},i={main:{}};while(u(r))for(var a=Object.keys(r),o=0;o<a.length;o++){var s=a[o],c=r[s],d=c.pop();if(i[s]=i[s]||{},!i[s][d]&&e[s][d]){i[s][d]=!0,n[s]=n[s]||[],n[s].push(d);for(var h=l(e,e[s][d],s),f=Object.keys(h),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(h[f[p]])}}return n}e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:c(i,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){var t=0;while(a[e][t])t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,u=l.createObjectURL(s),d=new window.Worker(u);return d.objectURL=u,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}var t=e.prototype;return t.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}var t=e.prototype;return t.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=i;function o(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}var s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],b=h[y],A=257*h[m]^16843008*m;n[f]=A<<24|A>>>8,i[f]=A<<16|A>>>16,a[f]=A<<8|A>>>24,o[f]=A,A=16843009*b^65537*y^257*v^16843008*f,l[m]=A<<24|A>>>8,u[m]=A<<16|A>>>16,c[m]=A<<8|A>>>24,d[m]=A,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;while(n<t.length&&r)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=t[a]:(l=s,a%i===0?(l=l<<8|l>>>24,l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i===4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){var i,a,s,l,u,c,d,h,f,p,g,m,v,y,b=this.keySize+6,A=this.invKeySchedule,_=this.invSBox,E=this.invSubMix,T=E[0],k=E[1],S=E[2],w=E[3],R=this.uint8ArrayToUint32Array_(r),C=R[0],L=R[1],I=R[2],O=R[3],D=new Int32Array(e),P=new Int32Array(D.length),x=this.networkToHostOrderSwap;while(t<D.length){for(f=x(D[t]),p=x(D[t+1]),g=x(D[t+2]),m=x(D[t+3]),u=f^A[0],c=m^A[1],d=g^A[2],h=p^A[3],v=4,y=1;y<b;y++)i=T[u>>>24]^k[c>>16&255]^S[d>>8&255]^w[255&h]^A[v],a=T[c>>>24]^k[d>>16&255]^S[h>>8&255]^w[255&u]^A[v+1],s=T[d>>>24]^k[h>>16&255]^S[u>>8&255]^w[255&c]^A[v+2],l=T[h>>>24]^k[u>>16&255]^S[c>>8&255]^w[255&d]^A[v+3],u=i,c=a,d=s,h=l,v+=4;i=_[u>>>24]<<24^_[c>>16&255]<<16^_[d>>8&255]<<8^_[255&h]^A[v],a=_[c>>>24]<<24^_[d>>16&255]<<16^_[h>>8&255]<<8^_[255&u]^A[v+1],s=_[d>>>24]<<24^_[h>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^A[v+2],l=_[h>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&d]^A[v+3],v+=3,P[t]=x(i^C),P[t+1]=x(l^L),P[t+2]=x(s^I),P[t+3]=x(a^O),C=f,L=p,I=g,O=m,t+=4}return n?o(P.buffer):P.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),l=s,u=r("./src/errors.ts"),c=r("./src/utils/logger.js"),d=r("./src/events.js"),h=r("./src/utils/get-self-scope.js"),f=Object(h["getSelfScope"])(),p=function(){function e(e,t,r){var n=void 0===r?{}:r,i=n.removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var o=f.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(s){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,i){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(c["logger"].log("JS AES decrypt"),this.logEnabled=!1);var s=this.decryptor;s||(this.decryptor=s=new l),s.expandKey(t),i(s.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(c["logger"].log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(u,t)),this.fastAesKey.expandKey().then((function(a){var s=new n(u,r);s.decrypt(e,a).catch((function(n){o.onWebCryptoError(n,e,t,r,i)})).then((function(e){i(e)}))})).catch((function(n){o.onWebCryptoError(n,e,t,r,i)}))}},t.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(c["logger"].log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c["logger"].error("decrypting error : "+e.message),this.observer.trigger(d["default"].ERROR,{type:u["ErrorTypes"].MEDIA_ERROR,details:u["ErrorDetails"].FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t["default"]=p},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var n=r("./src/events.js"),i=r("./src/errors.ts"),a=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number-isFinite.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t,r,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),l=(60&t[r+2])>>>2,!(l>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s["logger"].log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function c(e,t){return 255===e[t]&&240===(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function h(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&c(e,t))}function p(e,t){if(f(e,t)){var r=d(e,t),n=r;t+5<e.length&&(n=h(e,t));var i=t+n;if(i===e.length||i+1<e.length&&c(e,i))return!0}return!1}function g(e,t,r,n,i){if(!e.samplerate){var a=u(t,r,n,i);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,s["logger"].log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function m(e){return 9216e4/e}function v(e,t,r,n,i){var a,o,s,l=e.length;if(a=d(e,t),o=h(e,t),o-=a,o>0&&t+a+o<=l)return s=r+n*i,{headerLength:a,frameLength:o,stamp:s}}function y(e,t,r,n,i){var a=m(e.samplerate),o=v(t,r,n,i,a);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,c={unit:t.subarray(r+l,r+l+u),pts:s,dts:s};return e.samples.push(c),{sample:c,length:u+l}}}var b=r("./src/demux/id3.js"),A=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=b["default"].getID3Data(e,0)||[],r=t.length,n=e.length;r<n;r++)if(p(e,r))return s["logger"].log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=this._audioTrack,a=b["default"].getID3Data(e,0)||[],l=b["default"].getTimeStamp(a),u=Object(o["isFiniteNumber"])(l)?90*l:9e4*t,c=0,d=u,h=e.length,p=a.length,m=[{pts:d,dts:d,data:a}];while(p<h-1)if(f(e,p)&&p+5<h){g(i,this.observer,e,p,i.manifestCodec);var v=y(i,e,p,u,c);if(!v){s["logger"].log("Unable to parse AAC frame");break}p+=v.length,d=v.sample.pts,c++}else b["default"].isHeader(e,p)?(a=b["default"].getID3Data(e,p),m.push({pts:d,dts:d,data:a}),p+=a.length):p++;this.remuxer.remux(i,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),_=A,E=r("./src/demux/mp4demuxer.js"),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,l={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==i&&15!==i&&3!==a){var s=3===r?3-n:3===n?3:4,l=1e3*T.BitratesMap[14*s+i-1],u=3===r?0:2===r?1:2,c=T.SamplingRateMap[3*u+a],d=e[t+3]>>6===3?1:2,h=T.SamplesCoefficients[r][n],f=T.BytesInSlot[n],p=8*h*f,g=parseInt(h*l/c+o,10)*f;return{sampleRate:c,channelCount:d,frameLength:g,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=4,n=this.parseHeader(e,t),i=r;n&&n.frameLength&&(i=n.frameLength);var a=t+i;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},k=T,S=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s["logger"].error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,r,n,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var A=f();if(0===A)f();else if(1===A)for(g(1),m(),m(),t=f(),o=0;o<t;o++)m();v(),g(1),r=f(),n=f(),i=h(1),0===i&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),c=f());var _=[1,1];if(p()&&p()){var E=d();switch(E){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:_}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),w=S,R=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new a["default"](e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;;r++){if(r>=i.length)break;var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}(),C=R,L={video:1,audio:2,id3:3,text:4},I=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new C(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&s["logger"].warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){var t=Math.min(1e3,e.length-564),r=0;while(r<t){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:L[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,r,a,o){var l,u,c,d,h,f,p=t.length,g=!1;this.contiguous=a;var m=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,b=this._id3Track,A=v.pid,_=y.pid,E=b.pid,T=this._pmtId,k=v.pesData,S=y.pesData,w=b.pesData,R=this._parsePAT,C=this._parsePMT,L=this._parsePES,I=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),x=e._syncOffset(t);for(p-=(p+x)%188,l=x;l<p;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],d=(48&t[l+3])>>4,d>1){if(h=l+5+t[l+4],h===l+188)continue}else h=l+4;switch(c){case A:u&&(k&&(f=L(k))&&I(f,!1),k={data:[],size:0}),k&&(k.data.push(t.subarray(h,l+188)),k.size+=l+188-h);break;case _:u&&(S&&(f=L(S))&&(y.isAAC?O(f):D(f)),S={data:[],size:0}),S&&(S.data.push(t.subarray(h,l+188)),S.size+=l+188-h);break;case E:u&&(w&&(f=L(w))&&P(f),w={data:[],size:0}),w&&(w.data.push(t.subarray(h,l+188)),w.size+=l+188-h);break;case 0:u&&(h+=t[h]+1),T=this._pmtId=R(t,h);break;case T:u&&(h+=t[h]+1);var N=C(t,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);A=N.avc,A>0&&(v.pid=A),_=N.audio,_>0&&(y.pid=_,y.isAAC=N.isAAC),E=N.id3,E>0&&(b.pid=E),g&&!m&&(s["logger"].log("reparse from beginning"),g=!1,l=x-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=!0;break}}else this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(f=L(k))?(I(f,!0),v.pesData=null):v.pesData=k,S&&(f=L(S))?(y.isAAC?O(f):D(f),y.pesData=null):(S&&S.size&&s["logger"].log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=S),w&&(f=L(w))?(P(f),b.pesData=null):b.pesData=w,null==this.sampleAes?this.remuxer.remux(y,v,b,this._txtTrack,r,a,o):this.decryptAndRemux(y,v,b,this._txtTrack,r,a,o)},t.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},t.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,a,o)}))}else this.remuxer.remux(e,t,r,n,i,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,r,n){var i,a,o,l,u={audio:-1,avc:-1,id3:-1,isAAC:!0};i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;while(t<a){switch(l=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){s["logger"].log("unknown stream type:"+e[t]);break}case 15:-1===u.audio&&(u.audio=l);break;case 21:-1===u.id3&&(u.id3=l);break;case 219:if(!n){s["logger"].log("unknown stream type:"+e[t]);break}case 27:-1===u.avc&&(u.avc=l);break;case 3:case 4:r?-1===u.audio&&(u.audio=l,u.isAAC=!1):s["logger"].log("MPEG audio found, not supported in this browser for now");break;case 36:s["logger"].warn("HEVC stream type found, not supported for now");break;default:s["logger"].log("unknown stream type:"+e[t]);break}t+=5+((15&e[t+3])<<8|e[t+4])}return u},t._parsePES=function(e){var t,r,n,i,a,o,l,u,c,d=0,h=e.data;if(!e||0===e.size)return null;while(h[0].length<19&&h.length>1){var f=new Uint8Array(h[0].length+h[1].length);f.set(h[0]),f.set(h[1],h[0].length),h[0]=f,h.splice(1,1)}if(t=h[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;if(r=t[7],192&r&&(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,l>4294967295&&(l-=8589934592),64&r?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,u>4294967295&&(u-=8589934592),l-u>54e5&&(s["logger"].warn(Math.round((l-u)/9e4)+"s delta between PTS and DTS, align them"),l=u)):u=l),a=t[8],c=a+9,e.size<=c)return null;e.size-=c,o=new Uint8Array(e.size);for(var p=0,g=h.length;p<g;p++){t=h[p];var m=t.byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}o.set(t,d),d+=m}return i&&(i-=a+3),{data:o,pts:l,dts:u,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s["logger"].log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=!1,u=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),h=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,u&&s.length&&!o.audFound&&(d(u,o),u=this.avcSample=h(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,u||(u=a.avcSample=h(!0,e.pts,e.dts,"")),l&&(u.debug+="NDR "),u.frame=!0;var s=t.data;if(c&&s.length>4){var f=new w(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(u.key=!0)}break;case 5:n=!0,u||(u=a.avcSample=h(!0,e.pts,e.dts,"")),l&&(u.debug+="IDR "),u.key=!0,u.frame=!0;break;case 6:n=!0,l&&u&&(u.debug+="SEI "),r=new w(a.discardEPB(t.data)),r.readUByte();var p=0,g=0,m=!1,v=0;while(!m&&r.bytesAvailable>1){p=0;do{v=r.readUByte(),p+=v}while(255===v);g=0;do{v=r.readUByte(),g+=v}while(255===v);if(4===p&&0!==r.bytesAvailable){m=!0;var y=r.readUByte();if(181===y){var A=r.readUShort();if(49===A){var _=r.readUInt();if(1195456820===_){var E=r.readUByte();if(3===E){var T=r.readUByte(),k=r.readUByte(),S=31&T,R=[T,k];for(i=0;i<S;i++)R.push(r.readUByte()),R.push(r.readUByte()),R.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:R})}}}}}else if(5===p&&0!==r.bytesAvailable){if(m=!0,g>16){var C=[];for(i=0;i<16;i++)C.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||C.push("-");var L=g-16,I=new Uint8Array(L);for(i=0;i<L;i++)I[i]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:p,uuid:C.join(""),userDataBytes:I,userData:Object(b["utf8ArrayToStr"])(I.buffer)})}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,l&&u&&(u.debug+="SPS "),!o.sps){r=new w(t.data);var O=r.readSPS();o.width=O.width,o.height=O.height,o.pixelRatio=O.pixelRatio,o.sps=[t.data],o.duration=a._duration;var D=t.data.subarray(1,4),P="avc1.";for(i=0;i<3;i++){var x=D[i].toString(16);x.length<2&&(x="0"+x),P+=x}o.codec=P}break;case 8:n=!0,l&&u&&(u.debug+="PPS "),o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,u&&d(u,o),u=a.avcSample=h(!1,e.pts,e.dts,l?"AUD ":"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ");break}if(u&&n){var N=u.units;N.push(t)}})),t&&u&&(d(u,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,i,a,o=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],h=-1;-1===u&&(h=0,a=31&e[0],u=0,o=1);while(o<s)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(h>=0)n={data:e.subarray(h,o-u-1),type:a},d.push(n);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),r=o-u-1,r>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(e.subarray(0,r),f.data.byteLength),f.data=p}}o<s?(i=31&e[o],h=o,a=i,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(h>=0&&u>=0&&(n={data:e.subarray(h,s),type:a,state:u},d.push(n)),0===d.length){var g=this._getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return l.naluState=u,d},t.discardEPB=function(e){var t,r,n=e.byteLength,i=[],a=1;while(a<n-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,a,o,l,u,c,d=this._audioTrack,h=e.data,p=e.pts,v=0,b=this.aacOverFlow,A=this.aacLastPTS;if(b){var _=new Uint8Array(b.byteLength+h.byteLength);_.set(b,0),_.set(h,b.byteLength),h=_}for(a=v,l=h.length;a<l-1;a++)if(f(h,a))break;if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s["logger"].warn("parsing error:"+u),this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:c,reason:u}),c))return;if(g(d,this.observer,h,a,this.audioCodec),r=0,t=m(d.samplerate),b&&A){var E=A+t;Math.abs(E-p)>1&&(s["logger"].log("AAC: align PTS for overlapping frames by "+Math.round((E-p)/90)),p=E)}while(a<l){if(f(h,a)){if(a+5<l){var T=y(d,h,a,p,r);if(T){a+=T.length,o=T.sample.pts,r++;continue}}break}a++}b=a<l?h.subarray(a,l):null,this.aacOverFlow=b,this.aacLastPTS=o},t._parseMPEGPES=function(e){var t=e.data,r=t.length,n=0,i=0,a=e.pts;while(i<r)if(k.isHeader(t,i)){var o=k.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),O=I,D=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=b["default"].getID3Data(e,0);if(n&&void 0!==b["default"].getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(k.probe(e,t))return s["logger"].log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=b["default"].getID3Data(e,0),a=b["default"].getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:i}];while(s<l)if(k.isHeader(e,s)){var f=k.appendFrame(d,e,s,o,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else b["default"].isHeader(e,s)?(i=b["default"].getID3Data(e,s),h.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),P=D,x=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},e}(),N=x,M=Math.pow(2,32)-1,F=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;while(i--)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){var r=t.length,n=[];while(r--)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){var r=t.length,n=[];while(r--)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(n/(M+1)),s=Math.floor(n%(M+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(M+1)),o=Math.floor(r%(M+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=u[n],a=i.duration,o=i.size,s=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}(),j=F,U=9e4;function B(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function G(e,t){return void 0===t&&(t=!1),B(e,1e3,1/U,t)}function K(e,t){return void 0===t&&(t=1),B(e,U,1/t)}var V,Y=K(10),H=K(.2),W=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,r,i,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var f=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(u){e.timescale||(s["logger"].warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p,g=this.remuxAudio(e,d,o,l);if(c)g&&(p=g.endPTS-g.startPTS),t.timescale||(s["logger"].warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,p,l)}else if(c){var m=this.remuxVideo(t,h,o,0,l);m&&e.codec&&this.remuxEmptyAudio(e,d,o,m)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(n["default"].FRAG_PARSED)},t.generateIS=function(e,t,r){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s["logger"].log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:j.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&c.length){var m=t.inputTimeScale;t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:j.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(a=Math.min(a,c[0].pts-m*r),o=Math.min(o,c[0].dts-m*r),this.observer.trigger(n["default"].INIT_PTS_FOUND,{initPTS:a}))}Object.keys(f).length?(l.trigger(n["default"].FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,a,o){var l,u,c,d,h,f,p,g=8,m=e.timescale,v=e.samples,y=[],b=v.length,A=this._PTSNormalize,_=this._initPTS,E=this.nextAvcDts,T=this.isSafari;if(0!==b){T&&(r|=v.length&&E&&(o&&Math.abs(t-E/m)<.1||Math.abs(v[0].pts-E-_)<m/5)),r||(E=t*m),v.forEach((function(e){e.pts=A(e.pts-_,E),e.dts=A(e.dts-_,E)})),v.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id}));var k=v.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*H)}),0);if(k<0){s["logger"].warn("PTS < DTS detected in video samples, shifting DTS by "+G(k,!0)+" ms to overcome this issue");for(var S=0;S<v.length;S++)v[S].dts+=k}var w=v[0];h=Math.max(w.dts,0),d=Math.max(w.pts,0);var R=h-E;r&&R&&(R>1?s["logger"].log("AVC: "+G(R,!0)+" ms hole between fragments detected,filling it"):R<-1&&s["logger"].log("AVC: "+G(-R,!0)+" ms overlapping between fragments detected"),h=E,v[0].dts=h,d=Math.max(d-R,E),v[0].pts=d,s["logger"].log("Video: PTS/DTS adjusted: "+G(d,!0)+"/"+G(h,!0)+", delta: "+G(R,!0)+" ms")),w=v[v.length-1],p=Math.max(w.dts,0),f=Math.max(w.pts,0,p),T&&(l=Math.round((p-h)/(v.length-1)));for(var C=0,L=0,I=0;I<b;I++){for(var O=v[I],D=O.units,P=D.length,x=0,N=0;N<P;N++)x+=D[N].data.length;L+=x,C+=P,O.length=x,O.dts=T?h+I*l:Math.max(O.dts,h),O.pts=Math.max(O.pts,O.dts)}var M=L+4*C+8;try{u=new Uint8Array(M)}catch(ae){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(u.buffer);F.setUint32(0,M),u.set(j.types.mdat,4);for(var U=0;U<b;U++){for(var B=v[U],K=B.units,V=0,Y=void 0,W=0,z=K.length;W<z;W++){var $=K[W],q=$.data,X=$.data.byteLength;F.setUint32(g,X),g+=4,u.set(q,g),g+=X,V+=4+X}if(T)Y=Math.max(0,l*Math.round((B.pts-B.dts)/l));else{if(U<b-1)l=v[U+1].dts-B.dts;else{var Z=this.config,J=B.dts-v[U>0?U-1:U].dts;if(Z.stretchShortVideoTrack){var Q=Z.maxBufferHole,ee=Math.floor(Q*m),te=(a?d+a*m:this.nextAudioPts)-B.pts;te>ee?(l=te-J,l<0&&(l=J),s["logger"].log("It is approximately "+G(te,!1)+" ms to the next segment; using duration "+G(l,!1)+" ms for the last video frame.")):l=J}else l=J}Y=Math.round(B.pts-B.dts)}y.push({size:V,duration:l,cts:Y,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=p+l;var re=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=y[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=y,c=j.moof(e.sequenceNumber++,h,e),e.samples=[];var ie={data1:c,data2:u,startPTS:d/m,endPTS:(f+l)/m,startDTS:h/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:re};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,ie),ie}},t.remuxAudio=function(e,t,r,a){var o,l,u,c,d,h,f=e.inputTimeScale,p=e.timescale,g=f/p,m=e.isAAC?1024:1152,v=m*g,y=this._PTSNormalize,b=this._initPTS,A=!e.isAAC&&this.typeSupported.mpeg,_=A?0:8,E=e.samples,T=[],k=this.nextAudioPts;if(r|=E.length&&k&&(a&&Math.abs(t-k/f)<.1||Math.abs(E[0].pts-k-b)<20*v),E.forEach((function(e){e.pts=e.dts=y(e.pts-b,t*f)})),E=E.filter((function(e){return e.pts>=0})),0!==E.length){if(r||(k=a?t*f:E[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,w=0,R=k;w<E.length;){var C,L=E[w],I=L.pts;if(C=I-R,C<=-S*v)s["logger"].warn("Dropping 1 audio frame @ "+G(R,!0)+" ms due to "+G(C,!0)+" ms overlap."),E.splice(w,1);else if(C>=S*v&&C<Y&&R){var O=Math.round(C/v);s["logger"].warn("Injecting "+O+" audio frames @ "+G(R,!0)+" ms due to "+G(R,!0)+" ms gap.");for(var D=0;D<O;D++){var P=Math.max(R,0);l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=L.unit.subarray()),E.splice(w,0,{unit:l,pts:P,dts:P}),R+=v,w++}L.pts=L.dts=R,R+=v,w++}else Math.abs(C),L.pts=L.dts=R,R+=v,w++}var x=E.length,M=0;while(x--)M+=E[x].unit.byteLength;for(var F=0,U=E.length;F<U;F++){var B=E[F],K=B.unit,V=B.pts;if(void 0!==h)o.duration=Math.round((V-h)/g);else{var H=V-k,W=0;if(r&&e.isAAC&&H){if(H>0&&H<Y)W=Math.round((V-k)/v),s["logger"].log(G(H,!0)+" ms hole between AAC samples detected,filling it"),W>0&&(l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(l=K.subarray()),M+=W*l.length);else if(H<-12){s["logger"].log("drop overlapping AAC sample, expected/parsed/delta: "+G(k,!0)+" ms / "+G(V,!0)+" ms / "+G(-H,!0)+" ms"),M-=K.byteLength;continue}V=k}if(d=V,!(M>0))return;M+=_;try{u=new Uint8Array(M)}catch(ee){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating audio mdat "+M})}if(!A){var z=new DataView(u.buffer);z.setUint32(0,M),u.set(j.types.mdat,4)}for(var $=0;$<W;$++)l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=K.subarray()),u.set(l,_),_+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(o)}u.set(K,_);var q=K.byteLength;_+=q,o={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(o),h=V}var X=0;if(x=T.length,x>=2&&(X=T[x-2].duration,o.duration=X),x){this.nextAudioPts=k=h+g*X,e.samples=T,c=A?new Uint8Array:j.moof(e.sequenceNumber++,d/g,e),e.samples=[];var Z=d/f,J=k/f,Q={data1:c,data2:u,startPTS:Z,endPTS:J,startDTS:Z,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:x};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,l=this.nextAudioPts,u=(void 0!==l?l:n.startDTS*i)+this._initDTS,c=n.endDTS*i+this._initDTS,d=1024,h=o*d,f=Math.ceil((c-u)/h),p=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s["logger"].warn("remux empty Audio"),p){for(var g=[],m=0;m<f;m++){var v=u+m*h;g.push({unit:p,pts:v,dts:v})}e.samples=g,this.remuxAudio(e,t,r)}else s["logger"].trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,r=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)t=e.samples[s],t.pts=(t.pts-a)/i,t.dts=(t.dts-o)/i;this.observer.trigger(n["default"].FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++)t=e.samples[o],t.pts=(t.pts-a)/i;this.observer.trigger(n["default"].FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var r;if(void 0===t)return e;r=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=r;return e},e}(),z=W,$=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,i,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n["default"].FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n["default"].FRAG_PARSED)},e}(),q=$,X=Object(l["getSelfScope"])();try{V=X.performance.now.bind(X.performance)}catch(J){s["logger"].debug("Unable to use Performance API on this environment"),V=X.Date.now}var Z=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,i,o,s,l,u,c,d,h,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a["default"](this.observer,this.config));var m=V();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=V();p.observer.trigger(n["default"].FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)},t.pushDecrypted=function(e,t,r,a,o,s,l,u,c,d,h,f){var p=this.demuxer;if(!p||(l||u)&&!this.probe(e)){for(var g=this.observer,m=this.typeSupported,v=this.config,y=[{demux:O,remux:z},{demux:E["default"],remux:q},{demux:_,remux:z},{demux:P,remux:z}],b=0,A=y.length;b<A;b++){var T=y[b],k=T.demux.probe;if(k(e)){var S=this.remuxer=new T.remux(g,v,m,this.vendor);p=new T.demux(g,S,v,m),this.probe=k;break}}if(!p)return void g.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var w=this.remuxer;(l||u)&&(p.resetInitSegment(r,a,o,d),w.resetInitSegment()),l&&(p.resetTimeStamp(f),w.resetTimeStamp(f)),"function"===typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,h)},e}();t["default"]=Z},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){"use strict";r.r(t);var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=function(e){var t=new o["EventEmitter"];t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n["default"](t,o.typeSupported,s,o.vendor),Object(a["enableLogs"])(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS);break;default:break}})),t.on(i["default"].FRAG_DECRYPTED,r),t.on(i["default"].FRAG_PARSING_INIT_SEGMENT,r),t.on(i["default"].FRAG_PARSED,r),t.on(i["default"].ERROR,r),t.on(i["default"].FRAG_PARSING_METADATA,r),t.on(i["default"].FRAG_PARSING_USERDATA,r),t.on(i["default"].INIT_PTS_FOUND,r),t.on(i["default"].FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))};t["default"]=s},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,r){"use strict";r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var n,i=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){var n=r,i=0;while(e.isHeader(t,r)){i+=10;var a=e._readSize(t,r+6);i+=a,e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4),i=10;return{type:r,size:n,data:t.subarray(i,i+n)}},e.getID3Frames=function(t){var r=0,n=[];while(e.isHeader(t,r)){var i=e._readSize(t,r+6);r+=10;var a=r+i;while(r+8<a){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}var a,s,l,u=e.length,c="",d=0;while(d<u){if(a=e[d++],0===a&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0);break;default:}}return c},e}();function o(){var e=Object(i["getSelfScope"])();return n||"undefined"===typeof e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=a._utf8ArrayToStr;t["default"]=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i["default"].FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!r.length)return null;for(n=l;n<o;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=i>1?n+i:o,a===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:u}):(s=e.findBox({data:t,start:n+8,end:u},r.slice(1)),s.length&&(c=c.concat(s)))),n=u;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4;var u=0,c=0;a+=0===s?8:16,a+=2;var d=o.end+c,h=e.readUint16(o,a);a+=2;for(var f=0;f<h;f++){var p=a,g=e.readUint32(o,p);p+=4;var m=2147483647&g,v=(2147483648&g)>>>31;if(1===v)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(o,p);p+=4,r.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/l,start:d,end:d+m-1}}),d+=m,p+=4,a=p}return{earliestPresentationTime:u,timescale:l,version:s,referencesCount:h,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[],i=e.findBox(t,["moov","trak"]);return i.forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=l.data[l.start],o=0===a?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d=e.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[d];if(h){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));n["logger"].log("MP4Demuxer:"+h+":"+p+" found")}r[s]={timescale:u,type:h},r[h]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,a,o;return i=e.readUint32(n,4),a=t[i].timescale||9e4,o=e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0],o/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(i["default"].INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},t.destroy=function(){},e}();t["default"]=o},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){"use strict";var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e["NETWORK_ERROR"]="networkError",e["MEDIA_ERROR"]="mediaError",e["KEY_SYSTEM_ERROR"]="keySystemError",e["MUX_ERROR"]="muxError",e["OTHER_ERROR"]="otherError"}(n||(n={})),function(e){e["KEY_SYSTEM_NO_KEYS"]="keySystemNoKeys",e["KEY_SYSTEM_NO_ACCESS"]="keySystemNoAccess",e["KEY_SYSTEM_NO_SESSION"]="keySystemNoSession",e["KEY_SYSTEM_LICENSE_REQUEST_FAILED"]="keySystemLicenseRequestFailed",e["KEY_SYSTEM_NO_INIT_DATA"]="keySystemNoInitData",e["MANIFEST_LOAD_ERROR"]="manifestLoadError",e["MANIFEST_LOAD_TIMEOUT"]="manifestLoadTimeOut",e["MANIFEST_PARSING_ERROR"]="manifestParsingError",e["MANIFEST_INCOMPATIBLE_CODECS_ERROR"]="manifestIncompatibleCodecsError",e["LEVEL_LOAD_ERROR"]="levelLoadError",e["LEVEL_LOAD_TIMEOUT"]="levelLoadTimeOut",e["LEVEL_SWITCH_ERROR"]="levelSwitchError",e["AUDIO_TRACK_LOAD_ERROR"]="audioTrackLoadError",e["AUDIO_TRACK_LOAD_TIMEOUT"]="audioTrackLoadTimeOut",e["FRAG_LOAD_ERROR"]="fragLoadError",e["FRAG_LOAD_TIMEOUT"]="fragLoadTimeOut",e["FRAG_DECRYPT_ERROR"]="fragDecryptError",e["FRAG_PARSING_ERROR"]="fragParsingError",e["REMUX_ALLOC_ERROR"]="remuxAllocError",e["KEY_LOAD_ERROR"]="keyLoadError",e["KEY_LOAD_TIMEOUT"]="keyLoadTimeOut",e["BUFFER_ADD_CODEC_ERROR"]="bufferAddCodecError",e["BUFFER_APPEND_ERROR"]="bufferAppendError",e["BUFFER_APPENDING_ERROR"]="bufferAppendingError",e["BUFFER_STALLED_ERROR"]="bufferStalledError",e["BUFFER_FULL_ERROR"]="bufferFullError",e["BUFFER_SEEK_OVER_HOLE"]="bufferSeekOverHole",e["BUFFER_NUDGE_ON_STALL"]="bufferNudgeOnStall",e["INTERNAL_EXCEPTION"]="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};t["default"]=n},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"newCue",(function(){return pr}));var i,a,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number-isFinite.js"),u=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!==typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(n){c["logger"].error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}},e}(),f=h;(function(e){e["MANIFEST"]="manifest",e["LEVEL"]="level",e["AUDIO_TRACK"]="audioTrack",e["SUBTITLE_TRACK"]="subtitleTrack"})(i||(i={})),function(e){e["MAIN"]="main",e["AUDIO"]="audio",e["SUBTITLE"]="subtitle"}(a||(a={}));var p=r("./src/demux/mp4demuxer.js");function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}var v,y=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return m(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o["buildAbsoluteURL"])(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}(function(e){e["AUDIO"]="audio",e["VIDEO"]="video"})(v||(v={}));var _=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(e={},e[v.AUDIO]=!1,e[v.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},t.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new y(e.baseuri,e.reluri),r.method=e.method,r.iv=this.createInitializationVector(t)),r},A(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o["buildAbsoluteURL"])(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c["logger"].warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l["isFiniteNumber"])(this.programDateTime))return null;var e=Object(l["isFiniteNumber"])(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}();function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}var k=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return T(e,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l["isFiniteNumber"])(this.fragments[0].programDateTime))}}]),e}(),S=/^(\d+)x(\d+)$/,w=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,R=function(){function e(t){for(var r in"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=S.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};w.lastIndex=0;while(null!==(t=w.exec(e))){var n=t[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),C=R,L={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function I(e,t){var r=L[t];return!!r&&!0===r[e.slice(0,4)]}function O(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var D=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,P=/#EXT-X-MEDIA:(.*)/g,x=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),N=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,M=/\.(mp4|m4s|m4v|m4a)$/i,F=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o["buildAbsoluteURL"](t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[];function a(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return I(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}D.lastIndex=0;while(null!=(n=D.exec(t))){var o={},s=o.attrs=new C(n[1]);o.url=e.resolve(n[2],r);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},e.parseMasterPlaylistMedia=function(t,r,n,i){var a;void 0===i&&(i=[]);var o=[],s=0;P.lastIndex=0;while(null!==(a=P.exec(t))){var l=new C(a[1]);if(l.TYPE===n){var u={id:s++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),i.length){var c=e.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,i){var a,o,s,u=0,d=0,h=new k(t),f=0,p=null,g=new _,m=null;x.lastIndex=0;while(null!==(a=x.exec(e))){var v=a[1];if(v){g.duration=parseFloat(v);var b=(" "+a[2]).slice(1);g.title=b||null,g.tagList.push(b?["INF",v,b]:["INF",v])}else if(a[3]){if(Object(l["isFiniteNumber"])(g.duration)){var A=u++;g.type=n,g.start=d,s&&(g.levelkey=s),g.sn=A,g.level=r,g.cc=f,g.urlId=i,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),U(g,p),h.fragments.push(g),p=g,d+=g.duration,g=new _}}else if(a[4]){var E=(" "+a[4]).slice(1);p?g.setByteRange(E,p):g.setByteRange(E)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(a=a[0].match(N),!a){c["logger"].warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length;o++)if("undefined"!==typeof a[o])break;var T=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(S?[T,S]:[T]);break;case"PLAYLIST-TYPE":h.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(T);break;case"TARGETDURATION":h.targetduration=parseFloat(T);break;case"VERSION":h.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var w=T,R=new C(w),L=R.enumeratedString("METHOD"),I=R.URI,O=R.hexadecimalInteger("IV");L&&(s=new y(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(s.method=L,s.key=null,s.iv=O));break;case"START":var D=new C(T),P=D.decimalFloatingPoint("TIME-OFFSET");Object(l["isFiniteNumber"])(P)&&(h.startTimeOffset=P);break;case"MAP":var F=new C(T);g.relurl=F.URI,F.BYTERANGE&&g.setByteRange(F.BYTERANGE),g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,g=new _,g.rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c["logger"].warn("line parsed but not handled: "+a);break}}}return g=p,g&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return M.test(e.relurl)}))&&(c["logger"].warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new _,g.relurl=h.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&j(h.fragments,m),h},e}();function j(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function U(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(l["isFiniteNumber"])(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var G=window,K=G.performance,V=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].LEVEL_LOADING,u["default"].AUDIO_TRACK_LOADING,u["default"].SUBTITLE_TRACK_LOADING)||this,r.loaders={},r}B(t,e),t.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){var t=e.type;switch(t){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},t.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var r=t.prototype;return r.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},r.getInternalLoader=function(e){return this.loaders[e.type]},r.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},r.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},r.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},r.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},r.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},r.load=function(e){var t=this.hls.config;c["logger"].debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c["logger"].trace("playlist request ongoing"),!1;c["logger"].warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:r=0,o=0,a=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout;break}s=this.createInternalLoader(e);var u={timeout:n,maxRetry:r,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c["logger"].debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},r.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!==typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=K.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r._handleMasterPlaylist=function(e,r,n,i){var a=this.hls,o=e.data,s=t.getResponseUrl(e,n),l=F.parseMasterPlaylist(o,s);if(l.length){var d=l.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),h=F.parseMasterPlaylistMedia(o,s,"AUDIO",d),f=F.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(h.length){var p=!1;h.forEach((function(e){e.url||(p=!0)})),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(c["logger"].log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}a.trigger(u["default"].MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:f,url:s,stats:r,networkDetails:i})}else this._handleManifestParsingError(e,n,"no level found in manifest",i)},r._handleTrackOrLevelPlaylist=function(e,r,n,a){var o=this.hls,s=n.id,c=n.level,d=n.type,h=t.getResponseUrl(e,n),f=Object(l["isFiniteNumber"])(s)?s:0,p=Object(l["isFiniteNumber"])(c)?c:f,g=t.mapContextToLevelType(n),m=F.parseLevelPlaylist(e.data,h,p,g,f);if(m.tload=r.tload,d===i.MANIFEST){var v={url:h,details:m};o.trigger(u["default"].MANIFEST_LOADED,{levels:[v],audioTracks:[],url:h,stats:r,networkDetails:a})}if(r.tparsed=K.now(),m.needSidxRanges){var y=m.initSegment.url;this.load({url:y,isSidxRequest:!0,type:d,level:c,levelDetails:m,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=m,this._handlePlaylistLoaded(e,r,n,a)},r._handleSidxRequest=function(e,t){if("string"===typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=p["default"].parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info;if(i){var n=i.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),i&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},r._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r._handleNetworkError=function(e,t,r,n){var a,o;void 0===r&&(r=!1),void 0===n&&(n=null),c["logger"].info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=r?s["ErrorDetails"].MANIFEST_LOAD_TIMEOUT:s["ErrorDetails"].MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=r?s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:s["ErrorDetails"].LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=r?s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s["ErrorTypes"].NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(u["default"].ERROR,d)},r._handlePlaylistLoaded=function(e,r,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration){var d=t.canHaveQualityLevels(n.type);if(d)this.hls.trigger(u["default"].LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:r,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(u["default"].AUDIO_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(u["default"].SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break}}else this._handleManifestParsingError(e,n,"invalid target duration",a)},t}(f),Y=V;function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var W=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING)||this,r.loaders={},r}H(t,e);var r=t.prototype;return r.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s,u,d,h=n[r];h&&(c["logger"].warn("abort previous fragment loader for type: "+r),h.abort()),h=n[r]=t.loader=i.fLoader?new a(i):new o(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l["isFiniteNumber"])(f)&&Object(l["isFiniteNumber"])(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},r.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u["default"].FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},r.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u["default"].FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},t}(f),z=W;function $(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].KEY_LOADING)||this,r.loaders={},r.decryptkey=null,r.decrypturl=null,r}$(t,e);var r=t.prototype;return r.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&&(c["logger"].warn("abort previous key loader for type:"+r),n.abort()),!i)return void c["logger"].warn("key uri is falsy");t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u["default"].KEY_LOADED,{frag:t}))}else c["logger"].warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u["default"].KEY_LOADED,{frag:n})):c["logger"].error("after key load, decryptdata unset")},r.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},r.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(f),X=q;function Z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var J={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].BUFFER_APPENDED,u["default"].FRAG_BUFFERED,u["default"].FRAG_LOADED)||this,r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}Z(t,e);var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},r.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach((function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(o.body);break}}}}))},r.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},r.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(a=l.body,o=t)))})),a},r.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=J.NOT_LOADED;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?J.PARTIAL:J.OK:J.APPENDING),n},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(l["isFiniteNumber"])(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(f),ee={search:function(e,t){var r=0,n=e.length-1,i=null,a=null;while(r<=n){i=(r+n)/2|0,a=e[i];var o=t(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}},te=ee,re=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(i){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,i=e.buffered,a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(o){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var n=[];if(r)for(var i=0;i<e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o<r?e[i].end>o&&(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,l=0,u=t,c=t,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(t+r>=h&&t<f)u=h,c=f,l=c-t;else if(t+r<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),ne=r("./node_modules/eventemitter3/index.js"),ie=r("./node_modules/webworkify-webpack/index.js"),ae=r("./src/demux/demuxer-inline.js");function oe(){return window.MediaSource||window.WebKitMediaSource}var se=r("./src/utils/get-self-scope.js");function le(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ue=function(e){function t(){return e.apply(this,arguments)||this}le(t,e);var r=t.prototype;return r.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},t}(ne["EventEmitter"]),ce=Object(se["getSelfScope"])(),de=oe()||{isTypeSupported:function(){return!1}},he=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new ue,i=e.config,a=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(u["default"].FRAG_DECRYPTED,a),n.on(u["default"].FRAG_PARSING_INIT_SEGMENT,a),n.on(u["default"].FRAG_PARSING_DATA,a),n.on(u["default"].FRAG_PARSED,a),n.on(u["default"].ERROR,a),n.on(u["default"].FRAG_PARSING_METADATA,a),n.on(u["default"].FRAG_PARSING_USERDATA,a),n.on(u["default"].INIT_PTS_FOUND,a);var o={mp4:de.isTypeSupported("video/mp4"),mpeg:de.isTypeSupported("audio/mpeg"),mp3:de.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!==typeof Worker){var d;c["logger"].log("demuxing in webworker");try{d=this.w=ie(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(i)})}catch(h){c["logger"].warn("Error in worker:",h),c["logger"].error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&ce.URL.revokeObjectURL(d.objectURL),this.demuxer=new ae["default"](n,o,i,l),this.w=void 0}}else this.demuxer=new ae["default"](n,o,i,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,i,a,o,s){var u=this.w,d=Object(l["isFiniteNumber"])(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,v=!g&&m;if(p&&c["logger"].log(this.id+":discontinuity detected"),g&&c["logger"].log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,t,r,n,d,p,g,v,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":ce.URL.revokeObjectURL(this.w.objectURL);break;case u["default"].FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data);break}},e}(),fe=he;function pe(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r);break}}function ge(e,t,r){var n=e[t],i=e[r],a=i.startPTS;Object(l["isFiniteNumber"])(a)?r>t?(n.duration=a-n.start,n.duration<0&&c["logger"].warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&c["logger"].warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=r>t?n.start+n.duration:Math.max(n.start-i.duration,0)}function me(e,t,r,n,i,a){var o=r;if(Object(l["isFiniteNumber"])(t.startPTS)){var s=Math.abs(t.startPTS-r);Object(l["isFiniteNumber"])(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var u=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.startDTS=i,t.endDTS=a,t.duration=n-r;var c,d,h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(c=f-e.startSN,d=e.fragments,d[c]=t,h=c;h>0;h--)ge(d,h,h-1);for(h=c;h<d.length-1;h++)ge(d,h,h+1);return e.PTSKnown=!0,u}function ve(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if(be(e,t,(function(e,i){n=e.cc-i.cc,Object(l["isFiniteNumber"])(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0})),t.PTSKnown){if(n){c["logger"].log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=n}r?me(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):Ae(e,t),t.PTSKnown=e.PTSKnown}}function ye(e,t,r){void 0===r&&(r=0);var n=-1;be(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}function be(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=n;o<=i;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function Ae(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}function _e(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var Ee={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}},Te=Ee;function ke(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function Se(e,t){return te.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}function we(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function Re(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var i=ke(r,n[0].cc);if(i&&(!i||i.startPTS))return i;c["logger"].log("No frag in previous level to align on")}else c["logger"].log("No fragments to align")}function Ce(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function Le(e,t,r){Ie(e,r,t),!r.PTSKnown&&t&&Oe(r,t.details)}function Ie(e,t,r){if(we(e,r,t)){var n=Re(r.details,t);n&&(c["logger"].log("Adjusting PTS using last level due to CC increase within current level"),Ce(n.start,t))}}function Oe(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,i=(n-r)/1e3+t.fragments[0].start;Object(l["isFiniteNumber"])(i)&&(c["logger"].log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),Ce(i,e))}}function De(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l["isFiniteNumber"])(t))return null;var n=e[0].programDateTime;if(t<(n||0))return null;var i=e[e.length-1].endProgramDateTime;if(t>=(i||0))return null;r=r||0;for(var a=0;a<e.length;++a){var o=e[a];if(Ne(t,r,o))return o}return null}function Pe(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!xe(r,n,i)?i:te.search(t,xe.bind(null,r,n))}function xe(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function Ne(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0)),i=r.endProgramDateTime||0;return i-n>e}var Me=250,Fe=2,je=.1,Ue=.05,Be=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,i=r.currentTime,a=r.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=re.bufferInfo(r,i,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>Fe,f=!d||d-i>Fe;if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,l.start||0)-i;if(p>0&&p<=Fe)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==n){var m=g-n;!a&&m>=Me&&this._reportStall(l.len);var v=re.bufferInfo(r,i,t.maxBufferHole);this._tryFixBufferStall(v,m)}else this.stalled=g}}}else if(this.moved=!0,null!==n){if(this.stallReported){var y=self.performance.now()-n;c["logger"].warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media,a=i.currentTime,o=n.getPartialFragment(a);if(o){var s=this._trySkipBufferHole(o);if(s)return}e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(c["logger"].warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media,n=this.stallReported;n||(this.stallReported=!0,c["logger"].warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=0,o=0;o<n.buffered.length;o++){var l=n.buffered.start(o);if(i+t.maxBufferHole>=a&&i<l){var d=Math.max(l+Ue,n.currentTime+je);return c["logger"].warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:e}),d}a=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=n+i*e.nudgeOffset;c["logger"].warn("Nudging 'currentTime' from "+n+" to "+a),r.currentTime=a,t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_NUDGE_ON_STALL,fatal:!1})}else c["logger"].error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!0})},e}();function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ve=function(e){function t(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return r=e.call.apply(e,[this,t].concat(i))||this,r._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(Ge(r)),r}Ke(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},t}(f);function Ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var He={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},We=function(e){function t(){return e.apply(this,arguments)||this}Ye(t,e);var r=t.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=He.STOPPED},r._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===J.PARTIAL||i===J.OK}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,i=t?t.currentTime:null,a=re.bufferInfo(r||t,i,this.config.maxBufferHole);if(Object(l["isFiniteNumber"])(i)&&c["logger"].log("media seeking to "+i.toFixed(3)),n===He.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;i<u||i>d?(o.loader&&(c["logger"].log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=He.IDLE):c["logger"].log("seeking outside of buffer but within currently loaded fragment range")}}else n===He.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=He.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=He.STOPPED,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},t}(Ve);function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function qe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Xe=100,Ze=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].LEVEL_LOADED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_LOAD_EMERGENCY_ABORTED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_SWITCHED,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n}qe(t,e);var r=t.prototype;return r.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(Xe),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(c["logger"].log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=He.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=He.STOPPED},r.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case He.BUFFER_FLUSHING:this.fragLoadError=0;break;case He.IDLE:this._doTickIdle();break;case He.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(c["logger"].log("mediaController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break;case He.ERROR:case He.STOPPED:case He.FRAG_LOADING:case He.PARSING:case He.PARSED:case He.ENDED:break;default:break}this._checkBuffer(),this._checkFragmentChanged()},r._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=re.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=l.len;if(!(d>=o)){c["logger"].trace("buffer length of "+d.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==i)this.state=He.WAITING_LEVEL;else{if(this._streamEnded(l,h)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(u["default"].BUFFER_EOS,f),void(this.state=He.ENDED)}this._fetchPayloadOrEos(n,l,h)}}}}},r._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s,l=a[0].start,u=a[o-1].start+a[o-1].duration,d=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var h=this.config.initialLiveManifestSize;if(o<h)return void c["logger"].warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(s=this._ensureFragmentAtLivePoint(r,d,l,u,n,a,o),null===s)return}else d<l&&(s=a[0]);s||(s=this._findFragment(l,n,o,a,d,u,r)),s&&(s.encrypted?(c["logger"].log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(c["logger"].log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+d.toFixed(3)),this._loadFragment(s)))}},r._ensureFragmentAtLivePoint=function(e,t,r,n,i,a,o){var s,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-l.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c["logger"].log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)c["logger"].log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=De(a,i.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];i.cc===p.cc&&(s=p,c["logger"].log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=te.search(a,(function(e){return i.cc-e.cc})),s&&c["logger"].log("live playlist, switching playlist, load frag with same CC: "+s.sn))}s||(s=a[Math.min(o-1,Math.round(o/2))],c["logger"].log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},r._findFragment=function(e,t,r,n,i,a,o){var s,l=this.hls.config;if(i<a){var u=i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=Pe(t,n,i,u)}else s=n[r-1];if(s){var d=s.sn-o.startSN,h=t&&s.level===t.level,f=n[d-1],p=n[d+1];if(t&&s.sn===t.sn)if(h&&!s.backtracked)if(s.sn<o.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&d?(s=f,c["logger"].warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=p,c["logger"].log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(p&&p.backtracked?(c["logger"].warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(c["logger"].warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f,s.backtracked=!0):d&&(s=null)))}return s},r._loadKey=function(e){this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:e})},r._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===J.NOT_LOADED||t===J.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(u["default"].FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new fe(this.hls,"main")),this.state=He.FRAG_LOADING):t===J.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},r._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),re.isBuffered(r,t)?e=this.getBufferedFrag(t):re.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u["default"].FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u["default"].LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.immediateLevelSwitch=function(){if(c["logger"].log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,re.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r,n;if(r=this.getBufferedFrag(e.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(n=this.getBufferedFrag(e.currentTime+t),n&&(n=this.followingBufferedFrag(n),n)){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},r.flushMainBuffer=function(e,t){this.state=He.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u["default"].BUFFER_FLUSHING,r)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new Be(r,t,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l["isFiniteNumber"])(t)&&c["logger"].log("media seeked to "+t.toFixed(3)),this.tick()},r.onManifestLoading=function(){c["logger"].log("trigger BUFFER_RESET"),this.hls.trigger(u["default"].BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){t=e.audioCodec,t&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c["logger"].log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],a=t.totalduration,o=0;if(c["logger"].log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&t.fragments.length>0?(ve(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l["isFiniteNumber"])(o)?c["logger"].log("live playlist sliding:"+o.toFixed(3)):(c["logger"].log("live playlist - outdated PTS, unknown sliding"),Le(this.fragPrevious,n,t))):(c["logger"].log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,Le(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=r,this.hls.trigger(u["default"].LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l["isFiniteNumber"])(d)?(d<0&&(c["logger"].log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c["logger"].log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c["logger"].log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_LEVEL&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===He.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c["logger"].log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=He.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=He.IDLE,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c["logger"].log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=He.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s),p=this.demuxer=this.demuxer||new fe(this.hls,"main");p.push(e.payload,h,f,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio,i){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c["logger"].log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}for(n in i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(u["default"].BUFFER_CODECS,a),a){i=a[n],c["logger"].log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===He.PARSING){var i=this.levels[this.level],a=r;if(Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&a.addElementaryStream(v.AUDIO),!0===e.hasVideo&&a.addElementaryStream(v.VIDEO),c["logger"].log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c["logger"].warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c["logger"].warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=He.IDLE,this.fragPrevious=a,void this.tick();c["logger"].warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=me(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u["default"].LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===He.PARSING&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u["default"].BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){c["logger"].log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(c["logger"].log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=He.IDLE}var i=this.hls;i.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},r.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c["logger"].log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(c["logger"].log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c["logger"].log("main buffered : "+Te.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=He.IDLE}this.tick()}},r.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&re.isBuffered(this.media,this.media.currentTime)&&re.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c["logger"].warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:this.state!==He.ERROR&&(e.fatal?(this.state=He.ERROR,c["logger"].warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==He.WAITING_LEVEL||(this.state=He.IDLE));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==He.PARSING&&this.state!==He.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=He.IDLE):(c["logger"].warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break;default:break}}},r._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c["logger"].warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.onFragLoadEmergencyAborted=function(){this.state=He.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(v.VIDEO,e.buffered),this.state=He.IDLE,this.fragPrevious=null},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&r>=0&&(c["logger"].log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},$e(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("main stream-controller: "+t+"->"+e),this.hls.trigger(u["default"].STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(We),Je=Ze;function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e,t,r){return t&&Qe(e.prototype,t),r&&Qe(e,r),e}function tt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var rt,nt=window,it=(nt.performance,function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADED,u["default"].LEVEL_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].FRAG_LOADED,u["default"].ERROR)||this,r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,rt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}tt(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,r=[],n=[],i={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,rt&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),a=i[e.bitrate],a?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(l=!0,pe(a||e,"audio",t.AUDIO)),t.SUBTITLES&&pe(a||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){var t=e.videoCodec;return!!t}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||O(t,"audio"))&&(!r||O(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||O(e.audioCodec,"audio")})),n.forEach((function(e,t){e.id=t}))),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,c["logger"].log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(u["default"].MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:n.some((function(e){return!!e.url}))})}else this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c["logger"].log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(u["default"].LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;r.trigger(u["default"].LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.onError=function(e){if(e.fatal)e.type===s["ErrorTypes"].NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s["ErrorDetails"].REMUX_ALLOC_ERROR:t=e.level,r=!0;break}void 0!==t&&this.recoverLevel(e,t,r,n)}},r.recoverLevel=function(e,t,r,n){var i,a,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c["logger"].error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c["logger"].warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=d.url.length,i>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c["logger"].warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c["logger"].warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(c["logger"].warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},r.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},r.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=_e(i.details,n,e.stats.trequest);c["logger"].log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},r.loadLevel=function(){if(c["logger"].debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];c["logger"].log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u["default"].LEVEL_LOADING,{url:n,level:t,id:r})}}},et(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(f)),at=r("./src/demux/id3.js");function ot(e,t){var r;try{r=new Event("addtrack")}catch(n){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function st(e){if(e&&e.cues)while(e.cues.length>0)e.removeCue(e.cues[0])}function lt(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];var r=0,n=e.length-1;while(r<=n){var i=Math.floor((n+r)/2);if(t<e[i].endTime)n=i-1;else{if(!(t>e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}function ut(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ct=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_METADATA,u["default"].LIVE_BACK_BUFFER_REACHED)||this,r.id3Track=void 0,r.media=void 0,r}ut(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){st(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return ot(r,this.media),r}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=at["default"].getID3Frames(r[i].data);if(a){var o=r[i].pts,s=i<r.length-1?r[i+1].pts:t.endPTS;o===s?s+=1e-4:o>s&&(c["logger"].warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!at["default"].isTimeStampFrame(u)){var d=new n(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=lt(r.cues,t);if(n)while(r.cues[0]!==n)r.removeCue(r.cues[0])}},t}(f),dt=ct;function ht(){var e=oe();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}var ft=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),pt=ft,gt=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new pt(t),this.fast_=new pt(r)}var t=e.prototype;return t.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8*t,n=e/1e3,i=r/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),mt=gt;function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t,r){return t&&vt(e.prototype,t),r&&vt(e,r),e}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _t=window,Et=_t.performance,Tt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING,u["default"].FRAG_LOADED,u["default"].FRAG_BUFFERED,u["default"].ERROR)||this,r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(bt(r)),r}At(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,a=i.config,o=t.level,s=i.levels[o].details.live;s?(r=a.abrEwmaFastLive,n=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,n=a.abrEwmaSlowVoD),this._bwEstimator=new mt(i,n,r,a.abrEwmaDefaultEstimate)}},r._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return c["logger"].warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=Et.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var l=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),h=l[r.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*f/8)),g=t.currentTime,m=(p-a.loaded)/d,v=(re.bufferInfo(t,g,e.config.maxBufferHole).end-g)/s;if(v<2*r.duration/s&&m>v){var y,b;for(b=r.level-1;b>i;b--){var A=l[b].realBitrate?Math.max(l[b].realBitrate,l[b].bitrate):l[b].bitrate,_=r.duration*A/(6.4*d);if(_<v)break}y<m&&(c["logger"].warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+m.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(u["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},r.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l["isFiniteNumber"])(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l["isFiniteNumber"])(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;c["logger"].log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},r.onError=function(e){switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:this.clearTimer();break;default:break}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r._findBestLevel=function(e,t,r,n,i,a,o,s,l){for(var u=i;u>=n;u--){var d=l[u];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=void 0;g=u<=e?o*r:s*r;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(c["logger"].trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},yt(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(re.bufferInfo(a,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,d,i,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;c["logger"].trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;if(v){var y=s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay;p=y-v,c["logger"].trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}}return f=this._findBestLevel(o,s,d,i,t,h+p,g,m,r),Math.max(f,0)}}]),t}(f),kt=Tt;function St(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var wt=oe(),Rt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_PARSED,u["default"].BUFFER_RESET,u["default"].BUFFER_APPENDING,u["default"].BUFFER_CODECS,u["default"].BUFFER_EOS,u["default"].BUFFER_FLUSHING,u["default"].LEVEL_PTS_UPDATED,u["default"].LEVEL_UPDATED)||this,r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c["logger"].log("media source opened"),r.hls.trigger(u["default"].MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c["logger"].log("media source closed")},r._onMediaSourceEnded=function(){c["logger"].log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;c["logger"].warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),i={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}r.hls.trigger(u["default"].BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){c["logger"].error("sourceBuffer error:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}St(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");var i=Math.abs(n.timestampOffset-e.start);if(i>.1){var a=n.updating;try{n.abort()}catch(o){c["logger"].warn("can not abort audio buffer: "+o)}a?this.audioTimestampOffset=e.start:(c["logger"].warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,c["logger"].log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&wt){var r=this.mediaSource=new wt;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.onMediaDetaching=function(){c["logger"].log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){c["logger"].warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c["logger"].warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u["default"].MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(n){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var i=e[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c["logger"].log("creating sourceBuffer("+o+")");try{var l=t[n]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(d){c["logger"].error("error while trying to add sourceBuffer:"+d.message),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_ADD_CODEC_ERROR,fatal:!1,err:d,mimeType:o})}}this.hls.trigger(u["default"].BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,c["logger"].log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c["logger"].log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(i){c["logger"].warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o];if(s){var l=s.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(u["default"].LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c["logger"].error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c["logger"].log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l["isFiniteNumber"])(e))&&(c["logger"].log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){while(this.flushRange.length){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&&(t+=i.buffered.length)}}catch(a){c["logger"].error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u["default"].BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c["logger"].error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=r.shift();if(i)try{var a=n[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(l){c["logger"].error("error while trying to append buffer:"+l.message),r.unshift(i);var o={type:s["ErrorTypes"].MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===l.code?(this.segments=[],o.details=s["ErrorDetails"].BUFFER_FULL_ERROR):(this.appendError++,o.details=s["ErrorDetails"].BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c["logger"].log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u["default"].ERROR,o)}}}},r.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c["logger"].log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c["logger"].warn("abort flushing too many retries"),!0;var a=n[r];if(a){if(a.ended=!1,a.updating)return c["logger"].warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return c["logger"].log("buffer flushed"),!0},r.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,r),l=Math.min(o,n);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c["logger"].log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(d){c["logger"].warn("removeBufferRange failed",d)}return!1},t}(f),Ct=Rt;function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t,r){return t&&Lt(e.prototype,t),r&&Lt(e,r),e}function Ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Dt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FPS_DROP_LEVEL_CAPPING,u["default"].MEDIA_ATTACHING,u["default"].MANIFEST_PARSED,u["default"].BUFFER_CODECS,u["default"].MEDIA_DETACHING)||this,r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}Ot(t,e);var r=t.prototype;return r.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},r.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onBufferCodecs=function(e){var t=this.hls;t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onLevelsUpdated=function(e){this.levels=e.levels},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return t.isLevelAllowed(i,r.restrictedLevels)&&i<=e}));return t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&n(o,e[a+1])){i=a;break}}return i},It(t,[{key:"mediaWidth",get:function(){var e,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,r=this.media;return r&&(e=r.height||r.clientHeight||r.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),t}(f),Pt=Dt;function xt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Nt=window,Mt=Nt.performance,Ft=function(e){function t(t){return e.call(this,t,u["default"].MEDIA_ATTACHING)||this}xt(t,e);var r=t.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var r=this.video=e.media instanceof window.HTMLVideoElement?e.media:null;"function"===typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},r.checkFPS=function(e,t,r){var n=Mt.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(u["default"].FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c["logger"].warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u["default"].FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(f),jt=Ft,Ut=window,Bt=Ut.performance,Gt=Ut.XMLHttpRequest,Kt=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:Bt.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new Gt;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(i){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:e.status,text:i.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(Bt.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;n.tload=Math.max(n.tfirst,Bt.now()),"arraybuffer"===i.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,i,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(c["logger"].error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(c["logger"].warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c["logger"].warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}(),Vt=Kt;function Yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(e,t,r){return t&&Yt(e.prototype,t),r&&Yt(e,r),e}function Wt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var zt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].AUDIO_TRACK_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].LEVEL_LOADED,u["default"].ERROR)||this,r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}Wt(t,e);var r=t.prototype;return r.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},r.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u["default"].AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},r.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c["logger"].warn("Invalid audio track id:",e.id);else{if(c["logger"].log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},r.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},r.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},r.onError=function(e){e.type===s["ErrorTypes"].NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR&&(c["logger"].warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},r._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c["logger"].debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c["logger"].warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c["logger"].log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(u["default"].AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},r.doTick=function(){this._updateTrack(this._trackId)},r._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},r._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c["logger"].warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(n=null,o()),a||(c["logger"].error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},r._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},r._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;c["logger"].log("loading audio-track playlist for id: "+r),this.hls.trigger(u["default"].AUDIO_TRACK_LOADING,{url:t,id:r})}},r._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c["logger"].log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},r._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;c["logger"].warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===r){a=o;break}}a!==e?(c["logger"].log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c["logger"].warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},Ht(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(Ve),$t=zt;function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t,r){return t&&qt(e.prototype,t),r&&qt(e,r),e}function Zt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Jt=window,Qt=Jt.performance,er=100,tr=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].AUDIO_TRACKS_UPDATED,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_LOADED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].BUFFER_RESET,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED,u["default"].INIT_PTS_FOUND)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}Zt(t,e);var r=t.prototype;return r.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c["logger"].log("InitPTS for cc: "+r+" found from video track: "+n),this.state===He.WAITING_INIT_PTS&&this.tick())},r.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(er),this.fragLoadError=0,t>0&&-1===e?(c["logger"].log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=He.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=He.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=He.STOPPED},r.doTick=function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case He.ERROR:case He.PAUSED:case He.BUFFER_FLUSHING:break;case He.STARTING:this.state=He.WAITING_TRACK,this.loadedmetadata=!1;break;case He.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(e=this.nextLoadPosition,void 0===e)break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=re.bufferInfo(o,e,i.maxBufferHole),h=re.bufferInfo(s,e,i.maxBufferHole),f=d.len,p=d.end,g=this.fragPrevious,m=Math.min(i.maxBufferLength,i.maxMaxBufferLength),v=Math.max(m,h.len),y=this.audioSwitch,b=this.trackId;if((f<v||y)&&b<a.length){if(r=a[b].details,"undefined"===typeof r){this.state=He.WAITING_TRACK;break}if(!y&&this._streamEnded(d,r))return this.hls.trigger(u["default"].BUFFER_EOS,{type:"audio"}),void(this.state=He.ENDED);var A,_=r.fragments,E=_.length,T=_[0].start,k=_[E-1].start+_[E-1].duration;if(y)if(r.live&&!r.PTSKnown)c["logger"].log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,r.PTSKnown&&e<T){if(!(d.end>T||d.nextStart))return;c["logger"].log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(r.initSegment&&!r.initSegment.data)A=r.initSegment;else if(p<=T){if(A=_[0],null!==this.videoTrackCC&&A.cc!==this.videoTrackCC&&(A=Se(_,this.videoTrackCC)),r.live&&A.loadIdx&&A.loadIdx===this.fragLoadIdx){var S=d.nextStart?d.nextStart:T;return c["logger"].log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var w,R=i.maxFragLookUpTolerance,C=g?_[g.sn-_[0].sn+1]:void 0,L=function(e){var t=Math.min(R,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<k?(p>k-R&&(R=0),w=C&&!L(C)?C:te.search(_,L)):w=_[E-1],w&&(A=w,T=w.start,g&&A.level===g.level&&A.sn===g.sn&&(A.sn<r.endSN?(A=_[A.sn+1-r.startSN],c["logger"].log("SN just loaded, load next one: "+A.sn)):A=null))}A&&(A.encrypted?(c["logger"].log("Loading key for "+A.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=He.KEY_LOADING,n.trigger(u["default"].KEY_LOADING,{frag:A})):(c["logger"].log("Loading "+A.sn+", cc: "+A.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=A,(y||this.fragmentTracker.getState(A)===J.NOT_LOADED)&&("initSegment"!==A.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(A.sn)&&(this.nextLoadPosition=A.start+A.duration),n.trigger(u["default"].FRAG_LOADING,{frag:A}),this.state=He.FRAG_LOADING)))}break;case He.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var I=Qt.now(),O=this.retryDate;o=this.media;var D=o&&o.seeking;(!O||I>=O||D)&&(c["logger"].log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break;case He.WAITING_INIT_PTS:var P=this.videoTrackCC;if(void 0===this.initPTS[P])break;var x=this.waitingFragment;if(x){var N=x.frag.cc;P!==N?(t=this.tracks[this.trackId],t.details&&t.details.live&&(c["logger"].warn("Waiting fragment CC ("+N+") does not match video track CC ("+P+")"),this.waitingFragment=null,this.state=He.IDLE)):(this.state=He.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=He.IDLE;break;case He.STOPPED:case He.FRAG_LOADING:case He.PARSING:case He.PARSED:case He.ENDED:break;default:break}},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onAudioTracksUpdated=function(e){c["logger"].log("audio tracks updated"),this.tracks=e.audioTracks},r.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=He.PAUSED,this.waitingFragment=null,t?this.setInterval(er):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=He.IDLE),this.tick()},r.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],i=t.totalduration,a=0;if(c["logger"].log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=n.details;o&&t.fragments.length>0?(ve(o,t),a=t.fragments[0].start,t.PTSKnown?c["logger"].log("live audio playlist sliding:"+a.toFixed(3)):c["logger"].log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c["logger"].log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l["isFiniteNumber"])(s)?(c["logger"].log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(a,t),c["logger"].log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_TRACK&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===He.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=He.IDLE,h.tparsed=h.tbuffered=Qt.now(),i.initSegment.data=e.payload,this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=He.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new fe(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==f){this.pendingBuffering=!0,c["logger"].log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);var g=!1;this.demuxer.push(e.payload,p,d,null,t,a,g,f)}else c["logger"].log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=He.WAITING_INIT_PTS}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i=e.tracks;if(i.video&&delete i.video,n=i.audio,n){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(u["default"].BUFFER_CODECS,i),c["logger"].log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var a=n.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,o))}this.tick()}}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===He.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(v.AUDIO),c["logger"].log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),me(a.details,r,e.startPTS,e.endPTS);var d=this.audioSwitch,h=this.media,f=!1;if(d)if(h&&h.readyState){var p=h.currentTime;c["logger"].log("switching audio track : currentTime:"+p),p>=e.startPTS&&(c["logger"].log("switching audio track : flushing all audio"),this.state=He.BUFFER_FLUSHING,o.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i});var g=this.pendingData;if(!g)return c["logger"].warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&g.push({type:e.type,data:t,parent:"audio",content:"data"})})),!f&&g.length&&(g.forEach((function(e){t.state===He.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(u["default"].BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=Qt.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=Qt.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c["logger"].log("audio buffered : "+Te.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=He.IDLE}this.tick()}},r.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var a=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c["logger"].warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Qt.now()+a,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR}break;case s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR:case s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:this.state!==He.ERROR&&(this.state=e.fatal?He.ERROR:He.IDLE,c["logger"].warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===He.PARSING||this.state===He.PARSED)){var o=this.mediaBuffer,l=this.media.currentTime,d=o&&re.isBuffered(o,l)&&re.isBuffered(o,l+.5);if(d){var h=this.config;h.maxMaxBufferLength>=h.maxBufferLength&&(h.maxMaxBufferLength/=2,c["logger"].warn("AudioStreamController: reduce max buffer length to "+h.maxMaxBufferLength+"s")),this.state=He.IDLE}else c["logger"].warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=He.BUFFER_FLUSHING,this.hls.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break;default:break}},r.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c["logger"].log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u["default"].BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=He.PARSED):(this.state=He.IDLE,this.fragPrevious=null,this.tick())},Xt(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(We),rr=tr,nr=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){if("string"!==typeof e)return!1;var r=t[e.toLowerCase()];return!!r&&e.toLowerCase()}function i(e){if("string"!==typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function o(t,r,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=t,h=r,f=o,p=null,g="",m=!0,v="auto",y="start",b=50,A="middle",_=50,E="middle";Object.defineProperty(s,"id",a({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",a({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",a({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},l,{get:function(){return g},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},l,{get:function(){return v},set:function(t){if("number"!==typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},l,{get:function(){return A},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return o.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},o}(),ir=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function ar(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ir,this.regionList=[]}function or(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function sr(){this.values=Object.create(null)}function lr(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}sr.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var ur=new nr(0,0,0),cr="middle"===ur.align?"middle":"center";function dr(e,t,r){var n=e;function i(){var t=or(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var n=new sr;lr(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",cr,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",cr,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",cr,"end","left","right"]);break}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===ur.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",cr);var a=n.get("position","auto");"auto"===a&&50===ur.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),o(),t.endTime=i(),o(),a(e,t)}function hr(e){return e.replace(/<br(?: \/)?>/gi,"\n")}ar.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;e=hr(e);while(r<e.length&&"\r"!==e[r]&&"\n"!==e[r])++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function n(e){lr(e,(function(e,t){switch(e){case"Region":break}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;i=r();var a=i.match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}var o=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=r(),t.state){case"HEADER":/:/.test(i)?n(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new nr(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{dr(i,t.cue,t.regionList)}catch(l){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(l){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}};var fr=ar;function pr(e,t,r,n){for(var i,a,o,s,l,u=window.VTTCue||TextTrackCue,c=0;c<n.rows.length;c++)if(i=n.rows[c],o=!0,s=0,l="",!i.isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&o?s++:(l+=i.chars[d].uchar,o=!1);i.cueStartTime=t,t===r&&(r+=1e-4),a=new u(t,r,hr(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(a)}}var gr,mr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},vr=function(e){var t=e;return mr.hasOwnProperty(e)&&(t=mr[e]),String.fromCharCode(t)},yr=15,br=100,Ar={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_r={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Er={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Tr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},kr=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(e){e[e["ERROR"]=0]="ERROR",e[e["TEXT"]=1]="TEXT",e[e["WARNING"]=2]="WARNING",e[e["INFO"]=2]="INFO",e[e["DEBUG"]=3]="DEBUG",e[e["DATA"]=3]="DATA"})(gr||(gr={}));var Sr={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},wr=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},Rr=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Cr=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Rr(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Lr=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<br;e++)this.chars.push(new Cr);this.pos=0,this.currPenState=new Rr}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<br;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<br;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<br;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Sr.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>br&&(Sr.log("ERROR","Too large cursor position "+this.pos),this.pos=br)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=vr(e);this.pos>=br?Sr.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<br;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<br;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)},e}(),Ir=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<yr;e++)this.rows.push(new Lr);this.currRow=yr-1,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<yr;e++)this.rows[e].clear();this.currRow=yr-1},t.equals=function(e){for(var t=!0,r=0;r<yr;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<yr;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<yr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){var e=this.rows[this.currRow];e.backSpace()},t.clearToEndOfRow=function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},t.insertChar=function(e){var t=this.rows[this.currRow];t.insertChar(e)},t.setPen=function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},t.moveCursor=function(e){var t=this.rows[this.currRow];t.moveCursor(e)},t.setCursor=function(e){Sr.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},t.setPAC=function(e){Sr.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<yr;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&Sr.time&&a<Sr.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){Sr.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){Sr.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Sr.log("INFO","Rolling up")}else Sr.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<yr;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Or=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ir,this.nonDisplayedMemory=new Ir,this.lastOutputScreen=new Ir,this.currRollUpRow=this.displayedMemory.rows[yr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[yr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,Sr.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Sr.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Sr.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){Sr.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){Sr.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){Sr.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){Sr.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){Sr.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){Sr.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){Sr.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){Sr.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){Sr.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){Sr.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){Sr.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(Sr.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Sr.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){Sr.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}Sr.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=Sr.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Dr=function(){function e(e,t,r){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,r],this.channels=[new Or(1,t),new Or(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,i,a=!1;this.lastTime=e,Sr.setTime(e);for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(Sr.log("DATA","["+wr([t[o],t[o+1]])+"] -> ("+wr([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i),a))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else Sr.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Sr.log("WARNING","Couldn't parse cleaned data "+wr([n,i])+" orig: "+wr([t[o],t[o+1]])))}else this.dataCounters.padding+=2},t.parseCmd=function(e,t){var r=null,n=(20===e||28===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=33&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Sr.log("DEBUG","Repeated command ("+wr([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.parseMidrow=function(e,t){var r=null;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currChNr)return Sr.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.ccMIDROW(t),Sr.log("DEBUG","MIDROW ("+wr([e,t])+")"),!0}return!1},t.parsePAC=function(e,t){var r=null,n=null,i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(16===e||24===e)&&t>=64&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?Ar[e]:Er[e]:1===r?_r[e]:Tr[e];var o=this.interpretPAC(n,t),s=this.channels[r-1];return s.setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r=null,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,Sr.log("INFO","Special char '"+vr(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=wr(n);Sr.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.parseBackgroundAttributes=function(e,t){var r,n,i,a,o=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;return!(!o&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=kr[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),Pr=Dr,xr=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Nr=function(e,t,r){return e.substr(r||0,t.length)===t},Mr=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!Object(l["isFiniteNumber"])(t)||!Object(l["isFiniteNumber"])(r)||!Object(l["isFiniteNumber"])(n)||!Object(l["isFiniteNumber"])(i))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*n,t+=36e5*i,t},Fr=function(e){var t=5381,r=e.length;while(r)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},jr=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);while(i&&i.new)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},Ur={parse:function(e,t,r,n,i,a){var o,s=/\r\n|\n\r|\n|\r/g,l=Object(at["utf8ArrayToStr"])(new Uint8Array(e)).trim().replace(s,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new fr;m.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(void 0!==d?i=r.ccOffset=t.start:jr(r,n,h)),h&&(i=h-r.presentationOffset),g&&(e.startTime+=i-d,e.endTime+=i-d),e.id=Fr(e.startTime.toString())+Fr(e.endTime.toString())+Fr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},m.onparsingerror=function(e){o=e},m.onflush=function(){o&&a?a(o):i(f)},l.forEach((function(e){if(p){if(Nr(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach((function(e){Nr(e,"LOCAL:")?u=e.substr(6):Nr(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),c-=t,d=Mr(u)/1e3,h=c/9e4}catch(i){g=!1,o=i}return}""===e&&(p=!1)}m.parse(e+"\n")})),m.flush()}},Br=Ur;function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Vr=function(e){function t(t){var r;if(r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_USERDATA,u["default"].FRAG_DECRYPTED,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_LOADED,u["default"].FRAG_LOADED,u["default"].INIT_PTS_FOUND)||this,r.media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties=void 0,r.cea608Parser=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=null,r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new xr(Gr(r),"textTrack1"),i=new xr(Gr(r),"textTrack2");r.cea608Parser=new Pr(0,n,i)}return r}Kr(t,e);var r=t.prototype;return r.addCues=function(e,t,r,n){for(var i=this.cueRanges,a=!1,o=i.length;o--;){var s=i[o],l=Hr(s[0],s[1],t,r);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),a=!0,l/(r-t)>.5))return}a||i.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,i=e.initPTS,a=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.createCaptionsTrack=function(e){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode;if(!r[e]){var s=this.getExistingTrack(e);if(s)r[e]=s,st(r[e]),ot(r[e],n);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},r.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){st(e[t]),delete e[t]}))},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)st(t[r])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,n){var i;if(n<r.length){for(var a=null,o=0;o<r.length;o++)if(Yr(r[o],e)){a=r[o];break}a&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}},r.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser,i=this.initPTS,a=this.lastSn,o=this.unparsedVttFrags;if("main"===t.type){var s=t.sn;t.sn!==a+1&&n&&n.reset(),this.lastSn=s}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l["isFiniteNumber"])(i[t.cc]))return o.push(e),void(i.length&&this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,r)}else this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var r=this.hls,n=this.prevCC,i=this.textTracks,a=this.vttCCs;a[e.cc]||(a[e.cc]={start:e.start,prevCC:n,new:!0},this.prevCC=e.cc),Br.parse(t,this.initPTS[e.cc],a,e.cc,(function(t){var n=i[e.level];"disabled"!==n.mode?(t.forEach((function(e){if(!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){c["logger"].debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}})),r.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){c["logger"].log("Failed to parse VTT cue: "+t),r.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l["isFiniteNumber"])(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},r.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var r=e.samples[t].bytes;if(r){var n=this.extractCea608Data(r);this.cea608Parser.addData(e.samples[t].pts,n)}}},r.extractCea608Data=function(e){for(var t,r,n,i,a,o=31&e[0],s=2,l=[],u=0;u<o;u++)t=e[s++],r=127&e[s++],n=127&e[s++],i=0!==(4&t),a=3&t,0===r&&0===n||i&&0===a&&(l.push(r),l.push(n));return l},t}(f);function Yr(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Hr(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var Wr=Vr;function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $r(e,t,r){return t&&zr(e.prototype,t),r&&zr(e,r),e}function qr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Xr=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADED,u["default"].SUBTITLE_TRACK_LOADED)||this,r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}qr(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l["isFiniteNumber"])(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l["isFiniteNumber"])(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var e=Zr(this.media.textTracks);e.forEach((function(e){st(e)})),this.subtitleTrack=-1,this.media=null}},r.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u["default"].SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},r.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,o=a[i];if(r>=a.length||r!==i||!o||this.stopped)this._clearReloadTimer();else if(c["logger"].log("subtitle track "+r+" loaded"),n.live){var s=_e(o.details,n,e.stats.trequest);c["logger"].log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},r.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},r._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(c["logger"].log("Loading subtitle track "+e),r.trigger(u["default"].SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=Zr(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var a=i[n];a&&(a.mode="disabled")}var o=i[e];o&&(o.mode=r?"showing":"hidden")}},r._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l["isFiniteNumber"])(e)||e<-1||e>=r.length||(this.trackId=e,c["logger"].log("Switching to subtitle track "+e),t.trigger(u["default"].SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Zr(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},$r(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),t}(f);function Zr(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var Jr=Xr,Qr=r("./src/crypt/decrypter.js");function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var rn,nn=window,an=nn.performance,on=500,sn=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].ERROR,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].SUBTITLE_TRACKS_UPDATED,u["default"].SUBTITLE_TRACK_SWITCH,u["default"].SUBTITLE_TRACK_LOADED,u["default"].SUBTITLE_FRAG_PROCESSED,u["default"].LEVEL_UPDATED)||this,n.fragmentTracker=r,n.config=t.config,n.state=He.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Qr["default"](t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(en(n)),n}tn(t,e);var r=t.prototype;return r.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=He.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,o=0;o<n.length;o++)if(a>=n[o].start&&a<=n[o].end){i=n[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=He.IDLE},r.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=He.STOPPED)},r.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=He.IDLE)},r.onSubtitleTracksUpdated=function(e){var t=this;c["logger"].log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(on)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t>=i.length||t!==n||!a||(r.live&&ye(a.details,r,this.lastAVStart),a.details=r,this.setInterval(on))},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE)},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===He.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=an.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=an.now();i.trigger(u["default"].FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},r.onLevelUpdated=function(e){var t=e.details,r=t.fragments;this.lastAVStart=r.length?r[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case He.IDLE:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=re.bufferedInfo(this._getBuffered(),n.currentTime,o),h=d.end,f=d.len,p=i[t].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(f>l)return;var y=this.fragPrevious;h<v?(y&&p.hasProgramDateTime&&(a=De(g,y.endProgramDateTime,s)),a||(a=Pe(y,g,h,s))):a=g[m-1],a&&a.encrypted?(c["logger"].log("Loading key for "+a.sn),this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:a})):a&&r.getState(a)===J.NOT_LOADED&&(this.fragCurrent=a,this.state=He.FRAG_LOADING,this.hls.trigger(u["default"].FRAG_LOADING,{frag:a}))}else this.state=He.IDLE},r.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){this.fragPrevious=null},t}(We);(function(e){e["WIDEVINE"]="com.widevine.alpha",e["PLAYREADY"]="com.microsoft.playready"})(rn||(rn={}));var ln=function(){return"undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cn(e,t,r){return t&&un(e.prototype,t),r&&un(e,r),e}function dn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var hn=3,fn=function(e,t){var r={videoCapabilities:[]};return t.forEach((function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[r]},pn=function(e,t,r){switch(e){case rn.WIDEVINE:return fn(t,r);default:throw new Error("Unknown key-system: "+e)}},gn=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHED,u["default"].MANIFEST_PARSED)||this,r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r._onMediaEncrypted=function(e){c["logger"].log('Media is encrypted using "'+e.initDataType+'" init data type'),r._attemptSetMediaKeys(),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r}dn(t,e);var r=t.prototype;return r.getLicenseServerUrl=function(e){switch(e){case rn.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},r._attemptKeySystemAccess=function(e,t,r){var n=this,i=pn(e,t,r);c["logger"].log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then((function(t){n._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){c["logger"].error('Failed to obtain key-system "'+e+'" access:',t)}))},r._onMediaKeySystemAccessObtained=function(e,t){var r=this;c["logger"].log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then((function(t){n.mediaKeys=t,c["logger"].log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()})).catch((function(e){c["logger"].error("Failed to create media-keys:",e)}))},r._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},r._onNewMediaKeySession=function(e){var t=this;c["logger"].log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},r._onKeySessionMessage=function(e,t){c["logger"].log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c["logger"].log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},r._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c["logger"].error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_KEYS,fatal:!0});c["logger"].log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return c["logger"].error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c["logger"].warn("Key-Session already initialized but requested again");else{var i=n.mediaKeysSession;if(!i)return c["logger"].error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c["logger"].warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c["logger"].log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c["logger"].debug("Key-session generation succeeded")})).catch((function(e){c["logger"].error("Error generating key-session request:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},r._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(a){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},r._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c["logger"].log("License request succeeded"),"arraybuffer"!==e.responseType&&c["logger"].warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(c["logger"].error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>hn)return void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=hn-this._requestLicenseFailureCount+1;c["logger"].warn("Retrying license request, "+i+" attempts left"),this._requestLicense(r,n)}break}},r._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case rn.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){c["logger"].log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c["logger"].error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);c["logger"].log("Sending license request to URL: "+n);var a=this._generateLicenseRequestChallenge(r,e);i.send(a)}catch(o){c["logger"].error("Failure requesting DRM license: "+o),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},r.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},r.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(rn.WIDEVINE,t,r)}},cn(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(f),mn=gn;function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){yn(e,t,r[t])}))}return e}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bn=vn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Vt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:kt,bufferController:Ct,capLevelController:Pt,fpsController:jt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:ln},An(),{subtitleStreamController:sn,subtitleTrackController:Jr,timelineController:Wr,audioStreamController:rr,audioTrackController:$t,emeController:mn});function An(){return{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"}}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){En(e,t,r[t])}))}return e}function En(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sn(e,t,r){return t&&kn(e.prototype,t),r&&kn(e,r),e}function wn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}r.d(t,"default",(function(){return Rn}));var Rn=function(e){function t(r){var n;void 0===r&&(r={}),n=e.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=_n({},i,r);var a=Tn(n),o=a.config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c["enableLogs"])(o.debug),n._autoLevelCapping=-1;var s=n.abrController=new o.abrController(Tn(n)),l=new o.bufferController(Tn(n)),u=n.capLevelController=new o.capLevelController(Tn(n)),d=new o.fpsController(Tn(n)),h=new Y(Tn(n)),f=new z(Tn(n)),p=new X(Tn(n)),g=new dt(Tn(n)),m=n.levelController=new it(Tn(n)),v=new Q(Tn(n)),y=n.streamController=new Je(Tn(n),v),b=[m,y],A=o.audioStreamController;A&&b.push(new A(Tn(n),v)),n.networkControllers=b;var _=[h,f,p,s,l,u,d,g,v];if(A=o.audioTrackController,A){var E=new A(Tn(n));n.audioTrackController=E,_.push(E)}if(A=o.subtitleTrackController,A){var T=new A(Tn(n));n.subtitleTrackController=T,b.push(T)}if(A=o.emeController,A){var k=new A(Tn(n));n.emeController=k,_.push(k)}return A=o.subtitleStreamController,A&&b.push(new A(Tn(n),v)),A=o.timelineController,A&&_.push(new A(Tn(n))),n.coreComponents=_,n}wn(t,e),t.isSupported=function(){return ht()},Sn(t,null,[{key:"version",get:function(){return"0.13.2"}},{key:"Events",get:function(){return u["default"]}},{key:"ErrorTypes",get:function(){return s["ErrorTypes"]}},{key:"ErrorDetails",get:function(){return s["ErrorDetails"]}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:bn},set:function(e){t.defaultConfig=e}}]);var r=t.prototype;return r.destroy=function(){c["logger"].log("destroy"),this.trigger(u["default"].DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){c["logger"].log("attachMedia"),this.media=e,this.trigger(u["default"].MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){c["logger"].log("detachMedia"),this.trigger(u["default"].MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=o["buildAbsoluteURL"](window.location.href,e,{alwaysNormalize:!0}),c["logger"].log("loadSource:"+e),this.url=e,this.trigger(u["default"].MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&&(e=-1),c["logger"].log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},r.stopLoad=function(){c["logger"].log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},r.swapAudioCodec=function(){c["logger"].log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){c["logger"].log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},Sn(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c["logger"].log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c["logger"].log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c["logger"].log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c["logger"].log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c["logger"].log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c["logger"].log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++){var i=e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate;if(i>t)return n}return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping;return e=-1===r&&t&&t.length?t.length-1:r,e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),t}(ue);Rn.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":
/*!******************************************!*\
  !*** ./src/polyfills/number-isFinite.js ***!
  \******************************************/
/*! exports provided: isFiniteNumber */function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",(function(){return n}));var n=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,r){"use strict";function n(){return"undefined"===typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",(function(){return d})),r.d(t,"logger",(function(){return h}));var n=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(e,t){return t="["+e+"] > "+t,t}var l=Object(n["getSelfScope"])();function u(e){var t=l.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=s(e,n[0])),t.apply(l.console,n)}:i}function c(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}var d=function(e){if(l.console&&!0===e||"object"===typeof e){c(e,"debug","log","info","warn","error");try{o.log()}catch(t){o=a}}else o=a},h=o}})["default"]}))},"./node_modules/node-libs-browser/node_modules/process/browser.js":
/*!************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/process/browser.js ***!
  \************************************************************************/
/*! no static exports found */function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function l(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}})();var u,c=[],d=!1,h=-1;function f(){d&&u&&(d=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!d){var e=s(f);d=!0;var t=c.length;while(t){u=c,c=[];while(++h<t)u&&u[h].run();h=-1,t=c.length}u=null,d=!1,l(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||d||s(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/style-loader/lib/addStyles.js":
/*!****************************************************!*\
  !*** ./node_modules/style-loader/lib/addStyles.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,r){var n={},i=function(e){var t;return function(){return"undefined"===typeof t&&(t=e.apply(this,arguments)),t}},a=i((function(){return window&&document&&document.all&&!window.atob})),o=function(e){return document.querySelector(e)},s=function(e){var t={};return function(e){if("function"===typeof e)return e();if("undefined"===typeof t[e]){var r=o.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}t[e]=r}return t[e]}}(),l=null,u=0,c=[],d=r(/*! ./urls */"./node_modules/style-loader/lib/urls.js");function h(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=n[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(b(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(b(i.parts[o],t));n[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var r=[],n={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],l=a[2],u=a[3],c={css:s,media:l,sourceMap:u};n[o]?n[o].parts.push(c):r.push(n[o]={id:o,parts:[c]})}return r}function p(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!==typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),p(e,t),t}function v(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),p(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,i,a;if(t.transform&&e.css){if(a=t.transform(e.css),!a)return function(){};e.css=a}if(t.singleton){var o=u++;r=l||(l=m(t)),n=_.bind(null,r,o,!1),i=_.bind(null,r,o,!0)}else e.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa?(r=v(t),n=T.bind(null,r,t),i=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=m(t),n=E.bind(null,r),i=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!==typeof DEBUG&&DEBUG&&"object"!==typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"===typeof t.attrs?t.attrs:{},t.singleton||"boolean"===typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return h(r,t),function(e){for(var i=[],a=0;a<r.length;a++){var o=r[a],s=n[o.id];s.refs--,i.push(s)}if(e){var l=f(e,t);h(l,t)}for(a=0;a<i.length;a++){s=i[a];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete n[s.id]}}}};var A=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function _(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=A(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function E(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function T(e,t,r){var n=r.css,i=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(n=d(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},"./node_modules/style-loader/lib/urls.js":
/*!***********************************************!*\
  !*** ./node_modules/style-loader/lib/urls.js ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports=function(e){var t="undefined"!==typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!==typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/"),i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}));return i}},"./src/base/base_object.js":
/*!*********************************!*\
  !*** ./src/base/base_object.js ***!
  \*********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=p(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=p(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=p(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=p(u),d=r(/*! ./utils */"./src/base/utils.js"),h=r(/*! ./events */"./src/base/events.js"),f=p(h);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n._options=r,n.uniqueId=(0,d.uniqueId)("o"),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"options",get:function(){return this._options}}]),t}(f.default);t.default=g,e.exports=t["default"]},"./src/base/container_plugin.js":
/*!**************************************!*\
  !*** ./src/base/container_plugin.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=y(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=y(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=y(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=y(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=y(d),f=r(/*! ./base_object */"./src/base/base_object.js"),p=y(f),g=r(/*! ./utils */"./src/base/utils.js"),m=r(/*! ./error_mixin */"./src/base/error_mixin.js"),v=y(m);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(r){(0,o.default)(this,t);var n=(0,l.default)(this,e.call(this,r.options));return n.container=r,n.enabled=!0,n.bindEvents(),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"playerError",get:function(){return this.container.playerError}}]),t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},t.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},t.prototype.bindEvents=function(){},t.prototype.destroy=function(){this.stopListening()},t}(p.default);t.default=b,(0,i.default)(b.prototype,v.default),b.extend=function(e){return(0,g.extend)(b,e)},b.type="container",e.exports=t["default"]},"./src/base/core_plugin.js":
/*!*********************************!*\
  !*** ./src/base/core_plugin.js ***!
  \*********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=y(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=y(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=y(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=y(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=y(d),f=r(/*! ./utils */"./src/base/utils.js"),p=r(/*! ./base_object */"./src/base/base_object.js"),g=y(p),m=r(/*! ./error_mixin */"./src/base/error_mixin.js"),v=y(m);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(r){(0,o.default)(this,t);var n=(0,l.default)(this,e.call(this,r.options));return n.core=r,n.enabled=!0,n.bindEvents(),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"playerError",get:function(){return this.core.playerError}}]),t.prototype.bindEvents=function(){},t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},t.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},t.prototype.getExternalInterface=function(){return{}},t.prototype.destroy=function(){this.stopListening()},t}(g.default);t.default=b,(0,i.default)(b.prototype,v.default),b.extend=function(e){return(0,f.extend)(b,e)},b.type="core",e.exports=t["default"]},"./src/base/error_mixin.js":
/*!*********************************!*\
  !*** ./src/base/error_mixin.js ***!
  \*********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=u(n),a=r(/*! ../plugins/log */"./src/plugins/log/index.js"),o=u(a),s=r(/*! ../components/error */"./src/components/error/index.js"),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var c={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},r=this.constructor&&this.constructor.type||"",n=this.name||r,a=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,s=n+":"+(e&&e.code||"unknown"),u={description:"",level:l.default.Levels.FATAL,origin:n,scope:r,raw:{}},c=(0,i.default)({},u,e,{code:t.useCodePrefix?s:e.code});if(a&&c.level==l.default.Levels.FATAL&&!c.UI){var d={title:a.t("default_error_title"),message:a.t("default_error_message")};c.UI=d}return this.playerError?this.playerError.createError(c):o.default.warn(n,"PlayerError is not defined. Error: ",c),c}};t.default=c,e.exports=t["default"]},"./src/base/events.js":
/*!****************************!*\
  !*** ./src/base/events.js ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/keys */"./node_modules/babel-runtime/core-js/object/keys.js"),i=h(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=h(a),s=r(/*! babel-runtime/helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"),l=h(s),u=r(/*! ../plugins/log */"./src/plugins/log/index.js"),c=h(u),d=r(/*! ./utils */"./src/base/utils.js");function h(e){return e&&e.__esModule?e:{default:e}}var f=Array.prototype.slice,p=/\s+/,g=function(e,t,r,n){if(!r)return!0;if("object"===("undefined"===typeof r?"undefined":(0,l.default)(r))){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(p.test(r)){for(var a=r.split(p),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(n));return!1}return!0},m=function(e,t,r,n){var i=void 0,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];function d(){try{switch(t.length){case 0:while(++a<o)(i=e[a]).callback.call(i.ctx);return;case 1:while(++a<o)(i=e[a]).callback.call(i.ctx,s);return;case 2:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l);return;case 3:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l,u);return;default:while(++a<o)(i=e[a]).callback.apply(i.ctx,t);return}}catch(h){c.default.error.apply(c.default,[r,"error on event",n,"trigger","-",h]),d()}}d()},v=function(){function e(){(0,o.default)(this,e)}return e.prototype.on=function(e,t,r){if(!g(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this},e.prototype.once=function(e,t,r){var n=this,i=void 0;if(!g(this,"once",e,[t,r])||!t)return this;var a=function(){return n.off(e,i)};return i=function(){a(e,i),t.apply(this,arguments)},this.on(e,i,r)},e.prototype.off=function(e,t,r){var n=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(!this._events||!g(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(s=e?[e]:(0,i.default)(this._events),l=0,u=s.length;l<u;l++)if(e=s[l],o=this._events[e],o){if(this._events[e]=n=[],t||r)for(c=0,d=o.length;c<d;c++)a=o[c],(t&&t!==a.callback&&t!==a.callback._callback||r&&r!==a.context)&&n.push(a);n.length||delete this._events[e]}return this},e.prototype.trigger=function(e){var t=this.name||this.constructor.name;if(c.default.debug.apply(c.default,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var r=f.call(arguments,1);if(!g(this,"trigger",e,r))return this;var n=this._events[e],i=this._events.all;return n&&m(n,r,t,e),i&&m(i,arguments,t,e),this},e.prototype.stopListening=function(e,t,r){var n=this._listeningTo;if(!n)return this;var a=!t&&!r;for(var o in r||"object"!==("undefined"===typeof t?"undefined":(0,l.default)(t))||(r=this),e&&((n={})[e._listenId]=e),n)e=n[o],e.off(t,r,this),(a||0===(0,i.default)(e._events).length)&&delete this._listeningTo[o];return this},e.register=function(t){e.Custom||(e.Custom={});var r="string"===typeof t&&t.toUpperCase().trim();r&&!e.Custom[r]?e.Custom[r]=r.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):c.default.error("Events","Error when register event: "+t)},e.listAvailableCustomEvents=function(){return e.Custom||(e.Custom={}),(0,i.default)(e.Custom).filter((function(t){return"string"===typeof e.Custom[t]}))},e}();t.default=v;var y={listenTo:"on",listenToOnce:"once"};(0,i.default)(y).forEach((function(e){v.prototype[e]=function(t,r,n){var i=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=(0,d.uniqueId)("l"));return i[a]=t,n||"object"!==("undefined"===typeof r?"undefined":(0,l.default)(r))||(n=this),t[y[e]](r,n,this),this}})),v.PLAYER_READY="ready",v.PLAYER_RESIZE="resize",v.PLAYER_FULLSCREEN="fullscreen",v.PLAYER_PLAY="play",v.PLAYER_PAUSE="pause",v.PLAYER_STOP="stop",v.PLAYER_ENDED="ended",v.PLAYER_SEEK="seek",v.PLAYER_ERROR="playererror",v.ERROR="error",v.PLAYER_TIMEUPDATE="timeupdate",v.PLAYER_VOLUMEUPDATE="volumeupdate",v.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",v.PLAYBACK_PROGRESS="playback:progress",v.PLAYBACK_TIMEUPDATE="playback:timeupdate",v.PLAYBACK_READY="playback:ready",v.PLAYBACK_BUFFERING="playback:buffering",v.PLAYBACK_BUFFERFULL="playback:bufferfull",v.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",v.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",v.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",v.PLAYBACK_BITRATE="playback:bitrate",v.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",v.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",v.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",v.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",v.PLAYBACK_DVR="playback:dvr",v.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",v.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",v.PLAYBACK_ENDED="playback:ended",v.PLAYBACK_PLAY_INTENT="playback:play:intent",v.PLAYBACK_PLAY="playback:play",v.PLAYBACK_PAUSE="playback:pause",v.PLAYBACK_SEEK="playback:seek",v.PLAYBACK_SEEKED="playback:seeked",v.PLAYBACK_STOP="playback:stop",v.PLAYBACK_ERROR="playback:error",v.PLAYBACK_STATS_ADD="playback:stats:add",v.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",v.PLAYBACK_LEVEL_SWITCH="playback:level:switch",v.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",v.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",v.CORE_CONTAINERS_CREATED="core:containers:created",v.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",v.CORE_OPTIONS_CHANGE="core:options:change",v.CORE_READY="core:ready",v.CORE_FULLSCREEN="core:fullscreen",v.CORE_RESIZE="core:resize",v.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",v.CORE_MOUSE_MOVE="core:mousemove",v.CORE_MOUSE_LEAVE="core:mouseleave",v.CONTAINER_PLAYBACKSTATE="container:playbackstate",v.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",v.CONTAINER_BITRATE="container:bitrate",v.CONTAINER_STATS_REPORT="container:stats:report",v.CONTAINER_DESTROYED="container:destroyed",v.CONTAINER_READY="container:ready",v.CONTAINER_ERROR="container:error",v.CONTAINER_LOADEDMETADATA="container:loadedmetadata",v.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",v.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",v.CONTAINER_TIMEUPDATE="container:timeupdate",v.CONTAINER_PROGRESS="container:progress",v.CONTAINER_PLAY="container:play",v.CONTAINER_STOP="container:stop",v.CONTAINER_PAUSE="container:pause",v.CONTAINER_ENDED="container:ended",v.CONTAINER_CLICK="container:click",v.CONTAINER_DBLCLICK="container:dblclick",v.CONTAINER_CONTEXTMENU="container:contextmenu",v.CONTAINER_MOUSE_ENTER="container:mouseenter",v.CONTAINER_MOUSE_LEAVE="container:mouseleave",v.CONTAINER_SEEK="container:seek",v.CONTAINER_SEEKED="container:seeked",v.CONTAINER_VOLUME="container:volume",v.CONTAINER_FULLSCREEN="container:fullscreen",v.CONTAINER_STATE_BUFFERING="container:state:buffering",v.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",v.CONTAINER_SETTINGSUPDATE="container:settingsupdate",v.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",v.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",v.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",v.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",v.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",v.CONTAINER_STATS_ADD="container:stats:add",v.CONTAINER_OPTIONS_CHANGE="container:options:change",v.MEDIACONTROL_RENDERED="mediacontrol:rendered",v.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",v.MEDIACONTROL_SHOW="mediacontrol:show",v.MEDIACONTROL_HIDE="mediacontrol:hide",v.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",v.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",v.MEDIACONTROL_PLAYING="mediacontrol:playing",v.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",v.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",v.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",e.exports=t["default"]},"./src/base/media.js":
/*!***************************!*\
  !*** ./src/base/media.js ***!
  \***************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.mp4="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";t.default={mp4:n}},"./src/base/playback.js":
/*!******************************!*\
  !*** ./src/base/playback.js ***!
  \******************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=A(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=A(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=A(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=A(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=A(d),f=r(/*! ./utils */"./src/base/utils.js"),p=r(/*! ./ui_object */"./src/base/ui_object.js"),g=A(p),m=r(/*! ./error_mixin */"./src/base/error_mixin.js"),v=A(m),y=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),b=A(y);function A(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(r,n,i){(0,o.default)(this,t);var a=(0,l.default)(this,e.call(this,r));return a.settings={},a._i18n=n,a.playerError=i,a._consented=!1,a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consented",get:function(){return this._consented}}]),t.prototype.consent=function(){this._consented=!0},t.prototype.play=function(){},t.prototype.pause=function(){},t.prototype.stop=function(){},t.prototype.seek=function(e){},t.prototype.seekPercentage=function(e){},t.prototype.getStartTimeOffset=function(){return 0},t.prototype.getDuration=function(){return 0},t.prototype.isPlaying=function(){return!1},t.prototype.getPlaybackType=function(){return t.NO_OP},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype.volume=function(e){},t.prototype.configure=function(e){this._options=b.default.extend(this._options,e)},t.prototype.attemptAutoPlay=function(){var e=this;this.canAutoPlay((function(t,r){t&&e.play()}))},t.prototype.canAutoPlay=function(e){e(!0,null)},(0,c.default)(t,[{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}}]),t}(g.default);t.default=_,(0,i.default)(_.prototype,v.default),_.extend=function(e){return(0,f.extend)(_,e)},_.canPlay=function(e,t){return!1},_.VOD="vod",_.AOD="aod",_.LIVE="live",_.NO_OP="no_op",_.type="playback",e.exports=t["default"]},"./src/base/polyfills.js":
/*!*******************************!*\
  !*** ./src/base/polyfills.js ***!
  \*******************************/
/*! no static exports found */function(e,t,r){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var n=arguments[1],i=0;while(i<r){var a=t[i];if(e.call(n,a,i,t))return a;i++}}})},"./src/base/styler.js":
/*!****************************!*\
  !*** ./src/base/styler.js ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),i=s(n),a=r(/*! ./template */"./src/base/template.js"),o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}var l={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return(0,i.default)('<style class="clappr-style"></style>').html((0,o.default)(e.toString())(t))}};t.default=l,e.exports=t["default"]},"./src/base/svg_icons.js":
/*!*******************************!*\
  !*** ./src/base/svg_icons.js ***!
  \*******************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.volumeMute=t.volume=t.stop=t.reload=t.play=t.pause=t.hd=t.fullscreen=t.exitFullscreen=t.cc=void 0;var n=r(/*! ../icons/01-play.svg */"./src/icons/01-play.svg"),i=T(n),a=r(/*! ../icons/02-pause.svg */"./src/icons/02-pause.svg"),o=T(a),s=r(/*! ../icons/03-stop.svg */"./src/icons/03-stop.svg"),l=T(s),u=r(/*! ../icons/04-volume.svg */"./src/icons/04-volume.svg"),c=T(u),d=r(/*! ../icons/05-mute.svg */"./src/icons/05-mute.svg"),h=T(d),f=r(/*! ../icons/06-expand.svg */"./src/icons/06-expand.svg"),p=T(f),g=r(/*! ../icons/07-shrink.svg */"./src/icons/07-shrink.svg"),m=T(g),v=r(/*! ../icons/08-hd.svg */"./src/icons/08-hd.svg"),y=T(v),b=r(/*! ../icons/09-cc.svg */"./src/icons/09-cc.svg"),A=T(b),_=r(/*! ../icons/10-reload.svg */"./src/icons/10-reload.svg"),E=T(_);function T(e){return e&&e.__esModule?e:{default:e}}t.cc=A.default,t.exitFullscreen=m.default,t.fullscreen=p.default,t.hd=y.default,t.pause=o.default,t.play=i.default,t.reload=E.default,t.stop=l.default,t.volume=c.default,t.volumeMute=h.default;t.default={cc:A.default,exitFullscreen:m.default,fullscreen:p.default,hd:y.default,pause:o.default,play:i.default,reload:E.default,stop:l.default,volume:c.default,volumeMute:h.default}},"./src/base/template.js":
/*!******************************!*\
  !*** ./src/base/template.js ***!
  \******************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},i=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},o=/\\|'|\r|\n|\t|\u2028|\u2029/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},l=new RegExp("[&<>\"']","g"),u=function(e){return null===e?"":(""+e).replace(l,(function(e){return s[e]}))},c=0,d=function(e,t){var r,s=new RegExp([(n.escape||i).source,(n.interpolate||i).source,(n.evaluate||i).source].join("|")+"|$","g"),l=0,d="__p+='";e.replace(s,(function(t,r,n,i,s){return d+=e.slice(l,s).replace(o,(function(e){return"\\"+a[e]})),r&&(d+="'+\n((__t=("+r+"))==null?'':escapeExpr(__t))+\n'"),n&&(d+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(d+="';\n"+i+"\n__p+='"),l=s+t.length,t})),d+="';\n",n.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n//# sourceURL=/microtemplates/source["+c+++"]";try{r=new Function(n.variable||"obj","escapeExpr",d)}catch(f){throw f.source=d,f}if(t)return r(t,u);var h=function(e){return r.call(this,e,u)};return h.source="function("+(n.variable||"obj")+"){\n"+d+"}",h};d.settings=n,t.default=d,e.exports=t["default"]},"./src/base/ui_container_plugin.js":
/*!*****************************************!*\
  !*** ./src/base/ui_container_plugin.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=y(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=y(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=y(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=y(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=y(d),f=r(/*! ./utils */"./src/base/utils.js"),p=r(/*! ./ui_object */"./src/base/ui_object.js"),g=y(p),m=r(/*! ./error_mixin */"./src/base/error_mixin.js"),v=y(m);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(r){(0,o.default)(this,t);var n=(0,l.default)(this,e.call(this,r.options));return n.container=r,n.enabled=!0,n.bindEvents(),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"playerError",get:function(){return this.container.playerError}}]),t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},t.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},t.prototype.bindEvents=function(){},t}(g.default);t.default=b,(0,i.default)(b.prototype,v.default),b.extend=function(e){return(0,f.extend)(b,e)},b.type="container",e.exports=t["default"]},"./src/base/ui_core_plugin.js":
/*!************************************!*\
  !*** ./src/base/ui_core_plugin.js ***!
  \************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=y(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=y(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=y(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=y(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=y(d),f=r(/*! ./utils */"./src/base/utils.js"),p=r(/*! ./ui_object */"./src/base/ui_object.js"),g=y(p),m=r(/*! ./error_mixin */"./src/base/error_mixin.js"),v=y(m);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(r){(0,o.default)(this,t);var n=(0,l.default)(this,e.call(this,r.options));return n.core=r,n.enabled=!0,n.bindEvents(),n.render(),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"playerError",get:function(){return this.core.playerError}}]),t.prototype.bindEvents=function(){},t.prototype.getExternalInterface=function(){return{}},t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},t.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},t.prototype.render=function(){return this},t}(g.default);t.default=b,(0,i.default)(b.prototype,v.default),b.extend=function(e){return(0,f.extend)(b,e)},b.type="core",e.exports=t["default"]},"./src/base/ui_object.js":
/*!*******************************!*\
  !*** ./src/base/ui_object.js ***!
  \*******************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=m(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=m(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=m(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=m(u),d=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),h=m(d),f=r(/*! ./utils */"./src/base/utils.js"),p=r(/*! ./base_object */"./src/base/base_object.js"),g=m(p);function m(e){return e&&e.__esModule?e:{default:e}}var v=/^(\S+)\s*(.*)$/,y=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.cid=(0,f.uniqueId)("c"),n._ensureElement(),n.delegateEvents(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),t.prototype.$=function(e){return this.$el.find(e)},t.prototype.render=function(){return this},t.prototype.destroy=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},t.prototype.setElement=function(e,t){return this.$el&&this.undelegateEvents(),this.$el=h.default.zepto.isZ(e)?e:(0,h.default)(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},t.prototype.delegateEvents=function(e){if(!e&&!(e=this.events))return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(r&&r.constructor!==Function&&(r=this[e[t]]),r){var n=t.match(v),i=n[1],a=n[2];i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,r.bind(this)):this.$el.on(i,a,r.bind(this))}}return this},t.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},t.prototype._ensureElement=function(){if(this.el)this.setElement(this.el,!1);else{var e=h.default.extend({},this.attributes);this.id&&(e.id=this.id),this.className&&(e["class"]=this.className);var t=f.DomRecycler.create(this.tagName).attr(e);this.setElement(t,!1)}},t}(g.default);t.default=y,e.exports=t["default"]},"./src/base/utils.js":
/*!***************************!*\
  !*** ./src/base/utils.js ***!
  \***************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SvgIcons=t.DoubleEventHandler=t.DomRecycler=t.cancelAnimationFrame=t.requestAnimationFrame=t.QueryString=t.Config=t.Fullscreen=void 0;var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=S(n),a=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),o=S(a),s=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),l=S(s),u=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=S(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=S(d),f=r(/*! babel-runtime/core-js/object/define-property */"./node_modules/babel-runtime/core-js/object/define-property.js"),p=S(f),g=r(/*! babel-runtime/core-js/object/get-own-property-descriptor */"./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js"),m=S(g);t.assign=w,t.extend=R,t.formatTime=C,t.seekStringToSeconds=D,t.uniqueId=x,t.isNumber=N,t.currentScriptUrl=M,t.getBrowserLanguage=U,t.now=B,t.removeArrayItem=G,t.listContainsIgnoreCase=K,t.canAutoPlayMedia=V,r(/*! ./polyfills */"./src/base/polyfills.js");var v=r(/*! ../components/browser */"./src/components/browser/index.js"),y=S(v),b=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),A=S(b),_=r(/*! ./media */"./src/base/media.js"),E=S(_),T=r(/*! ./svg_icons */"./src/base/svg_icons.js"),k=S(T);function S(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(t)for(var r in t){var n=(0,m.default)(t,r);n?(0,p.default)(e,r,n):e[r]=t[r]}return e}function R(e,t){var r=function(e){function r(){(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=(0,c.default)(this,e.call.apply(e,[this].concat(i)));return t.initialize&&t.initialize.apply(o,i),o}return(0,h.default)(r,e),r}(e);return w(r.prototype,t),r}function C(e,t){if(!isFinite(e))return"--:--";e*=1e3,e=parseInt(e/1e3);var r=e%60;e=parseInt(e/60);var n=e%60;e=parseInt(e/60);var i=e%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",i<1&&(o+="00:")),(i&&i>0||t)&&(o+=("0"+i).slice(-2)+":"),o+=("0"+n).slice(-2)+":",o+=("0"+r).slice(-2),o.trim()}var L=t.Fullscreen={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},I=t.Config=function(){function e(){(0,l.default)(this,e)}return e._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},e._defaultValueFor=function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(t){return}},e._createKeyspace=function(e){return"clappr."+document.domain+"."+e},e.restore=function(e){return y.default.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)},e.persist=function(e,t){if(y.default.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(r){return!1}},e}(),O=t.QueryString=function(){function e(){(0,l.default)(this,e)}return e.parse=function(e){var t=void 0,r=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a={};while(t=n.exec(e))a[i(t[1]).toLowerCase()]=i(t[2]);return a},(0,o.default)(e,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}}]),e}();function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,r=O.params[e]||O.hashParams[e]||"",n=r.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(e){if(e){var r=e[e.length-1],n=parseInt(e.slice(0,e.length-1),10);t+=n*i[r]}}))}else r&&(t=parseInt(r,10));return t}var P={};function x(e){P[e]||(P[e]=0);var t=++P[e];return e+t}function N(e){return e-parseFloat(e)+1>=0}function M(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}var F=t.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),j=t.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function U(){return window.navigator&&window.navigator.language}function B(){return window.performance&&window.performance.now?performance.now():Date.now()}function G(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function K(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))}function V(e,t){t=(0,i.default)({inline:!1,muted:!1,timeout:250,type:"video",source:E.default.mp4,element:null},t);var r=t.element?t.element:document.createElement(t.type);r.muted=t.muted,!0===t.muted&&r.setAttribute("muted","muted"),!0===t.inline&&r.setAttribute("playsinline","playsinline"),r.src=t.source;var n=r.play(),a=setTimeout((function(){o(!1,new Error("Timeout "+t.timeout+" ms has been reached"))}),t.timeout),o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(a),e(t,r)};void 0!==n?n.then((function(){return o(!0)})).catch((function(e){return o(!1,e)})):o(!0)}var Y=[],H=t.DomRecycler=function(){function e(){(0,l.default)(this,e)}return e.configure=function(e){this.options=A.default.extend(this.options,e)},e.create=function(e){return this.options.recycleVideo&&"video"===e&&Y.length>0?Y.shift():(0,A.default)("<"+e+">")},e.garbage=function(e){this.options.recycleVideo&&"VIDEO"===e[0].tagName.toUpperCase()&&(e.children().remove(),Y.push(e))},e}();H.options={recycleVideo:!1};var W=t.DoubleEventHandler=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;(0,l.default)(this,e),this.delay=t,this.lastTime=0}return e.prototype.handle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(new Date).getTime(),i=n-this.lastTime;i<this.delay&&i>0&&(t(),r&&e.preventDefault()),this.lastTime=n},e}();t.SvgIcons=k.default;t.default={Config:I,Fullscreen:L,QueryString:O,DomRecycler:H,extend:R,formatTime:C,seekStringToSeconds:D,uniqueId:x,currentScriptUrl:M,isNumber:N,requestAnimationFrame:F,cancelAnimationFrame:j,getBrowserLanguage:U,now:B,removeArrayItem:G,canAutoPlayMedia:V,Media:E.default,DoubleEventHandler:W,SvgIcons:k.default}},"./src/components/browser/browser.js":
/*!*******************************************!*\
  !*** ./src/components/browser/browser.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDevice=t.getViewportSize=t.getOsData=t.getBrowserData=t.getBrowserInfo=void 0;var n=r(/*! babel-runtime/core-js/get-iterator */"./node_modules/babel-runtime/core-js/get-iterator.js"),i=d(n),a=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),o=d(a),s=r(/*! ./browser_data */"./src/components/browser/browser_data.js"),l=d(s),u=r(/*! ./os_data */"./src/components/browser/os_data.js"),c=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var h={},f=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}},p=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!e}catch(t){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},g=t.getBrowserInfo=function(e){var t=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],r=void 0;if(/trident/i.test(t[1]))return r=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(r[1]||"")};if("Chrome"===t[1]){if(r=e.match(/\bOPR\/(\d+)/),null!=r)return{name:"Opera",version:parseInt(r[1])};if(r=e.match(/\bEdge\/(\d+)/),null!=r)return{name:"Edge",version:parseInt(r[1])}}else/android/i.test(e)&&(r=e.match(/version\/(\d+)/i))&&(t.splice(1,1,"Android WebView"),t.splice(2,1,r[1]));return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:t[0],version:parseInt(t[1])}},m=t.getBrowserData=function(){var e={},t=h.userAgent.toLowerCase(),r=!0,n=!1,a=void 0;try{for(var o,s=(0,i.default)(l.default);!(r=(o=s.next()).done);r=!0){var u=o.value,c=new RegExp(u.identifier.toLowerCase()),d=c.exec(t);if(null!=d&&d[1]){if(e.name=u.name,e.group=u.group,u.versionIdentifier){var f=new RegExp(u.versionIdentifier.toLowerCase()),p=f.exec(t);null!=p&&p[1]&&v(p[1],e)}else v(d[1],e);break}}}catch(g){n=!0,a=g}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return e},v=function(e,t){var r=e.split(".",2);t.fullVersion=e,r[0]&&(t.majorVersion=parseInt(r[0])),r[1]&&(t.minorVersion=parseInt(r[1]))},y=t.getOsData=function(){var e={},t=h.userAgent.toLowerCase(),r=!0,n=!1,a=void 0;try{for(var o,s=(0,i.default)(c.default);!(r=(o=s.next()).done);r=!0){var l=o.value,u=new RegExp(l.identifier.toLowerCase()),d=u.exec(t);if(null!=d){if(e.name=l.name,e.group=l.group,l.version)b(l.version,l.versionSeparator?l.versionSeparator:".",e);else if(d[1])b(d[1],l.versionSeparator?l.versionSeparator:".",e);else if(l.versionIdentifier){var f=new RegExp(l.versionIdentifier.toLowerCase()),p=f.exec(t);null!=p&&p[1]&&b(p[1],l.versionSeparator?l.versionSeparator:".",e)}break}}}catch(g){n=!0,a=g}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return e},b=function(e,t,r){var n="["==t.substr(0,1)?new RegExp(t,"g"):t,i=e.split(n,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),r.fullVersion=e,i&&i[0]&&(r.majorVersion=parseInt(i[0])),i&&i[1]&&(r.minorVersion=parseInt(i[1]))},A=t.getViewportSize=function(){var e={};return e.width=(0,o.default)(window).width(),e.height=(0,o.default)(window).height(),e},_=function(){switch(window.orientation){case-90:case 90:h.viewport.orientation="landscape";break;default:h.viewport.orientation="portrait";break}},E=t.getDevice=function(e){var t=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,r=t.exec(e),n=r&&(r[1]||r[2])||"";return n},T=g(navigator.userAgent);h.isEdge=/edge/i.test(navigator.userAgent),h.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!h.isEdge,h.isSafari=/safari/i.test(navigator.userAgent)&&!h.isChrome&&!h.isEdge,h.isFirefox=/firefox/i.test(navigator.userAgent),h.isLegacyIE=!!window.ActiveXObject,h.isIE=h.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),h.isIE11=/trident.*rv:11/i.test(navigator.userAgent),h.isChromecast=h.isChrome&&/CrKey/i.test(navigator.userAgent),h.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),h.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),h.isAndroid=/Android/i.test(navigator.userAgent),h.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),h.isWin8App=/MSAppHost/i.test(navigator.userAgent),h.isWiiU=/WiiU/i.test(navigator.userAgent),h.isPS4=/PlayStation 4/i.test(navigator.userAgent),h.hasLocalstorage=f(),h.hasFlash=p(),h.name=T.name,h.version=T.version,h.userAgent=navigator.userAgent,h.data=m(),h.os=y(),h.viewport=A(),h.device=E(h.userAgent),"undefined"!==typeof window.orientation&&_(),t.default=h},"./src/components/browser/browser_data.js":
/*!************************************************!*\
  !*** ./src/components/browser/browser_data.js ***!
  \************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}];t.default=n,e.exports=t["default"]},"./src/components/browser/index.js":
/*!*****************************************!*\
  !*** ./src/components/browser/index.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./browser */"./src/components/browser/browser.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/browser/os_data.js":
/*!*******************************************!*\
  !*** ./src/components/browser/os_data.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}];t.default=n,e.exports=t["default"]},"./src/components/container/container.js":
/*!***********************************************!*\
  !*** ./src/components/container/container.js ***!
  \***********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=E(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=E(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=E(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=E(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=E(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=E(f),g=r(/*! ../../base/ui_object */"./src/base/ui_object.js"),m=E(g),v=r(/*! ../../base/error_mixin */"./src/base/error_mixin.js"),y=E(v),b=r(/*! ../../base/utils */"./src/base/utils.js");r(/*! ./public/style.scss */"./src/components/container/public/style.scss");var A=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),_=E(A);function E(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(r,n,i){(0,o.default)(this,t);var a=(0,l.default)(this,e.call(this,r));return a._i18n=n,a.currentTime=0,a.volume=100,a.playback=r.playback,a.playerError=i,a.settings=_.default.extend({},a.playback.settings),a.isReady=!1,a.mediaControlDisabled=!1,a.plugins=[a.playback],a.dblTapHandler=new b.DoubleEventHandler(500),a.clickTimer=null,a.clickDelay=200,a.bindEvents(),a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}}]),t.prototype.bindEvents=function(){this.listenTo(this.playback,p.default.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,p.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,p.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,p.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,p.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,p.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,p.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,p.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,p.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,p.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,p.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,p.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,p.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,p.default.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,p.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,p.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,p.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,p.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,p.default.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,p.default.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,p.default.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)},t.prototype.subtitleAvailable=function(){this.trigger(p.default.CONTAINER_SUBTITLE_AVAILABLE)},t.prototype.subtitleChanged=function(e){this.trigger(p.default.CONTAINER_SUBTITLE_CHANGED,e)},t.prototype.playbackStateChanged=function(e){this.trigger(p.default.CONTAINER_PLAYBACKSTATE,e)},t.prototype.playbackDvrStateChanged=function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(p.default.CONTAINER_PLAYBACKDVRSTATECHANGED,e)},t.prototype.updateBitrate=function(e){this.trigger(p.default.CONTAINER_BITRATE,e)},t.prototype.statsReport=function(e){this.trigger(p.default.CONTAINER_STATS_REPORT,e)},t.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},t.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},t.prototype.isDvrInUse=function(){return!!this.dvrInUse},t.prototype.destroy=function(){this.trigger(p.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()},t.prototype.setStyle=function(e){this.$el.css(e)},t.prototype.animate=function(e,t){return this.$el.animate(e,t).promise()},t.prototype.ready=function(){this.isReady=!0,this.trigger(p.default.CONTAINER_READY,this.name)},t.prototype.isPlaying=function(){return this.playback.isPlaying()},t.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},t.prototype.getCurrentTime=function(){return this.currentTime},t.prototype.getDuration=function(){return this.playback.getDuration()},t.prototype.error=function(e){this.isReady||this.ready(),this.trigger(p.default.CONTAINER_ERROR,e,this.name)},t.prototype.loadedMetadata=function(e){this.trigger(p.default.CONTAINER_LOADEDMETADATA,e)},t.prototype.timeUpdated=function(e){this.currentTime=e.current,this.trigger(p.default.CONTAINER_TIMEUPDATE,e,this.name)},t.prototype.onProgress=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.trigger.apply(this,[p.default.CONTAINER_PROGRESS].concat(t,[this.name]))},t.prototype.playing=function(){this.trigger(p.default.CONTAINER_PLAY,this.name)},t.prototype.paused=function(){this.trigger(p.default.CONTAINER_PAUSE,this.name)},t.prototype.play=function(){this.playback.play()},t.prototype.stop=function(){this.playback.stop(),this.currentTime=0},t.prototype.pause=function(){this.playback.pause()},t.prototype.onEnded=function(){this.trigger(p.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},t.prototype.stopped=function(){this.trigger(p.default.CONTAINER_STOP)},t.prototype.clicked=function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(p.default.CONTAINER_CLICK,e,e.name)}),this.clickDelay))},t.prototype.cancelClicked=function(){clearTimeout(this.clickTimer),this.clickTimer=null},t.prototype.dblClicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(p.default.CONTAINER_DBLCLICK,this,this.name))},t.prototype.dblTap=function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(p.default.CONTAINER_DBLCLICK,t,t.name)}))},t.prototype.onContextMenu=function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(p.default.CONTAINER_CONTEXTMENU,e,this.name)},t.prototype.seek=function(e){this.trigger(p.default.CONTAINER_SEEK,e,this.name),this.playback.seek(e)},t.prototype.onSeeked=function(){this.trigger(p.default.CONTAINER_SEEKED,this.name)},t.prototype.seekPercentage=function(e){var t=this.getDuration();if(e>=0&&e<=100){var r=t*(e/100);this.seek(r)}},t.prototype.setVolume=function(e){this.volume=parseFloat(e),this.trigger(p.default.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)},t.prototype.fullscreen=function(){this.trigger(p.default.CONTAINER_FULLSCREEN,this.name)},t.prototype.onBuffering=function(){this.trigger(p.default.CONTAINER_STATE_BUFFERING,this.name)},t.prototype.bufferfull=function(){this.trigger(p.default.CONTAINER_STATE_BUFFERFULL,this.name)},t.prototype.addPlugin=function(e){this.plugins.push(e)},t.prototype.hasPlugin=function(e){return!!this.getPlugin(e)},t.prototype.getPlugin=function(e){return this.plugins.filter((function(t){return t.name===e}))[0]},t.prototype.mouseEnter=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(p.default.CONTAINER_MOUSE_ENTER)},t.prototype.mouseLeave=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(p.default.CONTAINER_MOUSE_LEAVE)},t.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(p.default.CONTAINER_SETTINGSUPDATE)},t.prototype.highDefinitionUpdate=function(e){this.trigger(p.default.CONTAINER_HIGHDEFINITIONUPDATE,e)},t.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},t.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(p.default.CONTAINER_MEDIACONTROL_DISABLE))},t.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(p.default.CONTAINER_MEDIACONTROL_ENABLE))},t.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},t.prototype.configure=function(e){this._options=_.default.extend(this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(p.default.CONTAINER_OPTIONS_CHANGE)},t.prototype.render=function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this},t}(m.default);t.default=T,(0,i.default)(T.prototype,y.default),e.exports=t["default"]},"./src/components/container/index.js":
/*!*******************************************!*\
  !*** ./src/components/container/index.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./container */"./src/components/container/container.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/container/public/style.scss":
/*!****************************************************!*\
  !*** ./src/components/container/public/style.scss ***!
  \****************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./style.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/container/public/style.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/components/container_factory/container_factory.js":
/*!***************************************************************!*\
  !*** ./src/components/container_factory/container_factory.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"),i=_(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=_(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=_(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=_(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=_(d),f=r(/*! ../../base/base_object */"./src/base/base_object.js"),p=_(f),g=r(/*! ../../base/events */"./src/base/events.js"),m=_(g),v=r(/*! ../../components/container */"./src/components/container/index.js"),y=_(v),b=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),A=_(b);function _(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(r,n,i,a){(0,o.default)(this,t);var s=(0,l.default)(this,e.call(this,r));return s._i18n=i,s.loader=n,s.playerError=a,s}return(0,h.default)(t,e),(0,c.default)(t,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),t.prototype.createContainers=function(){var e=this;return A.default.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))},t.prototype.findPlaybackPlugin=function(e,t){return this.loader.playbackPlugins.filter((function(r){return r.canPlay(e,t)}))[0]},t.prototype.createContainer=function(e){var t=null,r=this.options.mimeType;"object"===("undefined"===typeof e?"undefined":(0,i.default)(e))?(t=e.source.toString(),e.mimeType&&(r=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var n=A.default.extend({},this.options,{src:t,mimeType:r}),a=this.findPlaybackPlugin(t,r),o=new a(n,this._i18n,this.playerError);n=A.default.extend({},n,{playback:o});var s=new y.default(n,this._i18n,this.playerError),l=A.default.Deferred();return l.promise(s),this.addContainerPlugins(s),this.listenToOnce(s,m.default.CONTAINER_READY,(function(){return l.resolve(s)})),s},t.prototype.addContainerPlugins=function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))},t}(p.default);t.default=E,e.exports=t["default"]},"./src/components/container_factory/index.js":
/*!***************************************************!*\
  !*** ./src/components/container_factory/index.js ***!
  \***************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./container_factory */"./src/components/container_factory/container_factory.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/core/core.js":
/*!*************************************!*\
  !*** ./src/components/core/core.js ***!
  \*************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=j(n),a=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),o=j(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=j(s),u=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),c=j(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=j(d),f=r(/*! ../../base/utils */"./src/base/utils.js"),p=r(/*! ../../base/styler */"./src/base/styler.js"),g=j(p),m=r(/*! ../../base/events */"./src/base/events.js"),v=j(m),y=r(/*! ../../base/ui_object */"./src/base/ui_object.js"),b=j(y),A=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),_=j(A),E=r(/*! ../../components/browser */"./src/components/browser/index.js"),T=j(E),k=r(/*! ../../components/container_factory */"./src/components/container_factory/index.js"),S=j(k),w=r(/*! ../../components/mediator */"./src/components/mediator.js"),R=j(w),C=r(/*! ../../components/player_info */"./src/components/player_info.js"),L=j(C),I=r(/*! ../../components/error */"./src/components/error/index.js"),O=j(I),D=r(/*! ../../base/error_mixin */"./src/base/error_mixin.js"),P=j(D),x=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),N=j(x);r(/*! ./public/style.scss */"./src/components/core/public/style.scss");var M=r(/*! ./public/fonts.css */"./src/components/core/public/fonts.css"),F=j(M);function j(e){return e&&e.__esModule?e:{default:e}}var U=void 0,B=function(e){function t(r){(0,o.default)(this,t);var n=(0,l.default)(this,e.call(this,r));return n.playerError=new O.default(r,n),n.configureDomRecycler(),n.playerInfo=L.default.getInstance(r.playerId),n.firstResize=!0,n.plugins=[],n.containers=[],n._boundFullscreenHandler=function(){return n.handleFullscreenChange()},(0,N.default)(document).bind("fullscreenchange",n._boundFullscreenHandler),(0,N.default)(document).bind("MSFullscreenChange",n._boundFullscreenHandler),(0,N.default)(document).bind("mozfullscreenchange",n._boundFullscreenHandler),T.default.isMobile&&(0,N.default)(window).bind("resize",(function(e){n.handleWindowResize(e)})),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this.getPlugin("media_control")||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new _.default(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(v.default.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),t.prototype.configureDomRecycler=function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;f.DomRecycler.configure({recycleVideo:e})},t.prototype.createContainers=function(e){this.defer=N.default.Deferred(),this.defer.promise(this),this.containerFactory=new S.default(e,e.loader,this.i18n,this.playerError),this.prepareContainers()},t.prototype.prepareContainers=function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))},t.prototype.updateSize=function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()},t.prototype.setFullscreen=function(){T.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,N.default)(window).width(),height:(0,N.default)(window).height()})},t.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,N.default)(window).width(),height:(0,N.default)(window).height()},this.resize(this.playerInfo.currentSize)},t.prototype.resize=function(e){(0,f.isNumber)(e.height)||(0,f.isNumber)(e.width)?(this.el.style.height=e.height+"px",this.el.style.width=e.width+"px"):(this.el.style.height=""+e.height,this.el.style.width=""+e.width),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.playerInfo.currentSize=e,this.triggerResize(this.playerInfo.currentSize)},t.prototype.enableResizeObserver=function(){var e=this,t=function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})};this.resizeObserverInterval=setInterval(t,500)},t.prototype.triggerResize=function(e){var t=this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width;t&&(this.oldHeight=e.height,this.oldWidth=e.width,this.playerInfo.computedSize=e,this.firstResize=!1,R.default.trigger(this.options.playerId+":"+v.default.PLAYER_RESIZE,e),this.trigger(v.default.CORE_RESIZE,e))},t.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},t.prototype.resolveOnContainersReady=function(e){var t=this;N.default.when.apply(N.default,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(v.default.CORE_READY)}))},t.prototype.addPlugin=function(e){this.plugins.push(e)},t.prototype.hasPlugin=function(e){return!!this.getPlugin(e)},t.prototype.getPlugin=function(e){return this.plugins.filter((function(t){return t.name===e}))[0]},t.prototype.load=function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=N.default.extend(this.options,{sources:e}),this.prepareContainers()},t.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),(0,N.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,N.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,N.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()},t.prototype.handleFullscreenChange=function(){this.trigger(v.default.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()},t.prototype.handleWindowResize=function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(v.default.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))},t.prototype.removeContainer=function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))},t.prototype.setupContainer=function(e){this.listenTo(e,v.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)},t.prototype.setupContainers=function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(v.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers},t.prototype.renderContainers=function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))},t.prototype.createContainer=function(e,t){var r=this.containerFactory.createContainer(e,t);return this.setupContainer(r),this.el.appendChild(r.render().el),r},t.prototype.getCurrentContainer=function(){return this.activeContainer},t.prototype.getCurrentPlayback=function(){return this.activePlayback},t.prototype.getPlaybackType=function(){return this.activeContainer&&this.activeContainer.getPlaybackType()},t.prototype.isFullscreen=function(){var e=T.default.isiOS&&this.activeContainer&&this.activeContainer.el||this.el;return f.Fullscreen.fullscreenElement()===e},t.prototype.toggleFullscreen=function(){this.isFullscreen()?(f.Fullscreen.cancelFullscreen(),!T.default.isiOS&&this.$el.removeClass("fullscreen nocursor")):(f.Fullscreen.requestFullscreen(T.default.isiOS?this.activeContainer.el:this.el),!T.default.isiOS&&this.$el.addClass("fullscreen"))},t.prototype.onMouseMove=function(e){this.trigger(v.default.CORE_MOUSE_MOVE,e)},t.prototype.onMouseLeave=function(e){this.trigger(v.default.CORE_MOUSE_LEAVE,e)},t.prototype.configure=function(e){var t=this;this._options=N.default.extend(this._options,e),this.configureDomRecycler();var r=e.source||e.sources;r&&this.load(r,e.mimeType||this.options.mimeType),this.trigger(v.default.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))},t.prototype.appendToParent=function(){var e=this.$el.parent()&&this.$el.parent().length;!e&&this.$el.appendTo(this.options.parentElement)},t.prototype.render=function(){U||(U=g.default.getStyleFor(F.default,{baseUrl:this.options.baseUrl})),(0,N.default)("head").append(U),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=e,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},t}(b.default);t.default=B,(0,i.default)(B.prototype,P.default),e.exports=t["default"]},"./src/components/core/index.js":
/*!**************************************!*\
  !*** ./src/components/core/index.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./core */"./src/components/core/core.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/core/public/Roboto.ttf":
/*!***********************************************!*\
  !*** ./src/components/core/public/Roboto.ttf ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports="<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"},"./src/components/core/public/fonts.css":
/*!**********************************************!*\
  !*** ./src/components/core/public/fonts.css ***!
  \**********************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../../../../node_modules/css-loader/lib/url/escape.js */"./node_modules/css-loader/lib/url/escape.js");t=e.exports=r(/*! ../../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'@font-face {\n  font-family: "Roboto";\n  font-style: normal;\n  font-weight: 400;\n  src: local("Roboto"), local("Roboto-Regular"), url('+n(r(/*! ./Roboto.ttf */"./src/components/core/public/Roboto.ttf"))+') format("truetype");\n}\n',""])},"./src/components/core/public/style.scss":
/*!***********************************************!*\
  !*** ./src/components/core/public/style.scss ***!
  \***********************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./style.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/core/public/style.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/components/core_factory/core_factory.js":
/*!*****************************************************!*\
  !*** ./src/components/core_factory/core_factory.js ***!
  \*****************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=g(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=g(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=g(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=g(u),d=r(/*! ../../base/base_object */"./src/base/base_object.js"),h=g(d),f=r(/*! ../core */"./src/components/core/index.js"),p=g(f);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this));return n.player=r,n._options=r.options,n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"loader",get:function(){return this.player.loader}}]),t.prototype.create=function(){return this.options.loader=this.loader,this.core=new p.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},t.prototype.addCorePlugins=function(){var e=this;return this.loader.corePlugins.forEach((function(t){var r=new t(e.core);e.core.addPlugin(r),e.setupExternalInterface(r)})),this.core},t.prototype.setupExternalInterface=function(e){var t=e.getExternalInterface();for(var r in t)this.player[r]=t[r].bind(e),this.core[r]=t[r].bind(e)},t}(h.default);t.default=m,e.exports=t["default"]},"./src/components/core_factory/index.js":
/*!**********************************************!*\
  !*** ./src/components/core_factory/index.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./core_factory */"./src/components/core_factory/core_factory.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/error/error.js":
/*!***************************************!*\
  !*** ./src/components/error/error.js ***!
  \***************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=v(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=v(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=v(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=v(u),d=r(/*! ../../base/events */"./src/base/events.js"),h=v(d),f=r(/*! ../../base/base_object */"./src/base/base_object.js"),p=v(f),g=r(/*! ../../plugins/log */"./src/plugins/log/index.js"),m=v(g);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];(0,i.default)(this,t);var a=(0,o.default)(this,e.call(this,r));return a.core=n,a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),t.prototype.createError=function(e){this.core?this.core.trigger(h.default.ERROR,e):m.default.warn(this.name,"Core is not set. Error: ",e)},t}(p.default);t.default=y,e.exports=t["default"]},"./src/components/error/index.js":
/*!***************************************!*\
  !*** ./src/components/error/index.js ***!
  \***************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./error */"./src/components/error/error.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/loader/index.js":
/*!****************************************!*\
  !*** ./src/components/loader/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./loader */"./src/components/loader/loader.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/components/loader/loader.js":
/*!*****************************************!*\
  !*** ./src/components/loader/loader.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/create */"./node_modules/babel-runtime/core-js/object/create.js"),i=se(n),a=r(/*! babel-runtime/helpers/toConsumableArray */"./node_modules/babel-runtime/helpers/toConsumableArray.js"),o=se(a),s=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),l=se(s),u=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=se(u),d=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),h=se(d),f=r(/*! ../../base/base_object */"./src/base/base_object.js"),p=se(f),g=r(/*! ../player_info */"./src/components/player_info.js"),m=se(g),v=r(/*! ../../playbacks/html5_video */"./src/playbacks/html5_video/index.js"),y=se(v),b=r(/*! ../../playbacks/flash */"./src/playbacks/flash/index.js"),A=se(b),_=r(/*! ../../playbacks/html5_audio */"./src/playbacks/html5_audio/index.js"),E=se(_),T=r(/*! ../../playbacks/flashls */"./src/playbacks/flashls/index.js"),k=se(T),S=r(/*! ../../playbacks/hls */"./src/playbacks/hls/index.js"),w=se(S),R=r(/*! ../../playbacks/html_img */"./src/playbacks/html_img/index.js"),C=se(R),L=r(/*! ../../playbacks/no_op */"./src/playbacks/no_op/index.js"),I=se(L),O=r(/*! ../../plugins/spinner_three_bounce */"./src/plugins/spinner_three_bounce/index.js"),D=se(O),P=r(/*! ../../plugins/stats */"./src/plugins/stats/index.js"),x=se(P),N=r(/*! ../../plugins/watermark */"./src/plugins/watermark/index.js"),M=se(N),F=r(/*! ../../plugins/poster */"./src/plugins/poster/index.js"),j=se(F),U=r(/*! ../../plugins/google_analytics */"./src/plugins/google_analytics/index.js"),B=se(U),G=r(/*! ../../plugins/click_to_pause */"./src/plugins/click_to_pause/index.js"),K=se(G),V=r(/*! ../../plugins/media_control */"./src/plugins/media_control/index.js"),Y=se(V),H=r(/*! ../../plugins/dvr_controls */"./src/plugins/dvr_controls/index.js"),W=se(H),z=r(/*! ../../plugins/closed_captions */"./src/plugins/closed_captions/index.js"),$=se(z),q=r(/*! ../../plugins/favicon */"./src/plugins/favicon/index.js"),X=se(q),Z=r(/*! ../../plugins/seek_time */"./src/plugins/seek_time/index.js"),J=se(Z),Q=r(/*! ../../plugins/sources */"./src/plugins/sources.js"),ee=se(Q),te=r(/*! ../../plugins/end_video */"./src/plugins/end_video.js"),re=se(te),ne=r(/*! ../../plugins/strings */"./src/plugins/strings.js"),ie=se(ne),ae=r(/*! ../../plugins/error_screen */"./src/plugins/error_screen/index.js"),oe=se(ae);function se(e){return e&&e.__esModule?e:{default:e}}var le=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.default)(this,t);var a=(0,c.default)(this,e.call(this));return a.playerId=n,a.playbackPlugins=[],i||(a.playbackPlugins=[].concat((0,o.default)(a.playbackPlugins),[w.default])),a.playbackPlugins=[].concat((0,o.default)(a.playbackPlugins),[y.default,E.default]),i||(a.playbackPlugins=[].concat((0,o.default)(a.playbackPlugins),[A.default,k.default])),a.playbackPlugins=[].concat((0,o.default)(a.playbackPlugins),[C.default,I.default]),a.containerPlugins=[D.default,M.default,j.default,x.default,B.default,K.default],a.corePlugins=[Y.default,W.default,$.default,X.default,J.default,ee.default,re.default,oe.default,ie.default],Array.isArray(r)||a.validateExternalPluginsType(r),a.addExternalPlugins(r),a}return(0,h.default)(t,e),t.prototype.groupPluginsByType=function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e},t.prototype.removeDups=function(e){var t=function(e,t){return e[t.prototype.name]&&delete e[t.prototype.name],e[t.prototype.name]=t,e},r=e.reduceRight(t,(0,i.default)(null)),n=[];for(var a in r)n.unshift(r[a]);return n},t.prototype.addExternalPlugins=function(e){e=this.groupPluginsByType(e),e.playback&&(this.playbackPlugins=this.removeDups(e.playback.concat(this.playbackPlugins))),e.container&&(this.containerPlugins=this.removeDups(e.container.concat(this.containerPlugins))),e.core&&(this.corePlugins=this.removeDups(e.core.concat(this.corePlugins))),m.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},t.prototype.validateExternalPluginsType=function(e){var t=["playback","container","core"];t.forEach((function(t){(e[t]||[]).forEach((function(e){var r="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(r)}))}))},t}(p.default);t.default=le,e.exports=t["default"]},"./src/components/mediator.js":
/*!************************************!*\
  !*** ./src/components/mediator.js ***!
  \************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=s(n),a=r(/*! ../base/events */"./src/base/events.js"),o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}var l=new o.default,u=function e(){(0,i.default)(this,e)};t.default=u,u.on=function(e,t,r){l.on(e,t,r)},u.once=function(e,t,r){l.once(e,t,r)},u.off=function(e,t,r){l.off(e,t,r)},u.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];l.trigger.apply(l,[e].concat(r))},u.stopListening=function(e,t,r){l.stopListening(e,t,r)},e.exports=t["default"]},"./src/components/player.js":
/*!**********************************!*\
  !*** ./src/components/player.js ***!
  \**********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/core-js/object/assign */"./node_modules/babel-runtime/core-js/object/assign.js"),i=D(n),a=r(/*! babel-runtime/core-js/object/keys */"./node_modules/babel-runtime/core-js/object/keys.js"),o=D(a),s=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),l=D(s),u=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=D(u),d=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),h=D(d),f=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),p=D(f),g=r(/*! ../base/utils */"./src/base/utils.js"),m=r(/*! ../base/base_object */"./src/base/base_object.js"),v=D(m),y=r(/*! ../base/events */"./src/base/events.js"),b=D(y),A=r(/*! ./browser */"./src/components/browser/index.js"),_=D(A),E=r(/*! ./core_factory */"./src/components/core_factory/index.js"),T=D(E),k=r(/*! ./loader */"./src/components/loader/index.js"),S=D(k),w=r(/*! ./player_info */"./src/components/player_info.js"),R=D(w),C=r(/*! ../base/error_mixin */"./src/base/error_mixin.js"),L=D(C),I=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),O=D(I);function D(e){return e&&e.__esModule?e:{default:e}}var P=(0,g.currentScriptUrl)().replace(/\/[^/]+$/,""),x=function(e){function t(r){(0,l.default)(this,t);var n=(0,c.default)(this,e.call(this,r)),i={recycleVideo:!0},a={playerId:(0,g.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:P,allowUserInteraction:_.default.isMobile,playback:i};return n._options=O.default.extend(a,r),n.options.sources=n._normalizeSources(r),n.options.chromeless||(n.options.allowUserInteraction=!0),n.options.allowUserInteraction||(n.options.disableKeyboardShortcuts=!0),n._registerOptionEventListeners(n.options.events),n._coreFactory=new T.default(n),n.playerInfo=R.default.getInstance(n.options.playerId),n.playerInfo.currentSize={width:r.width,height:r.height},n.playerInfo.options=n.options,n.options.parentId?n.setParentId(n.options.parentId):n.options.parent&&n.attachTo(n.options.parent),n}return(0,p.default)(t,e),(0,h.default)(t,[{key:"loader",set:function(e){this._loader=e},get:function(){return this._loader||(this._loader=new S.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:b.default.PLAYER_READY,onResize:b.default.PLAYER_RESIZE,onPlay:b.default.PLAYER_PLAY,onPause:b.default.PLAYER_PAUSE,onStop:b.default.PLAYER_STOP,onEnded:b.default.PLAYER_ENDED,onSeek:b.default.PLAYER_SEEK,onError:b.default.PLAYER_ERROR,onTimeUpdate:b.default.PLAYER_TIMEUPDATE,onVolumeUpdate:b.default.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:b.default.PLAYER_SUBTITLE_AVAILABLE}}}]),t.prototype.setParentId=function(e){var t=document.querySelector(e);return t&&this.attachTo(t),this},t.prototype.attachTo=function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this},t.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,b.default.CORE_READY,this._onReady),this.listenTo(this.core,b.default.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,b.default.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,b.default.CORE_RESIZE,this._onResize),this},t.prototype._addContainerEventListeners=function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,b.default.CONTAINER_PLAY,this._onPlay),this.listenTo(e,b.default.CONTAINER_PAUSE,this._onPause),this.listenTo(e,b.default.CONTAINER_STOP,this._onStop),this.listenTo(e,b.default.CONTAINER_ENDED,this._onEnded),this.listenTo(e,b.default.CONTAINER_SEEK,this._onSeek),this.listenTo(e,b.default.CONTAINER_ERROR,this._onError),this.listenTo(e,b.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,b.default.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,b.default.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this},t.prototype._registerOptionEventListeners=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.default)(t).length>0;return n&&(0,o.default)(r).forEach((function(t){var n=e.eventsMapping[t];n&&e.off(n,r[t])})),(0,o.default)(t).forEach((function(r){var n=e.eventsMapping[r];if(n){var i=t[r];i="function"===typeof i&&i,i&&e.on(n,i)}})),this},t.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},t.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(b.default.PLAYER_READY)},t.prototype._onFullscreenChange=function(e){this.trigger(b.default.PLAYER_FULLSCREEN,e)},t.prototype._onVolumeUpdate=function(e){this.trigger(b.default.PLAYER_VOLUMEUPDATE,e)},t.prototype._onSubtitleAvailable=function(){this.trigger(b.default.PLAYER_SUBTITLE_AVAILABLE)},t.prototype._onResize=function(e){this.trigger(b.default.PLAYER_RESIZE,e)},t.prototype._onPlay=function(){this.trigger(b.default.PLAYER_PLAY)},t.prototype._onPause=function(){this.trigger(b.default.PLAYER_PAUSE)},t.prototype._onStop=function(){this.trigger(b.default.PLAYER_STOP,this.getCurrentTime())},t.prototype._onEnded=function(){this.trigger(b.default.PLAYER_ENDED)},t.prototype._onSeek=function(e){this.trigger(b.default.PLAYER_SEEK,e)},t.prototype._onTimeUpdate=function(e){this.trigger(b.default.PLAYER_TIMEUPDATE,e)},t.prototype._onError=function(e){this.trigger(b.default.PLAYER_ERROR,e)},t.prototype._normalizeSources=function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t},t.prototype.resize=function(e){return this.core.resize(e),this},t.prototype.load=function(e,t,r){return void 0!==r&&this.configure({autoPlay:!!r}),this.core.load(e,t),this},t.prototype.destroy=function(){return this.stopListening(),this.core.destroy(),this},t.prototype.consent=function(){return this.core.getCurrentPlayback().consent(),this},t.prototype.play=function(){return this.core.activeContainer.play(),this},t.prototype.pause=function(){return this.core.activeContainer.pause(),this},t.prototype.stop=function(){return this.core.activeContainer.stop(),this},t.prototype.seek=function(e){return this.core.activeContainer.seek(e),this},t.prototype.seekPercentage=function(e){return this.core.activeContainer.seekPercentage(e),this},t.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},t.prototype.unmute=function(){return this.setVolume("number"===typeof this._mutedVolume?this._mutedVolume:100),this._mutedVolume=null,this},t.prototype.isPlaying=function(){return this.core.activeContainer.isPlaying()},t.prototype.isDvrEnabled=function(){return this.core.activeContainer.isDvrEnabled()},t.prototype.isDvrInUse=function(){return this.core.activeContainer.isDvrInUse()},t.prototype.configure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this},t.prototype.getPlugin=function(e){var t=this.core.plugins.concat(this.core.activeContainer.plugins);return t.filter((function(t){return t.name===e}))[0]},t.prototype.getCurrentTime=function(){return this.core.activeContainer.getCurrentTime()},t.prototype.getStartTimeOffset=function(){return this.core.activeContainer.getStartTimeOffset()},t.prototype.getDuration=function(){return this.core.activeContainer.getDuration()},t}(v.default);t.default=x,(0,i.default)(x.prototype,L.default),e.exports=t["default"]},"./src/components/player_info.js":
/*!***************************************!*\
  !*** ./src/components/player_info.js ***!
  \***************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(){(0,i.default)(this,e),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};o._players={},o.getInstance=function(e){return o._players[e]||(o._players[e]=new o)},t.default=o,e.exports=t["default"]},"./src/icons/01-play.svg":
/*!*******************************!*\
  !*** ./src/icons/01-play.svg ***!
  \*******************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},"./src/icons/02-pause.svg":
/*!********************************!*\
  !*** ./src/icons/02-pause.svg ***!
  \********************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},"./src/icons/03-stop.svg":
/*!*******************************!*\
  !*** ./src/icons/03-stop.svg ***!
  \*******************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},"./src/icons/04-volume.svg":
/*!*********************************!*\
  !*** ./src/icons/04-volume.svg ***!
  \*********************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},"./src/icons/05-mute.svg":
/*!*******************************!*\
  !*** ./src/icons/05-mute.svg ***!
  \*******************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},"./src/icons/06-expand.svg":
/*!*********************************!*\
  !*** ./src/icons/06-expand.svg ***!
  \*********************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},"./src/icons/07-shrink.svg":
/*!*********************************!*\
  !*** ./src/icons/07-shrink.svg ***!
  \*********************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},"./src/icons/08-hd.svg":
/*!*****************************!*\
  !*** ./src/icons/08-hd.svg ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},"./src/icons/09-cc.svg":
/*!*****************************!*\
  !*** ./src/icons/09-cc.svg ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'},"./src/icons/10-reload.svg":
/*!*********************************!*\
  !*** ./src/icons/10-reload.svg ***!
  \*********************************/
/*! no static exports found */function(e,t){e.exports='<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},"./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./components/player */"./src/components/player.js"),i=Te(n),a=r(/*! ./base/utils */"./src/base/utils.js"),o=Te(a),s=r(/*! ./base/events */"./src/base/events.js"),l=Te(s),u=r(/*! ./base/playback */"./src/base/playback.js"),c=Te(u),d=r(/*! ./base/container_plugin */"./src/base/container_plugin.js"),h=Te(d),f=r(/*! ./base/core_plugin */"./src/base/core_plugin.js"),p=Te(f),g=r(/*! ./base/ui_core_plugin */"./src/base/ui_core_plugin.js"),m=Te(g),v=r(/*! ./base/ui_container_plugin */"./src/base/ui_container_plugin.js"),y=Te(v),b=r(/*! ./base/base_object */"./src/base/base_object.js"),A=Te(b),_=r(/*! ./base/ui_object */"./src/base/ui_object.js"),E=Te(_),T=r(/*! ./components/browser */"./src/components/browser/index.js"),k=Te(T),S=r(/*! ./components/container */"./src/components/container/index.js"),w=Te(S),R=r(/*! ./components/core */"./src/components/core/index.js"),C=Te(R),L=r(/*! ./components/error */"./src/components/error/index.js"),I=Te(L),O=r(/*! ./components/loader */"./src/components/loader/index.js"),D=Te(O),P=r(/*! ./components/mediator */"./src/components/mediator.js"),x=Te(P),N=r(/*! ./components/player_info */"./src/components/player_info.js"),M=Te(N),F=r(/*! ./playbacks/base_flash_playback */"./src/playbacks/base_flash_playback/index.js"),j=Te(F),U=r(/*! ./playbacks/flash */"./src/playbacks/flash/index.js"),B=Te(U),G=r(/*! ./playbacks/flashls */"./src/playbacks/flashls/index.js"),K=Te(G),V=r(/*! ./playbacks/hls */"./src/playbacks/hls/index.js"),Y=Te(V),H=r(/*! ./playbacks/html5_audio */"./src/playbacks/html5_audio/index.js"),W=Te(H),z=r(/*! ./playbacks/html5_video */"./src/playbacks/html5_video/index.js"),$=Te(z),q=r(/*! ./playbacks/html_img */"./src/playbacks/html_img/index.js"),X=Te(q),Z=r(/*! ./playbacks/no_op */"./src/playbacks/no_op/index.js"),J=Te(Z),Q=r(/*! ./plugins/media_control */"./src/plugins/media_control/index.js"),ee=Te(Q),te=r(/*! ./plugins/click_to_pause */"./src/plugins/click_to_pause/index.js"),re=Te(te),ne=r(/*! ./plugins/dvr_controls */"./src/plugins/dvr_controls/index.js"),ie=Te(ne),ae=r(/*! ./plugins/favicon */"./src/plugins/favicon/index.js"),oe=Te(ae),se=r(/*! ./plugins/log */"./src/plugins/log/index.js"),le=Te(se),ue=r(/*! ./plugins/poster */"./src/plugins/poster/index.js"),ce=Te(ue),de=r(/*! ./plugins/spinner_three_bounce */"./src/plugins/spinner_three_bounce/index.js"),he=Te(de),fe=r(/*! ./plugins/watermark */"./src/plugins/watermark/index.js"),pe=Te(fe),ge=r(/*! ./base/styler */"./src/base/styler.js"),me=Te(ge),ve=r(/*! ./vendor */"./src/vendor/index.js"),ye=Te(ve),be=r(/*! ./base/template */"./src/base/template.js"),Ae=Te(be),_e=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),Ee=Te(_e);function Te(e){return e&&e.__esModule?e:{default:e}}var ke="0.3.13";t.default={Player:i.default,Mediator:x.default,Events:l.default,Browser:k.default,PlayerInfo:M.default,MediaControl:ee.default,ContainerPlugin:h.default,UIContainerPlugin:y.default,CorePlugin:p.default,UICorePlugin:m.default,Playback:c.default,Container:w.default,Core:C.default,PlayerError:I.default,Loader:D.default,BaseObject:A.default,UIObject:E.default,Utils:o.default,BaseFlashPlayback:j.default,Flash:B.default,FlasHLS:K.default,HLS:Y.default,HTML5Audio:W.default,HTML5Video:$.default,HTMLImg:X.default,NoOp:J.default,ClickToPausePlugin:re.default,DVRControls:ie.default,Favicon:oe.default,Log:le.default,Poster:ce.default,SpinnerThreeBouncePlugin:he.default,WaterMarkPlugin:pe.default,Styler:me.default,Vendor:ye.default,version:ke,template:Ae.default,$:Ee.default},e.exports=t["default"]},"./src/playbacks/base_flash_playback/base_flash_playback.js":
/*!******************************************************************!*\
  !*** ./src/playbacks/base_flash_playback/base_flash_playback.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=b(n),a=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),o=b(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=b(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=b(u),d=r(/*! ../../base/playback */"./src/base/playback.js"),h=b(d),f=r(/*! ../../base/template */"./src/base/template.js"),p=b(f),g=r(/*! ../../components/browser */"./src/components/browser/index.js"),m=b(g),v=r(/*! ./public/flash.html */"./src/playbacks/base_flash_playback/public/flash.html"),y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/flash.scss */"./src/playbacks/base_flash_playback/public/flash.scss");var A="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",_=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,c.default)(t,e),t.prototype.setElement=function(e){this.$el=e,this.el=e[0]},t.prototype.render=function(){return this.$el.attr("data",this.swfPath),this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),m.default.isIE&&(this.$("embed").remove(),m.default.isLegacyIE&&this.$el.attr("classid",A)),this.el.id=this.cid,this},(0,o.default)(t,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,p.default)(y.default)}},{key:"attributes",get:function(){var e="application/x-shockwave-flash";return m.default.isLegacyIE&&(e=""),{class:"clappr-flash-playback",type:e,width:"100%",height:"100%",data:this.swfPath,"data-flash-playback":this.name}}}]),t}(h.default);t.default=_,e.exports=t["default"]},"./src/playbacks/base_flash_playback/index.js":
/*!****************************************************!*\
  !*** ./src/playbacks/base_flash_playback/index.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r(/*! ./base_flash_playback */"./src/playbacks/base_flash_playback/base_flash_playback.js"),e.exports=t["default"]},"./src/playbacks/base_flash_playback/public/flash.html":
/*!*************************************************************!*\
  !*** ./src/playbacks/base_flash_playback/public/flash.html ***!
  \*************************************************************/
/*! no static exports found */function(e,t){e.exports='<param name="movie" value="<%= swfPath %>">\n<param name="quality" value="autohigh">\n<param name="swliveconnect" value="true">\n<param name="allowScriptAccess" value="always">\n<param name="bgcolor" value="#000000">\n<param name="allowFullScreen" value="false">\n<param name="wmode" value="<%= wmode %>">\n<param name="tabindex" value="1">\n<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">\n<embed\n  name="<%= cid %>"\n  type="application/x-shockwave-flash"\n  disabled="disabled"\n  tabindex="-1"\n  enablecontextmenu="false"\n  allowScriptAccess="always"\n  quality="autohigh"\n  pluginspage="http://www.macromedia.com/go/getflashplayer"\n  wmode="<%= wmode %>"\n  swliveconnect="true"\n  allowfullscreen="false"\n  bgcolor="#000000"\n  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"\n  data="<%= swfPath %>"\n  src="<%= swfPath %>"\n  width="100%"\n  height="100%">\n</embed>\n'},"./src/playbacks/base_flash_playback/public/flash.scss":
/*!*************************************************************!*\
  !*** ./src/playbacks/base_flash_playback/public/flash.scss ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./flash.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/playbacks/flash/flash.js":
/*!**************************************!*\
  !*** ./src/playbacks/flash/flash.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=C(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=C(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=C(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=C(u),d=r(/*! ../../base/utils */"./src/base/utils.js"),h=r(/*! ../../playbacks/base_flash_playback */"./src/playbacks/base_flash_playback/index.js"),f=C(h),p=r(/*! ../../components/browser */"./src/components/browser/index.js"),g=C(p),m=r(/*! ../../components/mediator */"./src/components/mediator.js"),v=C(m),y=r(/*! ../../base/template */"./src/base/template.js"),b=C(y),A=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),_=C(A),E=r(/*! ../../base/events */"./src/base/events.js"),T=C(E),k=r(/*! ../../base/playback */"./src/base/playback.js"),S=C(k),w=r(/*! ./public/Player.swf */"./src/playbacks/flash/public/Player.swf"),R=C(w);function C(e){return e&&e.__esModule?e:{default:e}}var L=60,I=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=(0,o.default)(this,e.call.apply(e,[this].concat(n)));return s._src=s.options.src,s._baseUrl=s.options.baseUrl,s._autoPlay=s.options.autoPlay,s.settings={default:["seekbar"]},s.settings.left=["playpause","position","duration"],s.settings.right=["fullscreen","volume"],s.settings.seekEnabled=!0,s._isReadyState=!1,s._addListeners(),s}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,b.default)(R.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return"ENDED"===this._currentState}},{key:"buffering",get:function(){return!!this._bufferingState&&"ENDED"!==this._currentState}}]),t.prototype._bootstrap=function(){var e=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%","PLAYING"===this._currentState?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,_.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():v.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=L?setTimeout((function(){return e._bootstrap()}),50):this.trigger(T.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},t.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(T.default.PLAYBACK_READY,this.name),this.trigger(T.default.PLAYBACK_SETTINGSUPDATE,this.name)},t.prototype.getPlaybackType=function(){return S.default.VOD},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype._updateTime=function(){this.trigger(T.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},t.prototype._addListeners=function(){v.default.on(this.uniqueId+":progress",this._progress,this),v.default.on(this.uniqueId+":timeupdate",this._updateTime,this),v.default.on(this.uniqueId+":statechanged",this._checkState,this),v.default.on(this.uniqueId+":flashready",this._bootstrap,this)},t.prototype.stopListening=function(){e.prototype.stopListening.call(this),v.default.off(this.uniqueId+":progress"),v.default.off(this.uniqueId+":timeupdate"),v.default.off(this.uniqueId+":statechanged"),v.default.off(this.uniqueId+":flashready")},t.prototype._checkState=function(){this._isIdle||"PAUSED"===this._currentState||("PLAYING_BUFFERING"!==this._currentState&&"PLAYING_BUFFERING"===this.el.getState()?(this._bufferingState=!0,this.trigger(T.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):"PLAYING"===this.el.getState()?(this._bufferingState=!1,this.trigger(T.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):"IDLE"===this.el.getState()?this._currentState="IDLE":"ENDED"===this.el.getState()&&(this.trigger(T.default.PLAYBACK_ENDED,this.name),this.trigger(T.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},t.prototype._progress=function(){"IDLE"!==this._currentState&&"ENDED"!==this._currentState&&this.trigger(T.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},t.prototype._firstPlay=function(){var e=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,T.default.PLAYBACK_BUFFERFULL,(function(){return e._checkInitialSeek()})),this._currentState="PLAYING"):this.listenToOnce(this,T.default.PLAYBACK_READY,this._firstPlay)},t.prototype._checkInitialSeek=function(){var e=(0,d.seekStringToSeconds)(window.location.href);0!==e&&this.seekSeconds(e)},t.prototype.play=function(){this.trigger(T.default.PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState||"PLAYING_BUFFERING"===this._currentState?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(T.default.PLAYBACK_PLAY,this.name)):"PLAYING"!==this._currentState&&(this._firstPlay(),this.trigger(T.default.PLAYBACK_PLAY,this.name))},t.prototype.volume=function(e){var t=this;this.isReady?this.el.playerVolume(e):this.listenToOnce(this,T.default.PLAYBACK_BUFFERFULL,(function(){return t.volume(e)}))},t.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(T.default.PLAYBACK_PAUSE,this.name)},t.prototype.stop=function(){this.el.playerStop(),this.trigger(T.default.PLAYBACK_STOP),this.trigger(T.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},t.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},t.prototype.getDuration=function(){return this.el.getDuration()},t.prototype.seekPercentage=function(e){var t=this;if(this.el.getDuration()>0){var r=this.el.getDuration()*(e/100);this.seek(r)}else this.listenToOnce(this,T.default.PLAYBACK_BUFFERFULL,(function(){return t.seekPercentage(e)}))},t.prototype.seek=function(e){var t=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(e),this.trigger(T.default.PLAYBACK_TIMEUPDATE,{current:e,total:this.el.getDuration()},this.name),"PAUSED"===this._currentState&&this.el.playerPause()):this.listenToOnce(this,T.default.PLAYBACK_BUFFERFULL,(function(){return t.seek(e)}))},t.prototype.destroy=function(){clearInterval(this.bootstrapId),e.prototype.stopListening.call(this),this.$el.remove()},(0,l.default)(t,[{key:"isReady",get:function(){return this._isReadyState}}]),t}(f.default);t.default=I,I.canPlay=function(e){if(g.default.hasFlash&&e&&e.constructor===String){var t=e.split("?")[0].match(/.*\.(.*)$/)||[];return t.length>1&&!g.default.isMobile&&t[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)}return!1},e.exports=t["default"]},"./src/playbacks/flash/index.js":
/*!**************************************!*\
  !*** ./src/playbacks/flash/index.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./flash */"./src/playbacks/flash/flash.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/flash/public/Player.swf":
/*!***********************************************!*\
  !*** ./src/playbacks/flash/public/Player.swf ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports="<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"},"./src/playbacks/flashls/flashls.js":
/*!******************************************!*\
  !*** ./src/playbacks/flashls/flashls.js ***!
  \******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=O(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=O(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=O(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=O(u),d=r(/*! ../../playbacks/base_flash_playback */"./src/playbacks/base_flash_playback/index.js"),h=O(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=O(f),g=r(/*! ../../base/template */"./src/base/template.js"),m=O(g),v=r(/*! ../../base/playback */"./src/base/playback.js"),y=O(v),b=r(/*! ../../components/mediator */"./src/components/mediator.js"),A=O(b),_=r(/*! ../../components/browser */"./src/components/browser/index.js"),E=O(_),T=r(/*! ../../components/error */"./src/components/error/index.js"),k=O(T),S=r(/*! ./flashls_events */"./src/playbacks/flashls/flashls_events.js"),w=O(S),R=r(/*! ./public/HLSPlayer.swf */"./src/playbacks/flashls/public/HLSPlayer.swf"),C=O(R),L=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),I=O(L);function O(e){return e&&e.__esModule?e:{default:e}}var D=60,P=-1,x=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=(0,o.default)(this,e.call.apply(e,[this].concat(n)));return s._src=s.options.src,s._baseUrl=s.options.baseUrl,s._initHlsParameters(s.options),s.highDefinition=!1,s._autoPlay=s.options.autoPlay,s._loop=s.options.loop,s._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},s.settings=I.default.extend({},s._defaultSettings),s._playbackType=y.default.LIVE,s._hasEnded=!1,s._addListeners(),s}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,m.default)(C.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?P:this._currentLevel},set:function(e){this._currentLevel=e,this.trigger(p.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(e)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]),t.prototype._initHlsParameters=function(e){this._autoStartLoad=void 0===e.autoStartLoad||e.autoStartLoad,this._capLevelToStage=void 0!==e.capLevelToStage&&e.capLevelToStage,this._maxLevelCappingMode=void 0===e.maxLevelCappingMode?"downscale":e.maxLevelCappingMode,this._minBufferLength=void 0===e.minBufferLength?-1:e.minBufferLength,this._minBufferLengthCapping=void 0===e.minBufferLengthCapping?-1:e.minBufferLengthCapping,this._maxBufferLength=void 0===e.maxBufferLength?120:e.maxBufferLength,this._maxBackBufferLength=void 0===e.maxBackBufferLength?30:e.maxBackBufferLength,this._lowBufferLength=void 0===e.lowBufferLength?3:e.lowBufferLength,this._mediaTimePeriod=void 0===e.mediaTimePeriod?100:e.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=void 0===e.fpsDroppedMonitoringPeriod?5e3:e.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=void 0===e.fpsDroppedMonitoringThreshold?.2:e.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=void 0!==e.capLevelonFPSDrop&&e.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=void 0===e.smoothAutoSwitchonFPSDrop?this.capLevelonFPSDrop:e.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=void 0===e.switchDownOnLevelError||e.switchDownOnLevelError,this._seekMode=void 0===e.seekMode?"ACCURATE":e.seekMode,this._keyLoadMaxRetry=void 0===e.keyLoadMaxRetry?3:e.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=void 0===e.keyLoadMaxRetryTimeout?64e3:e.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=void 0===e.fragmentLoadMaxRetry?3:e.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=void 0===e.fragmentLoadMaxRetryTimeout?4e3:e.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=void 0===e.fragmentLoadSkipAfterMaxRetry||e.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=void 0===e.maxSkippedFragments?5:e.maxSkippedFragments,this._flushLiveURLCache=void 0!==e.flushLiveURLCache&&e.flushLiveURLCache,this._initialLiveManifestSize=void 0===e.initialLiveManifestSize?1:e.initialLiveManifestSize,this._manifestLoadMaxRetry=void 0===e.manifestLoadMaxRetry?3:e.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=void 0===e.manifestLoadMaxRetryTimeout?64e3:e.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=void 0===e.manifestRedundantLoadmaxRetry?3:e.manifestRedundantLoadmaxRetry,this._startFromBitrate=void 0===e.startFromBitrate?-1:e.startFromBitrate,this._startFromLevel=void 0===e.startFromLevel?-1:e.startFromLevel,this._autoStartMaxDuration=void 0===e.autoStartMaxDuration?-1:e.autoStartMaxDuration,this._seekFromLevel=void 0===e.seekFromLevel?-1:e.seekFromLevel,this._useHardwareVideoDecoder=void 0!==e.useHardwareVideoDecoder&&e.useHardwareVideoDecoder,this._hlsLogEnabled=void 0===e.hlsLogEnabled||e.hlsLogEnabled,this._logDebug=void 0!==e.logDebug&&e.logDebug,this._logDebug2=void 0!==e.logDebug2&&e.logDebug2,this._logWarn=void 0===e.logWarn||e.logWarn,this._logError=void 0===e.logError||e.logError,this._hlsMinimumDvrSize=void 0===e.hlsMinimumDvrSize?60:e.hlsMinimumDvrSize},t.prototype._addListeners=function(){var e=this;A.default.on(this.cid+":flashready",(function(){return e._bootstrap()})),A.default.on(this.cid+":timeupdate",(function(t){return e._updateTime(t)})),A.default.on(this.cid+":playbackstate",(function(t){return e._setPlaybackState(t)})),A.default.on(this.cid+":levelchanged",(function(t){return e._levelChanged(t)})),A.default.on(this.cid+":error",(function(t,r,n){return e._flashPlaybackError(t,r,n)})),A.default.on(this.cid+":fragmentloaded",(function(t){return e._onFragmentLoaded(t)})),A.default.on(this.cid+":levelendlist",(function(t){return e._onLevelEndlist(t)}))},t.prototype.stopListening=function(){e.prototype.stopListening.call(this),A.default.off(this.cid+":flashready"),A.default.off(this.cid+":timeupdate"),A.default.off(this.cid+":playbackstate"),A.default.off(this.cid+":levelchanged"),A.default.off(this.cid+":playbackerror"),A.default.off(this.cid+":fragmentloaded"),A.default.off(this.cid+":manifestloaded"),A.default.off(this.cid+":levelendlist")},t.prototype._bootstrap=function(){var e=this;if(this.el.playerLoad)this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(p.default.PLAYBACK_READY,this.name);else if(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=D)setTimeout((function(){return e._bootstrap()}),50);else{var t=this.createError({code:"playerLoadFail_maxNumberAttemptsReached",description:this.name+" error: Max number of attempts reached",level:k.default.Levels.FATAL,raw:{}});this.trigger(p.default.PLAYBACK_ERROR,t)}},t.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},t.prototype.setAutoStartLoad=function(e){this._autoStartLoad=e,this.el.playerSetAutoStartLoad(this._autoStartLoad)},t.prototype.setCapLevelToStage=function(e){this._capLevelToStage=e,this.el.playerSetCapLevelToStage(this._capLevelToStage)},t.prototype.setMaxLevelCappingMode=function(e){this._maxLevelCappingMode=e,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},t.prototype.setSetMinBufferLength=function(e){this._minBufferLength=e,this.el.playerSetMinBufferLength(this._minBufferLength)},t.prototype.setMinBufferLengthCapping=function(e){this._minBufferLengthCapping=e,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},t.prototype.setMaxBufferLength=function(e){this._maxBufferLength=e,this.el.playerSetMaxBufferLength(this._maxBufferLength)},t.prototype.setMaxBackBufferLength=function(e){this._maxBackBufferLength=e,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},t.prototype.setLowBufferLength=function(e){this._lowBufferLength=e,this.el.playerSetLowBufferLength(this._lowBufferLength)},t.prototype.setMediaTimePeriod=function(e){this._mediaTimePeriod=e,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},t.prototype.setFpsDroppedMonitoringPeriod=function(e){this._fpsDroppedMonitoringPeriod=e,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},t.prototype.setFpsDroppedMonitoringThreshold=function(e){this._fpsDroppedMonitoringThreshold=e,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},t.prototype.setCapLevelonFPSDrop=function(e){this._capLevelonFPSDrop=e,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},t.prototype.setSmoothAutoSwitchonFPSDrop=function(e){this._smoothAutoSwitchonFPSDrop=e,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},t.prototype.setSwitchDownOnLevelError=function(e){this._switchDownOnLevelError=e,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},t.prototype.setSeekMode=function(e){this._seekMode=e,this.el.playerSetSeekMode(this._seekMode)},t.prototype.setKeyLoadMaxRetry=function(e){this._keyLoadMaxRetry=e,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},t.prototype.setKeyLoadMaxRetryTimeout=function(e){this._keyLoadMaxRetryTimeout=e,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},t.prototype.setFragmentLoadMaxRetry=function(e){this._fragmentLoadMaxRetry=e,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},t.prototype.setFragmentLoadMaxRetryTimeout=function(e){this._fragmentLoadMaxRetryTimeout=e,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},t.prototype.setFragmentLoadSkipAfterMaxRetry=function(e){this._fragmentLoadSkipAfterMaxRetry=e,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},t.prototype.setMaxSkippedFragments=function(e){this._maxSkippedFragments=e,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},t.prototype.setFlushLiveURLCache=function(e){this._flushLiveURLCache=e,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},t.prototype.setInitialLiveManifestSize=function(e){this._initialLiveManifestSize=e,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},t.prototype.setManifestLoadMaxRetry=function(e){this._manifestLoadMaxRetry=e,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},t.prototype.setManifestLoadMaxRetryTimeout=function(e){this._manifestLoadMaxRetryTimeout=e,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},t.prototype.setManifestRedundantLoadmaxRetry=function(e){this._manifestRedundantLoadmaxRetry=e,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},t.prototype.setStartFromBitrate=function(e){this._startFromBitrate=e,this.el.playerSetStartFromBitrate(this._startFromBitrate)},t.prototype.setStartFromLevel=function(e){this._startFromLevel=e,this.el.playerSetStartFromLevel(this._startFromLevel)},t.prototype.setAutoStartMaxDuration=function(e){this._autoStartMaxDuration=e,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},t.prototype.setSeekFromLevel=function(e){this._seekFromLevel=e,this.el.playerSetSeekFromLevel(this._seekFromLevel)},t.prototype.setUseHardwareVideoDecoder=function(e){this._useHardwareVideoDecoder=e,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},t.prototype.setSetLogInfo=function(e){this._hlsLogEnabled=e,this.el.playerSetLogInfo(this._hlsLogEnabled)},t.prototype.setLogDebug=function(e){this._logDebug=e,this.el.playerSetLogDebug(this._logDebug)},t.prototype.setLogDebug2=function(e){this._logDebug2=e,this.el.playerSetLogDebug2(this._logDebug2)},t.prototype.setLogWarn=function(e){this._logWarn=e,this.el.playerSetLogWarn(this._logWarn)},t.prototype.setLogError=function(e){this._logError=e,this.el.playerSetLogError(this._logError)},t.prototype._levelChanged=function(e){var t=this.el.getLevels()[e];t&&(this.highDefinition=t.height>=720||t.bitrate/1e3>=2e3,this.trigger(p.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this._levels&&0!==this._levels.length||this._fillLevels(),this.trigger(p.default.PLAYBACK_BITRATE,{height:t.height,width:t.width,bandwidth:t.bitrate,bitrate:t.bitrate,level:e}),this.trigger(p.default.PLAYBACK_LEVEL_SWITCH_END))},t.prototype._updateTime=function(e){if("IDLE"!==this._currentState){var t=this._normalizeDuration(e.duration),r=Math.min(Math.max(e.position,0),t),n=this._dvrEnabled,i=this._playbackType===y.default.LIVE;this._dvrEnabled=i&&t>this._hlsMinimumDvrSize,100!==t&&void 0!==i&&(this._dvrEnabled!==n&&(this._updateSettings(),this.trigger(p.default.PLAYBACK_SETTINGSUPDATE,this.name)),i&&!this._dvrEnabled&&(r=t),this.trigger(p.default.PLAYBACK_TIMEUPDATE,{current:r,total:t},this.name))}},t.prototype.play=function(){this.trigger(p.default.PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState?this.el.playerResume():this._srcLoaded||"PLAYING"===this._currentState?this.el.playerPlay():this._firstPlay()},t.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},t.prototype.getCurrentTime=function(){return this.el.getPosition()},t.prototype.getCurrentLevelIndex=function(){return this._currentLevel},t.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},t.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},t.prototype.setCurrentLevel=function(e){this.currentLevel=e},t.prototype.isHighDefinitionInUse=function(){return this.highDefinition},t.prototype.getLevels=function(){return this.levels},t.prototype._setPlaybackState=function(e){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(e)>=0?(this._bufferingState=!0,this.trigger(p.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(e)):["PLAYING","PAUSED"].indexOf(e)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(p.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(e)):"IDLE"===e&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(e),this._hasEnded=!0,this.trigger(p.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(p.default.PLAYBACK_ENDED,this.name)))},t.prototype._updateCurrentState=function(e){this._currentState=e,"IDLE"!==e&&(this._hasEnded=!1),this._updatePlaybackType(),"PLAYING"===e?this.trigger(p.default.PLAYBACK_PLAY,this.name):"PAUSED"===e&&this.trigger(p.default.PLAYBACK_PAUSE,this.name)},t.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===y.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(p.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},t.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},t.prototype._stopReportingProgress=function(){this._reportingProgress=!1},t.prototype._onFragmentLoaded=function(e){if(this.trigger(p.default.PLAYBACK_FRAGMENT_LOADED,e),this._reportingProgress&&this.getCurrentTime()){var t=this.getCurrentTime()+this.el.getbufferLength();this.trigger(p.default.PLAYBACK_PROGRESS,{start:this.getCurrentTime(),current:t,total:this.el.getDuration()})}},t.prototype._onLevelEndlist=function(){this._updatePlaybackType()},t.prototype._firstPlay=function(){var e=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(A.default.once(this.cid+":manifestloaded",(function(t,r){return e._manifestLoaded(t,r)})),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},t.prototype.volume=function(e){var t=this;this.isReady?this.el.playerVolume(e):this.listenToOnce(this,p.default.PLAYBACK_BUFFERFULL,(function(){return t.volume(e)}))},t.prototype.pause=function(){(this._playbackType!==y.default.LIVE||this._dvrEnabled)&&(this.el.playerPause(),this._playbackType===y.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0))},t.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(p.default.PLAYBACK_STOP),this.trigger(p.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},t.prototype.isPlaying=function(){return!!this._currentState&&!!this._currentState.match(/playing/i)},t.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},t.prototype._normalizeDuration=function(e){return this._playbackType===y.default.LIVE&&(e=Math.max(0,e-10)),e},t.prototype.seekPercentage=function(e){var t=this.el.getDuration(),r=0;e>0&&(r=t*e/100),this.seek(r)},t.prototype.seek=function(e){var t=this.getDuration();if(this._playbackType===y.default.LIVE){var r=t-e>3;this._updateDvr(r)}this.el.playerSeek(e),this.trigger(p.default.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)},t.prototype._updateDvr=function(e){var t=!!this._dvrInUse;this._dvrInUse=e,this._dvrInUse!==t&&(this._updateSettings(),this.trigger(p.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(p.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},t.prototype._flashPlaybackError=function(e,t,r){var n={code:e,description:r,level:k.default.Levels.FATAL,raw:{code:e,url:t,message:r}},i=this.createError(n);this.trigger(p.default.PLAYBACK_ERROR,i),this.trigger(p.default.PLAYBACK_STOP)},t.prototype._manifestLoaded=function(e,t){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(p.default.PLAYBACK_LOADEDMETADATA,{duration:e,data:t})},t.prototype._fillLevels=function(){var e=this.el.getLevels(),t=e.length;this._levels=[];for(var r=0;r<t;r++)this._levels.push({id:r,label:e[r].height+"p",level:e[r]});this.trigger(p.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},t.prototype.destroy=function(){this.stopListening(),this.$el.remove()},t.prototype._updateSettings=function(){this.settings=I.default.extend({},this._defaultSettings),this._playbackType===y.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},t.prototype._createCallbacks=function(){var e=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new w.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(t,r){e.flashlsEvents[t].apply(e.flashlsEvents,r)}},t.prototype.render=function(){return e.prototype.render.call(this),this._createCallbacks(),this},(0,l.default)(t,[{key:"isReady",get:function(){return this._isReadyState}},{key:"dvrEnabled",get:function(){return!!this._dvrEnabled}}]),t}(h.default);t.default=x,x.canPlay=function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[];return E.default.hasFlash&&(r.length>1&&"m3u8"===r[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t)},e.exports=t["default"]},"./src/playbacks/flashls/flashls_events.js":
/*!*************************************************!*\
  !*** ./src/playbacks/flashls/flashls_events.js ***!
  \*************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=s(n),a=r(/*! ../../components/mediator */"./src/components/mediator.js"),o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,i.default)(this,e),this.instanceId=t}return e.prototype.ready=function(){o.default.trigger(this.instanceId+":flashready")},e.prototype.videoSize=function(e,t){o.default.trigger(this.instanceId+":videosizechanged",e,t)},e.prototype.complete=function(){o.default.trigger(this.instanceId+":complete")},e.prototype.error=function(e,t,r){o.default.trigger(this.instanceId+":error",e,t,r)},e.prototype.manifest=function(e,t){o.default.trigger(this.instanceId+":manifestloaded",e,t)},e.prototype.audioLevelLoaded=function(e){o.default.trigger(this.instanceId+":audiolevelloaded",e)},e.prototype.levelLoaded=function(e){o.default.trigger(this.instanceId+":levelloaded",e)},e.prototype.levelEndlist=function(e){o.default.trigger(this.instanceId+":levelendlist",e)},e.prototype.fragmentLoaded=function(e){o.default.trigger(this.instanceId+":fragmentloaded",e)},e.prototype.fragmentPlaying=function(e){o.default.trigger(this.instanceId+":fragmentplaying",e)},e.prototype.position=function(e){o.default.trigger(this.instanceId+":timeupdate",e)},e.prototype.state=function(e){o.default.trigger(this.instanceId+":playbackstate",e)},e.prototype.seekState=function(e){o.default.trigger(this.instanceId+":seekstate",e)},e.prototype.switch=function(e){o.default.trigger(this.instanceId+":levelchanged",e)},e.prototype.audioTracksListChange=function(e){o.default.trigger(this.instanceId+":audiotracklistchanged",e)},e.prototype.audioTrackChange=function(e){o.default.trigger(this.instanceId+":audiotrackchanged",e)},e}();t.default=l,e.exports=t["default"]},"./src/playbacks/flashls/index.js":
/*!****************************************!*\
  !*** ./src/playbacks/flashls/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./flashls */"./src/playbacks/flashls/flashls.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/flashls/public/HLSPlayer.swf":
/*!****************************************************!*\
  !*** ./src/playbacks/flashls/public/HLSPlayer.swf ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports="<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"},"./src/playbacks/hls/hls.js":
/*!**********************************!*\
  !*** ./src/playbacks/hls/hls.js ***!
  \**********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/toConsumableArray */"./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=I(n),a=r(/*! babel-runtime/core-js/json/stringify */"./node_modules/babel-runtime/core-js/json/stringify.js"),o=I(a),s=r(/*! babel-runtime/helpers/extends */"./node_modules/babel-runtime/helpers/extends.js"),l=I(s),u=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),c=I(u),d=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=I(d),f=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),p=I(f),g=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),m=I(g),v=r(/*! ../../playbacks/html5_video */"./src/playbacks/html5_video/index.js"),y=I(v),b=r(/*! hls.js */"./node_modules/hls.js/dist/hls.js"),A=I(b),_=r(/*! ../../base/events */"./src/base/events.js"),E=I(_),T=r(/*! ../../base/playback */"./src/base/playback.js"),k=I(T),S=r(/*! ../../base/utils */"./src/base/utils.js"),w=r(/*! ../../plugins/log */"./src/plugins/log/index.js"),R=I(w),C=r(/*! ../../components/error */"./src/components/error/index.js"),L=I(C);function I(e){return e&&e.__esModule?e:{default:e}}var O=-1,D=function(e){function t(){(0,c.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,h.default)(this,e.call.apply(e,[this].concat(n)));return a.options.playback=(0,l.default)({},a.options,a.options.playback),a._minDvrSize="undefined"===typeof a.options.hlsMinimumDvrSize?60:a.options.hlsMinimumDvrSize,a._extrapolatedWindowNumSegments=a.options.playback&&"undefined"!==typeof a.options.playback.extrapolatedWindowNumSegments?a.options.playback.extrapolatedWindowNumSegments:2,a._playbackType=k.default.VOD,a._lastTimeUpdate={current:0,total:0},a._lastDuration=null,a._playableRegionStartTime=0,a._localStartTimeCorrelation=null,a._localEndTimeCorrelation=null,a._playableRegionDuration=0,a._programDateTime=0,a._durationExcludesAfterLiveSyncPoint=!1,a._segmentTargetDuration=null,a._playlistType=null,a._recoverAttemptsRemaining=a.options.hlsRecoverAttempts||16,a}return(0,m.default)(t,e),(0,p.default)(t,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?O:this._currentLevel},set:function(e){this._currentLevel=e,this.trigger(E.default.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===k.default.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return(0,S.now)()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,r=(e.remote+t)/1e3;return Math.min(r,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,r=this._now-t.local,n=(t.remote+r)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(n,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return A.default}}]),t.prototype._setup=function(){var e=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new A.default((0,S.assign)({},this.options.playback.hlsjsConfig)),this._hls.on(A.default.Events.MEDIA_ATTACHED,(function(){return e._hls.loadSource(e.options.src)})),this._hls.on(A.default.Events.LEVEL_LOADED,(function(t,r){return e._updatePlaybackType(t,r)})),this._hls.on(A.default.Events.LEVEL_UPDATED,(function(t,r){return e._onLevelUpdated(t,r)})),this._hls.on(A.default.Events.LEVEL_SWITCHING,(function(t,r){return e._onLevelSwitch(t,r)})),this._hls.on(A.default.Events.FRAG_LOADED,(function(t,r){return e._onFragmentLoaded(t,r)})),this._hls.on(A.default.Events.ERROR,(function(t,r){return e._onHLSJSError(t,r)})),this._hls.on(A.default.Events.SUBTITLE_TRACK_LOADED,(function(t,r){return e._onSubtitleLoaded(t,r)})),this._hls.on(A.default.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this._hls.attachMedia(this.el)},t.prototype.render=function(){return this._ready(),e.prototype.render.call(this)},t.prototype._ready=function(){this._isReadyState=!0,this.trigger(E.default.PLAYBACK_READY,this.name)},t.prototype._recover=function(e,t,r){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){R.default.error("hlsjs: failed to recover",{evt:e,data:t}),r.level=L.default.Levels.FATAL;var n=this.createError(r);this.trigger(E.default.PLAYBACK_ERROR,n),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()},t.prototype._setupSrc=function(e){},t.prototype._startTimeUpdateTimer=function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))},t.prototype._stopTimeUpdateTimer=function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)},t.prototype.getProgramDateTime=function(){return this._programDateTime},t.prototype.getDuration=function(){return this._duration},t.prototype.getCurrentTime=function(){return Math.max(0,this.el.currentTime-this._startTime)},t.prototype.getStartTimeOffset=function(){return this._startTime},t.prototype.seekPercentage=function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)},t.prototype.seek=function(t){t<0&&(R.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,e.prototype.seek.call(this,t)},t.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},t.prototype._updateDvr=function(e){this.trigger(E.default.PLAYBACK_DVR,e),this.trigger(E.default.PLAYBACK_STATS_ADD,{dvr:e})},t.prototype._updateSettings=function(){this._playbackType===k.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(E.default.PLAYBACK_SETTINGSUPDATE)},t.prototype._onHLSJSError=function(e,t){var r={code:t.type+"_"+t.details,description:this.name+" error: type: "+t.type+", details: "+t.details,raw:t},n=void 0;if(t.response&&(r.description+=", response: "+(0,o.default)(t.response)),t.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,t.type){case A.default.ErrorTypes.NETWORK_ERROR:switch(t.details){case A.default.ErrorDetails.MANIFEST_LOAD_ERROR:case A.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case A.default.ErrorDetails.MANIFEST_PARSING_ERROR:case A.default.ErrorDetails.LEVEL_LOAD_ERROR:case A.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:R.default.error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),n=this.createError(r),this.trigger(E.default.PLAYBACK_ERROR,n),this.stop();break;default:R.default.warn("hlsjs: trying to recover from network error.",{evt:e,data:t}),r.level=L.default.Levels.WARN,this.createError(r),this._hls.startLoad();break}break;case A.default.ErrorTypes.MEDIA_ERROR:R.default.warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),r.level=L.default.Levels.WARN,this.createError(r),this._recover(e,t,r);break;default:R.default.error("hlsjs: could not recover from error.",{evt:e,data:t}),n=this.createError(r),this.trigger(E.default.PLAYBACK_ERROR,n),this.stop();break}else R.default.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:e,data:t}),n=this.createError(r),this.trigger(E.default.PLAYBACK_ERROR,n),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(t))return R.default.error("hlsjs: could not load decrypt key.",{evt:e,data:t}),n=this.createError(r),this.trigger(E.default.PLAYBACK_ERROR,n),void this.stop();r.level=L.default.Levels.WARN,this.createError(r),R.default.warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}},t.prototype._keyIsDenied=function(e){return e.type===A.default.ErrorTypes.NETWORK_ERROR&&e.details===A.default.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400},t.prototype._onTimeUpdate=function(){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},t=this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total;t||(this._lastTimeUpdate=e,this.trigger(E.default.PLAYBACK_TIMEUPDATE,e,this.name))},t.prototype._onDurationChange=function(){var t=this.getDuration();this._lastDuration!==t&&(this._lastDuration=t,e.prototype._onDurationChange.call(this))},t.prototype._onProgress=function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat((0,i.default)(e),[{start:Math.max(0,this.el.buffered.start(r)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(r)-this._playableRegionStartTime)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(E.default.PLAYBACK_PROGRESS,n,e)}},t.prototype.play=function(){this._hls||this._setup(),e.prototype.play.call(this),this._startTimeUpdateTimer()},t.prototype.pause=function(){this._hls&&(e.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},t.prototype.stop=function(){this._stopTimeUpdateTimer(),this._hls&&(e.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},t.prototype.destroy=function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),e.prototype.destroy.call(this)},t.prototype._updatePlaybackType=function(e,t){this._playbackType=t.details.live?k.default.LIVE:k.default.VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===k.default.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()},t.prototype._fillLevels=function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:e.bitrate/1e3+"Kbps"}})),this.trigger(E.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},t.prototype._onLevelUpdated=function(e,t){this._segmentTargetDuration=t.details.targetduration,this._playlistType=t.details.type||null;var r=!1,n=!1,i=t.details.fragments,a=this._playableRegionStartTime,o=this._playableRegionDuration;if(0!==i.length){if(i[0].rawProgramDateTime&&(this._programDateTime=i[0].rawProgramDateTime),this._playableRegionStartTime!==i[0].start&&(r=!0,this._playableRegionStartTime=i[0].start),r)if(this._localStartTimeCorrelation){var s=this._localStartTimeCorrelation,l=this._now-s.local,u=(s.remote+l)/1e3;u<i[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*i[0].start}:u>a+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(i[0].start,a+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(i[0].start+this._extrapolatedWindowDuration/2)};var c=t.details.totalduration;if(this._playbackType===k.default.LIVE){var d=t.details.targetduration,h=this.options.playback.hlsjsConfig||{},f=h.liveSyncDurationCount||A.default.DefaultConfig.liveSyncDurationCount,p=d*f;p<=c?(c-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}c!==this._playableRegionDuration&&(n=!0,this._playableRegionDuration=c);var g=i[0].start+c,m=a+o,v=g!==m;if(v)if(this._localEndTimeCorrelation){var y=this._localEndTimeCorrelation,b=this._now-y.local,_=(y.remote+b)/1e3;_>g?this._localEndTimeCorrelation={local:this._now,remote:1e3*g}:_<g-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(g-this._extrapolatedWindowDuration)}:_>m&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*m})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*g};n&&this._onDurationChange(),r&&this._onProgress()}},t.prototype._onFragmentLoaded=function(e,t){this.trigger(E.default.PLAYBACK_FRAGMENT_LOADED,t)},t.prototype._onSubtitleLoaded=function(){if(!this._ccIsSetup){this.trigger(E.default.PLAYBACK_SUBTITLE_AVAILABLE);var e=this._playbackType===k.default.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}},t.prototype._onLevelSwitch=function(e,t){this.levels.length||this._fillLevels(),this.trigger(E.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(E.default.PLAYBACK_LEVEL_SWITCH,t);var r=this._hls.levels[t.level];r&&(this.highDefinition=r.height>=720||r.bitrate/1e3>=2e3,this.trigger(E.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(E.default.PLAYBACK_BITRATE,{height:r.height,width:r.width,bandwidth:r.bitrate,bitrate:r.bitrate,level:t.level}))},t.prototype.getPlaybackType=function(){return this._playbackType},t.prototype.isSeekEnabled=function(){return this._playbackType===k.default.VOD||this.dvrEnabled},(0,p.default)(t,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===k.default.LIVE}}]),t}(y.default);t.default=D,D.canPlay=function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[],n=r.length>1&&"m3u8"===r[1].toLowerCase()||(0,S.listContainsIgnoreCase)(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!A.default.isSupported()||!n)},e.exports=t["default"]},"./src/playbacks/hls/index.js":
/*!************************************!*\
  !*** ./src/playbacks/hls/index.js ***!
  \************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./hls */"./src/playbacks/hls/hls.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/html5_audio/html5_audio.js":
/*!**************************************************!*\
  !*** ./src/playbacks/html5_audio/html5_audio.js ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=v(n),a=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),o=v(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=v(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=v(u),d=r(/*! ../../base/events */"./src/base/events.js"),h=v(d),f=r(/*! ../../base/playback */"./src/base/playback.js"),p=v(f),g=r(/*! ../../playbacks/html5_video */"./src/playbacks/html5_video/index.js"),m=v(g);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,c.default)(t,e),t.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(h.default.PLAYBACK_SETTINGSUPDATE)},t.prototype.getPlaybackType=function(){return p.default.AOD},(0,o.default)(t,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),t}(m.default);t.default=y,y.canPlay=function(e,t){var r={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return m.default._canPlay("audio",r,e,t)},e.exports=t["default"]},"./src/playbacks/html5_audio/index.js":
/*!********************************************!*\
  !*** ./src/playbacks/html5_audio/index.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./html5_audio */"./src/playbacks/html5_audio/html5_audio.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/html5_video/html5_video.js":
/*!**************************************************!*\
  !*** ./src/playbacks/html5_video/html5_video.js ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! babel-runtime/core-js/array/from */"./node_modules/babel-runtime/core-js/array/from.js"),a=N(i),o=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),s=N(o),l=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=N(l),c=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),d=N(c),h=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),f=N(h),p=r(/*! babel-runtime/helpers/toConsumableArray */"./node_modules/babel-runtime/helpers/toConsumableArray.js"),g=N(p),m=r(/*! babel-runtime/core-js/object/keys */"./node_modules/babel-runtime/core-js/object/keys.js"),v=N(m),y=r(/*! ../../base/utils */"./src/base/utils.js"),b=r(/*! ../../base/playback */"./src/base/playback.js"),A=N(b),_=r(/*! ../../components/browser */"./src/components/browser/index.js"),E=N(_),T=r(/*! ../../components/error */"./src/components/error/index.js"),k=N(T),S=r(/*! ../../base/events */"./src/base/events.js"),w=N(S),R=r(/*! ../../plugins/log */"./src/plugins/log/index.js"),C=N(R),L=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),I=N(L),O=r(/*! ../../base/template */"./src/base/template.js"),D=N(O),P=r(/*! ./public/tracks.html */"./src/playbacks/html5_video/public/tracks.html"),x=N(P);function N(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/style.scss */"./src/playbacks/html5_video/public/style.scss");var M={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};M["ogv"]=M["ogg"],M["3gp"]=M["3gpp"];var F={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},j=(0,v.default)(F).reduce((function(e,t){return[].concat((0,g.default)(e),(0,g.default)(F[t]))}),[]),U={code:"unknown",message:"unknown"},B=function(e){function t(){(0,s.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,u.default)(this,e.call.apply(e,[this].concat(n)));a._destroyed=!1,a._loadStarted=!1,a._isBuffering=!1,a._playheadMoving=!1,a._playheadMovingTimer=null,a._stopped=!1,a._ccTrackId=-1,a._setupSrc(a.options.src),a.options.playback||(a.options.playback=a.options||{}),a.options.playback.disableContextMenu=a.options.playback.disableContextMenu||a.options.disableVideoTagContextMenu;var o=a.options.playback,l=o.preload||(E.default.isSafari?"auto":a.options.preload),c=void 0;return a.options.poster&&("string"===typeof a.options.poster?c=a.options.poster:"string"===typeof a.options.poster.url&&(c=a.options.poster.url)),I.default.extend(a.el,{muted:a.options.mute,defaultMuted:a.options.mute,loop:a.options.loop,poster:c,preload:l||"metadata",controls:(o.controls||a.options.useVideoTagDefaultControls)&&"controls",crossOrigin:o.crossOrigin,"x-webkit-playsinline":o.playInline}),o.playInline&&a.$el.attr({playsinline:"playsinline"}),o.crossOrigin&&a.$el.attr({crossorigin:o.crossOrigin}),a.settings={default:["seekbar"]},a.settings.left=["playpause","position","duration"],a.settings.right=["fullscreen","volume","hd-indicator"],o.externalTracks&&a._setupExternalTracks(o.externalTracks),a.options.autoPlay&&a.attemptAutoPlay(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,r=t._mimeTypesForUrl(e,F,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||j.indexOf(r[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]),t.prototype.configure=function(t){e.prototype.configure.call(this,t),this.el.loop=!!t.loop},t.prototype.attemptAutoPlay=function(){var e=this;this.canAutoPlay((function(t,r){r&&C.default.warn(e.name,"autoplay error.",{result:t,error:r}),t&&n.nextTick((function(){return!e._destroyed&&e.play()}))}))},t.prototype.canAutoPlay=function(e){this.options.disableCanAutoPlay&&e(!0,null);var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};E.default.isMobile&&y.DomRecycler.options.recycleVideo&&(t.element=this.el),(0,y.canAutoPlayMedia)(e,t)},t.prototype._setupExternalTracks=function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))},t.prototype._setupSrc=function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)},t.prototype._onLoadedMetadata=function(e){this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t="undefined"===typeof this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==A.default.LIVE&&t&&this._checkInitialSeek()},t.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},t.prototype._updateSettings=function(){this.getPlaybackType()===A.default.VOD||this.getPlaybackType()===A.default.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(w.default.PLAYBACK_SETTINGSUPDATE)},t.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},t.prototype.getPlaybackType=function(){var e="audio"===this.tagName?A.default.AOD:A.default.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?A.default.LIVE:e},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype.consent=function(){this.isPlaying()||(e.prototype.consent.call(this),this.el.load())},t.prototype.play=function(){this.trigger(w.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch((function(){}))},t.prototype.pause=function(){this.el.pause()},t.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_STOP)},t.prototype.volume=function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)},t.prototype.mute=function(){this.el.muted=!0},t.prototype.unmute=function(){this.el.muted=!1},t.prototype.isMuted=function(){return!0===this.el.muted||0===this.el.volume},t.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},t.prototype._startPlayheadMovingChecks=function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},t.prototype._stopPlayheadMovingChecks=function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},t.prototype._determineIfPlayheadMoving=function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()},t.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},t.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},t.prototype._onCanPlay=function(){this._handleBufferingEvents()},t.prototype._onPlaying=function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_PLAY)},t.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_PAUSE)},t.prototype._onSeeking=function(){this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_SEEK)},t.prototype._onSeeked=function(){this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_SEEKED)},t.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(w.default.PLAYBACK_ENDED,this.name)},t.prototype._handleBufferingEvents=function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(w.default.PLAYBACK_BUFFERING,this.name):this.trigger(w.default.PLAYBACK_BUFFERFULL,this.name))},t.prototype._onError=function(){var e=this.el.error||U,t=e.code,r=e.message,n=t===U.code,i=this.createError({code:t,description:r,raw:this.el.error,level:n?k.default.Levels.WARN:k.default.Levels.FATAL});n?C.default.warn(this.name,"HTML5 unknown error: ",i):this.trigger(w.default.PLAYBACK_ERROR,i)},t.prototype.destroy=function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),e.prototype.destroy.call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,y.DomRecycler.garbage(this.$el)},t.prototype.seek=function(e){this.el.currentTime=e},t.prototype.seekPercentage=function(e){var t=this.el.duration*(e/100);this.seek(t)},t.prototype._checkInitialSeek=function(){var e=(0,y.seekStringToSeconds)();0!==e&&this.seek(e)},t.prototype.getCurrentTime=function(){return this.el.currentTime},t.prototype.getDuration=function(){return this.el.duration},t.prototype._onTimeUpdate=function(){this.getPlaybackType()===A.default.LIVE?this.trigger(w.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(w.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},t.prototype._onProgress=function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat((0,g.default)(e),[{start:this.el.buffered.start(r),end:this.el.buffered.end(r)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(w.default.PLAYBACK_PROGRESS,n,e)}},t.prototype._typeFor=function(e){var r=t._mimeTypesForUrl(e,M,this.options.mimeType);0===r.length&&(r=t._mimeTypesForUrl(e,F,this.options.mimeType));var n=r[0]||"";return n.split(";")[0]},t.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(w.default.PLAYBACK_READY,this.name))},t.prototype._checkForClosedCaptions=function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(w.default.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}},t.prototype._handleTextTrackChange=function(){var e=this.closedCaptionsTracks,t=e.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==t.id&&(this._ccTrackId=t.id,this.trigger(w.default.PLAYBACK_SUBTITLE_CHANGED,{id:t.id}))},t.prototype.render=function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this},(0,d.default)(t,[{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===t.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0,t=function(){return e++},r=this.el.textTracks?(0,a.default)(this.el.textTracks):[];return r.filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:t(),name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if((0,y.isNumber)(e)){var t=this.closedCaptionsTracks,r=void 0;if(-1!==e){if(r=t.find((function(t){return t.id===e})),!r)return;if("showing"===r.track.mode)return}t.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),r&&(r.track.mode="showing"),this._ccTrackId=e,this.trigger(w.default.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return(0,D.default)(x.default)}}]),t}(A.default);t.default=B,B._mimeTypesForUrl=function(e,t,r){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=r||n&&t[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},B._canPlay=function(e,t,r,n){var i=B._mimeTypesForUrl(r,t,n),a=document.createElement(e);return!!i.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},B.canPlay=function(e,t){return B._canPlay("audio",F,e,t)||B._canPlay("video",M,e,t)},e.exports=t["default"]}).call(this,r(/*! ./../../../node_modules/node-libs-browser/node_modules/process/browser.js */"./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/playbacks/html5_video/index.js":
/*!********************************************!*\
  !*** ./src/playbacks/html5_video/index.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./html5_video */"./src/playbacks/html5_video/html5_video.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/html5_video/public/style.scss":
/*!*****************************************************!*\
  !*** ./src/playbacks/html5_video/public/style.scss ***!
  \*****************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./style.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/playbacks/html5_video/public/tracks.html":
/*!******************************************************!*\
  !*** ./src/playbacks/html5_video/public/tracks.html ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />\n<% }; %>\n'},"./src/playbacks/html_img/html_img.js":
/*!********************************************!*\
  !*** ./src/playbacks/html_img/html_img.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=g(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=g(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=g(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=g(u),d=r(/*! ../../base/playback */"./src/base/playback.js"),h=g(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=g(f);function g(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/style.scss */"./src/playbacks/html_img/public/style.scss");var m=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.el.src=r.src,n}return(0,c.default)(t,e),t.prototype.getPlaybackType=function(){return h.default.NO_OP},(0,l.default)(t,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),t.prototype.render=function(){return this.trigger(p.default.PLAYBACK_READY,this.name),this},t.prototype._onLoad=function(){this.trigger(p.default.PLAYBACK_ENDED,this.name)},t.prototype._onError=function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(p.default.PLAYBACK_ERROR,{message:t},this.name)},t}(h.default);t.default=m,m.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)},e.exports=t["default"]},"./src/playbacks/html_img/index.js":
/*!*****************************************!*\
  !*** ./src/playbacks/html_img/index.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./html_img */"./src/playbacks/html_img/html_img.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/html_img/public/style.scss":
/*!**************************************************!*\
  !*** ./src/playbacks/html_img/public/style.scss ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./style.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/playbacks/no_op/index.js":
/*!**************************************!*\
  !*** ./src/playbacks/no_op/index.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./no_op */"./src/playbacks/no_op/no_op.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/playbacks/no_op/no_op.js":
/*!**************************************!*\
  !*** ./src/playbacks/no_op/no_op.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=A(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=A(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=A(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=A(u),d=r(/*! ../../base/utils */"./src/base/utils.js"),h=r(/*! ../../base/playback */"./src/base/playback.js"),f=A(h),p=r(/*! ../../base/template */"./src/base/template.js"),g=A(p),m=r(/*! ../../base/events */"./src/base/events.js"),v=A(m),y=r(/*! ./public/error.html */"./src/playbacks/no_op/public/error.html"),b=A(y);function A(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/style.scss */"./src/playbacks/no_op/public/style.scss");var _=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=(0,o.default)(this,e.call.apply(e,[this].concat(n)));return s._noiseFrameNum=-1,s}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,g.default)(b.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),t.prototype.render=function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:e})),this.trigger(v.default.PLAYBACK_READY,this.name);var t=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&t||this._animate(),this},t.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),t=void 0;try{t=new Uint32Array(e.data.buffer)}catch(c){t=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var r=e.data,n=0;n<r.length;n++)t[n]=r[n]}for(var i=t.length,a=6*Math.random()+4,o=0,s=0,l=0;l<i;){if(o<0){o=a*Math.random();var u=Math.pow(Math.random(),.4);s=255*u<<24}o-=1,t[l++]=s}this.context.putImageData(e,0,0)}},t.prototype._loop=function(){var e=this;this._stop||(this._noise(),this._animationHandle=(0,d.requestAnimationFrame)((function(){return e._loop()})))},t.prototype.destroy=function(){this._animationHandle&&((0,d.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},t.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},t}(f.default);t.default=_,_.canPlay=function(e){return!0},e.exports=t["default"]},"./src/playbacks/no_op/public/error.html":
/*!***********************************************!*\
  !*** ./src/playbacks/no_op/public/error.html ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n"},"./src/playbacks/no_op/public/style.scss":
/*!***********************************************!*\
  !*** ./src/playbacks/no_op/public/style.scss ***!
  \***********************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./style.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/click_to_pause/click_to_pause.js":
/*!******************************************************!*\
  !*** ./src/plugins/click_to_pause/click_to_pause.js ***!
  \******************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=v(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=v(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=v(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=v(u),d=r(/*! ../../base/container_plugin */"./src/base/container_plugin.js"),h=v(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=v(f),g=r(/*! ../../base/playback */"./src/base/playback.js"),m=v(g);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(r){return(0,i.default)(this,t),(0,o.default)(this,e.call(this,r))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"click_to_pause"}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,p.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,p.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},t.prototype.click=function(){(this.container.getPlaybackType()!==m.default.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())},t.prototype.settingsUpdate=function(){var e=this.container.getPlaybackType()!==m.default.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}},t}(h.default);t.default=y,e.exports=t["default"]},"./src/plugins/click_to_pause/index.js":
/*!*********************************************!*\
  !*** ./src/plugins/click_to_pause/index.js ***!
  \*********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./click_to_pause */"./src/plugins/click_to_pause/click_to_pause.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/closed_captions/closed_captions.js":
/*!********************************************************!*\
  !*** ./src/plugins/closed_captions/closed_captions.js ***!
  \********************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=A(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=A(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=A(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=A(u),d=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),h=A(d),f=r(/*! ../../base/template */"./src/base/template.js"),p=A(f),g=r(/*! ../../base/events */"./src/base/events.js"),m=A(g),v=r(/*! ../../base/utils */"./src/base/utils.js"),y=r(/*! ./public/closed_captions.html */"./src/plugins/closed_captions/public/closed_captions.html"),b=A(y);function A(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/closed_captions.scss */"./src/plugins/closed_captions/public/closed_captions.scss");var _=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r)),a=r.options.closedCaptionsConfig;return n._title=a&&a.title?a.title:null,n._ariaLabel=a&&a.ariaLabel?a.ariaLabel:"cc-button",n._labelCb=a&&a.labelCallback&&"function"===typeof a.labelCallback?a.labelCallback:function(e){return e.name},n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"closed_captions"}},{key:"template",get:function(){return(0,p.default)(b.default)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}}]),t.prototype.bindEvents=function(){this.listenTo(this.core,m.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,m.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,m.default.MEDIACONTROL_HIDE,this.hideContextMenu),this.container=this.core.getCurrentContainer(),this.container&&(this.listenTo(this.container,m.default.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,m.default.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,m.default.CONTAINER_STOP,this.onContainerStop))},t.prototype.onContainerStop=function(){this.ccAvailable(!1)},t.prototype.containerChanged=function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()},t.prototype.onSubtitleAvailable=function(){this.renderCcButton(),this.ccAvailable(!0)},t.prototype.onSubtitleChanged=function(e){this.setCurrentContextMenuElement(e.id)},t.prototype.onTrackSelect=function(e){var t=parseInt(e.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=t,this.hideContextMenu(),e.stopPropagation(),!1},t.prototype.ccAvailable=function(e){var t=e?"addClass":"removeClass";this.$el[t]("available")},t.prototype.toggleContextMenu=function(){this.$el.find("ul").toggle()},t.prototype.hideContextMenu=function(){this.$el.find("ul").hide()},t.prototype.contextMenuElement=function(e){return this.$el.find("ul a"+(isNaN(e)?"":'[data-cc-select="'+e+'"]')).parent()},t.prototype.setCurrentContextMenuElement=function(e){if(this._trackId!==e){this.contextMenuElement().removeClass("current"),this.contextMenuElement(e).addClass("current");var t=e>-1?"addClass":"removeClass";this.$ccButton[t]("enabled"),this._trackId=e}},t.prototype.renderCcButton=function(){for(var e=this.container?this.container.closedCaptionsTracks:[],t=0;t<e.length;t++)e[t].label=this._labelCb(e[t]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:e})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(v.SvgIcons.cc),this.$el.append(this.style)},t.prototype.render=function(){this.renderCcButton();var e=this.core.mediaControl.$el.find("button[data-fullscreen]");return e[0]?this.$el.insertAfter(e):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this},t}(h.default);t.default=_,e.exports=t["default"]},"./src/plugins/closed_captions/index.js":
/*!**********************************************!*\
  !*** ./src/plugins/closed_captions/index.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./closed_captions */"./src/plugins/closed_captions/closed_captions.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/closed_captions/public/closed_captions.html":
/*!*****************************************************************!*\
  !*** ./src/plugins/closed_captions/public/closed_captions.html ***!
  \*****************************************************************/
/*! no static exports found */function(e,t){e.exports='<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n'},"./src/plugins/closed_captions/public/closed_captions.scss":
/*!*****************************************************************!*\
  !*** ./src/plugins/closed_captions/public/closed_captions.scss ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./closed_captions.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/dvr_controls/dvr_controls.js":
/*!**************************************************!*\
  !*** ./src/plugins/dvr_controls/dvr_controls.js ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=_(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=_(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=_(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=_(u),d=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),h=_(d),f=r(/*! ../../base/template */"./src/base/template.js"),p=_(f),g=r(/*! ../../base/playback */"./src/base/playback.js"),m=_(g),v=r(/*! ../../base/events */"./src/base/events.js"),y=_(v),b=r(/*! ./public/index.html */"./src/plugins/dvr_controls/public/index.html"),A=_(b);function _(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/dvr_controls.scss */"./src/plugins/dvr_controls/public/dvr_controls.scss");var E=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.settingsUpdate(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"template",get:function(){return(0,p.default)(A.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]),t.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,y.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),y.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),y.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},t.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.dvrChanged=function(e){this.core.getPlaybackType()===m.default.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),e?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))},t.prototype.click=function(){var e=this.core.mediaControl,t=e.container;t.isPlaying()||t.play(),e.$el.hasClass("dvr")&&t.seek(t.getDuration())},t.prototype.settingsUpdate=function(){var e=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click((function(){return e.click()}))),this.bindEvents()},t.prototype.shouldRender=function(){var e=void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls;return e&&this.core.getPlaybackType()===m.default.LIVE},t.prototype.render=function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},t}(h.default);t.default=E,e.exports=t["default"]},"./src/plugins/dvr_controls/index.js":
/*!*******************************************!*\
  !*** ./src/plugins/dvr_controls/index.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./dvr_controls */"./src/plugins/dvr_controls/dvr_controls.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/dvr_controls/public/dvr_controls.scss":
/*!***********************************************************!*\
  !*** ./src/plugins/dvr_controls/public/dvr_controls.scss ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./dvr_controls.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/dvr_controls/public/index.html":
/*!****************************************************!*\
  !*** ./src/plugins/dvr_controls/public/index.html ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports='<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n'},"./src/plugins/end_video.js":
/*!**********************************!*\
  !*** ./src/plugins/end_video.js ***!
  \**********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=g(n),a=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),o=g(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=g(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=g(u),d=r(/*! ../base/events */"./src/base/events.js"),h=g(d),f=r(/*! ../base/core_plugin */"./src/base/core_plugin.js"),p=g(f);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,c.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core,h.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var e=this.core.activeContainer;e&&(this.listenTo(e,h.default.CONTAINER_ENDED,this.ended),this.listenTo(e,h.default.CONTAINER_STOP,this.ended))},t.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.ended=function(){var e="undefined"===typeof this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd;e&&this.core.isFullscreen()&&this.core.toggleFullscreen()},(0,o.default)(t,[{key:"name",get:function(){return"end_video"}}]),t}(p.default);t.default=m,e.exports=t["default"]},"./src/plugins/error_screen/error_screen.js":
/*!**************************************************!*\
  !*** ./src/plugins/error_screen/error_screen.js ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=E(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=E(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=E(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=E(u),d=r(/*! ../../base/events */"./src/base/events.js"),h=E(d),f=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),p=E(f),g=r(/*! ../../base/template */"./src/base/template.js"),m=E(g),v=r(/*! ../../components/error/ */"./src/components/error/index.js"),y=E(v),b=r(/*! ../../base/utils */"./src/base/utils.js"),A=r(/*! ./public/error_screen.html */"./src/plugins/error_screen/public/error_screen.html"),_=E(A);function E(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/error_screen.scss */"./src/plugins/error_screen/public/error_screen.scss");var T=function(e){function t(r){var n;(0,i.default)(this,t);var a=(0,o.default)(this,e.call(this,r));return a.options.disableErrorScreen?(n=a.disable(),(0,o.default)(a,n)):a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"error_screen"}},{key:"template",get:function(){return(0,m.default)(_.default)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}}]),t.prototype.bindEvents=function(){this.listenTo(this.core,h.default.ERROR,this.onError),this.listenTo(this.core,h.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)},t.prototype.bindReload=function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))},t.prototype.reload=function(){var e=this;this.listenToOnce(this.core,h.default.CORE_READY,(function(){return e.container.play()})),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()},t.prototype.unbindReload=function(){this.reloadButton&&this.reloadButton.off("click")},t.prototype.onContainerChanged=function(){this.err=null,this.unbindReload(),this.hide()},t.prototype.onError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===y.default.Levels.FATAL&&(this.err=e,this.container.disableMediaControl(),this.container.stop(),this.show())},t.prototype.show=function(){this.render(),this.$el.show()},t.prototype.hide=function(){this.$el.hide()},t.prototype.render=function(){if(this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:b.SvgIcons.reload})),this.core.$el.append(this.el),this.bindReload(),this},t}(p.default);t.default=T,e.exports=t["default"]},"./src/plugins/error_screen/index.js":
/*!*******************************************!*\
  !*** ./src/plugins/error_screen/index.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./error_screen */"./src/plugins/error_screen/error_screen.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/error_screen/public/error_screen.html":
/*!***********************************************************!*\
  !*** ./src/plugins/error_screen/public/error_screen.html ***!
  \***********************************************************/
/*! no static exports found */function(e,t){e.exports='<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n'},"./src/plugins/error_screen/public/error_screen.scss":
/*!***********************************************************!*\
  !*** ./src/plugins/error_screen/public/error_screen.scss ***!
  \***********************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./error_screen.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/favicon/favicon.js":
/*!****************************************!*\
  !*** ./src/plugins/favicon/favicon.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=y(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=y(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=y(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=y(u),d=r(/*! ../../base/core_plugin */"./src/base/core_plugin.js"),h=y(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=y(f),g=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),m=y(g),v=r(/*! ../../base/utils */"./src/base/utils.js");function y(e){return e&&e.__esModule?e:{default:e}}var b=(0,m.default)('link[rel="shortcut icon"]'),A=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n._container=null,n.configure(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return b}}]),t.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,p.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,p.default.CORE_OPTIONS_CHANGE,this.configure))},t.prototype.bindEvents=function(){this.listenTo(this.core,p.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,p.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()},t.prototype.containerChanged=function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,p.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,p.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,p.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,p.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,p.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},t.prototype.disable=function(){e.prototype.disable.call(this),this.resetIcon()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.resetIcon()},t.prototype.createIcon=function(e){var t=(0,m.default)("<canvas/>");t[0].width=16,t[0].height=16;var r=t[0].getContext("2d");r.fillStyle="#000";var n=(0,m.default)(e).find("path").attr("d"),i=new Path2D(n);r.fill(i);var a=(0,m.default)('<link rel="shortcut icon" type="image/png"/>');return a.attr("href",t[0].toDataURL("image/png")),a},t.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(v.SvgIcons.play)),this.changeIcon(this.playIcon)},t.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(v.SvgIcons.pause)),this.changeIcon(this.pauseIcon)},t.prototype.resetIcon=function(){(0,m.default)('link[rel="shortcut icon"]').remove(),(0,m.default)("head").append(this.oldIcon)},t.prototype.changeIcon=function(e){e&&((0,m.default)('link[rel="shortcut icon"]').remove(),(0,m.default)("head").append(e))},t}(h.default);t.default=A,e.exports=t["default"]},"./src/plugins/favicon/index.js":
/*!**************************************!*\
  !*** ./src/plugins/favicon/index.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./favicon.js */"./src/plugins/favicon/favicon.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/google_analytics/google_analytics.js":
/*!**********************************************************!*\
  !*** ./src/plugins/google_analytics/google_analytics.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=g(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=g(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=g(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=g(u),d=r(/*! ../../base/container_plugin */"./src/base/container_plugin.js"),h=g(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=g(f);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.container.options.gaAccount&&(n.account=n.container.options.gaAccount,n.trackerName=n.container.options.gaTrackerName?n.container.options.gaTrackerName+".":"Clappr.",n.domainName=n.container.options.gaDomainName,n.currentHDState=void 0,n.embedScript()),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"google_analytics"}}]),t.prototype.embedScript=function(){var e=this;if(window._gat)this.addEventListeners();else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","//www.google-analytics.com/ga.js"),t.onload=function(){return e.addEventListeners()},document.body.appendChild(t)}},t.prototype.addEventListeners=function(){var e=this;this.container&&(this.listenTo(this.container,p.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,p.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,p.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,p.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,p.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,p.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,p.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,p.default.CONTAINER_VOLUME,(function(t){return e.onVolumeChanged(t)})),this.listenTo(this.container,p.default.CONTAINER_SEEK,(function(t){return e.onSeek(t)})),this.listenTo(this.container,p.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,p.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,p.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},t.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},t.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},t.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},t.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},t.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},t.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},t.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},t.prototype.onHD=function(e){var t=e?"ON":"OFF";t!==this.currentHDState&&(this.currentHDState=t,this.push(["Video","HD - "+t,this.container.playback.src]))},t.prototype.onPlaybackChanged=function(e){null!==e.type&&this.push(["Video","Playback Type - "+e.type,this.container.playback.src])},t.prototype.onDVR=function(e){var t=e?"ON":"OFF";this.push(["Interaction","DVR - "+t,this.container.playback.src])},t.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},t.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},t.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},t.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},t.prototype.push=function(e){var t=[this.trackerName+"_trackEvent"].concat(e);_gaq.push(t)},t}(h.default);t.default=m,e.exports=t["default"]},"./src/plugins/google_analytics/index.js":
/*!***********************************************!*\
  !*** ./src/plugins/google_analytics/index.js ***!
  \***********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./google_analytics */"./src/plugins/google_analytics/google_analytics.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/log/index.js":
/*!**********************************!*\
  !*** ./src/plugins/log/index.js ***!
  \**********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./log */"./src/plugins/log/log.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/log/log.js":
/*!********************************!*\
  !*** ./src/plugins/log/log.js ***!
  \********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(n),a=r(/*! ../../vendor */"./src/vendor/index.js");function o(e){return e&&e.__esModule?e:{default:e}}var s="font-weight: bold; font-size: 13px;",l="color: #006600;"+s,u="color: #0000ff;"+s,c="color: #ff8000;"+s,d="color: #ff0000;"+s,h=0,f=1,p=2,g=3,m=g,v=[u,l,c,d,d],y=["debug","info","warn","error","disabled"],b=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;(0,i.default)(this,e),this.kibo=new a.Kibo,this.kibo.down(["ctrl shift d"],(function(){return t.onOff()})),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=r,this.offLevel=n}return e.prototype.debug=function(e){this.log(e,h,Array.prototype.slice.call(arguments,1))},e.prototype.info=function(e){this.log(e,f,Array.prototype.slice.call(arguments,1))},e.prototype.warn=function(e){this.log(e,p,Array.prototype.slice.call(arguments,1))},e.prototype.error=function(e){this.log(e,g,Array.prototype.slice.call(arguments,1))},e.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+y[this.level],c)},e.prototype.level=function(e){this.level=e},e.prototype.log=function(e,t,r){if(!(this.BLACKLIST.indexOf(r[0])>=0)&&!(t<this.level)){r||(r=e,e=null);var n=v[t],i="";e&&(i="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+y[t]+"]"+i,n].concat(r))}},e}();t.default=b,b.LEVEL_DEBUG=h,b.LEVEL_INFO=f,b.LEVEL_WARN=p,b.LEVEL_ERROR=g,b.getInstance=function(){return void 0===this._instance&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},b.setLevel=function(e){this.getInstance().level=e},b.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},b.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},b.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},b.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},e.exports=t["default"]},"./src/plugins/media_control/index.js":
/*!********************************************!*\
  !*** ./src/plugins/media_control/index.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./media_control */"./src/plugins/media_control/media_control.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/media_control/media_control.js":
/*!****************************************************!*\
  !*** ./src/plugins/media_control/media_control.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,r){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! babel-runtime/core-js/json/stringify */"./node_modules/babel-runtime/core-js/json/stringify.js"),a=D(i),o=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),s=D(o),l=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=D(l),c=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),d=D(c),h=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),f=D(h),p=r(/*! ../../base/utils */"./src/base/utils.js"),g=r(/*! ../../vendor */"./src/vendor/index.js"),m=r(/*! ../../base/events */"./src/base/events.js"),v=D(m),y=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),b=D(y),A=r(/*! ../../components/browser */"./src/components/browser/index.js"),_=D(A),E=r(/*! ../../components/mediator */"./src/components/mediator.js"),T=D(E),k=r(/*! ../../base/template */"./src/base/template.js"),S=D(k),w=r(/*! ../../base/playback */"./src/base/playback.js"),R=D(w),C=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),L=D(C);r(/*! ./public/media-control.scss */"./src/plugins/media_control/public/media-control.scss");var I=r(/*! ./public/media-control.html */"./src/plugins/media_control/public/media-control.html"),O=D(I);function D(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(r){(0,s.default)(this,t);var n=(0,u.default)(this,e.call(this,r));return n.persistConfig=n.options.persistConfig,n.currentPositionValue=null,n.currentDurationValue=null,n.keepVisible=!1,n.fullScreenOnVideoTagSupported=null,n.setInitialVolume(),n.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},n.kibo=new g.Kibo(n.options.focusElement),n.bindKeyEvents(),n.container?L.default.isEmptyObject(n.container.settings)||(n.settings=L.default.extend({},n.container.settings)):n.settings={},n.userDisabled=!1,(n.container&&n.container.mediaControlDisabled||n.options.chromeless)&&n.disable(),n.stopDragHandler=function(e){return n.stopDrag(e)},n.updateDragHandler=function(e){return n.updateDrag(e)},(0,L.default)(document).bind("mouseup",n.stopDragHandler),(0,L.default)(document).bind("mousemove",n.updateDragHandler),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"name",get:function(){return"media_control"}},{key:"disabled",get:function(){var e=this.container&&this.container.getPlaybackType()===R.default.NO_OP;return this.userDisabled||e}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,S.default)(O.default)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}}]),t.prototype.getExternalInterface=function(){var e=this;return{setVolume:this.setVolume,getVolume:function(){return e.volume}}},t.prototype.bindEvents=function(){var e=this;this.stopListening(),this.listenTo(this.core,v.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,v.default.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,v.default.CORE_MOUSE_LEAVE,(function(){return e.hide(e.options.hideMediaControlDelay)})),this.listenTo(this.core,v.default.CORE_FULLSCREEN,this.show),this.listenTo(this.core,v.default.CORE_OPTIONS_CHANGE,this.configure),T.default.on(this.options.playerId+":"+v.default.PLAYER_RESIZE,this.playerResize,this),this.bindContainerEvents()},t.prototype.bindContainerEvents=function(){this.container&&(this.listenTo(this.container,v.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,v.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,v.default.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,v.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,v.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,v.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,v.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,v.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,v.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,v.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,v.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,v.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,v.default.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,v.default.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,v.default.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))},t.prototype.disable=function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()},t.prototype.enable=function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())},t.prototype.play=function(){this.container&&this.container.play()},t.prototype.pause=function(){this.container&&this.container.pause()},t.prototype.stop=function(){this.container&&this.container.stop()},t.prototype.setInitialVolume=function(){var e=this.persistConfig?p.Config.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)},t.prototype.onVolumeChanged=function(){this.updateVolumeUI()},t.prototype.onLoadedMetadataOnVideoTag=function(){var e=this.playback&&this.playback.el;!p.Fullscreen.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())},t.prototype.updateVolumeUI=function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var e=this.$volumeBarContainer.width(),t=this.$volumeBarBackground.width(),r=(e-t)/2,n=t*this.volume/100+r;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:n}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var i=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,i).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(p.SvgIcons.volumeMute),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(p.SvgIcons.volume),this.applyButtonStyle(this.$volumeIcon)}},t.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(p.SvgIcons.pause),this.$playStopToggle.append(p.SvgIcons.stop),this.trigger(v.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(p.SvgIcons.play),this.$playStopToggle.append(p.SvgIcons.play),this.trigger(v.default.MEDIACONTROL_NOTPLAYING),_.default.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},t.prototype.mousemoveOnSeekBar=function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.trigger(v.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)},t.prototype.mouseleaveOnSeekBar=function(e){this.trigger(v.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)},t.prototype.onVolumeClick=function(e){this.setVolume(this.getVolumeFromUIEvent(e))},t.prototype.mousemoveOnVolumeBar=function(e){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(e))},t.prototype.playerResize=function(e){this.$fullscreenToggle.html("");var t=this.core.isFullscreen()?p.SvgIcons.exitFullscreen:p.SvgIcons.fullscreen;this.$fullscreenToggle.append(t),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(e.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},t.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},t.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},t.prototype.startSeekDrag=function(e){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())},t.prototype.startVolumeDrag=function(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDefault()},t.prototype.stopDrag=function(e){this.draggingSeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},t.prototype.updateDrag=function(e){if(this.draggingSeekBar){e.preventDefault();var t=e.pageX-this.$seekBarContainer.offset().left,r=t/this.$seekBarContainer.width()*100;r=Math.min(100,Math.max(r,0)),this.setSeekPercentage(r)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))},t.prototype.getVolumeFromUIEvent=function(e){var t=e.pageX-this.$volumeBarContainer.offset().left,r=t/this.$volumeBarContainer.width()*100;return r},t.prototype.toggleMute=function(){if(this.muted)return this.setVolume(this._mutedVolume||100),void(this._mutedVolume=null);this._mutedVolume=this.volume,this.setVolume(0)},t.prototype.setVolume=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!r&&p.Config.persist("volume",e);var n=function(){t.container&&t.container.isReady?t.container.setVolume(e):t.listenToOnce(t.container,v.default.CONTAINER_READY,(function(){t.container.setVolume(e)}))};this.container?n():this.listenToOnce(this,v.default.MEDIACONTROL_CONTAINERCHANGED,(function(){return n()}))},t.prototype.toggleFullscreen=function(){this.trigger(v.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()},t.prototype.onActiveContainerChanged=function(){this.fullScreenOnVideoTagSupported=null,T.default.off(this.options.playerId+":"+v.default.PLAYER_RESIZE,this.playerResize,this),this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(v.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(v.default.MEDIACONTROL_CONTAINERCHANGED)},t.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},t.prototype.hideVolumeBar=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar()}),t):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return e.$volumeBarContainer.addClass("volume-bar-hide")}),t)))},t.prototype.ended=function(){this.changeTogglePlay()},t.prototype.updateProgressBar=function(e){var t=e.start/e.total*100,r=e.current/e.total*100;this.$seekBarLoaded.css({left:t+"%",width:r-t+"%"})},t.prototype.onTimeUpdate=function(e){if(!this.draggingSeekBar){var t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.renderSeekBar()}},t.prototype.renderSeekBar=function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==R.default.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var e=(0,p.formatTime)(this.currentPositionValue),t=(0,p.formatTime)(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}},t.prototype.seek=function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left,r=t/this.$seekBarContainer.width()*100;return r=Math.min(100,Math.max(r,0)),this.container&&this.container.seekPercentage(r),this.setSeekPercentage(r),!1}},t.prototype.setKeepVisible=function(){this.keepVisible=!0},t.prototype.resetKeepVisible=function(){this.keepVisible=!1},t.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},t.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},t.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},t.prototype.show=function(e){var t=this;if(!this.disabled){var r=2e3,n=e&&e.clientX!==this.lastMouseX&&e.clientY!==this.lastMouseY;(!e||n||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(v.default.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(v.default.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return t.hide()}),r),e&&(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY));var i=!0;this.updateCursorStyle(i)}},t.prototype.hide=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isVisible()){var r=t||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var n=this.userKeepVisible||this.keepVisible,i=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(t||n||i))this.hideId=setTimeout((function(){return e.hide()}),r);else{this.trigger(v.default.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(v.default.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var a=!1;this.updateCursorStyle(a)}}}},t.prototype.updateCursorStyle=function(e){e?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")},t.prototype.settingsUpdate=function(){var e=this.getSettings();!e||this.fullScreenOnVideoTagSupported||p.Fullscreen.fullscreenEnabled()||(e.default&&(0,p.removeArrayItem)(e.default,"fullscreen"),e.left&&(0,p.removeArrayItem)(e.left,"fullscreen"),e.right&&(0,p.removeArrayItem)(e.right,"fullscreen"));var t=(0,a.default)(this.settings)!==(0,a.default)(e);t&&(this.settings=e,this.render())},t.prototype.getSettings=function(){return L.default.extend(!0,{},this.container&&this.container.settings)},t.prototype.highDefinitionUpdate=function(e){this.isHD=e;var t=e?"addClass":"removeClass";this.$hdIndicator[t]("enabled")},t.prototype.createCachedElements=function(){var e=this.$el.find(".media-control-layer");this.$duration=e.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=e.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=e.find("button.media-control-button[data-playpause]"),this.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},t.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},t.prototype.initializeIcons=function(){var e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(p.SvgIcons.play),e.find("button.media-control-button[data-pause]").append(p.SvgIcons.pause),e.find("button.media-control-button[data-stop]").append(p.SvgIcons.stop),this.$playPauseToggle.append(p.SvgIcons.play),this.$playStopToggle.append(p.SvgIcons.play),this.$volumeIcon.append(p.SvgIcons.volume),this.$fullscreenToggle.append(p.SvgIcons.fullscreen),this.$hdIndicator.append(p.SvgIcons.hd)},t.prototype.setSeekPercentage=function(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarPercentage!==e&&(this.displayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:e+"%"}),this.$seekBarScrubber.css({left:e+"%"}))},t.prototype.seekRelative=function(e){if(this.settings.seekEnabled){var t=this.container.getCurrentTime(),r=this.container.getDuration(),n=Math.min(Math.max(t+e,0),r);n=Math.min(100*n/r,100),this.container.seekPercentage(n)}},t.prototype.bindKeyAndShow=function(e,t){var r=this;this.kibo.down(e,(function(){return r.show(),t()}))},t.prototype.bindKeyEvents=function(){var e=this;if(!_.default.isMobile&&!this.options.disableKeyboardShortcuts){this.unbindKeyEvents(),this.kibo=new g.Kibo(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})),this.bindKeyAndShow("left",(function(){return e.seekRelative(-5)})),this.bindKeyAndShow("right",(function(){return e.seekRelative(5)})),this.bindKeyAndShow("shift left",(function(){return e.seekRelative(-10)})),this.bindKeyAndShow("shift right",(function(){return e.seekRelative(10)})),this.bindKeyAndShow("shift ctrl left",(function(){return e.seekRelative(-15)})),this.bindKeyAndShow("shift ctrl right",(function(){return e.seekRelative(15)}));var t=["1","2","3","4","5","6","7","8","9","0"];t.forEach((function(t){e.bindKeyAndShow(t,(function(){e.settings.seekEnabled&&e.container&&e.container.seekPercentage(10*t)}))}))}},t.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))},t.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},t.prototype.applyButtonStyle=function(e){this.buttonsColor&&e&&(0,L.default)(e).find("svg path").css("fill",this.buttonsColor)},t.prototype.destroy=function(){(0,L.default)(document).unbind("mouseup",this.stopDragHandler),(0,L.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),e.prototype.destroy.call(this)},t.prototype.configure=function(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(v.default.MEDIACONTROL_OPTIONS_CHANGE)},t.prototype.render=function(){var e=this,t=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((function(){return e.hide()}),t),this.disabled&&this.hide()),_.default.isSafari&&_.default.isMobile&&(_.default.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var r=0;return this.displayedSeekBarPercentage&&(r=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(r),n.nextTick((function(){!e.settings.seekEnabled&&e.$seekBarContainer.addClass("seek-disabled"),!_.default.isMobile&&!e.options.disableKeyboardShortcuts&&e.bindKeyEvents(),e.playerResize({width:e.options.width,height:e.options.height}),e.hideVolumeBar(0)})),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(v.default.MEDIACONTROL_RENDERED),this},t}(b.default);t.default=P,P.extend=function(e){return(0,p.extend)(P,e)},e.exports=t["default"]}).call(this,r(/*! ./../../../node_modules/node-libs-browser/node_modules/process/browser.js */"./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/media_control/public/closed-hand.cur":
/*!**********************************************************!*\
  !*** ./src/plugins/media_control/public/closed-hand.cur ***!
  \**********************************************************/
/*! no static exports found */function(e,t){e.exports="<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"},"./src/plugins/media_control/public/media-control.html":
/*!*************************************************************!*\
  !*** ./src/plugins/media_control/public/media-control.html ***!
  \*************************************************************/
/*! no static exports found */function(e,t){e.exports='<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'},"./src/plugins/media_control/public/media-control.scss":
/*!*************************************************************!*\
  !*** ./src/plugins/media_control/public/media-control.scss ***!
  \*************************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./media-control.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/poster/index.js":
/*!*************************************!*\
  !*** ./src/plugins/poster/index.js ***!
  \*************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./poster */"./src/plugins/poster/poster.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/poster/poster.js":
/*!**************************************!*\
  !*** ./src/plugins/poster/poster.js ***!
  \**************************************/
/*! no static exports found */function(e,t,r){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),a=S(i),o=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),s=S(o),l=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),u=S(l),c=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),d=S(c),h=r(/*! ../../base/ui_container_plugin */"./src/base/ui_container_plugin.js"),f=S(h),p=r(/*! ../../base/events */"./src/base/events.js"),g=S(p),m=r(/*! ../../base/template */"./src/base/template.js"),v=S(m),y=r(/*! ../../base/playback */"./src/base/playback.js"),b=S(y),A=r(/*! ../../components/error/error */"./src/components/error/error.js"),_=S(A),E=r(/*! ./public/poster.html */"./src/plugins/poster/public/poster.html"),T=S(E),k=r(/*! ../../base/utils */"./src/base/utils.js");function S(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/poster.scss */"./src/plugins/poster/public/poster.scss");var w=function(e){function t(r){(0,a.default)(this,t);var i=(0,s.default)(this,e.call(this,r));return i.hasStartedPlaying=!1,i.playRequested=!1,i.render(),n.nextTick((function(){return i.update()})),i}return(0,d.default)(t,e),(0,u.default)(t,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,v.default)(T.default)}},{key:"shouldRender",get:function(){var e=!(!this.options.poster||!this.options.poster.showForNoOp);return"html_img"!==this.container.playback.name&&(this.container.playback.getPlaybackType()!==b.default.NO_OP||e)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||void 0===this.options.poster.showOnVideoEnd}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,g.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,g.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,g.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,g.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,g.default.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,g.default.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,g.default.CONTAINER_ENDED,this.onStop)},t.prototype.onError=function(e){this.hasFatalError=e.level===_.default.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())},t.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},t.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},t.prototype.updatePlayButton=function(e){!e||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()},t.prototype.showPlayButton=function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))},t.prototype.hidePlayButton=function(){this.$playButton.hide(),this.$el.removeClass("clickable")},t.prototype.clicked=function(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.play()),!1},t.prototype.shouldHideOnPlay=function(){return!this.container.playback.isAudioOnly},t.prototype.update=function(){if(this.shouldRender){var e=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(e),this.updatePoster()}},t.prototype.updatePoster=function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()},t.prototype.showPoster=function(){this.container.disableMediaControl(),this.$el.show()},t.prototype.hidePoster=function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()},t.prototype.render=function(){if(this.shouldRender){this.$el.html(this.template());var e=this.options.poster&&void 0===this.options.poster.custom;if(e){var t=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+t+")"})}else this.options.poster&&this.$el.css({background:this.options.poster.custom});this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(k.SvgIcons.play),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var r=this.options.mediacontrol&&this.options.mediacontrol.buttons;return r&&this.$el.find("svg path").css("fill",r),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(r=this.options.mediacontrol.buttons,this.$playButton.css("color",r)),this.update(),this}},t}(f.default);t.default=w,e.exports=t["default"]}).call(this,r(/*! ./../../../node_modules/node-libs-browser/node_modules/process/browser.js */"./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/poster/public/poster.html":
/*!***********************************************!*\
  !*** ./src/plugins/poster/public/poster.html ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports='<div class="play-wrapper" data-poster></div>\n'},"./src/plugins/poster/public/poster.scss":
/*!***********************************************!*\
  !*** ./src/plugins/poster/public/poster.scss ***!
  \***********************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./poster.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/poster/public/poster.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/seek_time/index.js":
/*!****************************************!*\
  !*** ./src/plugins/seek_time/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./seek_time */"./src/plugins/seek_time/seek_time.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/seek_time/public/seek_time.html":
/*!*****************************************************!*\
  !*** ./src/plugins/seek_time/public/seek_time.html ***!
  \*****************************************************/
/*! no static exports found */function(e,t){e.exports="<span data-seek-time></span>\n<span data-duration></span>\n"},"./src/plugins/seek_time/public/seek_time.scss":
/*!*****************************************************!*\
  !*** ./src/plugins/seek_time/public/seek_time.scss ***!
  \*****************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./seek_time.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/seek_time/seek_time.js":
/*!********************************************!*\
  !*** ./src/plugins/seek_time/seek_time.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=E(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=E(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=E(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=E(u),d=r(/*! ../../base/utils */"./src/base/utils.js"),h=r(/*! ../../base/ui_core_plugin */"./src/base/ui_core_plugin.js"),f=E(h),p=r(/*! ../../base/template */"./src/base/template.js"),g=E(p),m=r(/*! ../../base/events */"./src/base/events.js"),v=E(m),y=r(/*! ../../base/playback */"./src/base/playback.js"),b=E(y),A=r(/*! ./public/seek_time.html */"./src/plugins/seek_time/public/seek_time.html"),_=E(A);function E(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/seek_time.scss */"./src/plugins/seek_time/public/seek_time.scss");var T=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.hoveringOverSeekBar=!1,n.hoverPosition=null,n.duration=null,n.firstFragDateTime=null,n.actualLiveTime=!!n.mediaControl.options.actualLiveTime,n.actualLiveTime&&(n.mediaControl.options.actualLiveServerTime?n.actualLiveServerTimeDiff=(new Date).getTime()-new Date(n.mediaControl.options.actualLiveServerTime).getTime():n.actualLiveServerTimeDiff=0),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,g.default)(_.default)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===b.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),t.prototype.bindEvents=function(){this.listenTo(this.mediaControl,v.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,v.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,v.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,v.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,v.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,v.default.CONTAINER_TIMEUPDATE,this.updateDuration))},t.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.updateDuration=function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()},t.prototype.showTime=function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()},t.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},t.prototype.calculateHoverPosition=function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))},t.prototype.getSeekTime=function(){var e=void 0,t=void 0,r=void 0,n=void 0;return this.useActualLiveTime?(this.firstFragDateTime?(n=new Date(this.firstFragDateTime),r=new Date(this.firstFragDateTime),r.setHours(0,0,0,0),t=(n.getTime()-r.getTime())/1e3+this.duration):(r=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),n=new Date(r),t=(n-r.setHours(0,0,0,0))/1e3),e=t-this.duration+this.hoverPosition*this.duration,e<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}},t.prototype.update=function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=(0,d.formatTime)(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var r=(0,d.formatTime)(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);r!==this.displayedDuration&&(this.$durationEl.text(r),this.displayedDuration=r)}else this.$durationEl.hide();this.$el.show();var n=this.mediaControl.$seekBarContainer.width(),i=this.$el.width(),a=this.hoverPosition*n;a-=i/2,a=Math.max(0,Math.min(a,n-i)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")},t.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration},t.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},t}(f.default);t.default=T,e.exports=t["default"]},"./src/plugins/sources.js":
/*!********************************!*\
  !*** ./src/plugins/sources.js ***!
  \********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=g(n),a=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),o=g(a),s=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=g(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=g(u),d=r(/*! ../base/core_plugin */"./src/base/core_plugin.js"),h=g(d),f=r(/*! ../base/events */"./src/base/events.js"),p=g(f);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,c.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core,p.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},t.prototype.onContainersCreated=function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))},(0,o.default)(t,[{key:"name",get:function(){return"sources"}}]),t}(h.default);t.default=m,e.exports=t["default"]},"./src/plugins/spinner_three_bounce/index.js":
/*!***************************************************!*\
  !*** ./src/plugins/spinner_three_bounce/index.js ***!
  \***************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./spinner_three_bounce */"./src/plugins/spinner_three_bounce/spinner_three_bounce.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/spinner_three_bounce/public/spinner.html":
/*!**************************************************************!*\
  !*** ./src/plugins/spinner_three_bounce/public/spinner.html ***!
  \**************************************************************/
/*! no static exports found */function(e,t){e.exports="<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"},"./src/plugins/spinner_three_bounce/public/spinner.scss":
/*!**************************************************************!*\
  !*** ./src/plugins/spinner_three_bounce/public/spinner.scss ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./spinner.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/spinner_three_bounce/spinner_three_bounce.js":
/*!******************************************************************!*\
  !*** ./src/plugins/spinner_three_bounce/spinner_three_bounce.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=b(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=b(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=b(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=b(u),d=r(/*! ../../base/ui_container_plugin */"./src/base/ui_container_plugin.js"),h=b(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=b(f),g=r(/*! ../../base/template */"./src/base/template.js"),m=b(g),v=r(/*! ./public/spinner.html */"./src/plugins/spinner_three_bounce/public/spinner.html"),y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/spinner.scss */"./src/plugins/spinner_three_bounce/public/spinner.scss");var A=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.template=(0,m.default)(y.default),n.showTimeout=null,n.listenTo(n.container,p.default.CONTAINER_STATE_BUFFERING,n.onBuffering),n.listenTo(n.container,p.default.CONTAINER_STATE_BUFFERFULL,n.onBufferFull),n.listenTo(n.container,p.default.CONTAINER_STOP,n.onStop),n.listenTo(n.container,p.default.CONTAINER_ENDED,n.onStop),n.listenTo(n.container,p.default.CONTAINER_ERROR,n.onStop),n.render(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]),t.prototype.onBuffering=function(){this.show()},t.prototype.onBufferFull=function(){this.hide()},t.prototype.onStop=function(){this.hide()},t.prototype.show=function(){var e=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return e.$el.show()}),300))},t.prototype.hide=function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},t.prototype.render=function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},t}(h.default);t.default=A,e.exports=t["default"]},"./src/plugins/stats/index.js":
/*!************************************!*\
  !*** ./src/plugins/stats/index.js ***!
  \************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./stats */"./src/plugins/stats/stats.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/stats/stats.js":
/*!************************************!*\
  !*** ./src/plugins/stats/stats.js ***!
  \************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=v(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=v(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=v(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=v(u),d=r(/*! ../../base/container_plugin */"./src/base/container_plugin.js"),h=v(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=v(f),g=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),m=v(g);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.setInitialAttrs(),n.reportInterval=n.options.reportInterval||5e3,n.state="IDLE",n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"stats"}}]),t.prototype.bindEvents=function(){this.listenTo(this.container.playback,p.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,p.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,p.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,p.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,p.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,p.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,p.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},t.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},t.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},t.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},t.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},t.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},t.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},t.prototype.getWatchingTime=function(){var e=Date.now()-this.watchingTimeInit;return e-this.rebufferingTime},t.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},t.prototype.onStatsAdd=function(e){m.default.extend(this.externalMetrics,e)},t.prototype.getStats=function(){var e={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return m.default.extend(e,this.externalMetrics),e},t.prototype.report=function(){this.container.statsReport(this.getStats())},t}(h.default);t.default=y,e.exports=t["default"]},"./src/plugins/strings.js":
/*!********************************!*\
  !*** ./src/plugins/strings.js ***!
  \********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=m(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=m(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=m(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=m(u),d=r(/*! ../base/utils */"./src/base/utils.js"),h=r(/*! clappr-zepto */"./node_modules/clappr-zepto/zepto.js"),f=m(h),p=r(/*! ../base/core_plugin */"./src/base/core_plugin.js"),g=m(p);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n._initializeMessages(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"strings"}}]),t.prototype.t=function(e){var t=this._language(),r=this._messages["en"],n=t&&this._messages[t]||r;return n[e]||r[e]||e},t.prototype._language=function(){return this.core.options.language||(0,d.getBrowserLanguage)()},t.prototype._initializeMessages=function(){var e={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}};this._messages=f.default.extend(!0,e,this.core.options.strings||{}),this._messages["pt-BR"]=this._messages["pt"],this._messages["en-US"]=this._messages["en"],this._messages["es-419"]=this._messages["es"],this._messages["fr-FR"]=this._messages["fr"],this._messages["tr-TR"]=this._messages["tr"],this._messages["et-EE"]=this._messages["et"],this._messages["ar-IQ"]=this._messages["ar"]},t}(g.default);t.default=v,e.exports=t["default"]},"./src/plugins/watermark/index.js":
/*!****************************************!*\
  !*** ./src/plugins/watermark/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./watermark */"./src/plugins/watermark/watermark.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},"./src/plugins/watermark/public/watermark.html":
/*!*****************************************************!*\
  !*** ./src/plugins/watermark/public/watermark.html ***!
  \*****************************************************/
/*! no static exports found */function(e,t){e.exports='<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target=_blank href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n'},"./src/plugins/watermark/public/watermark.scss":
/*!*****************************************************!*\
  !*** ./src/plugins/watermark/public/watermark.scss ***!
  \*****************************************************/
/*! no static exports found */function(e,t,r){var n,i=r(/*! !../../../../node_modules/css-loader!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./watermark.scss */"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss");"string"===typeof i&&(i=[[e.i,i,""]]);var a={singleton:!0,hmr:!0};a.transform=n,a.insertInto=void 0;r(/*! ../../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,a);i.locals&&(e.exports=i.locals)},"./src/plugins/watermark/watermark.js":
/*!********************************************!*\
  !*** ./src/plugins/watermark/watermark.js ***!
  \********************************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js"),i=b(n),a=r(/*! babel-runtime/helpers/possibleConstructorReturn */"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=b(a),s=r(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"),l=b(s),u=r(/*! babel-runtime/helpers/inherits */"./node_modules/babel-runtime/helpers/inherits.js"),c=b(u),d=r(/*! ../../base/ui_container_plugin */"./src/base/ui_container_plugin.js"),h=b(d),f=r(/*! ../../base/events */"./src/base/events.js"),p=b(f),g=r(/*! ../../base/template */"./src/base/template.js"),m=b(g),v=r(/*! ./public/watermark.html */"./src/plugins/watermark/public/watermark.html"),y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}r(/*! ./public/watermark.scss */"./src/plugins/watermark/public/watermark.scss");var A=function(e){function t(r){(0,i.default)(this,t);var n=(0,o.default)(this,e.call(this,r));return n.configure(),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,m.default)(y.default)}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,p.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,p.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,p.default.CONTAINER_OPTIONS_CHANGE,this.configure)},t.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},t.prototype.onPlay=function(){this.hidden||this.$el.show()},t.prototype.onStop=function(){this.$el.hide()},t.prototype.render=function(){this.$el.hide();var e={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(e)),this.container.$el.append(this.$el),this},t}(h.default);t.default=A,e.exports=t["default"]},"./src/vendor/index.js":
/*!*****************************!*\
  !*** ./src/vendor/index.js ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./kibo */"./src/vendor/kibo.js"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default={Kibo:i.default},e.exports=t["default"]},"./src/vendor/kibo.js":
/*!****************************!*\
  !*** ./src/vendor/kibo.js ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this.element=e||window.document,this.initialize()};n.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},n.KEY_CODES_BY_NAME={},function(){for(var e in n.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(n.KEY_NAMES_BY_CODE,e)&&(n.KEY_CODES_BY_NAME[n.KEY_NAMES_BY_CODE[e]]=+e)}(),n.MODIFIERS=["shift","ctrl","alt"],n.registerEvent=function(){return document.addEventListener?function(e,t,r){e.addEventListener(t,r,!1)}:document.attachEvent?function(e,t,r){e.attachEvent("on"+t,r)}:void 0}(),n.unregisterEvent=function(){return document.removeEventListener?function(e,t,r){e.removeEventListener(t,r,!1)}:document.detachEvent?function(e,t,r){e.detachEvent("on"+t,r)}:void 0}(),n.stringContains=function(e,t){return-1!==e.indexOf(t)},n.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},n.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},n.isString=function(e){return n.stringContains(Object.prototype.toString.call(e),"String")},n.arrayIncludes=function(){return Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}}(),n.extractModifiers=function(e){var t,r;for(t=[],r=0;r<n.MODIFIERS.length;r++)n.stringContains(e,n.MODIFIERS[r])&&t.push(n.MODIFIERS[r]);return t},n.extractKey=function(e){var t,r;for(t=n.neatString(e).split(" "),r=0;r<t.length;r++)if(!n.arrayIncludes(n.MODIFIERS,t[r]))return t[r]},n.modifiersAndKey=function(e){var t,r;return n.stringContains(e,"any")?n.neatString(e).split(" ").slice(0,2).join(" "):(t=n.extractModifiers(e),r=n.extractKey(e),r&&!n.arrayIncludes(n.MODIFIERS,r)&&t.push(r),t.join(" "))},n.keyName=function(e){return n.KEY_NAMES_BY_CODE[e+""]},n.keyCode=function(e){return+n.KEY_CODES_BY_NAME[e]},n.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<n.MODIFIERS.length;e++)this.lastModifiers[n.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),n.registerEvent(this.element,"keydown",this.downHandler),n.registerEvent(this.element,"keyup",this.upHandler),n.registerEvent(window,"unload",(function e(){n.unregisterEvent(t.element,"keydown",t.downHandler),n.unregisterEvent(t.element,"keyup",t.upHandler),n.unregisterEvent(window,"unload",e)}))},n.prototype.handler=function(e){var t=this;return function(r){var i,a,o;for(r=r||window.event,t.lastKeyCode=r.keyCode,i=0;i<n.MODIFIERS.length;i++)t.lastModifiers[n.MODIFIERS[i]]=r[n.MODIFIERS[i]+"Key"];for(n.arrayIncludes(n.MODIFIERS,n.keyName(t.lastKeyCode))&&(t.lastModifiers[n.keyName(t.lastKeyCode)]=!0),a=t["keys"+n.capitalize(e)],i=0;i<a.any.length;i++)!1===a.any[i](r)&&r.preventDefault&&r.preventDefault();if(o=t.lastModifiersAndKey(),a[o])for(i=0;i<a[o].length;i++)!1===a[o][i](r)&&r.preventDefault&&r.preventDefault()}},n.prototype.registerKeys=function(e,t,r){var i,a,o=this["keys"+n.capitalize(e)];for(n.isString(t)&&(t=[t]),i=0;i<t.length;i++)a=t[i],a=n.modifiersAndKey(a+""),o[a]?o[a].push(r):o[a]=[r];return this},n.prototype.unregisterKeys=function(e,t,r){var i,a,o,s=this["keys"+n.capitalize(e)];for(n.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(o=t[i],o=n.modifiersAndKey(o+""),null===r)delete s[o];else if(s[o])for(a=0;a<s[o].length;a++)if(String(s[o][a])===String(r)){s[o].splice(a,1);break}return this},n.prototype.off=function(e){return this.unregisterKeys("down",e,null)},n.prototype.delegate=function(e,t,r){return null!==r||void 0!==r?this.registerKeys(e,t,r):this.unregisterKeys(e,t,r)},n.prototype.down=function(e,t){return this.delegate("down",e,t)},n.prototype.up=function(e,t){return this.delegate("up",e,t)},n.prototype.lastKey=function(e){return e?this.lastModifiers[e]:n.keyName(this.lastKeyCode)},n.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<n.MODIFIERS.length;t++)this.lastKey(n.MODIFIERS[t])&&e.push(n.MODIFIERS[t]);return n.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")},t.default=n,e.exports=t["default"]}})}))},"621a":function(e,t,r){"use strict";var n=r("da84"),i=r("83ab"),a=r("a981"),o=r("9112"),s=r("e2cc"),l=r("d039"),u=r("19aa"),c=r("a691"),d=r("50c4"),h=r("0b25"),f=r("77a7"),p=r("e163"),g=r("d2bb"),m=r("241c").f,v=r("9bf2").f,y=r("81d5"),b=r("d44e"),A=r("69f3"),_=A.get,E=A.set,T="ArrayBuffer",k="DataView",S="prototype",w="Wrong length",R="Wrong index",C=n[T],L=C,I=n[k],O=I&&I[S],D=Object.prototype,P=n.RangeError,x=f.pack,N=f.unpack,M=function(e){return[255&e]},F=function(e){return[255&e,e>>8&255]},j=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},U=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return x(e,23,4)},G=function(e){return x(e,52,8)},K=function(e,t){v(e[S],t,{get:function(){return _(this)[t]}})},V=function(e,t,r,n){var i=h(r),a=_(e);if(i+t>a.byteLength)throw P(R);var o=_(a.buffer).bytes,s=i+a.byteOffset,l=o.slice(s,s+t);return n?l:l.reverse()},Y=function(e,t,r,n,i,a){var o=h(r),s=_(e);if(o+t>s.byteLength)throw P(R);for(var l=_(s.buffer).bytes,u=o+s.byteOffset,c=n(+i),d=0;d<t;d++)l[u+d]=c[a?d:t-d-1]};if(a){if(!l((function(){C(1)}))||!l((function(){new C(-1)}))||l((function(){return new C,new C(1.5),new C(NaN),C.name!=T}))){L=function(e){return u(this,L),new C(h(e))};for(var H,W=L[S]=C[S],z=m(C),$=0;z.length>$;)(H=z[$++])in L||o(L,H,C[H]);W.constructor=L}g&&p(O)!==D&&g(O,D);var q=new I(new L(2)),X=O.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||s(O,{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},{unsafe:!0})}else L=function(e){u(this,L,T);var t=h(e);E(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},I=function(e,t,r){u(this,I,k),u(e,L,k);var n=_(e).byteLength,a=c(t);if(a<0||a>n)throw P("Wrong offset");if(r=void 0===r?n-a:d(r),a+r>n)throw P(w);E(this,{buffer:e,byteLength:r,byteOffset:a}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=a)},i&&(K(L,"byteLength"),K(I,"buffer"),K(I,"byteLength"),K(I,"byteOffset")),s(I[S],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return U(V(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return U(V(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(V(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(V(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Y(this,1,e,M,t)},setUint8:function(e,t){Y(this,1,e,M,t)},setInt16:function(e,t){Y(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Y(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Y(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Y(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Y(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Y(this,8,e,G,t,arguments.length>2?arguments[2]:void 0)}});b(L,T),b(I,k),e.exports={ArrayBuffer:L,DataView:I}},"649e":function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").some,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},"72f7":function(e,t,r){"use strict";var n=r("ebb5").exportTypedArrayMethod,i=r("d039"),a=r("da84"),o=a.Uint8Array,s=o&&o.prototype||{},l=[].toString,u=[].join;i((function(){l.call({})}))&&(l=function(){return u.call(this)});var c=s.toString!=l;n("toString",l,c)},"735e":function(e,t,r){"use strict";var n=r("ebb5"),i=r("81d5"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("fill",(function(e){return i.apply(a(this),arguments)}))},"74e8":function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("83ab"),o=r("8aa7"),s=r("ebb5"),l=r("621a"),u=r("19aa"),c=r("5c6c"),d=r("9112"),h=r("5e89"),f=r("50c4"),p=r("0b25"),g=r("182d"),m=r("a04b"),v=r("5135"),y=r("f5df"),b=r("861d"),A=r("d9b5"),_=r("7c73"),E=r("d2bb"),T=r("241c").f,k=r("a078"),S=r("b727").forEach,w=r("2626"),R=r("9bf2"),C=r("06cf"),L=r("69f3"),I=r("7156"),O=L.get,D=L.set,P=R.f,x=C.f,N=Math.round,M=i.RangeError,F=l.ArrayBuffer,j=l.DataView,U=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_CONSTRUCTOR,G=s.TYPED_ARRAY_TAG,K=s.TypedArray,V=s.TypedArrayPrototype,Y=s.aTypedArrayConstructor,H=s.isTypedArray,W="BYTES_PER_ELEMENT",z="Wrong length",$=function(e,t){var r=0,n=t.length,i=new(Y(e))(n);while(n>r)i[r]=t[r++];return i},q=function(e,t){P(e,t,{get:function(){return O(this)[t]}})},X=function(e){var t;return e instanceof F||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},Z=function(e,t){return H(e)&&!A(t)&&t in e&&h(+t)&&t>=0},J=function(e,t){return t=m(t),Z(e,t)?c(2,e[t]):x(e,t)},Q=function(e,t,r){return t=m(t),!(Z(e,t)&&b(r)&&v(r,"value"))||v(r,"get")||v(r,"set")||r.configurable||v(r,"writable")&&!r.writable||v(r,"enumerable")&&!r.enumerable?P(e,t,r):(e[t]=r.value,e)};a?(U||(C.f=J,R.f=Q,q(V,"buffer"),q(V,"byteOffset"),q(V,"byteLength"),q(V,"length")),n({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:J,defineProperty:Q}),e.exports=function(e,t,r){var a=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",l="get"+e,c="set"+e,h=i[s],m=h,v=m&&m.prototype,y={},A=function(e,t){var r=O(e);return r.view[l](t*a+r.byteOffset,!0)},R=function(e,t,n){var i=O(e);r&&(n=(n=N(n))<0?0:n>255?255:255&n),i.view[c](t*a+i.byteOffset,n,!0)},C=function(e,t){P(e,t,{get:function(){return A(this,t)},set:function(e){return R(this,t,e)},enumerable:!0})};U?o&&(m=t((function(e,t,r,n){return u(e,m,s),I(function(){return b(t)?X(t)?void 0!==n?new h(t,g(r,a),n):void 0!==r?new h(t,g(r,a)):new h(t):H(t)?$(m,t):k.call(m,t):new h(p(t))}(),e,m)})),E&&E(m,K),S(T(h),(function(e){e in m||d(m,e,h[e])})),m.prototype=v):(m=t((function(e,t,r,n){u(e,m,s);var i,o,l,c=0,d=0;if(b(t)){if(!X(t))return H(t)?$(m,t):k.call(m,t);i=t,d=g(r,a);var h=t.byteLength;if(void 0===n){if(h%a)throw M(z);if(o=h-d,o<0)throw M(z)}else if(o=f(n)*a,o+d>h)throw M(z);l=o/a}else l=p(t),o=l*a,i=new F(o);D(e,{buffer:i,byteOffset:d,byteLength:o,length:l,view:new j(i)});while(c<l)C(e,c++)})),E&&E(m,K),v=m.prototype=_(V)),v.constructor!==m&&d(v,"constructor",m),d(v,B,m),G&&d(v,G,s),y[s]=m,n({global:!0,forced:m!=h,sham:!U},y),W in m||d(m,W,a),W in v||d(v,W,a),w(s)}):e.exports=function(){}},"77a7":function(e,t){var r=Math.abs,n=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2,s=function(e,t,s){var l,u,c,d=new Array(s),h=8*s-t-1,f=(1<<h)-1,p=f>>1,g=23===t?n(2,-24)-n(2,-77):0,m=e<0||0===e&&1/e<0?1:0,v=0;for(e=r(e),e!=e||e===1/0?(u=e!=e?1:0,l=f):(l=i(a(e)/o),e*(c=n(2,-l))<1&&(l--,c*=2),e+=l+p>=1?g/c:g*n(2,1-p),e*c>=2&&(l++,c/=2),l+p>=f?(u=0,l=f):l+p>=1?(u=(e*c-1)*n(2,t),l+=p):(u=e*n(2,p-1)*n(2,t),l=0));t>=8;d[v++]=255&u,u/=256,t-=8);for(l=l<<t|u,h+=t;h>0;d[v++]=255&l,l/=256,h-=8);return d[--v]|=128*m,d},l=function(e,t){var r,i=e.length,a=8*i-t-1,o=(1<<a)-1,s=o>>1,l=a-7,u=i-1,c=e[u--],d=127&c;for(c>>=7;l>0;d=256*d+e[u],u--,l-=8);for(r=d&(1<<-l)-1,d>>=-l,l+=t;l>0;r=256*r+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===o)return r?NaN:c?-1/0:1/0;r+=n(2,t),d-=s}return(c?-1:1)*r*n(2,d-t)};e.exports={pack:s,unpack:l}},"82f8":function(e,t,r){"use strict";var n=r("ebb5"),i=r("4d64").includes,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("includes",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},"8aa7":function(e,t,r){var n=r("da84"),i=r("d039"),a=r("1c7e"),o=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,l=n.Int8Array;e.exports=!o||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!a((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new s(2),1,void 0).length}))},"9a8c":function(e,t,r){"use strict";var n=r("ebb5"),i=r("145e"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("copyWithin",(function(e,t){return i.call(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},a078:function(e,t,r){var n=r("7b0b"),i=r("50c4"),a=r("35a1"),o=r("e95a"),s=r("0366"),l=r("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,r,u,c,d,h,f=n(e),p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=a(f);if(void 0!=v&&!o(v)){d=v.call(f),h=d.next,f=[];while(!(c=h.call(d)).done)f.push(c.value)}for(m&&p>2&&(g=s(g,arguments[2],2)),r=i(f.length),u=new(l(this))(r),t=0;r>t;t++)u[t]=m?g(f[t],t):f[t];return u}},a975:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").every,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("every",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},ab44:function(e,t,r){(function(t){(function(t,r){e.exports=r()})(0,(function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?g(e):t}function v(e){var t=p();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function y(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=h(e),null===e)break;return e}function b(e,t,r){return b="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=y(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},b(e,t,r||e)}function A(e,t){return T(e)||S(e,t)||w(e,t)||L()}function _(e){return E(e)||k(e)||w(e)||C()}function E(e){if(Array.isArray(e))return R(e)}function T(e){if(Array.isArray(e))return e}function k(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function S(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(r.push(o.value),t&&r.length===t)break}catch(l){i=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw a}}return r}}function w(e,t){if(e){if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=w(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var n=arguments[1],i=0;while(i<r){var a=t[i];if(e.call(n,a,i,t))return a;i++}}}),Object.entries||(Object.entries=function(e){var t=Object.keys(e),r=t.length,n=new Array(r);while(r--)n[r]=[t[r],e[t[r]]];return n}),Object.values||(Object.values=function(e){var t=Object.keys(e),r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var n=arguments[1],i=0;while(i<r){var a=t[i];if(e.call(n,a,i,t))return i;i++}return-1},configurable:!0,writable:!0});var O="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",D={mp4:O},P=function(){var e,t,r,n,i,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],A=["after","prepend","before","append"],_=c.createElement("table"),E=c.createElement("tr"),T={tr:c.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:E,th:E,"*":c.createElement("div")},k=/complete|loaded|interactive/,S=/^[\w-]*$/,w={},R=w.toString,C={},L=c.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};function D(e){return null==e?String(e):w[R.call(e)]||"object"}function P(e){return"function"==D(e)}function x(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==D(e)}function F(e){return M(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){var t=!!e&&"length"in e&&e.length,n=r.type(e);return"function"!=n&&!x(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return l.call(e,(function(e){return null!=e}))}function B(e){return e.length>0?r.fn.concat.apply([],e):e}function G(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function K(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||f[G(e)]?t:t+"px"}function Y(e){var t,r;return d[e]||(t=c.createElement(e),c.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),d[e]=r),d[e]}function H(e){return"children"in e?u.call(e.children):r.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function W(e,t){var r,n=e?e.length:0;for(r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function z(r,n,i){for(t in n)i&&(F(n[t])||O(n[t]))?(F(n[t])&&!F(r[t])&&(r[t]={}),O(n[t])&&!O(r[t])&&(r[t]=[]),z(r[t],n[t],i)):n[t]!==e&&(r[t]=n[t])}function $(e,t){return null==t?r(e):r(e).filter(t)}function q(e,t,r,n){return P(t)?t.call(e,r,n):t}function X(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function Z(t,r){var n=t.className||"",i=n&&n.baseVal!==e;if(r===e)return i?n.baseVal:n;i?n.baseVal=r:t.className=r}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?r.parseJSON(e):e):e}catch(t){return e}}function Q(e,t){t(e);for(var r=0,n=e.childNodes.length;r<n;r++)Q(e.childNodes[r],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,a=!i;return a&&(i=L).appendChild(e),n=~C.qsa(i,t).indexOf(e),a&&L.removeChild(e),n},i=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,r){return e.indexOf(t)==r}))},C.fragment=function(t,n,i){var a,o,s;return g.test(t)&&(a=r(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in T||(n="*"),s=T[n],s.innerHTML=""+t,a=r.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),F(i)&&(o=r(a),r.each(i,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new W(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,n){var i;if(!t)return C.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=C.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}else{if(P(t))return r(c).ready(t);if(C.isZ(t))return t;if(O(t))i=U(t);else if(M(t))i=[t],t=null;else if(p.test(t))i=C.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}}return C.Z(i,t)},r=function(e,t){return C.init(e,t)},r.extend=function(e){var t,r=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=r.shift()),r.forEach((function(r){z(e,r,t)})),e},C.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],a=n||i?t.slice(1):t,o=S.test(a);return e.getElementById&&o&&n?(r=e.getElementById(a))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},r.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},r.type=D,r.isFunction=P,r.isWindow=x,r.isArray=O,r.isPlainObject=F,r.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},r.isNumeric=function(e){var t=Number(e),r=typeof e;return null!=e&&"boolean"!=r&&("string"!=r||e.length)&&!isNaN(t)&&isFinite(t)||!1},r.inArray=function(e,t,r){return o.indexOf.call(t,e,r)},r.camelCase=i,r.trim=function(e){return null==e?"":String.prototype.trim.call(e)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(e,t){var r,n,i,a=[];if(j(e))for(n=0;n<e.length;n++)r=t(e[n],n),null!=r&&a.push(r);else for(i in e)r=t(e[i],i),null!=r&&a.push(r);return B(a)},r.each=function(e,t){var r,n;if(j(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},r.grep=function(e,t){return l.call(e,t)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),r.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,r=[];for(e=0;e<arguments.length;e++)t=arguments[e],r[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,r)},map:function(e){return r(r.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return r(u.apply(this,arguments))},ready:function(e){return k.test(c.readyState)&&c.body?e(r):c.addEventListener("DOMContentLoaded",(function(){e(r)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,r){return!1!==e.call(t,r,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):r(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return r(a(this.concat(r(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var n=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||n.push(this)}));else{var i="string"==typeof t?this.filter(t):j(t)&&P(t.item)?u.call(t):r(t);this.forEach((function(e){i.indexOf(e)<0&&n.push(e)}))}return r(n)},has:function(e){return this.filter((function(){return M(e)?r.contains(this,e):r(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:r(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:r(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?r(e).filter((function(){var e=this;return o.some.call(n,(function(t){return r.contains(t,e)}))})):1==this.length?r(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):r(),t},closest:function(e,t){var n=[],i="object"==typeof e&&r(e);return this.each((function(r,a){while(a&&!(i?i.indexOf(a)>=0:C.matches(a,e)))a=a!==t&&!N(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),r(n)},parents:function(e){var t=[],n=this;while(n.length>0)n=r.map(n,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return $(t,e)},parent:function(e){return $(a(this.pluck("parentNode")),e)},children:function(e){return $(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return $(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return r.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=Y(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var n=r(e).get(0),i=n.parentNode||this.length>1;return this.each((function(a){r(this).wrapAll(t?e.call(this,a):i?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){var t;r(this[0]).before(e=r(e));while((t=e.children()).length)e=t.first();r(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(n){var i=r(this),a=i.contents(),o=t?e.call(this,n):e;a.length?a.wrapAll(o):i.append(o)}))},unwrap:function(){return this.parent().each((function(){r(this).replaceWith(r(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()}))},prev:function(e){return r(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return r(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var n=this.innerHTML;r(this).empty().append(q(this,e,t,n))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var r=q(this,e,t,this.textContent);this.textContent=null==r?"":""+r})):0 in this?this.pluck("textContent").join(""):null},attr:function(r,n){var i;return"string"!=typeof r||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(r))for(t in r)X(this,t,r[t]);else X(this,r,q(this,n,e,this.getAttribute(r)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(r))?i:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){X(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(r){this[e]=q(this,t,r,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(t,r){var n="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,r):this.attr(n);return null!==i?J(i):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=q(this,e,t,this.value)}))):this[0]&&(this[0].multiple?r(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=r(this),i=q(this,e,t,n.offset()),a=n.offsetParent().offset(),o={top:i.top-a.top,left:i.left-a.left};"static"==n.css("position")&&(o["position"]="relative"),n.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!r.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[i(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(O(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return r.each(e,(function(e,t){o[t]=a.style[i(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==D(e))n||0===n?l=G(e)+":"+V(e,n):this.each((function(){this.style.removeProperty(G(e))}));else for(t in e)e[t]||0===e[t]?l+=G(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(G(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(r(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Z(e))}),K(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){n=[];var i=Z(this),a=q(this,e,t,i);a.split(/\s+/g).forEach((function(e){r(this).hasClass(e)||n.push(e)}),this),n.length&&Z(this,i+(i?" ":"")+n.join(" "))}})):this},removeClass:function(t){return this.each((function(r){if("className"in this){if(t===e)return Z(this,"");n=Z(this),q(this,t,r,n).split(/\s+/g).forEach((function(e){n=n.replace(K(e)," ")})),Z(this,n.trim())}}))},toggleClass:function(t,n){return t?this.each((function(i){var a=r(this),o=q(this,t,i,Z(this));o.split(/\s+/g).forEach((function(t){(n===e?!a.hasClass(t):n)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var r="scrollTop"in this[0];return t===e?r?this[0].scrollTop:this[0].pageYOffset:this.each(r?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var r="scrollLeft"in this[0];return t===e?r?this[0].scrollLeft:this[0].pageXOffset:this.each(r?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(r(e).css("margin-top"))||0,n.left-=parseFloat(r(e).css("margin-left"))||0,i.top+=parseFloat(r(t[0]).css("border-top-width"))||0,i.left+=parseFloat(r(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent||c.body;while(e&&!v.test(e.nodeName)&&"static"==r(e).css("position"))e=e.offsetParent;return e}))}},r.fn.detach=r.fn.remove,["width","height"].forEach((function(t){var n=t.replace(/./,(function(e){return e[0].toUpperCase()}));r.fn[t]=function(i){var a,o=this[0];return i===e?x(o)?o["inner"+n]:N(o)?o.documentElement["scroll"+n]:(a=this.offset())&&a[t]:this.each((function(e){o=r(this),o.css(t,q(this,i,e,o[t]()))}))}})),A.forEach((function(t,n){var i=n%2;r.fn[t]=function(){var t,a,o=r.map(arguments,(function(n){var i=[];return t=D(n),"array"==t?(n.forEach((function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(C.fragment(t)))})),i):"object"==t||null==n?n:C.fragment(n)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var l=r.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return r(e).remove();a.insertBefore(e,t),l&&Q(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t["eval"].call(t,e.innerHTML)}}))}))}))},r.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return r(e)[t](this),this}})),C.Z.prototype=W.prototype=r.fn,C.uniq=a,C.deserializeValue=J,r.zepto=C,r}();window.Zepto=P,void 0===window.$&&(window.$=P),function(e){var t,r,n=+new Date,i=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=i.createElement("a");function h(t,r,n){var i=e.Event(r);return e(t).trigger(i,n),!i.isDefaultPrevented()}function f(e,t,r,n){if(e.global)return h(t||i,r,n)}function p(t){t.global&&0===e.active++&&f(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&f(t,null,"ajaxStop")}function m(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===f(t,r,"ajaxBeforeSend",[e,t]))return!1;f(t,r,"ajaxSend",[e,t])}function v(e,t,r,n){var i=r.context,a="success";r.success.call(i,e,a,t),n&&n.resolveWith(i,[e,a,t]),f(r,i,"ajaxSuccess",[t,r,e]),b(a,t,r)}function y(e,t,r,n,i){var a=n.context;n.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),f(n,a,"ajaxError",[r,n,e||t]),b(t,r,n)}function b(e,t,r){var n=r.context;r.complete.call(n,t,e),f(r,n,"ajaxComplete",[t,r]),g(r)}function A(e,t,r){if(r.dataFilter==_)return e;var n=r.context;return r.dataFilter.call(n,e,t)}function _(){}function E(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}function T(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function k(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function S(t,r,n,i){return e.isFunction(r)&&(i=n,n=r,r=void 0),e.isFunction(n)||(i=n,n=void 0),{url:t,data:r,success:n,dataType:i}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,r){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+n++,u=i.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return r&&r.promise(h),e(u).on("load error",(function(n,i){clearTimeout(o),e(u).off().remove(),"error"!=n.type&&a?v(a[0],h,t,r):y(null,i||"error",h,t,r),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===m(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),i.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:_},e.ajax=function(n){var a,o,s=e.extend({},n||{}),l=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===s[t]&&(s[t]=e.ajaxSettings[t]);p(s),s.crossDomain||(a=i.createElement("a"),a.href=s.url,a.href=a.href,s.crossDomain=d.protocol+"//"+d.host!==a.protocol+"//"+a.host),s.url||(s.url=window.location.toString()),(o=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,o)),k(s);var u=s.dataType,h=/\?.+=\?/.test(s.url);if(h&&(u="jsonp"),!1!==s.cache&&(n&&!0===n.cache||"script"!=u&&"jsonp"!=u)||(s.url=T(s.url,"_="+Date.now())),"jsonp"==u)return h||(s.url=T(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),e.ajaxJSONP(s,l);var f,g=s.accepts[u],b={},S=function(e,t){b[e.toLowerCase()]=[e,t]},w=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:window.location.protocol,R=s.xhr(),C=R.setRequestHeader;if(l&&l.promise(R),s.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",g||"*/*"),(g=s.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),R.overrideMimeType&&R.overrideMimeType(g)),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&S("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(r in s.headers)S(r,s.headers[r]);if(R.setRequestHeader=S,R.onreadystatechange=function(){if(4==R.readyState){R.onreadystatechange=_,clearTimeout(f);var t,r=!1;if(R.status>=200&&R.status<300||304==R.status||0==R.status&&"file:"==w){if(u=u||E(s.mimeType||R.getResponseHeader("content-type")),"arraybuffer"==R.responseType||"blob"==R.responseType)t=R.response;else{t=R.responseText;try{t=A(t,u,s),"script"==u?(0,eval)(t):"xml"==u?t=R.responseXML:"json"==u&&(t=c.test(t)?null:e.parseJSON(t))}catch(n){r=n}if(r)return y(r,"parsererror",R,s,l)}v(t,R,s,l)}else y(R.statusText||null,R.status?"error":"abort",R,s,l)}},!1===m(R,s))return R.abort(),y(null,"abort",R,s,l),R;var L=!("async"in s)||s.async;if(R.open(s.type,s.url,L,s.username,s.password),s.xhrFields)for(r in s.xhrFields)R[r]=s.xhrFields[r];for(r in b)C.apply(R,b[r]);return s.timeout>0&&(f=setTimeout((function(){R.onreadystatechange=_,R.abort(),y(null,"timeout",R,s,l)}),s.timeout)),R.send(s.data?s.data:null),R},e.get=function(){return e.ajax(S.apply(null,arguments))},e.post=function(){var t=S.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=S.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,r,n){if(!this.length)return this;var i,o=this,s=t.split(/\s/),l=S(t,r,n),u=l.success;return s.length>1&&(l.url=s[0],i=s[1]),l.success=function(t){o.html(i?e("<div>").html(t.replace(a,"")).find(i):t),u&&u.apply(o,arguments)},e.ajax(l),this};var w=encodeURIComponent;function R(t,r,n,i){var a,o=e.isArray(r),s=e.isPlainObject(r);e.each(r,(function(r,l){a=e.type(l),i&&(r=n?i:i+"["+(s||"object"==a||"array"==a?r:"")+"]"),!i&&o?t.add(l.name,l.value):"array"==a||!n&&"object"==a?R(t,l,n,r):t.add(r,l)}))}e.param=function(t,r){var n=[];return n.add=function(t,r){e.isFunction(r)&&(r=r()),null==r&&(r=""),this.push(w(t)+"="+w(r))},R(n,t,r),n.join("&").replace(/%20/g,"+")}}(P),function(e){e.Callbacks=function(t){t=e.extend({},t);var r,n,i,a,o,s,l=[],u=!t.once&&[],c=function(e){for(r=t.memory&&e,n=!0,s=a||0,a=0,o=l.length,i=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){r=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):r?l.length=0:d.disable())},d={add:function(){if(l){var n=l.length,s=function(r){e.each(r,(function(e,r){"function"===typeof r?t.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==typeof r&&s(r)}))};s(arguments),i?o=l.length:r&&(a=n,c(r))}return this},remove:function(){return l&&e.each(arguments,(function(t,r){var n;while((n=e.inArray(r,l,n))>-1)l.splice(n,1),i&&(n<=o&&--o,n<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=r=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,r||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!n}};return d}}(P),function(e){var t=Array.prototype.slice;function r(t){var n=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",a={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r((function(r){e.each(n,(function(n,i){var s=e.isFunction(t[n])&&t[n];o[i[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var n=this===a?r.promise():this,o=s?[t]:arguments;r[i[0]+"With"](n,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(n,(function(e,t){var r=t[2],s=t[3];a[t[1]]=r.add,s&&r.add((function(){i=s}),n[1^e][2].disable,n[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=r.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(n){var i,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||n&&e.isFunction(n.promise)?l:0,d=1===c?n:r(),h=function(e,r,n){return function(a){r[e]=this,n[e]=arguments.length>1?t.call(arguments):a,n===i?d.notifyWith(r,n):--c||d.resolveWith(r,n)}};if(l>1)for(i=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,i)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=r}(P),function(e){var t,r=1,n=Array.prototype.slice,i=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=r++)}function h(e,t,r,n){if(t=f(t),t.ns)var i=p(t.ns);return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||d(e.fn)===d(r))&&(!n||e.sel==n)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function g(e,t){return e.del&&!l&&e.e in u||!!t}function m(e){return c[e]||l&&u[e]||e}function v(r,n,i,a,s,l,u){var h=d(r),p=o[h]||(o[h]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(i);var o=f(n);o.fn=i,o.sel=s,o.e in c&&(i=function(t){var r=t.relatedTarget;if(!r||r!==this&&!e.contains(this,r))return o.fn.apply(this,arguments)}),o.del=l;var d=l||i;o.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=a;var n=d.apply(r,e._args==t?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},o.i=p.length,p.push(o),"addEventListener"in r&&r.addEventListener(m(o.e),o.proxy,g(o,u))}))}function y(e,t,r,n,i){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,r,n).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,g(t,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:v,remove:y},e.proxy=function(t,r){var o=2 in arguments&&n.call(arguments,2);if(i(t)){var s=function(){return t.apply(r,o?o.concat(n.call(arguments)):arguments)};return s._zid=d(t),s}if(a(r))return o?(o.unshift(t[r],t),e.proxy.apply(null,o)):e.proxy(t[r],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,r){return this.on(e,t,r)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var b=function(){return!0},A=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function T(r,n){return!n&&r.isDefaultPrevented||(n||(n=r),e.each(E,(function(e,t){var i=n[e];r[e]=function(){return this[t]=b,i&&i.apply(n,arguments)},r[t]=A})),r.timeStamp||(r.timeStamp=Date.now()),(n.defaultPrevented!==t?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(r.isDefaultPrevented=b)),r}function k(e){var r,n={originalEvent:e};for(r in e)_.test(r)||e[r]===t||(n[r]=e[r]);return T(n,e)}e.fn.delegate=function(e,t,r){return this.on(t,e,r)},e.fn.undelegate=function(e,t,r){return this.off(t,e,r)},e.fn.live=function(t,r){return e(document.body).delegate(this.selector,t,r),this},e.fn.die=function(t,r){return e(document.body).undelegate(this.selector,t,r),this},e.fn.on=function(r,o,s,l,u){var c,d,h=this;return r&&!a(r)?(e.each(r,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||i(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=A),h.each((function(t,i){u&&(c=function(e){return y(i,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var r,a=e(t.target).closest(o,i).get(0);if(a&&a!==i)return r=e.extend(k(t),{currentTarget:a,liveFired:i}),(c||l).apply(a,[r].concat(n.call(arguments,1)))}),v(i,r,l,s,o,d||c)})))},e.fn.off=function(r,n,o){var s=this;return r&&!a(r)?(e.each(r,(function(e,t){s.off(e,n,t)})),s):(a(n)||i(o)||!1===o||(o=n,n=t),!1===o&&(o=A),s.each((function(){y(this,r,o,n)})))},e.fn.trigger=function(t,r){return t=a(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=r,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,r)}))},e.fn.triggerHandler=function(t,r){var n,i;return this.each((function(o,s){n=k(a(t)?e.Event(t):t),n._args=r,n.target=s,e.each(h(s,t.type||t),(function(e,t){if(i=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(t=e,e=t.type);var r=document.createEvent(s[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),T(r)}}(P),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(r,n){try{return e(r,n)}catch(t){return null}}}}(),function(e){var t=e.zepto,r=t.qsa,n=t.matches;function i(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(i(this))return this},hidden:function(){if(!i(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,r){if(e===r)return this},contains:function(t,r,n){if(e(this).text().indexOf(n)>-1)return this},has:function(e,r,n){if(t.qsa(this,n).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=o.exec(e);if(i&&i[2]in a&&(r=a[i[2]],n=i[3],e=i[1],n)){var s=Number(n);n=isNaN(s)?n.replace(/^["']|["']$/g,""):s}return t(e,r,n)}t.qsa=function(n,i){return u(i,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(n).addClass(l),a="."+l+" "+a);var d=r(n,a)}catch(h){throw console.error("error performing selector: %o",i),h}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,r,i){return(!t||n(e,t))&&(!r||r.call(e,null,i)===e)}))}}(P);var x=P,N=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],M=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],F={},j=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}},U=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!e}catch(t){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},B=function(e){var t,r=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===r[1]){if(t=e.match(/\bOPR\/(\d+)/),null!=t)return{name:"Opera",version:parseInt(t[1])};if(t=e.match(/\bEdge\/(\d+)/),null!=t)return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(r.splice(1,1,"Android WebView"),r.splice(2,1,t[1]));return r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:r[0],version:parseInt(r[1])}},G=function(){var e,t={},r=F.userAgent.toLowerCase(),n=I(N);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new RegExp(i.identifier.toLowerCase()),o=a.exec(r);if(null!=o&&o[1]){if(t.name=i.name,t.group=i.group,i.versionIdentifier){var s=new RegExp(i.versionIdentifier.toLowerCase()),l=s.exec(r);null!=l&&l[1]&&K(l[1],t)}else K(o[1],t);break}}}catch(u){n.e(u)}finally{n.f()}return t},K=function(e,t){var r=e.split(".",2);t.fullVersion=e,r[0]&&(t.majorVersion=parseInt(r[0])),r[1]&&(t.minorVersion=parseInt(r[1]))},V=function(){var e,t={},r=F.userAgent.toLowerCase(),n=I(M);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new RegExp(i.identifier.toLowerCase()),o=a.exec(r);if(null!=o){if(t.name=i.name,t.group=i.group,i.version)Y(i.version,i.versionSeparator?i.versionSeparator:".",t);else if(o[1])Y(o[1],i.versionSeparator?i.versionSeparator:".",t);else if(i.versionIdentifier){var s=new RegExp(i.versionIdentifier.toLowerCase()),l=s.exec(r);null!=l&&l[1]&&Y(l[1],i.versionSeparator?i.versionSeparator:".",t)}break}}}catch(u){n.e(u)}finally{n.f()}return t},Y=function(e,t,r){var n="["==t.substr(0,1)?new RegExp(t,"g"):t,i=e.split(n,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),r.fullVersion=e,i&&i[0]&&(r.majorVersion=parseInt(i[0])),i&&i[1]&&(r.minorVersion=parseInt(i[1]))},H=function(){var e={};return e.width=x(window).width(),e.height=x(window).height(),e},W=function(){switch(window.orientation){case-90:case 90:F.viewport.orientation="landscape";break;default:F.viewport.orientation="portrait";break}},z=function(e){var t=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,r=t.exec(e),n=r&&(r[1]||r[2])||"";return n},$=B(navigator.userAgent);F.isEdge=/edge/i.test(navigator.userAgent),F.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!F.isEdge,F.isSafari=/safari/i.test(navigator.userAgent)&&!F.isChrome&&!F.isEdge,F.isFirefox=/firefox/i.test(navigator.userAgent),F.isLegacyIE=!!window.ActiveXObject,F.isIE=F.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),F.isIE11=/trident.*rv:11/i.test(navigator.userAgent),F.isChromecast=F.isChrome&&/CrKey/i.test(navigator.userAgent),F.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),F.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),F.isAndroid=/Android/i.test(navigator.userAgent),F.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),F.isWin8App=/MSAppHost/i.test(navigator.userAgent),F.isWiiU=/WiiU/i.test(navigator.userAgent),F.isPS4=/PlayStation 4/i.test(navigator.userAgent),F.hasLocalstorage=j(),F.hasFlash=U(),F.name=$.name,F.version=$.version,F.userAgent=navigator.userAgent,F.data=G(),F.os=V(),F.viewport=H(),F.device=z(F.userAgent),"undefined"!==typeof window.orientation&&W();var q={},X=[],Z=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),J=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function Q(e,t){if(t)for(var r in t){var n=Object.getOwnPropertyDescriptor(t,r);n?Object.defineProperty(e,r,n):e[r]=t[r]}return e}function ee(e,t){var r=function(e){d(n,e);var r=v(n);function n(){var e;a(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=r.call.apply(r,[this].concat(o)),t.initialize&&t.initialize.apply(g(e),o),e}return n}(e);return Q(r.prototype,t),r}function te(e,t){if(!isFinite(e))return"--:--";e*=1e3,e=parseInt(e/1e3);var r=e%60;e=parseInt(e/60);var n=e%60;e=parseInt(e/60);var i=e%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",i<1&&(o+="00:")),(i&&i>0||t)&&(o+=("0"+i).slice(-2)+":"),o+=("0"+n).slice(-2)+":",o+=("0"+r).slice(-2),o.trim()}var re={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"===typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},ne=function(){function e(){a(this,e)}return s(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(t){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return F.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(F.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(r){return!1}}}]),e}(),ie=function(){function e(){a(this,e)}return s(e,null,[{key:"parse",value:function(e){var t,r=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a={};while(t=n.exec(e))a[i(t[1]).toLowerCase()]=i(t[2]);return a}},{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}}]),e}();function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,r=ie.params[e]||ie.hashParams[e]||"",n=r.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(e){if(e){var r=e[e.length-1],n=parseInt(e.slice(0,e.length-1),10);t+=n*i[r]}}))}else r&&(t=parseInt(r,10));return t}function oe(e){q[e]||(q[e]=0);var t=++q[e];return e+t}function se(e){return e-parseFloat(e)+1>=0}function le(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function ue(){return window.navigator&&window.navigator.language}function ce(){return window.performance&&window.performance.now?performance.now():Date.now()}function de(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function he(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))}function fe(e,t){t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:D.mp4,element:null},t);var r=t.element?t.element:document.createElement(t.type);r.muted=t.muted,!0===t.muted&&r.setAttribute("muted","muted"),!0===t.inline&&r.setAttribute("playsinline","playsinline"),r.src=t.source;var n=r.play(),i=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(i),e(t,r)};void 0!==n?n.then((function(){return a(!0)}))["catch"]((function(e){return a(!1,e)})):a(!0)}var pe=function(){function e(){a(this,e)}return s(e,null,[{key:"configure",value:function(e){this.options=x.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&X.length>0?X.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(x(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),X.push(e))}}]),e}();pe.options={recycleVideo:!1};var ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;a(this,e),this.delay=t,this.lastTime=0}return s(e,[{key:"handle",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(new Date).getTime(),i=n-this.lastTime;i<this.delay&&i>0&&(t(),r&&e.preventDefault()),this.lastTime=n}}]),e}(),me={Config:ne,Fullscreen:re,QueryString:ie,DomRecycler:pe,assign:Q,extend:ee,formatTime:te,seekStringToSeconds:ae,uniqueId:oe,currentScriptUrl:le,isNumber:se,requestAnimationFrame:Z,cancelAnimationFrame:J,getBrowserLanguage:ue,now:ce,removeArrayItem:de,listContainsIgnoreCase:he,canAutoPlayMedia:fe,Media:D,DoubleEventHandler:ge},ve="font-weight: bold; font-size: 13px;",ye="color: #006600;"+ve,be="color: #0000ff;"+ve,Ae="color: #ff8000;"+ve,_e="color: #ff0000;"+ve,Ee=0,Te=1,ke=2,Se=3,we=Se,Re=[be,ye,Ae,_e,_e],Ce=["debug","info","warn","error","disabled"],Le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we;a(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.previousLevel=this.level,this.offLevel=r}return s(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),s(e,[{key:"debug",value:function(e){this.log(e,Ee,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,Te,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,ke,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,Se,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+Ce[this.level],Ae)}},{key:"log",value:function(e,t,r){if(!(this.EXCLUDE_LIST.indexOf(r[0])>=0)&&!(t<this.level)){r||(r=e,e=null);var n=Re[t],i="";e&&(i="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+Ce[t]+"]"+i,n].concat(r))}}}]),e}();Le.LEVEL_DEBUG=Ee,Le.LEVEL_INFO=Te,Le.LEVEL_WARN=ke,Le.LEVEL_ERROR=Se,Le.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},Le.setLevel=function(e){this.getInstance().level=e},Le.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},Le.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},Le.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},Le.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Ie=Array.prototype.slice,Oe=/\s+/,De=function(e,t,r,n){if(!r)return!0;if("object"===i(r)){for(var a in r)e[t].apply(e,[a,r[a]].concat(n));return!1}if(Oe.test(r)){for(var o=r.split(Oe),s=0,l=o.length;s<l;s++)e[t].apply(e,[o[s]].concat(n));return!1}return!0},Pe=function(e,t,r,n){var i,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];function c(){try{switch(t.length){case 0:while(++a<o)(i=e[a]).callback.call(i.ctx);return;case 1:while(++a<o)(i=e[a]).callback.call(i.ctx,s);return;case 2:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l);return;case 3:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l,u);return;default:while(++a<o)(i=e[a]).callback.apply(i.ctx,t);return}}catch(d){Le.error.apply(Le,[r,"error on event",n,"trigger","-",d]),c()}}c()},xe=function(){function e(){a(this,e)}return s(e,[{key:"on",value:function(e,t,r){if(!De(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this}},{key:"once",value:function(e,t,r){var n,i=this;if(!De(this,"once",e,[t,r])||!t)return this;var a=function(){return i.off(e,n)};return n=function(){a(),t.apply(this,arguments)},this.on(e,n,r)}},{key:"off",value:function(e,t,r){var n,i,a,o,s,l,u,c;if(!this._events||!De(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(o=e?[e]:Object.keys(this._events),s=0,l=o.length;s<l;s++)if(e=o[s],a=this._events[e],a){if(this._events[e]=n=[],t||r)for(u=0,c=a.length;u<c;u++)i=a[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(Le.debug.apply(Le,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var r=Ie.call(arguments,1);if(!De(this,"trigger",e,r))return this;var n=this._events[e],i=this._events.all;return n&&Pe(n,r,t,e),i&&Pe(i,arguments,t,e),this}},{key:"stopListening",value:function(e,t,r){var n=this._listeningTo;if(!n)return this;var a=!t&&!r;for(var o in r||"object"!==i(t)||(r=this),e&&((n={})[e._listenId]=e),n)e=n[o],e.off(t,r,this),(a||0===Object.keys(e._events).length)&&delete this._listeningTo[o];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var r="string"===typeof t&&t.toUpperCase().trim();r&&!e.Custom[r]?e.Custom[r]=r.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):Le.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"===typeof e.Custom[t]}))}}]),e}(),Ne={listenTo:"on",listenToOnce:"once"};Object.keys(Ne).forEach((function(e){xe.prototype[e]=function(t,r,n){var a=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=oe("l"));return a[o]=t,n||"object"!==i(r)||(n=this),t[Ne[e]](r,n,this),this}})),xe.PLAYER_READY="ready",xe.PLAYER_RESIZE="resize",xe.PLAYER_FULLSCREEN="fullscreen",xe.PLAYER_PLAY="play",xe.PLAYER_PAUSE="pause",xe.PLAYER_STOP="stop",xe.PLAYER_ENDED="ended",xe.PLAYER_SEEK="seek",xe.PLAYER_ERROR="playererror",xe.ERROR="error",xe.PLAYER_TIMEUPDATE="timeupdate",xe.PLAYER_VOLUMEUPDATE="volumeupdate",xe.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",xe.PLAYBACK_PROGRESS="playback:progress",xe.PLAYBACK_TIMEUPDATE="playback:timeupdate",xe.PLAYBACK_READY="playback:ready",xe.PLAYBACK_BUFFERING="playback:buffering",xe.PLAYBACK_BUFFERFULL="playback:bufferfull",xe.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",xe.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",xe.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",xe.PLAYBACK_BITRATE="playback:bitrate",xe.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",xe.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",xe.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",xe.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",xe.PLAYBACK_DVR="playback:dvr",xe.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",xe.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",xe.PLAYBACK_ENDED="playback:ended",xe.PLAYBACK_PLAY_INTENT="playback:play:intent",xe.PLAYBACK_PLAY="playback:play",xe.PLAYBACK_PAUSE="playback:pause",xe.PLAYBACK_SEEK="playback:seek",xe.PLAYBACK_SEEKED="playback:seeked",xe.PLAYBACK_STOP="playback:stop",xe.PLAYBACK_ERROR="playback:error",xe.PLAYBACK_STATS_ADD="playback:stats:add",xe.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",xe.PLAYBACK_LEVEL_SWITCH="playback:level:switch",xe.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",xe.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",xe.CORE_CONTAINERS_CREATED="core:containers:created",xe.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",xe.CORE_OPTIONS_CHANGE="core:options:change",xe.CORE_READY="core:ready",xe.CORE_FULLSCREEN="core:fullscreen",xe.CORE_RESIZE="core:resize",xe.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",xe.CORE_MOUSE_MOVE="core:mousemove",xe.CORE_MOUSE_LEAVE="core:mouseleave",xe.CONTAINER_PLAYBACKSTATE="container:playbackstate",xe.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",xe.CONTAINER_BITRATE="container:bitrate",xe.CONTAINER_STATS_REPORT="container:stats:report",xe.CONTAINER_DESTROYED="container:destroyed",xe.CONTAINER_READY="container:ready",xe.CONTAINER_RESIZE="container:resize",xe.CONTAINER_ERROR="container:error",xe.CONTAINER_LOADEDMETADATA="container:loadedmetadata",xe.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",xe.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",xe.CONTAINER_TIMEUPDATE="container:timeupdate",xe.CONTAINER_PROGRESS="container:progress",xe.CONTAINER_PLAY="container:play",xe.CONTAINER_STOP="container:stop",xe.CONTAINER_PAUSE="container:pause",xe.CONTAINER_ENDED="container:ended",xe.CONTAINER_CLICK="container:click",xe.CONTAINER_DBLCLICK="container:dblclick",xe.CONTAINER_CONTEXTMENU="container:contextmenu",xe.CONTAINER_MOUSE_ENTER="container:mouseenter",xe.CONTAINER_MOUSE_LEAVE="container:mouseleave",xe.CONTAINER_SEEK="container:seek",xe.CONTAINER_SEEKED="container:seeked",xe.CONTAINER_VOLUME="container:volume",xe.CONTAINER_FULLSCREEN="container:fullscreen",xe.CONTAINER_STATE_BUFFERING="container:state:buffering",xe.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",xe.CONTAINER_SETTINGSUPDATE="container:settingsupdate",xe.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",xe.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",xe.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",xe.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",xe.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",xe.CONTAINER_STATS_ADD="container:stats:add",xe.CONTAINER_OPTIONS_CHANGE="container:options:change",xe.MEDIACONTROL_RENDERED="mediacontrol:rendered",xe.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",xe.MEDIACONTROL_SHOW="mediacontrol:show",xe.MEDIACONTROL_HIDE="mediacontrol:hide",xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",xe.MEDIACONTROL_PLAYING="mediacontrol:playing",xe.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",xe.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",xe.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Me=function(e){d(r,e);var t=v(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n),e._options=n,e.uniqueId=oe("o"),e}return s(r,[{key:"options",get:function(){return this._options}}]),r}(xe),Fe={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},je=/(.)^/,Ue={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Be=/\\|'|\r|\n|\t|\u2028|\u2029/g,Ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ke=new RegExp("[&<>\"']","g"),Ve=function(e){return null===e?"":(""+e).replace(Ke,(function(e){return Ge[e]}))},Ye=0,He=function(e,t){var r,n=new RegExp([(Fe.escape||je).source,(Fe.interpolate||je).source,(Fe.evaluate||je).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(n,(function(t,r,n,o,s){return a+=e.slice(i,s).replace(Be,(function(e){return"\\"+Ue[e]})),r&&(a+="'+\n((__t=("+r+"))==null?'':escapeExpr(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),i=s+t.length,t})),a+="';\n",Fe.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Ye+++"]";try{r=new Function(Fe.variable||"obj","escapeExpr",a)}catch(s){throw s.source=a,s}if(t)return r(t,Ve);var o=function(e){return r.call(this,e,Ve)};return o.source="function("+(Fe.variable||"obj")+"){\n"+a+"}",o};He.settings=Fe;var We={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return x('<style class="clappr-style"></style>').html(He(e.toString())(t))}},ze=/^(\S+)\s*(.*)$/,$e=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e),n.cid=oe("c"),n._ensureElement(),n.delegateEvents(),n}return s(r,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),s(r,[{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=x.zepto.isZ(e)?e:x(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var r=e[t];if(r&&r.constructor!==Function&&(r=this[e[t]]),r){var n=t.match(ze),i=n[1],a=n[2];i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,r.bind(this)):this.$el.on(i,a,r.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=x.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e["class"]=this.className);var t=x(pe.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),r}(Me),qe=function(e){d(r,e);var t=v(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return a(this,r),e=t.call(this,n),e.core=i,e}return s(r,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),s(r,[{key:"createError",value:function(e){this.core?this.core.trigger(xe.ERROR,e):Le.warn(this.name,"Core is not set. Error: ",e)}}]),r}(Me),Xe={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},r=this.constructor&&this.constructor.type||"",n=this.name||r,i=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(n,":").concat(e&&e.code||"unknown"),o={description:"",level:qe.Levels.FATAL,origin:n,scope:r,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(i&&s.level==qe.Levels.FATAL&&!s.UI){var l={title:i.t("default_error_title"),message:i.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):Le.warn(n,"PlayerError is not defined. Error: ",s),s}},Ze=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e.options),n.core=e,n.enabled=!0,n.bindEvents(),n.render(),n}return s(r,[{key:"playerError",get:function(){return this.core.playerError}}]),s(r,[{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),r}($e);Object.assign(Ze.prototype,Xe),Ze.extend=function(e){return ee(Ze,e)},Ze.type="core";var Je=".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n",Qe=function(e){d(r,e);var t=v(r);function r(e,n,i){var o;return a(this,r),o=t.call(this,e),o._i18n=n,o.currentTime=0,o.volume=100,o.playback=e.playback,o.playerError=i,o.settings=x.extend(!0,{},o.playback.settings),o.isReady=!1,o.mediaControlDisabled=!1,o.plugins=[o.playback],o.dblTapHandler=new ge(500),o.clickTimer=null,o.clickDelay=200,o.bindEvents(),o}return s(r,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}}]),s(r,[{key:"bindEvents",value:function(){this.listenTo(this.playback,xe.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,xe.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,xe.PLAYBACK_READY,this.ready),this.listenTo(this.playback,xe.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,xe.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,xe.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,xe.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,xe.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,xe.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,xe.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,xe.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,xe.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,xe.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,xe.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,xe.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,xe.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,xe.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,xe.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,xe.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,xe.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,xe.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,xe.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(xe.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(xe.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(xe.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(xe.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(xe.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(xe.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(xe.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(xe.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(xe.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(xe.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(xe.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.trigger.apply(this,[xe.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(xe.CONTAINER_PLAY,this.name)}},{key:"paused",value:function(){this.trigger(xe.CONTAINER_PAUSE,this.name)}},{key:"play",value:function(){this.playback.play()}},{key:"stop",value:function(){this.playback.stop(),this.currentTime=0}},{key:"pause",value:function(){this.playback.pause()}},{key:"onEnded",value:function(){this.trigger(xe.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"stopped",value:function(){this.trigger(xe.CONTAINER_STOP)}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(xe.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(xe.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(xe.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(xe.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(xe.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var r=t*(e/100);this.seek(r)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(xe.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(xe.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(xe.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(xe.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(xe.CONTAINER_MOUSE_LEAVE)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(xe.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(xe.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(xe.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(xe.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},r=t.width,n=t.height,i=n!==e.height||r!==e.width;i&&(this.currentSize=e,this.trigger(xe.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=x.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(xe.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=We.getStyleFor(Je.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),r}($e);Object.assign(Qe.prototype,Xe);var et=function(e){d(r,e);var t=v(r);function r(e,n,i){var o;return a(this,r),o=t.call(this,e),o.settings={},o._i18n=n,o.playerError=i,o._consented=!1,o}return s(r,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}}]),s(r,[{key:"consent",value:function(e){"function"===typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"getPlaybackType",value:function(){return r.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=x.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,r){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}}]),r}($e);Object.assign(et.prototype,Xe),et.extend=function(e){return ee(et,e)},et.canPlay=function(e,t){return!1},et.VOD="vod",et.AOD="aod",et.LIVE="live",et.NO_OP="no_op",et.type="playback";var tt=function(e){d(r,e);var t=v(r);function r(e,n,i,o){var s;return a(this,r),s=t.call(this,e),s._i18n=i,s.loader=n,s.playerError=o,s}return s(r,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),s(r,[{key:"createContainers",value:function(){var e=this;return x.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(r){return r.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,r=this.options.mimeType;"object"===i(e)?(t=e.source.toString(),e.mimeType&&(r=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var n=c(c({},this.options),{},{src:t,mimeType:r}),a=this.findPlaybackPlugin(t,r),o=a?new a(n,this._i18n,this.playerError):new et;n=c(c({},n),{},{playback:o});var s=new Qe(n,this._i18n,this.playerError),l=x.Deferred();return l.promise(s),this.addContainerPlugins(s),this.listenToOnce(s,xe.CONTAINER_READY,(function(){return l.resolve(s)})),s}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),r}(Me),rt='[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n',nt='[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n',it=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e),n.playerError=new qe(e,g(n)),n.configureDomRecycler(),n.firstResize=!0,n.plugins=[],n.containers=[],n._boundFullscreenHandler=function(){return n.handleFullscreenChange()},x(document).bind("fullscreenchange",n._boundFullscreenHandler),x(document).bind("MSFullscreenChange",n._boundFullscreenHandler),x(document).bind("mozfullscreenchange",n._boundFullscreenHandler),F.isMobile&&x(window).bind("resize",(function(e){n.handleWindowResize(e)})),n}return s(r,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Ze(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(xe.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),s(r,[{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;pe.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=x.Deferred(),this.defer.promise(this),this.containerFactory=new tt(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){F.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:x(window).width(),height:x(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:x(window).width(),height:x(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){se(e.height)||se(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();var t=function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})};this.resizeObserverInterval=setInterval(t,500)}},{key:"triggerResize",value:function(e){var t=this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width;t&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(xe.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;x.when.apply(x,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(xe.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=x.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),x(document).unbind("fullscreenchange",this._boundFullscreenHandler),x(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),x(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(xe.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(xe.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,xe.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(xe.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var r=this.containerFactory.createContainer(e,t);return this.setupContainer(r),this.el.appendChild(r.render().el),r}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=re.fullscreenElement();if(!e)return!1;var t=this.activePlayback&&this.activePlayback.el;return e===this.el||e===t}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen())re.cancelFullscreen(),!F.isiOS&&this.$el.removeClass("fullscreen nocursor");else{var t=F.isiOS?this.activePlayback&&this.activePlayback.el:this.el;if(!t)return;F.isSafari||F.isiOS?re.requestFullscreen(t):re.requestFullscreen(t).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!F.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(xe.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(xe.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=x.extend(!0,this._options,e),this.configureDomRecycler();var r=e.source||e.sources;r&&this.load(r,e.mimeType||this.options.mimeType),this.trigger(xe.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){var e=We.getStyleFor(rt.toString(),{baseUrl:this.options.baseUrl}),t=We.getStyleFor(nt.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]);var r=this.$el.parent()&&this.$el.parent().length;!r&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),r}($e);Object.assign(it.prototype,Xe);var at=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e.options),n.player=e,n}return s(r,[{key:"loader",get:function(){return this.player.loader}}]),s(r,[{key:"create",value:function(){return this.options.loader=this.loader,this.core=new it(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var r=new t(e.core);e.core.addPlugin(r),e.setupExternalInterface(r)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var r in t)this.player[r]=t[r].bind(e)}}]),r}(Me),ot=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,st=function(){function e(t,r,n){a(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(r||0,10),this.patch=parseInt(n||0,10)}return s(e,null,[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.match(ot)||[],n=A(r,4),i=n[1],a=n[2],o=n[3];return"undefined"===typeof i?null:new e(i,a,o)}}]),s(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=t||this.minor-e.minor,t=t||this.patch-e.patch,t}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return"undefined"!==typeof this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}]),e}(),lt=function(e,t){return e&&t?Object.entries(e).filter((function(e){var r=A(e,2),n=r[1];return n.type===t})).reduce((function(e,t){var r=A(t,2),n=r[0],i=r[1];return e[n]=i,e}),{}):{}},ut=function(){var e={plugins:{},playbacks:[]},t="0.4.18";return function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,r),this.playerId=n,this.playbackPlugins=_(e.playbacks);var i=r.registeredPlugins,o=i.core,s=i.container;this.containerPlugins=Object.values(s),this.corePlugins=Object.values(o),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return s(r,null,[{key:"checkVersionSupport",value:function(e){var r=e.prototype,n=r.supportedVersion,i=r.name;if(!n||!n.min)return Le.warn("Loader","missing version information for ".concat(i)),!1;var a=n.max?st.parse(n.max):st.parse(n.min).inc("minor"),o=st.parse(n.min);return!!st.parse(t).satisfies(o,a)||(Le.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(t," does not match required range [").concat(o,",").concat(a,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return Le.warn("Loader","missing information to register plugin: ".concat(t)),!1;r.checkVersionSupport(t);var n=e.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&Le.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;r.checkVersionSupport(t);var n=e.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var a=n[i];n.splice(i,1),Le.warn("Loader","overriding playback entry: ".concat(a.name," - ").concat(a))}return e.playbacks=[t].concat(_(n)),!0}},{key:"unregisterPlugin",value:function(t){if(!t)return!1;var r=e.plugins,n=r[t];return!!n&&(delete r[t],!0)}},{key:"unregisterPlayback",value:function(t){if(!t)return!1;var r=e.playbacks,n=r.findIndex((function(e){return e.prototype.name===t}));return!(n<0)&&(r.splice(n,1),e.playbacks=r,!0)}},{key:"clearPlugins",value:function(){e.plugins={}}},{key:"clearPlaybacks",value:function(){e.playbacks=[]}},{key:"registeredPlaybacks",get:function(){return _(e.playbacks)}},{key:"registeredPlugins",get:function(){var t=e.plugins,r=lt(t,"core"),n=lt(t,"container");return{core:r,container:n}}}]),s(r,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e,r){return e[r.prototype.name]&&t||(e[r.prototype.name]&&delete e[r.prototype.name],e[r.prototype.name]=r),e},n=e.reduceRight(r,Object.create(null)),i=[];for(var a in n)i.unshift(n[a]);return i}},{key:"addExternalPlugins",value:function(e){var t="boolean"!==typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,n="boolean"!==typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if(e=this.groupPluginsByType(e),e.playback){var i=e.playback.filter((function(e){return r.checkVersionSupport(e),!0}));this.playbackPlugins=n?this.removeDups(i.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(i),!0)}if(e.container){var a=e.container.filter((function(e){return r.checkVersionSupport(e),!0}));this.containerPlugins=t?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(e.core){var o=e.core.filter((function(e){return r.checkVersionSupport(e),!0}));this.corePlugins=t?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){var t=["playback","container","core"];t.forEach((function(t){(e[t]||[]).forEach((function(e){var r="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(r)}))}))}}]),r}()}(),ct=le().replace(/\/[^/]+$/,""),dt=function(e){d(r,e);var t=v(r);function r(e){var n;a(this,r),n=t.call(this,e);var i={recycleVideo:!0},o={playerId:oe(""),persistConfig:!0,width:640,height:360,baseUrl:ct,allowUserInteraction:F.isMobile,includeResetStyle:!0,playback:i};return n._options=x.extend(!0,o,e),n.options.sources=n._normalizeSources(e),n.options.chromeless||(n.options.allowUserInteraction=!0),n.options.allowUserInteraction||(n.options.disableKeyboardShortcuts=!0),n._registerOptionEventListeners(n.options.events),n._coreFactory=new at(g(n)),n.options.parentId?n.setParentId(n.options.parentId):n.options.parent&&n.attachTo(n.options.parent),n}return s(r,[{key:"loader",set:function(e){this._loader=e},get:function(){return this._loader||(this._loader=new ut(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:xe.PLAYER_READY,onResize:xe.PLAYER_RESIZE,onPlay:xe.PLAYER_PLAY,onPause:xe.PLAYER_PAUSE,onStop:xe.PLAYER_STOP,onEnded:xe.PLAYER_ENDED,onSeek:xe.PLAYER_SEEK,onError:xe.PLAYER_ERROR,onTimeUpdate:xe.PLAYER_TIMEUPDATE,onVolumeUpdate:xe.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:xe.PLAYER_SUBTITLE_AVAILABLE}}}]),s(r,[{key:"setParentId",value:function(e){var t=document.querySelector(e);return t&&this.attachTo(t),this}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,xe.CORE_READY,this._onReady),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,xe.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,xe.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,xe.CONTAINER_PLAY,this._onPlay),this.listenTo(e,xe.CONTAINER_PAUSE,this._onPause),this.listenTo(e,xe.CONTAINER_STOP,this._onStop),this.listenTo(e,xe.CONTAINER_ENDED,this._onEnded),this.listenTo(e,xe.CONTAINER_SEEK,this._onSeek),this.listenTo(e,xe.CONTAINER_ERROR,this._onError),this.listenTo(e,xe.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,xe.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,xe.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).length>0;return n&&Object.keys(r).forEach((function(t){var n=e.eventsMapping[t];n&&e.off(n,r[t])})),Object.keys(t).forEach((function(r){var n=e.eventsMapping[r];if(n){var i=t[r];i="function"===typeof i&&i,i&&e.on(n,i)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(xe.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(xe.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(xe.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(xe.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(xe.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(){this.trigger(xe.PLAYER_PLAY)}},{key:"_onPause",value:function(){this.trigger(xe.PLAYER_PAUSE)}},{key:"_onStop",value:function(){this.trigger(xe.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function(){this.trigger(xe.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(xe.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(xe.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(xe.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,r){return void 0!==r&&this.configure({autoPlay:!!r}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){var t=this.core.plugins.concat(this.core.activeContainer.plugins);return t.filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),r}(Me);Object.assign(dt.prototype,Xe);var ht=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e.options),n.container=e,n.enabled=!0,n.bindEvents(),n}return s(r,[{key:"playerError",get:function(){return this.container.playerError}}]),s(r,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),r}(Me);Object.assign(ht.prototype,Xe),ht.extend=function(e){return ee(ht,e)},ht.type="container";var ft=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e.options),n.core=e,n.enabled=!0,n.bindEvents(),n}return s(r,[{key:"playerError",get:function(){return this.core.playerError}}]),s(r,[{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),r}(Me);Object.assign(ft.prototype,Xe),ft.extend=function(e){return ee(ft,e)},ft.type="core";var pt=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e.options),n.container=e,n.enabled=!0,n.bindEvents(),n}return s(r,[{key:"playerError",get:function(){return this.container.playerError}}]),s(r,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),r}($e);Object.assign(pt.prototype,Xe),pt.extend=function(e){return ee(pt,e)},pt.type="container";var gt='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n',mt="[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n",vt={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};vt["ogv"]=vt["ogg"],vt["3gp"]=vt["3gpp"];var yt={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},bt=Object.keys(yt).reduce((function(e,t){return[].concat(_(e),_(yt[t]))}),[]),At={code:"unknown",message:"unknown"},_t=function(e){d(r,e);var t=v(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e=t.call.apply(t,[this].concat(i)),e._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var s,l=e.options.playback,u=l.preload||(F.isSafari?"auto":e.options.preload);return e.options.poster&&("string"===typeof e.options.poster?s=e.options.poster:"string"===typeof e.options.poster.url&&(s=e.options.poster.url)),x.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:s,preload:u||"metadata",crossOrigin:l.crossOrigin,"x-webkit-playsinline":l.playInline}),(l.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),l.playInline&&e.$el.attr({playsinline:"playsinline"}),l.crossOrigin&&e.$el.attr({crossorigin:l.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],l.externalTracks&&e._setupExternalTracks(l.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return s(r,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=r._mimeTypesForUrl(e,yt,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||bt.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===et.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return"undefined"!==typeof this.minimumDVRSizeConfig&&"number"===typeof this.minimumDVRSizeConfig}}]),s(r,[{key:"configure",value:function(e){b(h(r.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,r){r&&Le.warn(e.name,"autoplay error.",{result:t,error:r}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};F.isMobile&&pe.options.recycleVideo&&(t.element=this.el),fe(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t="undefined"===typeof this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==et.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===et.VOD||this.getPlaybackType()===et.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(xe.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?et.AOD:et.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?et.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying()||this.el._consented)b(h(r.prototype),"consent",this).call(this,e);else{var n=function n(){t.el.removeEventListener("loadedmetadata",n,!1),t.el.removeEventListener("error",n,!1),t.el._consented=!0,b(h(r.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",n,!1),this.el.addEventListener("error",n,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(xe.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e["catch"]&&e["catch"]((function(){}))}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(xe.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(xe.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(xe.PLAYBACK_BUFFERING,this.name):this.trigger(xe.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||At,t=e.code,r=e.message,n=t===At.code,i=this.createError({code:t,description:r,raw:this.el.error,level:n?qe.Levels.WARN:qe.Levels.FATAL});n?Le.warn(this.name,"HTML5 unknown error: ",i):this.trigger(xe.PLAYBACK_ERROR,i)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),b(h(r.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,pe.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(xe.PLAYBACK_DVR,e),this.trigger(xe.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(Le.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=ae();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(xe.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat(_(e),[{start:this.el.buffered.start(r),end:this.el.buffered.end(r)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(xe.PLAYBACK_PROGRESS,n,e)}}},{key:"_typeFor",value:function(e){var t=r._mimeTypesForUrl(e,vt,this.options.mimeType);0===t.length&&(t=r._mimeTypesForUrl(e,yt,this.options.mimeType));var n=t[0]||"";return n.split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(xe.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(xe.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks,t=e.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==t.id&&(this._ccTrackId=t.id,this.trigger(xe.PLAYBACK_SUBTITLE_CHANGED,{id:t.id}))}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=We.getStyleFor(mt.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}},{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===r.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0,t=function(){return e++},r=this.el.textTracks?Array.from(this.el.textTracks):[];return r.filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:t(),name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(se(e)){var t,r=this.closedCaptionsTracks;if(-1!==e){if(t=r.find((function(t){return t.id===e})),!t)return;if("showing"===t.track.mode)return}r.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(xe.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return He(gt)}}]),r}(et);_t._mimeTypesForUrl=function(e,t,r){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=r||n&&t[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},_t._canPlay=function(e,t,r,n){var i=_t._mimeTypesForUrl(r,t,n),a=document.createElement(e);return!!i.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},_t.canPlay=function(e,t){return _t._canPlay("audio",yt,e,t)||_t._canPlay("video",vt,e,t)};var Et=function(e){d(r,e);var t=v(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(xe.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return et.AOD}},{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),r}(_t);Et.canPlay=function(e,t){var r={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return _t._canPlay("audio",r,e,t)};var Tt="[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n",kt=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e),n.el.src=e.src,n}return s(r,[{key:"getPlaybackType",value:function(){return et.NO_OP}},{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),s(r,[{key:"render",value:function(){var e=We.getStyleFor(Tt.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(xe.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(xe.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(xe.PLAYBACK_ERROR,{message:t},this.name)}}]),r}(et);kt.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var St="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>",wt="[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n",Rt=function(e){d(r,e);var t=v(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e._noiseFrameNum=-1,e}return s(r,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(St)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),s(r,[{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=We.getStyleFor(wt.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(xe.PLAYBACK_READY,this.name);var r=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&r||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(c){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var r=t.data,n=0;n<r.length;n++)e[n]=r[n]}for(var i=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<i;){if(o<0){o=a*Math.random();var u=Math.pow(Math.random(),.4);s=255*u<<24}o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=Z((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(J(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),r}(et);Rt.canPlay=function(e){return!0};var Ct=function(e){d(r,e);var t=v(r);function r(e){var n;return a(this,r),n=t.call(this,e),n._initializeMessages(),n}return s(r,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}}]),s(r,[{key:"t",value:function(e){var t=this._language(),r=this._messages["en"],n=t&&this._messages[t]||r;return n[e]||r[e]||e}},{key:"_language",value:function(){return this.core.options.language||ue()}},{key:"_initializeMessages",value:function(){var e={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurck zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser untersttzt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}};this._messages=x.extend(!0,e,this.core.options.strings||{}),this._messages["de-DE"]=this._messages["de"],this._messages["pt-BR"]=this._messages["pt"],this._messages["en-US"]=this._messages["en"],this._messages["es-419"]=this._messages["es"],this._messages["fr-FR"]=this._messages["fr"],this._messages["tr-TR"]=this._messages["tr"],this._messages["et-EE"]=this._messages["et"],this._messages["ar-IQ"]=this._messages["ar"]}}]),r}(ft),Lt=function(e){d(r,e);var t=v(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}},{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}}]),r}(ft),It="0.4.18";ut.registerPlugin(Ct),ut.registerPlugin(Lt),ut.registerPlayback(Rt),ut.registerPlayback(kt),ut.registerPlayback(Et),ut.registerPlayback(_t);var Ot={Player:dt,Events:xe,Browser:F,ContainerPlugin:ht,UIContainerPlugin:pt,CorePlugin:ft,UICorePlugin:Ze,Playback:et,Container:Qe,Core:it,PlayerError:qe,Loader:ut,BaseObject:Me,UIObject:$e,Utils:me,HTML5Audio:Et,HTML5Video:_t,HTMLImg:kt,Log:Le,Styler:We,version:It,template:He,$:x};function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xt(e,t,r){return t&&Pt(e.prototype,t),r&&Pt(e,r),e}function Nt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Ft(e,t){return Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ft(e,t)}function jt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?Ut(e):t}function Gt(e){var t=jt();return function(){var r,n=Mt(e);if(t){var i=Mt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Bt(this,r)}}function Kt(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Mt(e),null===e)break;return e}function Vt(e,t,r){return Vt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Kt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},Vt(e,t,r||e)}var Yt=function(e){Nt(r,e);var t=Gt(r);function r(e){return Dt(this,r),t.call(this,e)}return xt(r,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"bindEvents",value:function(){this.listenTo(this.container,xe.CONTAINER_CLICK,this.click),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){(this.container.getPlaybackType()!==et.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==et.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}]),r}(ht),Ht='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve">\n<path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1\n\tc1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9\n\tC10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"/>\n</svg>',Wt='<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n';function zt(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!==typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var $t=".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n";zt($t);var qt=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;Dt(this,r),n=t.call(this,e);var i=e.options.closedCaptionsConfig;return n._title=i&&i.title?i.title:null,n._ariaLabel=i&&i.ariaLabel?i.ariaLabel:"cc-button",n._labelCb=i&&i.labelCallback&&"function"===typeof i.labelCallback?i.labelCallback:function(e){return e.name},n}return xt(r,[{key:"name",get:function(){return"closed_captions"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(Wt)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_HIDE,this.hideContextMenu),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,xe.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,xe.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,xe.CONTAINER_STOP,this.onContainerStop))}},{key:"onContainerStop",value:function(){this.ccAvailable(!1)}},{key:"containerChanged",value:function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()}},{key:"onSubtitleAvailable",value:function(){this.renderCcButton(),this.ccAvailable(!0)}},{key:"onSubtitleChanged",value:function(e){this.setCurrentContextMenuElement(e.id)}},{key:"onTrackSelect",value:function(e){var t=parseInt(e.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=t,this.hideContextMenu(),e.stopPropagation(),!1}},{key:"ccAvailable",value:function(e){var t=e?"addClass":"removeClass";this.$el[t]("available")}},{key:"toggleContextMenu",value:function(){this.$el.find("ul").toggle()}},{key:"hideContextMenu",value:function(){this.$el.find("ul").hide()}},{key:"contextMenuElement",value:function(e){return this.$el.find("ul a"+(isNaN(e)?"":'[data-cc-select="'+e+'"]')).parent()}},{key:"setCurrentContextMenuElement",value:function(e){if(this._trackId!==e){this.contextMenuElement().removeClass("current"),this.contextMenuElement(e).addClass("current");var t=e>-1?"addClass":"removeClass";this.$ccButton[t]("enabled"),this._trackId=e}}},{key:"renderCcButton",value:function(){for(var e=this.container?this.container.closedCaptionsTracks:[],t=0;t<e.length;t++)e[t].label=this._labelCb(e[t]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:e})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(Ht),this.$el.append(this.style)}},{key:"render",value:function(){this.renderCcButton();var e=this.core.mediaControl.$el.find("button[data-fullscreen]");return e[0]?this.$el.insertAfter(e):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this}}]),r}(Ze),Xt='<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n',Zt='.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n';zt(Zt);var Jt=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.settingsUpdate(),n}return xt(r,[{key:"template",get:function(){return He(Xt)}},{key:"name",get:function(){return"dvr_controls"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}},{key:"bindEvents",value:function(){this.bindCoreEvents(),this.bindContainerEvents()}},{key:"bindCoreEvents",value:function(){var e=this;this.core.mediaControl.settings?(this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,xe.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.render)):setTimeout((function(){return e.bindCoreEvents()}),100)}},{key:"bindContainerEvents",value:function(){this.core.activeContainer&&(this.listenToOnce(this.core.activeContainer,xe.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.activeContainer,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"dvrChanged",value:function(e){this.core.getPlaybackType()===et.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),e?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))}},{key:"click",value:function(){var e=this.core.mediaControl,t=e.container;t.isPlaying()||t.play(),e.$el.hasClass("dvr")&&t.seek(t.getDuration())}},{key:"settingsUpdate",value:function(){var e=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click((function(){return e.click()}))),this.bindEvents()}},{key:"shouldRender",value:function(){var e=void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls;return e&&this.core.getPlaybackType()===et.LIVE}},{key:"render",value:function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this}}]),r}(Ze),Qt=function(e){Nt(r,e);var t=Gt(r);function r(){return Dt(this,r),t.apply(this,arguments)}return xt(r,[{key:"name",get:function(){return"end_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var e=this.core.activeContainer;e&&(this.listenTo(e,xe.CONTAINER_ENDED,this.ended),this.listenTo(e,xe.CONTAINER_STOP,this.ended))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"ended",value:function(){var e="undefined"===typeof this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd;e&&this.core.isFullscreen()&&this.core.toggleFullscreen()}}]),r}(ft),er='<svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>',tr='<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n',rr="[data-player] .player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  [data-player] .player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  [data-player] .player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  [data-player] .player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  [data-player] .player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  [data-player] .player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0 !important; }\n";zt(rr);var nr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.options.disableErrorScreen?Bt(n,n.disable()):n}return xt(r,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(tr)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.ERROR,this.onError),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindReload",value:function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))}},{key:"reload",value:function(){var e=this;this.listenToOnce(this.core,xe.CORE_READY,(function(){return e.container.play()})),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()}},{key:"unbindReload",value:function(){this.reloadButton&&this.reloadButton.off("click")}},{key:"onContainerChanged",value:function(){this.err=null,this.unbindReload(),this.hide()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===qe.Levels.FATAL&&(this.err=e,this.container.disableMediaControl(),this.container.stop(),this.show())}},{key:"show",value:function(){this.render(),this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){if(this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:er})),this.core.$el.append(this.el),this.bindReload(),this}}]),r}(Ze),ir='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"/>\n</svg>',ar='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"/>\n</svg>',or=x('link[rel="shortcut icon"]'),sr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n._container=null,n.configure(),n}return xt(r,[{key:"name",get:function(){return"favicon"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"oldIcon",get:function(){return or}},{key:"configure",value:function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,xe.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.configure))}},{key:"bindEvents",value:function(){this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}},{key:"containerChanged",value:function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,xe.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,xe.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,xe.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,xe.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,xe.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}},{key:"disable",value:function(){Vt(Mt(r.prototype),"disable",this).call(this),this.resetIcon()}},{key:"destroy",value:function(){Vt(Mt(r.prototype),"destroy",this).call(this),this.resetIcon()}},{key:"createIcon",value:function(e){var t=x("<canvas/>");t[0].width=16,t[0].height=16;var r=t[0].getContext("2d");r.fillStyle="#000";var n=x(e).find("path").attr("d"),i=new Path2D(n);r.fill(i);var a=x('<link rel="shortcut icon" type="image/png"/>');return a.attr("href",t[0].toDataURL("image/png")),a}},{key:"setPlayIcon",value:function(){this.playIcon||(this.playIcon=this.createIcon(ir)),this.changeIcon(this.playIcon)}},{key:"setPauseIcon",value:function(){this.pauseIcon||(this.pauseIcon=this.createIcon(ar)),this.changeIcon(this.pauseIcon)}},{key:"resetIcon",value:function(){x('link[rel="shortcut icon"]').remove(),x("head").append(this.oldIcon)}},{key:"changeIcon",value:function(e){e&&(x('link[rel="shortcut icon"]').remove(),x("head").append(e))}}]),r}(ft),lr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.container.options.gaAccount&&(n.account=n.container.options.gaAccount,n.trackerName=n.container.options.gaTrackerName?n.container.options.gaTrackerName+".":"Clappr.",n.domainName=n.container.options.gaDomainName,n.currentHDState=void 0,n.embedScript()),n}return xt(r,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"embedScript",value:function(){var e=this;if(window._gat)this.addEventListeners();else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","//www.google-analytics.com/ga.js"),t.onload=function(){return e.addEventListeners()},document.body.appendChild(t)}}},{key:"addEventListeners",value:function(){var e=this;this.container&&(this.listenTo(this.container,xe.CONTAINER_READY,this.onReady),this.listenTo(this.container,xe.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,xe.CONTAINER_ERROR,this.onError),this.listenTo(this.container,xe.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,xe.CONTAINER_VOLUME,(function(t){return e.onVolumeChanged(t)})),this.listenTo(this.container,xe.CONTAINER_SEEK,(function(t){return e.onSeek(t)})),this.listenTo(this.container,xe.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,xe.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])}},{key:"onReady",value:function(){this.push(["Video","Playback",this.container.playback.name])}},{key:"onPlay",value:function(){this.push(["Video","Play",this.container.playback.src])}},{key:"onStop",value:function(){this.push(["Video","Stop",this.container.playback.src])}},{key:"onEnded",value:function(){this.push(["Video","Ended",this.container.playback.src])}},{key:"onBuffering",value:function(){this.push(["Video","Buffering",this.container.playback.src])}},{key:"onBufferFull",value:function(){this.push(["Video","Bufferfull",this.container.playback.src])}},{key:"onError",value:function(){this.push(["Video","Error",this.container.playback.src])}},{key:"onHD",value:function(e){var t=e?"ON":"OFF";t!==this.currentHDState&&(this.currentHDState=t,this.push(["Video","HD - "+t,this.container.playback.src]))}},{key:"onPlaybackChanged",value:function(e){null!==e.type&&this.push(["Video","Playback Type - "+e.type,this.container.playback.src])}},{key:"onDVR",value:function(e){var t=e?"ON":"OFF";this.push(["Interaction","DVR - "+t,this.container.playback.src])}},{key:"onPause",value:function(){this.push(["Video","Pause",this.container.playback.src])}},{key:"onSeek",value:function(){this.push(["Video","Seek",this.container.playback.src])}},{key:"onVolumeChanged",value:function(){this.push(["Interaction","Volume",this.container.playback.src])}},{key:"onFullscreen",value:function(){this.push(["Interaction","Fullscreen",this.container.playback.src])}},{key:"push",value:function(e){var t=[this.trackerName+"_trackEvent"].concat(e);_gaq.push(t)}}]),r}(ht),ur=function(e){this.element=e||window.document,this.initialize()};ur.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},ur.KEY_CODES_BY_NAME={},function(){for(var e in ur.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(ur.KEY_NAMES_BY_CODE,e)&&(ur.KEY_CODES_BY_NAME[ur.KEY_NAMES_BY_CODE[e]]=+e)}(),ur.MODIFIERS=["shift","ctrl","alt"],ur.registerEvent=function(){return document.addEventListener?function(e,t,r){e.addEventListener(t,r,!1)}:document.attachEvent?function(e,t,r){e.attachEvent("on"+t,r)}:void 0}(),ur.unregisterEvent=function(){return document.removeEventListener?function(e,t,r){e.removeEventListener(t,r,!1)}:document.detachEvent?function(e,t,r){e.detachEvent("on"+t,r)}:void 0}(),ur.stringContains=function(e,t){return-1!==e.indexOf(t)},ur.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},ur.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},ur.isString=function(e){return ur.stringContains(Object.prototype.toString.call(e),"String")},ur.arrayIncludes=function(){return Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}}(),ur.extractModifiers=function(e){var t,r;for(t=[],r=0;r<ur.MODIFIERS.length;r++)ur.stringContains(e,ur.MODIFIERS[r])&&t.push(ur.MODIFIERS[r]);return t},ur.extractKey=function(e){var t,r;for(t=ur.neatString(e).split(" "),r=0;r<t.length;r++)if(!ur.arrayIncludes(ur.MODIFIERS,t[r]))return t[r]},ur.modifiersAndKey=function(e){var t,r;return ur.stringContains(e,"any")?ur.neatString(e).split(" ").slice(0,2).join(" "):(t=ur.extractModifiers(e),r=ur.extractKey(e),r&&!ur.arrayIncludes(ur.MODIFIERS,r)&&t.push(r),t.join(" "))},ur.keyName=function(e){return ur.KEY_NAMES_BY_CODE[e+""]},ur.keyCode=function(e){return+ur.KEY_CODES_BY_NAME[e]},ur.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<ur.MODIFIERS.length;e++)this.lastModifiers[ur.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),ur.registerEvent(this.element,"keydown",this.downHandler),ur.registerEvent(this.element,"keyup",this.upHandler),ur.registerEvent(window,"unload",(function e(){ur.unregisterEvent(t.element,"keydown",t.downHandler),ur.unregisterEvent(t.element,"keyup",t.upHandler),ur.unregisterEvent(window,"unload",e)}))},ur.prototype.handler=function(e){var t=this;return function(r){var n,i,a;for(r=r||window.event,t.lastKeyCode=r.keyCode,n=0;n<ur.MODIFIERS.length;n++)t.lastModifiers[ur.MODIFIERS[n]]=r[ur.MODIFIERS[n]+"Key"];for(ur.arrayIncludes(ur.MODIFIERS,ur.keyName(t.lastKeyCode))&&(t.lastModifiers[ur.keyName(t.lastKeyCode)]=!0),i=t["keys"+ur.capitalize(e)],n=0;n<i.any.length;n++)!1===i.any[n](r)&&r.preventDefault&&r.preventDefault();if(a=t.lastModifiersAndKey(),i[a])for(n=0;n<i[a].length;n++)!1===i[a][n](r)&&r.preventDefault&&r.preventDefault()}},ur.prototype.registerKeys=function(e,t,r){var n,i,a=this["keys"+ur.capitalize(e)];for(ur.isString(t)&&(t=[t]),n=0;n<t.length;n++)i=t[n],i=ur.modifiersAndKey(i+""),a[i]?a[i].push(r):a[i]=[r];return this},ur.prototype.unregisterKeys=function(e,t,r){var n,i,a,o=this["keys"+ur.capitalize(e)];for(ur.isString(t)&&(t=[t]),n=0;n<t.length;n++)if(a=t[n],a=ur.modifiersAndKey(a+""),null===r)delete o[a];else if(o[a])for(i=0;i<o[a].length;i++)if(String(o[a][i])===String(r)){o[a].splice(i,1);break}return this},ur.prototype.off=function(e){return this.unregisterKeys("down",e,null)},ur.prototype.delegate=function(e,t,r){return null!==r||void 0!==r?this.registerKeys(e,t,r):this.unregisterKeys(e,t,r)},ur.prototype.down=function(e,t){return this.delegate("down",e,t)},ur.prototype.up=function(e,t){return this.delegate("up",e,t)},ur.prototype.lastKey=function(e){return e?this.lastModifiers[e]:ur.keyName(this.lastKeyCode)},ur.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<ur.MODIFIERS.length;t++)this.lastKey(ur.MODIFIERS[t])&&e.push(ur.MODIFIERS[t]);return ur.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var cr={Kibo:ur},dr='.media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important;\n    cursor: url("closed-hand.cur"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      cursor: url("closed-hand.cur"), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    will-change: transform, opacity;\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    transform: translateY(50px); }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    transform: translateY(-7px);\n    bottom: 0;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n';zt(dr);var hr='<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n',fr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"/>\n</svg>',pr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"/>\n</svg>',gr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"/>\n</svg>',mr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"/>\n</svg>',vr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"/>\n</svg>',yr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"/>\n</svg>',br=me.Config,Ar=me.Fullscreen,_r=me.formatTime,Er=me.extend,Tr=me.removeArrayItem,kr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.persistConfig=n.options.persistConfig,n.currentPositionValue=null,n.currentDurationValue=null,n.keepVisible=!1,n.fullScreenOnVideoTagSupported=null,n.setInitialVolume(),n.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},n.kibo=new ur(n.options.focusElement),n.bindKeyEvents(),n.container?x.isEmptyObject(n.container.settings)||(n.settings=x.extend({},n.container.settings)):n.settings={},n.userDisabled=!1,(n.container&&n.container.mediaControlDisabled||n.options.chromeless)&&n.disable(),n.stopDragHandler=function(e){return n.stopDrag(e)},n.updateDragHandler=function(e){return n.updateDrag(e)},x(document).bind("mouseup",n.stopDragHandler),x(document).bind("mousemove",n.updateDragHandler),n}return xt(r,[{key:"name",get:function(){return"media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"disabled",get:function(){var e=this.container&&this.container.getPlaybackType()===et.NO_OP;return this.userDisabled||e}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return He(hr)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}},{key:"getExternalInterface",value:function(){var e=this;return{setVolume:this.setVolume,getVolume:function(){return e.volume}}}},{key:"bindEvents",value:function(){var e=this;this.stopListening(),this.listenTo(this.core,xe.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,xe.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,xe.CORE_MOUSE_LEAVE,(function(){return e.hide(e.options.hideMediaControlDelay)})),this.listenTo(this.core,xe.CORE_FULLSCREEN,this.show),this.listenTo(this.core,xe.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,xe.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&(this.listenTo(this.container,xe.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,xe.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,xe.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,xe.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,xe.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,xe.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,xe.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,xe.CONTAINER_ENDED,this.ended),this.listenTo(this.container,xe.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,xe.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,xe.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}},{key:"disable",value:function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}},{key:"enable",value:function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}},{key:"play",value:function(){this.container&&this.container.play()}},{key:"pause",value:function(){this.container&&this.container.pause()}},{key:"stop",value:function(){this.container&&this.container.stop()}},{key:"setInitialVolume",value:function(){var e=this.persistConfig?br.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)}},{key:"onVolumeChanged",value:function(){this.updateVolumeUI()}},{key:"onLoadedMetadataOnVideoTag",value:function(){var e=this.playback&&this.playback.el;!Ar.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}},{key:"updateVolumeUI",value:function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var e=this.$volumeBarContainer.width(),t=this.$volumeBarBackground.width(),r=(e-t)/2,n=t*this.volume/100+r;this.$volumeBarFill.css({width:"".concat(this.volume,"%")}),this.$volumeBarScrubber.css({left:n}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var i=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,i).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(gr),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(pr),this.applyButtonStyle(this.$volumeIcon)}}},{key:"changeTogglePlay",value:function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(ar),this.$playStopToggle.append(fr),this.trigger(xe.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(ir),this.$playStopToggle.append(ir),this.trigger(xe.MEDIACONTROL_NOTPLAYING),F.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}},{key:"mousemoveOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.trigger(xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"mouseleaveOnSeekBar",value:function(e){this.trigger(xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"mousemoveOnVolumeBar",value:function(e){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"playerResize",value:function(e){this.$fullscreenToggle.html("");var t=this.core.isFullscreen()?vr:mr;this.$fullscreenToggle.append(t),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(e.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}},{key:"togglePlayPause",value:function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}},{key:"togglePlayStop",value:function(){this.container.isPlaying()?this.container.stop():this.container.play()}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=e.pageX-this.$seekBarContainer.offset().left,r=t/this.$seekBarContainer.width()*100;r=Math.min(100,Math.max(r,0)),this.setSeekPercentage(r)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"getVolumeFromUIEvent",value:function(e){var t=e.pageX-this.$volumeBarContainer.offset().left,r=t/this.$volumeBarContainer.width()*100;return r}},{key:"toggleMute",value:function(){this.setVolume(this.muted?100:0)}},{key:"setVolume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!r&&br.persist("volume",e);var n=function(){t.container&&t.container.isReady?t.container.setVolume(e):t.listenToOnce(t.container,xe.CONTAINER_READY,(function(){t.container.setVolume(e)}))};this.container?n():this.listenToOnce(this,xe.MEDIACONTROL_CONTAINERCHANGED,(function(){return n()}))}},{key:"toggleFullscreen",value:function(){this.trigger(xe.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}},{key:"onActiveContainerChanged",value:function(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(xe.MEDIACONTROL_CONTAINERCHANGED)}},{key:"showVolumeBar",value:function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar()}),t):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return e.$volumeBarContainer.addClass("volume-bar-hide")}),t)))}},{key:"ended",value:function(){this.changeTogglePlay()}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,r=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(r-t,"%")})}},{key:"onTimeUpdate",value:function(e){if(!this.draggingSeekBar){var t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.renderSeekBar()}}},{key:"renderSeekBar",value:function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==et.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var e=_r(this.currentPositionValue),t=_r(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left,r=t/this.$seekBarContainer.width()*100;return r=Math.min(100,Math.max(r,0)),this.container&&this.container.seekPercentage(r),this.setSeekPercentage(r),!1}}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible=!0}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible=!1}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!this.disabled){var r=2e3,n=e&&e.clientX!==this.lastMouseX&&e.clientY!==this.lastMouseY;(!e||n||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(xe.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(xe.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return t.hide()}),r),e&&(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY));var i=!0;this.updateCursorStyle(i)}}},{key:"hide",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isVisible()){var r=t||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var n=this.userKeepVisible||this.keepVisible,i=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(t||n||i))this.hideId=setTimeout((function(){return e.hide()}),r);else{this.trigger(xe.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(xe.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var a=!1;this.updateCursorStyle(a)}}}}},{key:"updateCursorStyle",value:function(e){e?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}},{key:"settingsUpdate",value:function(){var e=this.getSettings();!e||this.fullScreenOnVideoTagSupported||Ar.fullscreenEnabled()||(e["default"]&&Tr(e["default"],"fullscreen"),e.left&&Tr(e.left,"fullscreen"),e.right&&Tr(e.right,"fullscreen"));var t=JSON.stringify(this.settings)!==JSON.stringify(e);t&&(this.settings=e,this.render())}},{key:"getSettings",value:function(){return x.extend(!0,{},this.container&&this.container.settings)}},{key:"highDefinitionUpdate",value:function(e){this.isHD=e;var t=e?"addClass":"removeClass";this.$hdIndicator[t]("enabled")}},{key:"createCachedElements",value:function(){var e=this.$el.find(".media-control-layer");this.$duration=e.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=e.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=e.find("button.media-control-button[data-playpause]"),this.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}},{key:"resetIndicators",value:function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}},{key:"initializeIcons",value:function(){var e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(ir),e.find("button.media-control-button[data-pause]").append(ar),e.find("button.media-control-button[data-stop]").append(fr),this.$playPauseToggle.append(ir),this.$playStopToggle.append(ir),this.$volumeIcon.append(pr),this.$fullscreenToggle.append(mr),this.$hdIndicator.append(yr)}},{key:"setSeekPercentage",value:function(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarPercentage!==e&&(this.displayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:"".concat(e,"%")}),this.$seekBarScrubber.css({left:"".concat(e,"%")}))}},{key:"seekRelative",value:function(e){if(this.settings.seekEnabled){var t=this.container.getCurrentTime(),r=this.container.getDuration(),n=Math.min(Math.max(t+e,0),r);n=Math.min(100*n/r,100),this.container.seekPercentage(n)}}},{key:"bindKeyAndShow",value:function(e,t){var r=this;this.kibo.down(e,(function(){return r.show(),t()}))}},{key:"bindKeyEvents",value:function(){var e=this;if(!F.isMobile&&!this.options.disableKeyboardShortcuts){this.unbindKeyEvents(),this.kibo=new ur(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})),this.bindKeyAndShow("left",(function(){return e.seekRelative(-5)})),this.bindKeyAndShow("right",(function(){return e.seekRelative(5)})),this.bindKeyAndShow("shift left",(function(){return e.seekRelative(-10)})),this.bindKeyAndShow("shift right",(function(){return e.seekRelative(10)})),this.bindKeyAndShow("shift ctrl left",(function(){return e.seekRelative(-15)})),this.bindKeyAndShow("shift ctrl right",(function(){return e.seekRelative(15)}));var t=["1","2","3","4","5","6","7","8","9","0"];t.forEach((function(t){e.bindKeyAndShow(t,(function(){e.settings.seekEnabled&&e.container&&e.container.seekPercentage(10*t)}))}))}}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}},{key:"parseColors",value:function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&x(e).find("svg path").css("fill",this.buttonsColor)}},{key:"destroy",value:function(){x(document).unbind("mouseup",this.stopDragHandler),x(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),Vt(Mt(r.prototype),"destroy",this).call(this)}},{key:"configure",value:function(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(xe.MEDIACONTROL_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=this,t=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((function(){return e.hide()}),t),this.disabled&&this.hide()),F.isSafari&&F.isMobile&&(F.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var r=0;return this.displayedSeekBarPercentage&&(r=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(r),setTimeout((function(){!e.settings.seekEnabled&&e.$seekBarContainer.addClass("seek-disabled"),!F.isMobile&&!e.options.disableKeyboardShortcuts&&e.bindKeyEvents(),e.playerResize({width:e.options.width,height:e.options.height}),e.hideVolumeBar(0)}),0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(xe.MEDIACONTROL_RENDERED),this}}]),r}(Ze);kr.extend=function(e){return Er(kr,e)};var Sr='<div class="play-wrapper" data-poster></div>\n',wr=".player-poster[data-poster] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: transparent;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n";zt(wr);var Rr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.hasStartedPlaying=!1,n.playRequested=!1,n.render(),setTimeout((function(){return n.update()}),0),n}return xt(r,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(Sr)}},{key:"shouldRender",get:function(){var e=!(!this.options.poster||!this.options.poster.showForNoOp);return"html_img"!==this.container.playback.name&&(this.container.playback.getPlaybackType()!==et.NO_OP||e)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||void 0===this.options.poster.showOnVideoEnd}},{key:"bindEvents",value:function(){this.listenTo(this.container,xe.CONTAINER_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,xe.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,xe.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,xe.CONTAINER_ENDED,this.onStop)}},{key:"onError",value:function(e){this.hasFatalError=e.level===qe.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())}},{key:"onPlay",value:function(){this.hasStartedPlaying=!0,this.update()}},{key:"onStop",value:function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()}},{key:"updatePlayButton",value:function(e){!e||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()}},{key:"showPlayButton",value:function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.$el.removeClass("clickable")}},{key:"clicked",value:function(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.playback&&(this.container.playback._consented=!0),this.container.play()),!1}},{key:"shouldHideOnPlay",value:function(){return!this.container.playback.isAudioOnly}},{key:"update",value:function(){if(this.shouldRender){var e=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(e),this.updatePoster()}}},{key:"updatePoster",value:function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}},{key:"showPoster",value:function(){this.container.disableMediaControl(),this.$el.show()}},{key:"hidePoster",value:function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()}},{key:"render",value:function(){if(this.shouldRender){this.$el.html(this.template());var e=this.options.poster&&void 0===this.options.poster.custom;if(e){var t=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+t+")"}),this.removeVideoElementPoster()}else this.options.poster&&(this.$el.css({background:this.options.poster.custom}),this.removeVideoElementPoster());this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(ir),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var r=this.options.mediacontrol&&this.options.mediacontrol.buttons;return r&&this.$el.find("svg path").css("fill",r),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(r=this.options.mediacontrol.buttons,this.$playButton.css("color",r)),this.update(),this}}},{key:"removeVideoElementPoster",value:function(){this.container.playback&&this.container.playback.$el&&this.container.playback.$el[0]&&this.container.playback.$el[0].removeAttribute&&this.container.playback.$el[0].removeAttribute("poster")}}]),r}(pt),Cr="<span data-seek-time></span>\n<span data-duration></span>\n",Lr='.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n';zt(Lr);var Ir=me.formatTime,Or=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.hoveringOverSeekBar=!1,n.hoverPosition=null,n.duration=null,n.firstFragDateTime=null,n.actualLiveTime=!!n.mediaControl.options.actualLiveTime,n.actualLiveTime&&(n.mediaControl.options.actualLiveServerTime?n.actualLiveServerTimeDiff=(new Date).getTime()-new Date(n.mediaControl.options.actualLiveServerTime).getTime():n.actualLiveServerTimeDiff=0),n}return xt(r,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(Cr)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===et.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,xe.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,xe.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,xe.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,xe.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,xe.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,r,n;return this.useActualLiveTime?(this.firstFragDateTime?(n=new Date(this.firstFragDateTime),r=new Date(this.firstFragDateTime),r.setHours(0,0,0,0),t=(n.getTime()-r.getTime())/1e3+this.duration):(r=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),n=new Date(r),t=(n-r.setHours(0,0,0,0))/1e3),e=t-this.duration+this.hoverPosition*this.duration,e<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=Ir(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var r=Ir(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);r!==this.displayedDuration&&(this.$durationEl.text(r),this.displayedDuration=r)}else this.$durationEl.hide();this.$el.show();var n=this.mediaControl.$seekBarContainer.width(),i=this.$el.width(),a=this.hoverPosition*n;a-=i/2,a=Math.max(0,Math.min(a,n-i)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),r}(Ze),Dr="<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n",Pr=".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\n            animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    -webkit-animation-delay: -0.32s;\n            animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    -webkit-animation-delay: -0.16s;\n            animation-delay: -0.16s; }\n\n@-webkit-keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n";zt(Pr);var xr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.template=He(Dr),n.showTimeout=null,n.listenTo(n.container,xe.CONTAINER_STATE_BUFFERING,n.onBuffering),n.listenTo(n.container,xe.CONTAINER_STATE_BUFFERFULL,n.onBufferFull),n.listenTo(n.container,xe.CONTAINER_STOP,n.onStop),n.listenTo(n.container,xe.CONTAINER_ENDED,n.onStop),n.listenTo(n.container,xe.CONTAINER_ERROR,n.onStop),n.render(),n}return xt(r,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}},{key:"onBuffering",value:function(){this.show()}},{key:"onBufferFull",value:function(){this.hide()}},{key:"onStop",value:function(){this.hide()}},{key:"show",value:function(){var e=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return e.$el.show()}),300))}},{key:"hide",value:function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()}},{key:"render",value:function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this}}]),r}(pt),Nr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.setInitialAttrs(),n.reportInterval=n.options.reportInterval||5e3,n.state="IDLE",n}return xt(r,[{key:"name",get:function(){return"stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,xe.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,xe.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,xe.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,xe.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,xe.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,xe.PLAYBACK_STATS_ADD,this.onStatsAdd)}},{key:"setInitialAttrs",value:function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}}},{key:"onPlay",value:function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))}},{key:"onStop",value:function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"}},{key:"onBuffering",value:function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++}},{key:"onBufferFull",value:function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"}},{key:"getRebufferingTime",value:function(){return Date.now()-this.rebufferingTimeInit}},{key:"getWatchingTime",value:function(){var e=Date.now()-this.watchingTimeInit;return e-this.rebufferingTime}},{key:"isRebuffering",value:function(){return!!this.rebufferingTimeInit}},{key:"onStatsAdd",value:function(e){x.extend(this.externalMetrics,e)}},{key:"getStats",value:function(){var e={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return x.extend(e,this.externalMetrics),e}},{key:"report",value:function(){this.container.statsReport(this.getStats())}}]),r}(ht),Mr='<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target="_blank" href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n',Fr=".clappr-watermark[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n.clappr-watermark[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n.clappr-watermark[data-watermark] img {\n  max-width: 100%; }\n\n.clappr-watermark[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n.clappr-watermark[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n";zt(Fr);for(var jr=function(e){Nt(r,e);var t=Gt(r);function r(e){var n;return Dt(this,r),n=t.call(this,e),n.configure(),n}return xt(r,[{key:"name",get:function(){return"watermark"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return He(Mr)}},{key:"bindEvents",value:function(){this.listenTo(this.container,xe.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,xe.CONTAINER_STOP,this.onStop),this.listenTo(this.container,xe.CONTAINER_OPTIONS_CHANGE,this.configure)}},{key:"configure",value:function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()}},{key:"onPlay",value:function(){this.hidden||this.$el.show()}},{key:"onStop",value:function(){this.$el.hide()}},{key:"render",value:function(){this.$el.hide();var e={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(e)),this.container.$el.append(this.$el),this}}]),r}(pt),Ur={ClickToPause:Yt,ClosedCaptions:qt,DVRControls:Jt,EndVideo:Qt,ErrorScreen:nr,Favicon:sr,GoogleAnalytics:lr,MediaControl:kr,Poster:Rr,SeekTime:Or,SpinnerThreeBounce:xr,Stats:Nr,WaterMark:jr},Br="0.4.5",Gr=0,Kr=Object.values(Ur);Gr<Kr.length;Gr++){var Vr=Kr[Gr];ut.registerPlugin(Vr)}var Yr=Ur.ClickToPause,Hr=Ur.ClosedCaptions,Wr=Ur.DVRControls,zr=Ur.EndVideo,$r=Ur.ErrorScreen,qr=Ur.Favicon,Xr=Ur.GoogleAnalytics,Zr=Ur.MediaControl,Jr=Ur.Poster,Qr=Ur.SeekTime,en=Ur.SpinnerThreeBounce,tn=Ur.Stats,rn=Ur.WaterMark,nn=r(r({},Ot),{},{ClickToPause:Yr,ClosedCaptions:Hr,DVRControls:Wr,EndVideo:zr,ErrorScreen:$r,Favicon:qr,GoogleAnalytics:Xr,MediaControl:Zr,Poster:Jr,SeekTime:Qr,SpinnerThreeBounce:en,Stats:tn,WaterMark:rn,Vendor:cr,Plugins:Ur,version:Br});function an(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?an(Object(r),!0).forEach((function(t){cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(e,t,r){return t&&ln(e.prototype,t),r&&ln(e,r),e}function cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}function hn(e){return hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hn(e)}function fn(e,t){return fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fn(e,t)}function pn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?gn(e):t}function vn(e){var t=pn();return function(){var r,n=hn(e);if(t){var i=hn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mn(this,r)}}function yn(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=hn(e),null===e)break;return e}function bn(e,t,r){return bn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=yn(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},bn(e,t,r||e)}function An(e){return _n(e)||En(e)||Tn(e)||Sn()}function _n(e){if(Array.isArray(e))return kn(e)}function En(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Tn(e,t){if(e){if("string"===typeof e)return kn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function wn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var Rn={exports:{}};(function(e,t){"undefined"!==typeof window&&function(t,r){e.exports=r()}(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=new Array(a);n<a;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(i,"");while(e.length!==(e=e.replace(a,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
    !*** ./node_modules/webworkify-webpack/index.js ***!
    \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,n){var l={};l[n]=[];var u=t.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;var d,h=c[1],f=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");while(d=f.exec(u))"dll-reference"!==d[3]&&l[n].push(d[3]);f=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");while(d=f.exec(u))e[d[2]]||(l[n].push(d[1]),e[d[2]]=r(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var p=Object.keys(l),g=0;g<p.length;g++)for(var m=0;m<l[p[g]].length;m++)s(l[p[g]][m])&&(l[p[g]][m]=1*l[p[g]][m]);return l}function u(e){var t=Object.keys(e);return t.reduce((function(t,r){return t||e[r].length>0}),!1)}function c(e,t){var r={main:[t]},n={main:[]},i={main:{}};while(u(r))for(var a=Object.keys(r),o=0;o<a.length;o++){var s=a[o],c=r[s],d=c.pop();if(i[s]=i[s]||{},!i[s][d]&&e[s][d]){i[s][d]=!0,n[s]=n[s]||[],n[s].push(d);for(var h=l(e,e[s][d],s),f=Object.keys(h),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(h[f[p]])}}return n}e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:c(i,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){var t=0;while(a[e][t])t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,u=l.createObjectURL(s),d=new window.Worker(u);return d.objectURL=u,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
    !*** ./src/crypt/decrypter.js + 3 modules ***!
    \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}var t=e.prototype;return t.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}var t=e.prototype;return t.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=i;function o(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}var s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],b=h[y],A=257*h[m]^16843008*m;n[f]=A<<24|A>>>8,i[f]=A<<16|A>>>16,a[f]=A<<8|A>>>24,o[f]=A,A=16843009*b^65537*y^257*v^16843008*f,l[m]=A<<24|A>>>8,u[m]=A<<16|A>>>16,c[m]=A<<8|A>>>24,d[m]=A,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;while(n<t.length&&r)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=t[a]:(l=s,a%i===0?(l=l<<8|l>>>24,l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i===4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){var i,a,s,l,u,c,d,h,f,p,g,m,v,y,b=this.keySize+6,A=this.invKeySchedule,_=this.invSBox,E=this.invSubMix,T=E[0],k=E[1],S=E[2],w=E[3],R=this.uint8ArrayToUint32Array_(r),C=R[0],L=R[1],I=R[2],O=R[3],D=new Int32Array(e),P=new Int32Array(D.length),x=this.networkToHostOrderSwap;while(t<D.length){for(f=x(D[t]),p=x(D[t+1]),g=x(D[t+2]),m=x(D[t+3]),u=f^A[0],c=m^A[1],d=g^A[2],h=p^A[3],v=4,y=1;y<b;y++)i=T[u>>>24]^k[c>>16&255]^S[d>>8&255]^w[255&h]^A[v],a=T[c>>>24]^k[d>>16&255]^S[h>>8&255]^w[255&u]^A[v+1],s=T[d>>>24]^k[h>>16&255]^S[u>>8&255]^w[255&c]^A[v+2],l=T[h>>>24]^k[u>>16&255]^S[c>>8&255]^w[255&d]^A[v+3],u=i,c=a,d=s,h=l,v+=4;i=_[u>>>24]<<24^_[c>>16&255]<<16^_[d>>8&255]<<8^_[255&h]^A[v],a=_[c>>>24]<<24^_[d>>16&255]<<16^_[h>>8&255]<<8^_[255&u]^A[v+1],s=_[d>>>24]<<24^_[h>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^A[v+2],l=_[h>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&d]^A[v+3],v+=3,P[t]=x(i^C),P[t+1]=x(l^L),P[t+2]=x(s^I),P[t+3]=x(a^O),C=f,L=p,I=g,O=m,t+=4}return n?o(P.buffer):P.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),l=s,u=r("./src/errors.ts"),c=r("./src/utils/logger.js"),d=r("./src/events.js"),h=r("./src/utils/get-self-scope.js"),f=Object(h["getSelfScope"])(),p=function(){function e(e,t,r){var n=void 0===r?{}:r,i=n.removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var o=f.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(s){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,i){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(c["logger"].log("JS AES decrypt"),this.logEnabled=!1);var s=this.decryptor;s||(this.decryptor=s=new l),s.expandKey(t),i(s.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(c["logger"].log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(u,t)),this.fastAesKey.expandKey().then((function(a){var s=new n(u,r);s.decrypt(e,a).catch((function(n){o.onWebCryptoError(n,e,t,r,i)})).then((function(e){i(e)}))})).catch((function(n){o.onWebCryptoError(n,e,t,r,i)}))}},t.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(c["logger"].log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c["logger"].error("decrypting error : "+e.message),this.observer.trigger(d["default"].ERROR,{type:u["ErrorTypes"].MEDIA_ERROR,details:u["ErrorDetails"].FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t["default"]=p},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
    !*** ./src/demux/demuxer-inline.js + 12 modules ***!
    \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){r.r(t);var n=r("./src/events.js"),i=r("./src/errors.ts"),a=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t,r,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),l=(60&t[r+2])>>>2,!(l>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s["logger"].log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function c(e,t){return 255===e[t]&&240===(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function h(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&c(e,t))}function p(e,t){if(f(e,t)){var r=d(e,t);if(t+r>=e.length)return!1;var n=h(e,t);if(n<=r)return!1;var i=t+n;if(i===e.length||i+1<e.length&&c(e,i))return!0}return!1}function g(e,t,r,n,i){if(!e.samplerate){var a=u(t,r,n,i);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,s["logger"].log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function m(e){return 9216e4/e}function v(e,t,r,n,i){var a,o,s,l=e.length;if(a=d(e,t),o=h(e,t),o-=a,o>0&&t+a+o<=l)return s=r+n*i,{headerLength:a,frameLength:o,stamp:s}}function y(e,t,r,n,i){var a=m(e.samplerate),o=v(t,r,n,i,a);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,c={unit:t.subarray(r+l,r+l+u),pts:s,dts:s};return e.samples.push(c),{sample:c,length:u+l}}}var b=r("./src/demux/id3.js"),A=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=b["default"].getID3Data(e,0)||[],r=t.length,n=e.length;r<n;r++)if(p(e,r))return s["logger"].log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=this._audioTrack,a=b["default"].getID3Data(e,0)||[],l=b["default"].getTimeStamp(a),u=Object(o["isFiniteNumber"])(l)?90*l:9e4*t,c=0,d=u,h=e.length,p=a.length,m=[{pts:d,dts:d,data:a}];while(p<h-1)if(f(e,p)&&p+5<h){g(i,this.observer,e,p,i.manifestCodec);var v=y(i,e,p,u,c);if(!v){s["logger"].log("Unable to parse AAC frame");break}p+=v.length,d=v.sample.pts,c++}else b["default"].isHeader(e,p)?(a=b["default"].getID3Data(e,p),m.push({pts:d,dts:d,data:a}),p+=a.length):p++;this.remuxer.remux(i,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),_=A,E=r("./src/demux/mp4demuxer.js"),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,l={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==i&&15!==i&&3!==a){var s=3===r?3-n:3===n?3:4,l=1e3*T.BitratesMap[14*s+i-1],u=3===r?0:2===r?1:2,c=T.SamplingRateMap[3*u+a],d=e[t+3]>>6===3?1:2,h=T.SamplesCoefficients[r][n],f=T.BytesInSlot[n],p=8*h*f,g=parseInt(h*l/c+o,10)*f;return{sampleRate:c,channelCount:d,frameLength:g,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=4,n=this.parseHeader(e,t),i=r;n&&n.frameLength&&(i=n.frameLength);var a=t+i;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},k=T,S=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s["logger"].error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,r,n,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var A=f();if(0===A)f();else if(1===A)for(g(1),m(),m(),t=f(),o=0;o<t;o++)m();v(),g(1),r=f(),n=f(),i=h(1),0===i&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),c=f());var _=[1,1];if(p()&&p()){var E=d();switch(E){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:_}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),w=S,R=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new a["default"](e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;;r++){if(r>=i.length)break;var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}(),C=R,L={video:1,audio:2,id3:3,text:4},I=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new C(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&s["logger"].warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){var t=Math.min(1e3,e.length-564),r=0;while(r<t){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:L[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,r,a,o){var l,u,c,d,h,f,p=t.length,g=!1;this.pmtUnknownTypes={},this.contiguous=a;var m=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,b=this._id3Track,A=v.pid,_=y.pid,E=b.pid,T=this._pmtId,k=v.pesData,S=y.pesData,w=b.pesData,R=this._parsePAT,C=this._parsePMT.bind(this),L=this._parsePES,I=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),x=e._syncOffset(t);for(p-=(p+x)%188,l=x;l<p;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],d=(48&t[l+3])>>4,d>1){if(h=l+5+t[l+4],h===l+188)continue}else h=l+4;switch(c){case A:u&&(k&&(f=L(k))&&I(f,!1),k={data:[],size:0}),k&&(k.data.push(t.subarray(h,l+188)),k.size+=l+188-h);break;case _:u&&(S&&(f=L(S))&&(y.isAAC?O(f):D(f)),S={data:[],size:0}),S&&(S.data.push(t.subarray(h,l+188)),S.size+=l+188-h);break;case E:u&&(w&&(f=L(w))&&P(f),w={data:[],size:0}),w&&(w.data.push(t.subarray(h,l+188)),w.size+=l+188-h);break;case 0:u&&(h+=t[h]+1),T=this._pmtId=R(t,h);break;case T:u&&(h+=t[h]+1);var N=C(t,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);A=N.avc,A>0&&(v.pid=A),_=N.audio,_>0&&(y.pid=_,y.isAAC=N.isAAC),E=N.id3,E>0&&(b.pid=E),g&&!m&&(s["logger"].log("reparse from beginning"),g=!1,l=x-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=!0;break}}else this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(f=L(k))?(I(f,!0),v.pesData=null):v.pesData=k,S&&(f=L(S))?(y.isAAC?O(f):D(f),y.pesData=null):(S&&S.size&&s["logger"].log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=S),w&&(f=L(w))?(P(f),b.pesData=null):b.pesData=w,null==this.sampleAes?this.remuxer.remux(y,v,b,this._txtTrack,r,a,o):this.decryptAndRemux(y,v,b,this._txtTrack,r,a,o)},t.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},t.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,a,o)}))}else this.remuxer.remux(e,t,r,n,i,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var n=this.pmtUnknownTypes[e]||0;return 0===n&&(this.pmtUnknownTypes[e]=0,t.call(s["logger"],r)),this.pmtUnknownTypes[e]++,n},t._parsePMT=function(e,t,r,n){var i,a,o,l,u={audio:-1,avc:-1,id3:-1,isAAC:!0};i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;while(t<a){switch(l=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){this._trackUnknownPmt(e[t],s["logger"].warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===u.audio&&(u.audio=l);break;case 21:-1===u.id3&&(u.id3=l);break;case 219:if(!n){this._trackUnknownPmt(e[t],s["logger"].warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===u.avc&&(u.avc=l);break;case 3:case 4:r?-1===u.audio&&(u.audio=l,u.isAAC=!1):this._trackUnknownPmt(e[t],s["logger"].warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s["logger"].warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s["logger"].log,"Unknown stream type:"+e[t]);break}t+=5+((15&e[t+3])<<8|e[t+4])}return u},t._parsePES=function(e){var t,r,n,i,a,o,l,u,c,d=0,h=e.data;if(!e||0===e.size)return null;while(h[0].length<19&&h.length>1){var f=new Uint8Array(h[0].length+h[1].length);f.set(h[0]),f.set(h[1],h[0].length),h[0]=f,h.splice(1,1)}if(t=h[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;if(r=t[7],192&r&&(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,l-u>54e5&&(s["logger"].warn(Math.round((l-u)/9e4)+"s delta between PTS and DTS, align them"),l=u)):u=l),a=t[8],c=a+9,e.size<=c)return null;e.size-=c,o=new Uint8Array(e.size);for(var p=0,g=h.length;p<g;p++){t=h[p];var m=t.byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}o.set(t,d),d+=m}return i&&(i-=a+3),{data:o,pts:l,dts:u,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s["logger"].log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var h=new w(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,r=new w(a.discardEPB(t.data)),r.readUByte();var f=0,p=0,g=!1,m=0;while(!g&&r.bytesAvailable>1){f=0;do{m=r.readUByte(),f+=m}while(255===m);p=0;do{m=r.readUByte(),p+=m}while(255===m);if(4===f&&0!==r.bytesAvailable){g=!0;var v=r.readUByte();if(181===v){var y=r.readUShort();if(49===y){var A=r.readUInt();if(1195456820===A){var _=r.readUByte();if(3===_){var E=r.readUByte(),T=r.readUByte(),k=31&E,S=[E,T];for(i=0;i<k;i++)S.push(r.readUByte()),S.push(r.readUByte()),S.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,p>16){var R=[];for(i=0;i<16;i++)R.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||R.push("-");var C=p-16,L=new Uint8Array(C);for(i=0;i<C;i++)L[i]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:R.join(""),userDataBytes:L,userData:Object(b["utf8ArrayToStr"])(L.buffer)})}}else if(p<r.bytesAvailable)for(i=0;i<p;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!o.sps){r=new w(t.data);var I=r.readSPS();o.width=I.width,o.height=I.height,o.pixelRatio=I.pixelRatio,o.sps=[t.data],o.duration=a._duration;var O=t.data.subarray(1,4),D="avc1.";for(i=0;i<3;i++){var P=O[i].toString(16);P.length<2&&(P="0"+P),D+=P}o.codec=D}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ");break}if(l&&n){var x=l.units;x.push(t)}})),t&&l&&(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,i,a,o=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],h=-1;-1===u&&(h=0,a=31&e[0],u=0,o=1);while(o<s)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(h>=0)n={data:e.subarray(h,o-u-1),type:a},d.push(n);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),r=o-u-1,r>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(e.subarray(0,r),f.data.byteLength),f.data=p}}o<s?(i=31&e[o],h=o,a=i,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(h>=0&&u>=0&&(n={data:e.subarray(h,s),type:a,state:u},d.push(n)),0===d.length){var g=this._getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return l.naluState=u,d},t.discardEPB=function(e){var t,r,n=e.byteLength,i=[],a=1;while(a<n-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,a,o,l,u,c,d=this._audioTrack,h=e.data,p=e.pts,v=0,b=this.aacOverFlow,A=this.aacLastPTS;if(b){var _=new Uint8Array(b.byteLength+h.byteLength);_.set(b,0),_.set(h,b.byteLength),h=_}for(a=v,l=h.length;a<l-1;a++)if(f(h,a))break;if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s["logger"].warn("parsing error:"+u),this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:c,reason:u}),c))return;if(g(d,this.observer,h,a,this.audioCodec),r=0,t=m(d.samplerate),b&&A){var E=A+t;Math.abs(E-p)>1&&(s["logger"].log("AAC: align PTS for overlapping frames by "+Math.round((E-p)/90)),p=E)}while(a<l){if(f(h,a)){if(a+5<l){var T=y(d,h,a,p,r);if(T){a+=T.length,o=T.sample.pts,r++;continue}}break}a++}b=a<l?h.subarray(a,l):null,this.aacOverFlow=b,this.aacLastPTS=o},t._parseMPEGPES=function(e){var t=e.data,r=t.length,n=0,i=0,a=e.pts;while(i<r)if(k.isHeader(t,i)){var o=k.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),O=I,D=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=b["default"].getID3Data(e,0);if(n&&void 0!==b["default"].getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(k.probe(e,t))return s["logger"].log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){var i=b["default"].getID3Data(e,0)||[],a=b["default"].getTimeStamp(i),o=void 0!==a?90*a:9e4*t,s=i.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:i}];while(s<l)if(k.isHeader(e,s)){var f=k.appendFrame(d,e,s,o,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else b["default"].isHeader(e,s)?(i=b["default"].getID3Data(e,s),h.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),P=D,x=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},e}(),N=x,M=Math.pow(2,32)-1,F=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;while(i--)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){var r=t.length,n=[];while(r--)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){var r=t.length,n=[];while(r--)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(M+1)),i=Math.floor(r%(M+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(n/(M+1)),s=Math.floor(n%(M+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(M+1)),o=Math.floor(r%(M+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=u[n],a=i.duration,o=i.size,s=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}(),j=F,U=9e4;function B(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function G(e,t){return void 0===t&&(t=!1),B(e,1e3,1/U,t)}function K(e,t){return void 0===t&&(t=1),B(e,U,1/t)}var V=K(10),Y=K(.2),H=null,W=function(){function e(e,t,r,n){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===H){var i=navigator.userAgent.match(/Chrome\/(\d+)/i);H=i?parseInt(i[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var n=r.pts-e;return n<-4294967296?(t=!0,z(e,r.pts)):n>0?e:r.pts}),e[0].pts);return t&&s["logger"].debug("PTS rollover detected"),r},t.remux=function(e,t,r,i,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var f=this.getVideoStartPts(t.samples),p=z(e.samples[0].pts,f)-f,g=p/t.inputTimeScale;d+=Math.max(0,g),h+=Math.max(0,-g)}if(u){e.timescale||(s["logger"].warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var m,v=this.remuxAudio(e,d,o,l);if(c)v&&(m=v.endPTS-v.startPTS),t.timescale||(s["logger"].warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,m)}else if(c){var y=this.remuxVideo(t,h,o,0,l);y&&e.codec&&this.remuxEmptyAudio(e,d,o,y)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(n["default"].FRAG_PARSED)},t.generateIS=function(e,t,r){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s["logger"].log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:j.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&c.length){var m=t.inputTimeScale;if(t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:j.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var v=this.getVideoStartPts(c),y=Math.round(m*r);o=Math.min(o,z(c[0].dts,v)-y),a=Math.min(a,v-y),this.observer.trigger(n["default"].INIT_PTS_FOUND,{initPTS:a})}}else g&&f.audio&&this.observer.trigger(n["default"].INIT_PTS_FOUND,{initPTS:a});Object.keys(f).length?(l.trigger(n["default"].FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,a){var o,l,u,c,d,h=e.timescale,f=e.samples,p=[],g=f.length,m=this._initPTS,v=8,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,A=0,_=!1,E=this.nextAvcDts;if(0!==g){if(!r){var T=t*h,k=f[0].pts-z(f[0].dts,f[0].pts);E=T-k}for(var S=0;S<g;S++){var w=f[S];w.pts=z(w.pts-m,E),w.dts=z(w.dts-m,E),w.dts>w.pts&&(A=Math.max(Math.min(A,w.pts-w.dts),-1*Y)),w.dts<f[S>0?S-1:S].dts&&(_=!0)}_&&f.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id})),c=f[0].dts,d=f[g-1].dts;var R=Math.round((d-c)/(g-1));if(A<0){if(A<-2*R){s["logger"].warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+G(-R,!0)+" ms");for(var C=A,L=0;L<g;L++)f[L].dts=C=Math.max(C,f[L].pts-R),f[L].pts=Math.max(C,f[L].pts)}else{s["logger"].warn("PTS < DTS detected in video samples, shifting DTS by "+G(A,!0)+" ms to overcome this issue");for(var I=0;I<g;I++)f[I].dts=f[I].dts+A}c=f[0].dts,d=f[g-1].dts}if(r){var O=c-E,D=O>R,P=O<-1;if(D||P){D?s["logger"].warn("AVC: "+G(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):s["logger"].warn("AVC: "+G(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),c=E;var x=f[0].pts-O;f[0].dts=c,f[0].pts=x,s["logger"].log("Video: First PTS/DTS adjusted: "+G(x,!0)+"/"+G(c,!0)+", delta: "+G(O,!0)+" ms")}}H&&H<75&&(c=Math.max(0,c));for(var N=0,M=0,F=0;F<g;F++){for(var U=f[F],B=U.units,K=B.length,V=0,W=0;W<K;W++)V+=B[W].data.length;M+=V,N+=K,U.length=V,U.dts=Math.max(U.dts,c),U.pts=Math.max(U.pts,U.dts,0),y=Math.min(U.pts,y),b=Math.max(U.pts,b)}d=f[g-1].dts;var $=M+4*N+8;try{l=new Uint8Array($)}catch(pe){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:$,reason:"fail allocating video mdat "+$})}var q=new DataView(l.buffer);q.setUint32(0,$),l.set(j.types.mdat,4);for(var X=0;X<g;X++){for(var Z=f[X],J=Z.units,Q=0,ee=void 0,te=0,re=J.length;te<re;te++){var ne=J[te],ie=ne.data,ae=ne.data.byteLength;q.setUint32(v,ae),v+=4,l.set(ie,v),v+=ae,Q+=4+ae}if(X<g-1)o=f[X+1].dts-Z.dts;else{var oe=this.config,se=Z.dts-f[X>0?X-1:X].dts;if(oe.stretchShortVideoTrack){var le=oe.maxBufferHole,ue=Math.floor(le*h),ce=(a?y+a*h:this.nextAudioPts)-Z.pts;ce>ue?(o=ce-se,o<0&&(o=se),s["logger"].log("It is approximately "+G(ce,!1)+" ms to the next segment; using duration "+G(o,!1)+" ms for the last video frame.")):o=se}else o=se}ee=Math.round(Z.pts-Z.dts),p.push({size:Q,duration:o,cts:ee,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Z.key?2:1,isNonSync:Z.key?0:1}})}this.nextAvcDts=d+o;var de=e.dropped;if(e.nbNalu=0,e.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var he=p[0].flags;he.dependsOn=2,he.isNonSync=0}e.samples=p,u=j.moof(e.sequenceNumber++,c,e),e.samples=[];var fe={data1:u,data2:l,startPTS:y/h,endPTS:(b+o)/h,startDTS:c/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:de};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,fe),fe}},t.remuxAudio=function(e,t,r,a){var o,l,u,c,d,h,f=e.inputTimeScale,p=e.timescale,g=f/p,m=e.isAAC?1024:1152,v=m*g,y=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,A=b?0:8,_=e.samples,E=[],T=this.nextAudioPts;if(r|=_.length&&T&&(a&&Math.abs(t-T/f)<.1||Math.abs(_[0].pts-T-y)<20*v),_.forEach((function(e){e.pts=e.dts=z(e.pts-y,t*f)})),_=_.filter((function(e){return e.pts>=0})),0!==_.length){if(r||(T=a?Math.max(0,t*f):_[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,S=0,w=T;S<_.length;){var R=_[S],C=R.pts,L=C-w;if(L<=-k*v)r||S>0?(s["logger"].warn("Dropping 1 audio frame @ "+G(w,!0)/1e3+"s due to "+G(L,!0)+" ms overlap."),_.splice(S,1)):(s["logger"].warn("Audio frame @ "+G(C,!0)/1e3+"s overlaps nextAudioPts by "+G(L,!0)+" ms."),w=C+v,S++);else if(L>=k*v&&L<V&&w){var I=Math.round(L/v);s["logger"].warn("Injecting "+I+" audio frames @ "+G(w,!0)/1e3+"s due to "+G(L,!0)+" ms gap.");for(var O=0;O<I;O++){var D=Math.max(w,0);l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=R.unit.subarray()),_.splice(S,0,{unit:l,pts:D,dts:D}),w+=v,S++}R.pts=R.dts=w,w+=v,S++}else R.pts=R.dts=w,w+=v,S++}var P=_.length,x=0;while(P--)x+=_[P].unit.byteLength;for(var M=0,F=_.length;M<F;M++){var U=_[M],B=U.unit,K=U.pts;if(void 0!==h&&o)o.duration=Math.round((K-h)/g);else{var Y=K-T,H=0;if(r&&e.isAAC&&Y){if(Y>0&&Y<V)H=Math.round((K-T)/v),s["logger"].log(G(Y,!0)+" ms hole between AAC samples detected,filling it"),H>0&&(l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(l=B.subarray()),x+=H*l.length);else if(Y<-12){s["logger"].log("drop overlapping AAC sample, expected/parsed/delta: "+G(T,!0)+" ms / "+G(K,!0)+" ms / "+G(-Y,!0)+" ms"),x-=B.byteLength;continue}K=T}if(d=K,!(x>0))return;x+=A;try{u=new Uint8Array(x)}catch(ee){return void this.observer.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MUX_ERROR,details:i["ErrorDetails"].REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}if(!b){var W=new DataView(u.buffer);W.setUint32(0,x),u.set(j.types.mdat,4)}for(var $=0;$<H;$++)l=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),l||(s["logger"].log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=B.subarray()),u.set(l,A),A+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(o)}u.set(B,A);var q=B.byteLength;A+=q,o={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(o),h=K}var X=0;if(P=E.length,P>=2&&(X=E[P-2].duration,o.duration=X),P){this.nextAudioPts=T=h+g*X,e.samples=E,c=b?new Uint8Array:j.moof(e.sequenceNumber++,d/g,e),e.samples=[];var Z=d/f,J=T/f,Q={data1:c,data2:u,startPTS:Z,endPTS:J,startDTS:Z,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:P};return this.observer.trigger(n["default"].FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,l=this.nextAudioPts,u=(void 0!==l?l:n.startDTS*i)+this._initDTS,c=n.endDTS*i+this._initDTS,d=1024,h=o*d,f=Math.ceil((c-u)/h),p=N.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s["logger"].warn("remux empty Audio"),p){for(var g=[],m=0;m<f;m++){var v=u+m*h;g.push({unit:p,pts:v,dts:v})}e.samples=g,this.remuxAudio(e,t,r)}else s["logger"].trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var i=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<r;s++){var l=e.samples[s];l.pts=z(l.pts-a,t*i)/i,l.dts=z(l.dts-o,t*i)/i}this.observer.trigger(n["default"].FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=z(s.pts-a,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(n["default"].FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}();function z(e,t){var r;if(void 0===t)return e;r=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=r;return e}var $,q=W,X=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,i,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n["default"].FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n["default"].FRAG_PARSED)},e}(),Z=X,J=Object(l["getSelfScope"])();try{$=J.performance.now.bind(J.performance)}catch(ee){s["logger"].debug("Unable to use Performance API on this environment"),$=J.Date.now}var Q=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,i,o,s,l,u,c,d,h,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a["default"](this.observer,this.config));var m=$();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=$();p.observer.trigger(n["default"].FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,o,s,l,u,c,d,h,f)},t.pushDecrypted=function(e,t,r,a,o,s,l,u,c,d,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var m,v=this.observer,y=this.typeSupported,b=this.config,A=[{demux:O,remux:q},{demux:E["default"],remux:Z},{demux:_,remux:q},{demux:P,remux:q}],T=0,k=A.length;T<k;T++)if(m=A[T],m.demux.probe(e))break;if(!m)return void v.trigger(n["default"].ERROR,{type:i["ErrorTypes"].MEDIA_ERROR,details:i["ErrorDetails"].FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof m.remux||(g=new m.remux(v,b,y,this.vendor)),p&&p instanceof m.demux||(p=new m.demux(v,g,b,y),this.probe=m.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(r,a,o,d),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"===typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,h)},e}();t["default"]=Q},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
    !*** ./src/demux/demuxer-worker.js ***!
    \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){r.r(t);var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=function(e){var t=new o["EventEmitter"];t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n["default"](t,o.typeSupported,s,o.vendor),Object(a["enableLogs"])(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS);break}})),t.on(i["default"].FRAG_DECRYPTED,r),t.on(i["default"].FRAG_PARSING_INIT_SEGMENT,r),t.on(i["default"].FRAG_PARSED,r),t.on(i["default"].ERROR,r),t.on(i["default"].FRAG_PARSING_METADATA,r),t.on(i["default"].FRAG_PARSING_USERDATA,r),t.on(i["default"].INIT_PTS_FOUND,r),t.on(i["default"].FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))};t["default"]=s},"./src/demux/id3.js":
/*!**************************!*\
    !*** ./src/demux/id3.js ***!
    \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,r){r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var n,i=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){var n=r,i=0;while(e.isHeader(t,r)){i+=10;var a=e._readSize(t,r+6);i+=a,e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4),i=10;return{type:r,size:n,data:t.subarray(i,i+n)}},e.getID3Frames=function(t){var r=0,n=[];while(e.isHeader(t,r)){var i=e._readSize(t,r+6);r+=10;var a=r+i;while(r+8<a){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):e._decodeTextFrame(t)},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}var a,s,l,u=e.length,c="",d=0;while(d<u){if(a=e[d++],0===a&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0);break}}return c},e}();function o(){var e=Object(i["getSelfScope"])();return n||"undefined"===typeof e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=a._utf8ArrayToStr;t["default"]=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.js ***!
    \*********************************/
/*! exports provided: default */function(e,t,r){r.r(t);var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i["default"].FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!r.length)return null;for(n=l;n<o;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=i>1?n+i:o,a===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:u}):(s=e.findBox({data:t,start:n+8,end:u},r.slice(1)),s.length&&(c=c.concat(s)))),n=u;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4;var u=0,c=0;a+=0===s?8:16,a+=2;var d=o.end+c,h=e.readUint16(o,a);a+=2;for(var f=0;f<h;f++){var p=a,g=e.readUint32(o,p);p+=4;var m=2147483647&g,v=(2147483648&g)>>>31;if(1===v)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(o,p);p+=4,r.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/l,start:d,end:d+m-1}}),d+=m,p+=4,a=p}return{earliestPresentationTime:u,timescale:l,version:s,referencesCount:h,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[],i=e.findBox(t,["moov","trak"]);return i.forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=l.data[l.start],o=0===a?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d=e.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[d];if(h){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));n["logger"].log("MP4Demuxer:"+h+":"+p+" found")}r[s]={timescale:u,type:h},r[h]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,a,o;return i=e.readUint32(n,4),a=t[i].timescale||9e4,o=e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0],o/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(i["default"].INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},t.destroy=function(){},e}();t["default"]=o},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e["NETWORK_ERROR"]="networkError",e["MEDIA_ERROR"]="mediaError",e["KEY_SYSTEM_ERROR"]="keySystemError",e["MUX_ERROR"]="muxError",e["OTHER_ERROR"]="otherError"}(n||(n={})),function(e){e["KEY_SYSTEM_NO_KEYS"]="keySystemNoKeys",e["KEY_SYSTEM_NO_ACCESS"]="keySystemNoAccess",e["KEY_SYSTEM_NO_SESSION"]="keySystemNoSession",e["KEY_SYSTEM_LICENSE_REQUEST_FAILED"]="keySystemLicenseRequestFailed",e["KEY_SYSTEM_NO_INIT_DATA"]="keySystemNoInitData",e["MANIFEST_LOAD_ERROR"]="manifestLoadError",e["MANIFEST_LOAD_TIMEOUT"]="manifestLoadTimeOut",e["MANIFEST_PARSING_ERROR"]="manifestParsingError",e["MANIFEST_INCOMPATIBLE_CODECS_ERROR"]="manifestIncompatibleCodecsError",e["LEVEL_EMPTY_ERROR"]="levelEmptyError",e["LEVEL_LOAD_ERROR"]="levelLoadError",e["LEVEL_LOAD_TIMEOUT"]="levelLoadTimeOut",e["LEVEL_SWITCH_ERROR"]="levelSwitchError",e["AUDIO_TRACK_LOAD_ERROR"]="audioTrackLoadError",e["AUDIO_TRACK_LOAD_TIMEOUT"]="audioTrackLoadTimeOut",e["FRAG_LOAD_ERROR"]="fragLoadError",e["FRAG_LOAD_TIMEOUT"]="fragLoadTimeOut",e["FRAG_DECRYPT_ERROR"]="fragDecryptError",e["FRAG_PARSING_ERROR"]="fragParsingError",e["REMUX_ALLOC_ERROR"]="remuxAllocError",e["KEY_LOAD_ERROR"]="keyLoadError",e["KEY_LOAD_TIMEOUT"]="keyLoadTimeOut",e["BUFFER_ADD_CODEC_ERROR"]="bufferAddCodecError",e["BUFFER_APPEND_ERROR"]="bufferAppendError",e["BUFFER_APPENDING_ERROR"]="bufferAppendingError",e["BUFFER_STALLED_ERROR"]="bufferStalledError",e["BUFFER_FULL_ERROR"]="bufferFullError",e["BUFFER_SEEK_OVER_HOLE"]="bufferSeekOverHole",e["BUFFER_NUDGE_ON_STALL"]="bufferNudgeOnStall",e["INTERNAL_EXCEPTION"]="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
    !*** ./src/events.js ***!
    \***********************/
/*! exports provided: default */function(e,t,r){r.r(t);var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};t["default"]=n},"./src/hls.ts":
/*!*********************************!*\
    !*** ./src/hls.ts + 50 modules ***!
    \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){r.r(t),r.d(t,"default",(function(){return In}));var n={};r.r(n),r.d(n,"newCue",(function(){return dr}));var i,a,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number.js"),u=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!==typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(n){c["logger"].error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}},e}(),f=h;(function(e){e["MANIFEST"]="manifest",e["LEVEL"]="level",e["AUDIO_TRACK"]="audioTrack",e["SUBTITLE_TRACK"]="subtitleTrack"})(i||(i={})),function(e){e["MAIN"]="main",e["AUDIO"]="audio",e["SUBTITLE"]="subtitle"}(a||(a={}));var p=r("./src/demux/mp4demuxer.js");function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}var v,y=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return m(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o["buildAbsoluteURL"])(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}(function(e){e["AUDIO"]="audio",e["VIDEO"]="video"})(v||(v={}));var _=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(e={},e[v.AUDIO]=!1,e[v.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},t.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&(r=new y(e.baseuri,e.reluri),r.method=e.method,r.iv=this.createInitializationVector(t)),r},A(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o["buildAbsoluteURL"])(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c["logger"].warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l["isFiniteNumber"])(this.programDateTime))return null;var e=Object(l["isFiniteNumber"])(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}();function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}var k=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return T(e,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l["isFiniteNumber"])(this.fragments[0].programDateTime))}}]),e}(),S=/^(\d+)x(\d+)$/,w=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,R=function(){function e(t){for(var r in"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=S.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};w.lastIndex=0;while(null!==(t=w.exec(e))){var n=t[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),C=R,L={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function I(e,t){var r=L[t];return!!r&&!0===r[e.slice(0,4)]}function O(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var D=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,P=/#EXT-X-MEDIA:(.*)/g,x=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),N=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-("0.4.5"):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,M=/\.(mp4|m4s|m4v|m4a)$/i,F=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o["buildAbsoluteURL"](t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[],a={},o=!1;function s(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return I(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}D.lastIndex=0;while(null!=(n=D.exec(t)))if(n[1]){var l={},u=l.attrs=new C(n[1]);l.url=e.resolve(n[2],r);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(n[3]){var d=new C(n[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,r,n,i){var a;void 0===i&&(i=[]);var o=[],s=0;P.lastIndex=0;while(null!==(a=P.exec(t))){var l=new C(a[1]);if(l.TYPE===n){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),i.length){var c=e.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,i){var a,o,s,u=0,d=0,h=new k(t),f=0,p=null,g=new _,m=null;x.lastIndex=0;while(null!==(a=x.exec(e))){var v=a[1];if(v){g.duration=parseFloat(v);var b=(" "+a[2]).slice(1);g.title=b||null,g.tagList.push(b?["INF",v,b]:["INF",v])}else if(a[3]){if(Object(l["isFiniteNumber"])(g.duration)){var A=u++;g.type=n,g.start=d,s&&(g.levelkey=s),g.sn=A,g.level=r,g.cc=f,g.urlId=i,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),U(g,p),h.fragments.push(g),p=g,d+=g.duration,g=new _}}else if(a[4]){var E=(" "+a[4]).slice(1);p?g.setByteRange(E,p):g.setByteRange(E)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(a=a[0].match(N),!a){c["logger"].warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length;o++)if("undefined"!==typeof a[o])break;var T=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(S?[T,S]:[T]);break;case"PLAYLIST-TYPE":h.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(T);break;case"TARGETDURATION":h.targetduration=parseFloat(T);break;case'"0.4.5"':h.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var w=T,R=new C(w),L=R.enumeratedString("METHOD"),I=R.URI,O=R.hexadecimalInteger("IV"),D=R.KEYFORMAT||"identity";if("com.apple.streamingkeydelivery"===D){c["logger"].warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}L&&(s=new y(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(s.method=L,s.key=null,s.iv=O));break;case"START":var P=new C(T),F=P.decimalFloatingPoint("TIME-OFFSET");Object(l["isFiniteNumber"])(F)&&(h.startTimeOffset=F);break;case"MAP":var B=new C(T);g.relurl=B.URI,B.BYTERANGE&&g.setByteRange(B.BYTERANGE),g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,g=new _,g.rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c["logger"].warn("line parsed but not handled: "+a);break}}}return g=p,g&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return M.test(e.relurl)}))&&(c["logger"].warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new _,g.relurl=h.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&j(h.fragments,m),h},e}();function j(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function U(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null===t||void 0===t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l["isFiniteNumber"])(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var G=window,K=G.performance,V=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].LEVEL_LOADING,u["default"].AUDIO_TRACK_LOADING,u["default"].SUBTITLE_TRACK_LOADING)||this,r.loaders={},r}B(t,e),t.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){var t=e.type;switch(t){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},t.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var r=t.prototype;return r.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},r.getInternalLoader=function(e){return this.loaders[e.type]},r.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},r.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},r.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},r.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},r.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},r.load=function(e){var t=this.hls.config;c["logger"].debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c["logger"].trace("playlist request ongoing"),!1;c["logger"].warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:r=0,o=0,a=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout;break}s=this.createInternalLoader(e);var u={timeout:n,maxRetry:r,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c["logger"].debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},r.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!==typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=K.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r._handleMasterPlaylist=function(e,r,n,i){var a=this.hls,o=e.data,s=t.getResponseUrl(e,n),l=F.parseMasterPlaylist(o,s),d=l.levels,h=l.sessionData;if(d.length){var f=d.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=F.parseMasterPlaylistMedia(o,s,"AUDIO",f),g=F.parseMasterPlaylistMedia(o,s,"SUBTITLES"),m=F.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var v=!1;p.forEach((function(e){e.url||(v=!0)})),!1===v&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c["logger"].log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u["default"].MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:m,url:s,stats:r,networkDetails:i,sessionData:h})}else this._handleManifestParsingError(e,n,"no level found in manifest",i)},r._handleTrackOrLevelPlaylist=function(e,r,n,a){var o=this.hls,c=n.id,d=n.level,h=n.type,f=t.getResponseUrl(e,n),p=Object(l["isFiniteNumber"])(c)?c:0,g=Object(l["isFiniteNumber"])(d)?d:p,m=t.mapContextToLevelType(n),v=F.parseLevelPlaylist(e.data,f,g,m,p);if(v.tload=r.tload,v.fragments.length){if(h===i.MANIFEST){var y={url:f,details:v};o.trigger(u["default"].MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:r,networkDetails:a,sessionData:null})}if(r.tparsed=K.now(),v.needSidxRanges){var b=v.initSegment.url;this.load({url:b,isSidxRequest:!0,type:h,level:d,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=v,this._handlePlaylistLoaded(e,r,n,a)}else o.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"===typeof n.level?n.level:void 0})},r._handleSidxRequest=function(e,t){if("string"===typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=p["default"].parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info;if(i){var n=i.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),i&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},r._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r._handleNetworkError=function(e,t,r,n){var a,o;void 0===r&&(r=!1),void 0===n&&(n=null),c["logger"].info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=r?s["ErrorDetails"].MANIFEST_LOAD_TIMEOUT:s["ErrorDetails"].MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=r?s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:s["ErrorDetails"].LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=r?s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s["ErrorTypes"].NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(u["default"].ERROR,d)},r._handlePlaylistLoaded=function(e,r,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration){var d=t.canHaveQualityLevels(n.type);if(d)this.hls.trigger(u["default"].LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:r,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(u["default"].AUDIO_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(u["default"].SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:r,networkDetails:a});break}}else this._handleManifestParsingError(e,n,"invalid target duration",a)},t}(f),Y=V;function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var W=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING)||this,r.loaders={},r}H(t,e);var r=t.prototype;return r.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s,u,d,h=n[r];h&&(c["logger"].warn("abort previous fragment loader for type: "+r),h.abort()),h=n[r]=t.loader=i.fLoader?new a(i):new o(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l["isFiniteNumber"])(f)&&Object(l["isFiniteNumber"])(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},r.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u["default"].FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},r.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u["default"].FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},t}(f),z=W;function $(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].KEY_LOADING)||this,r.loaders={},r.decryptkey=null,r.decrypturl=null,r}$(t,e);var r=t.prototype;return r.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&&(c["logger"].warn("abort previous key loader for type:"+r),n.abort()),!i)return void c["logger"].warn("key uri is falsy");t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u["default"].KEY_LOADED,{frag:t}))}else c["logger"].warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u["default"].KEY_LOADED,{frag:n})):c["logger"].error("after key load, decryptdata unset")},r.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},r.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].NETWORK_ERROR,details:s["ErrorDetails"].KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(f),X=q;function Z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var J={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Q=function(e){function t(t){var r;return r=e.call(this,t,u["default"].BUFFER_APPENDED,u["default"].FRAG_BUFFERED,u["default"].FRAG_LOADED)||this,r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}Z(t,e);var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},r.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(n){var i=r.fragments[n];if(i&&i.buffered){var a=i.range[e];if(a)for(var o=a.time,s=0;s<o.length;s++){var l=o[s];if(!r.isTimeBuffered(l.startPTS,l.endPTS,t)){r.removeFragment(i.body);break}}}}))},r.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},r.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(a=l.body,o=t)))})),a},r.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=J.NOT_LOADED;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?J.PARTIAL:J.OK:J.APPENDING),n},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(l["isFiniteNumber"])(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(f),ee={search:function(e,t){var r=0,n=e.length-1,i=null,a=null;while(r<=n){i=(r+n)/2|0,a=e[i];var o=t(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}},te=ee,re=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(i){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,i=e.buffered,a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(o){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var n=[];if(r)for(var i=0;i<e.length;i++){var a=n.length;if(a){var o=n[a-1].end;e[i].start-o<r?e[i].end>o&&(n[a-1].end=e[i].end):n.push(e[i])}else n.push(e[i])}else n=e;for(var s,l=0,u=t,c=t,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(t+r>=h&&t<f)u=h,c=f,l=c-t;else if(t+r<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),ne=r("./node_modules/eventemitter3/index.js"),ie=r("./node_modules/webworkify-webpack/index.js"),ae=r("./src/demux/demuxer-inline.js");function oe(){return window.MediaSource||window.WebKitMediaSource}var se=r("./src/utils/get-self-scope.js");function le(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ue=function(e){function t(){return e.apply(this,arguments)||this}le(t,e);var r=t.prototype;return r.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},t}(ne["EventEmitter"]),ce=Object(se["getSelfScope"])(),de=oe()||{isTypeSupported:function(){return!1}},he=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new ue,i=e.config,a=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(u["default"].FRAG_DECRYPTED,a),n.on(u["default"].FRAG_PARSING_INIT_SEGMENT,a),n.on(u["default"].FRAG_PARSING_DATA,a),n.on(u["default"].FRAG_PARSED,a),n.on(u["default"].ERROR,a),n.on(u["default"].FRAG_PARSING_METADATA,a),n.on(u["default"].FRAG_PARSING_USERDATA,a),n.on(u["default"].INIT_PTS_FOUND,a);var o={mp4:de.isTypeSupported("video/mp4"),mpeg:de.isTypeSupported("audio/mpeg"),mp3:de.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!==typeof Worker){var d;c["logger"].log("demuxing in webworker");try{d=this.w=ie(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(i)})}catch(h){c["logger"].warn("Error in worker:",h),c["logger"].error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&ce.URL.revokeObjectURL(d.objectURL),this.demuxer=new ae["default"](n,o,i,l),this.w=void 0}}else this.demuxer=new ae["default"](n,o,i,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,i,a,o,s){var u=this.w,d=Object(l["isFiniteNumber"])(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,v=!g&&m;if(p&&c["logger"].log(this.id+":discontinuity detected"),g&&c["logger"].log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,t,r,n,d,p,g,v,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":ce.URL.revokeObjectURL(this.w.objectURL);break;case u["default"].FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data);break}},e}(),fe=he;function pe(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r);break}}function ge(e,t,r){var n=e[t],i=e[r],a=i.startPTS;if(Object(l["isFiniteNumber"])(a))r>t?(n.duration=a-n.start,n.duration<0&&c["logger"].warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&c["logger"].warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var o=n.cc===i.cc;i.start=n.start+(o&&n.minEndPTS?n.minEndPTS-n.start:n.duration)}else i.start=Math.max(n.start-i.duration,0)}function me(e,t,r,n,i,a){var o=r,s=n;if(Object(l["isFiniteNumber"])(t.startPTS)){var u=Math.abs(t.startPTS-r);Object(l["isFiniteNumber"])(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),s=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var c=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.minEndPTS=s,t.startDTS=i,t.endDTS=a,t.duration=n-r;var d,h,f,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(d=p-e.startSN,h=e.fragments,h[d]=t,f=d;f>0;f--)ge(h,f,f-1);for(f=d;f<h.length-1;f++)ge(h,f,f+1);return e.PTSKnown=!0,c}function ve(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if(be(e,t,(function(e,i){n=e.cc-i.cc,Object(l["isFiniteNumber"])(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0})),t.PTSKnown){if(n){c["logger"].log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=n}r?me(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):Ae(e,t),t.PTSKnown=e.PTSKnown}}function ye(e,t,r){void 0===r&&(r=0);var n=-1;be(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}function be(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=n;o<=i;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function Ae(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}function _e(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var Ee={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}},Te=Ee;function ke(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function Se(e,t){return te.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}function we(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function Re(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var i=ke(r,n[0].cc);if(i&&(!i||i.startPTS))return i;c["logger"].log("No frag in previous level to align on")}else c["logger"].log("No fragments to align")}function Ce(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function Le(e,t,r){Ie(e,r,t),!r.PTSKnown&&t&&Oe(r,t.details)}function Ie(e,t,r){if(we(e,r,t)){var n=Re(r.details,t);n&&(c["logger"].log("Adjusting PTS using last level due to CC increase within current level"),Ce(n.start,t))}}function Oe(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,i=(n-r)/1e3+t.fragments[0].start;Object(l["isFiniteNumber"])(i)&&(c["logger"].log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),Ce(i,e))}}function De(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l["isFiniteNumber"])(t))return null;var n=e[0].programDateTime;if(t<(n||0))return null;var i=e[e.length-1].endProgramDateTime;if(t>=(i||0))return null;r=r||0;for(var a=0;a<e.length;++a){var o=e[a];if(Ne(t,r,o))return o}return null}function Pe(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;if(e?i=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(i=t[0]),i&&0===xe(r,n,i))return i;var a=te.search(t,xe.bind(null,r,n));return a||i}function xe(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function Ne(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0)),i=r.endProgramDateTime||0;return i-n>e}var Me=250,Fe=2,je=.1,Ue=.05,Be=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,i=r.currentTime,a=r.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=re.bufferInfo(r,i,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>Fe,f=!d||d-i>Fe&&!this.fragmentTracker.getPartialFragment(i);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,l.start||0)-i;if(p>0&&p<=Fe)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==n){var m=g-n;!a&&m>=Me&&this._reportStall(l.len);var v=re.bufferInfo(r,i,t.maxBufferHole);this._tryFixBufferStall(v,m)}else this.stalled=g}}}else if(this.moved=!0,null!==n){if(this.stallReported){var y=self.performance.now()-n;c["logger"].warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media,a=i.currentTime,o=n.getPartialFragment(a);if(o){var s=this._trySkipBufferHole(o);if(s)return}e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(c["logger"].warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media,n=this.stallReported;n||(this.stallReported=!0,c["logger"].warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=0,o=0;o<n.buffered.length;o++){var l=n.buffered.start(o);if(i+t.maxBufferHole>=a&&i<l){var d=Math.max(l+Ue,n.currentTime+je);return c["logger"].warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:e}),d}a=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=n+i*e.nudgeOffset;c["logger"].warn("Nudging 'currentTime' from "+n+" to "+a),r.currentTime=a,t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_NUDGE_ON_STALL,fatal:!1})}else c["logger"].error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_STALLED_ERROR,fatal:!0})},e}();function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ve=function(e){function t(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return r=e.call.apply(e,[this,t].concat(i))||this,r._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(Ge(r)),r}Ke(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},t}(f);function Ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var He={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},We=function(e){function t(){return e.apply(this,arguments)||this}Ye(t,e);var r=t.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=He.STOPPED},r._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===J.PARTIAL||i===J.OK}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,i=t?t.currentTime:null,a=re.bufferInfo(r||t,i,this.config.maxBufferHole);if(c["logger"].log("media seeking to "+(Object(l["isFiniteNumber"])(i)?i.toFixed(3):i)),n===He.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;i<u||i>d?(o.loader&&(c["logger"].log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=He.IDLE):c["logger"].log("seeking outside of buffer but within currently loaded fragment range")}}else n===He.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=He.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=He.STOPPED,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},t}(Ve);function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function qe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Xe,Ze=100,Je=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].LEVEL_LOADED,u["default"].LEVELS_UPDATED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_LOAD_EMERGENCY_ABORTED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_SWITCHED,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}qe(t,e);var r=t.prototype;return r.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(Ze),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(c["logger"].log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=He.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=He.STOPPED},r.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case He.BUFFER_FLUSHING:this.fragLoadError=0;break;case He.IDLE:this._doTickIdle();break;case He.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(c["logger"].log("mediaController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},r._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=n<t.maxBufferHole?Math.max(Fe,t.maxBufferHole):t.maxBufferHole,d=re.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,l),h=d.len;if(!(h>=o)){c["logger"].trace("buffer length of "+h.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=He.WAITING_LEVEL;else{if(this._streamEnded(d,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u["default"].BUFFER_EOS,p),void(this.state=He.ENDED)}this._fetchPayloadOrEos(n,d,f)}}}}},r._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious;this.level;var i=r.fragments,a=i.length;if(0!==a){var o,s=i[0].start,l=i[a-1].start+i[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c["logger"].warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(o=this._ensureFragmentAtLivePoint(r,u,s,l,n,i),null===o)return}else u<s&&(o=i[0]);o||(o=this._findFragment(s,n,a,i,u,l,r)),o&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,u))}},r._ensureFragmentAtLivePoint=function(e,t,r,n,i,a){var o,s=this.hls.config,u=this.media,d=1/0;if(void 0!==s.liveMaxLatencyDuration?d=s.liveMaxLatencyDuration:Object(l["isFiniteNumber"])(s.liveMaxLatencyDurationCount)&&(d=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-s.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c["logger"].log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&i)if(e.hasProgramDateTime)c["logger"].log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),o=De(a,i.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];i.cc===p.cc&&(o=p,c["logger"].log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=te.search(a,(function(e){return i.cc-e.cc})),o&&c["logger"].log("live playlist, switching playlist, load frag with same CC: "+o.sn))}return o},r._findFragment=function(e,t,r,n,i,a,o){var s,l=this.hls.config;if(i<a){var u=i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=Pe(t,n,i,u)}else s=n[r-1];if(s){var d=s.sn-o.startSN,h=t&&s.level===t.level,f=n[d-1],p=n[d+1];if(t&&s.sn===t.sn)if(h&&!s.backtracked)if(s.sn<o.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&d?(s=f,c["logger"].warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=p,this.fragmentTracker.getState(s)!==J.OK&&c["logger"].log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(p&&p.backtracked?(c["logger"].warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(c["logger"].warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f,s.backtracked=!0):d&&(s=null)))}return s},r._loadKey=function(e,t){c["logger"].log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:e})},r._loadFragment=function(e,t,r,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||i===J.NOT_LOADED||i===J.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,c["logger"].log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(r.toFixed(3))+", bufferEnd: "+parseFloat(n.toFixed(3))),this.hls.trigger(u["default"].FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new fe(this.hls,"main")),this.state=He.FRAG_LOADING):i===J.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},r._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),re.isBuffered(r,t)?e=this.getBufferedFrag(t):re.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u["default"].FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u["default"].LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.immediateLevelSwitch=function(){if(c["logger"].log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,e||t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&re.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var n=this.hls.nextLoadLevel,i=this.levels[n],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},r.flushMainBuffer=function(e,t){this.state=He.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u["default"].BUFFER_FLUSHING,r)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new Be(r,t,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l["isFiniteNumber"])(t)&&c["logger"].log("media seeked to "+t.toFixed(3)),this.tick()},r.onManifestLoading=function(){c["logger"].log("trigger BUFFER_RESET"),this.hls.trigger(u["default"].BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){t=e.audioCodec,t&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c["logger"].log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],a=t.totalduration,o=0;if(c["logger"].log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i.details&&i.details.live){var s=i.details;s&&t.fragments.length>0?(ve(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l["isFiniteNumber"])(o)?c["logger"].log("live playlist sliding:"+o.toFixed(3)):(c["logger"].log("live playlist - outdated PTS, unknown sliding"),Le(this.fragPrevious,n,t))):(c["logger"].log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,Le(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=r,this.hls.trigger(u["default"].LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l["isFiniteNumber"])(d)?(d<0&&(c["logger"].log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c["logger"].log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c["logger"].log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_LEVEL&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===He.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c["logger"].log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=He.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=He.IDLE,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u["default"].FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c["logger"].log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=He.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s),p=this.demuxer=this.demuxer||new fe(this.hls,"main");p.push(e.payload,h,f,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,i=a.audio,i){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c["logger"].log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}for(n in i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(u["default"].BUFFER_CODECS,a),a){i=a[n],c["logger"].log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===He.PARSING){var i=this.levels[this.level],a=r;if(Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&a.addElementaryStream(v.AUDIO),!0===e.hasVideo&&a.addElementaryStream(v.VIDEO),c["logger"].log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c["logger"].warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c["logger"].warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=He.IDLE,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c["logger"].warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=me(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u["default"].LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===He.PARSING&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u["default"].BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onAudioTrackSwitching=function(e){var t=this.altAudio,r=!!e.url,n=e.id;if(!r){if(this.mediaBuffer!==this.media){c["logger"].log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(c["logger"].log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=He.IDLE}var a=this.hls;t&&a.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:n})}},r.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c["logger"].log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(c["logger"].log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c["logger"].log("main buffered : "+Te.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=He.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},r.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&re.isBuffered(this.media,this.media.currentTime)&&re.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c["logger"].warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:this.state!==He.ERROR&&(e.fatal?(this.state=He.ERROR,c["logger"].warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==He.WAITING_LEVEL||(this.state=He.IDLE));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==He.PARSING&&this.state!==He.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=He.IDLE):(c["logger"].warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},r._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c["logger"].warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.onFragLoadEmergencyAborted=function(){this.state=He.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?v.AUDIO:v.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=He.IDLE,this.fragPrevious=null},r.onLevelsUpdated=function(e){this.levels=e.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return void c["logger"].log("could not seek to "+r+", already seeking at "+t);var n=e.buffered.length?e.buffered.start(0):0,i=n-r;i>0&&i<this.config.maxBufferHole&&(c["logger"].log("adjusting start position by "+i+" to match buffer start"),r+=i,this.startPosition=r),c["logger"].log("seek to target start position "+r+" from current time "+t+". ready state "+e.readyState),e.currentTime=r}},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c["logger"].log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},$e(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("main stream-controller: "+t+"->"+e),this.hls.trigger(u["default"].STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(We),Qe=Je;function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t,r){return t&&et(e.prototype,t),r&&et(e,r),e}function rt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var nt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADED,u["default"].LEVEL_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].FRAG_LOADED,u["default"].ERROR)||this,r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Xe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}rt(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,r=[],n=[],i={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Xe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),a=i[e.bitrate],a?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&pe(a||e,"audio",t.AUDIO),t.SUBTITLES&&pe(a||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){var t=e.videoCodec;return!!t}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||O(t,"audio"))&&(!r||O(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||O(e.audioCodec,"audio")})),n.forEach((function(e,t){e.id=t}))),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,c["logger"].log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var h=l&&!o;this.hls.trigger(u["default"].MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:!h&&n.some((function(e){return!!e.url}))})}else this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c["logger"].log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(u["default"].LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;r.trigger(u["default"].LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else r.trigger(u["default"].ERROR,{type:s["ErrorTypes"].OTHER_ERROR,details:s["ErrorDetails"].LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.onError=function(e){if(e.fatal)e.type===s["ErrorTypes"].NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s["ErrorDetails"].LEVEL_LOAD_ERROR:case s["ErrorDetails"].LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s["ErrorDetails"].REMUX_ALLOC_ERROR:t=e.level,r=!0;break}void 0!==t&&this.recoverLevel(e,t,r,n)}},r.recoverLevel=function(e,t,r,n){var i,a,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c["logger"].error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c["logger"].warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=d.url.length,i>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c["logger"].warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c["logger"].warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(c["logger"].warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},r.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},r.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=_e(i.details,n,e.stats.trequest);c["logger"].log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},r.loadLevel=function(){if(c["logger"].debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];c["logger"].log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u["default"].LEVEL_LOADING,{url:n,level:t,id:r})}}},r.removeLevel=function(e,t){var r=this.levels.filter((function(r,n){return n!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),r.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(u["default"].LEVELS_UPDATED,{levels:r})},tt(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(f),it=r("./src/demux/id3.js");function at(e,t){var r;try{r=new Event("addtrack")}catch(n){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function ot(e){if(null===e||void 0===e?void 0:e.cues)while(e.cues.length>0)e.removeCue(e.cues[0])}function st(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];var r=0,n=e.length-1;while(r<=n){var i=Math.floor((n+r)/2);if(t<e[i].endTime)n=i-1;else{if(!(t>e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}function lt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ut=.25,ct=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_METADATA,u["default"].LIVE_BACK_BUFFER_REACHED)||this,r.id3Track=void 0,r.media=void 0,r}lt(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){ot(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return at(r,this.media),r}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=it["default"].getID3Frames(r[i].data);if(a){var o=Math.max(r[i].pts,0),s=i<r.length-1?r[i+1].pts:t.endPTS;s||(s=t.start+t.duration);var l=s-o;l<=0&&(s=o+ut);for(var u=0;u<a.length;u++){var c=a[u];if(!it["default"].isTimeStampFrame(c)){var d=new n(o,s,"");d.value=c,this.id3Track.addCue(d)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=st(r.cues,t);if(n)while(r.cues[0]!==n)r.removeCue(r.cues[0])}},t}(f),dt=ct;function ht(){var e=oe();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}var ft=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),pt=ft,gt=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new pt(t),this.fast_=new pt(r)}var t=e.prototype;return t.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8*t,n=e/1e3,i=r/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),mt=gt;function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t,r){return t&&vt(e.prototype,t),r&&vt(e,r),e}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _t=window,Et=_t.performance,Tt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FRAG_LOADING,u["default"].FRAG_LOADED,u["default"].FRAG_BUFFERED,u["default"].ERROR)||this,r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(bt(r)),r}At(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,a=i.config,o=t.level,s=i.levels[o].details.live;s?(r=a.abrEwmaFastLive,n=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,n=a.abrEwmaSlowVoD),this._bwEstimator=new mt(i,n,r,a.abrEwmaDefaultEstimate)}},r._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader;if(!n||n.stats&&n.stats.aborted)return c["logger"].warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=n.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=Et.now()-i.trequest,o=Math.abs(t.playbackRate);if(a>500*r.duration/o){var s=e.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=s[r.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*h/8)),p=t.currentTime,g=(f-i.loaded)/l,m=(re.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m<2*r.duration/o&&g>m){var v,y,b=e.minAutoLevel;for(y=r.level-1;y>b;y--){var A=s[y].realBitrate?Math.max(s[y].realBitrate,s[y].bitrate):s[y].bitrate,_=r.duration*A/(6.4*l);if(_<m)break}v<g&&(c["logger"].warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(a,i.loaded),n.abort(),this.clearTimer(),e.trigger(u["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},r.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l["isFiniteNumber"])(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l["isFiniteNumber"])(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;c["logger"].log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},r.onError=function(e){switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:this.clearTimer();break}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r._findBestLevel=function(e,t,r,n,i,a,o,s,l){for(var u=i;u>=n;u--){var d=l[u];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=void 0;g=u<=e?o*r:s*r;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(c["logger"].trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},yt(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(re.bufferInfo(a,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,d,i,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;c["logger"].trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;if(v){var y=s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay;p=y-v,c["logger"].trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}}return f=this._findBestLevel(o,s,d,i,t,h+p,g,m,r),Math.max(f,0)}}]),t}(f),kt=Tt;function St(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var wt=oe(),Rt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_PARSED,u["default"].BUFFER_RESET,u["default"].BUFFER_APPENDING,u["default"].BUFFER_CODECS,u["default"].BUFFER_EOS,u["default"].BUFFER_FLUSHING,u["default"].LEVEL_PTS_UPDATED,u["default"].LEVEL_UPDATED)||this,r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c["logger"].log("media source opened"),r.hls.trigger(u["default"].MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c["logger"].log("media source closed")},r._onMediaSourceEnded=function(){c["logger"].log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;c["logger"].warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),i={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}r.hls.trigger(u["default"].BUFFER_APPENDED,{parent:t,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){c["logger"].error("sourceBuffer error:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}St(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");var i=Math.abs(n.timestampOffset-e.start);if(i>.1){var a=n.updating;try{n.abort()}catch(o){c["logger"].warn("can not abort audio buffer: "+o)}a?this.audioTimestampOffset=e.start:(c["logger"].warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,c["logger"].log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&wt){var r=this.mediaSource=new wt;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.onMediaDetaching=function(){c["logger"].log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){c["logger"].warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c["logger"].warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u["default"].MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(n){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var i=e[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c["logger"].log("creating sourceBuffer("+o+")");try{var l=t[n]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(d){c["logger"].error("error while trying to add sourceBuffer:"+d.message),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].BUFFER_ADD_CODEC_ERROR,fatal:!1,err:d,mimeType:o})}}this.hls.trigger(u["default"].BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,c["logger"].log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c["logger"].log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(i){c["logger"].warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o];if(s){var l=s.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(u["default"].LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c["logger"].error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c["logger"].log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l["isFiniteNumber"])(e))&&(c["logger"].log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){while(this.flushRange.length){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&&(t+=i.buffered.length)}}catch(a){c["logger"].error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u["default"].BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c["logger"].error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=r.shift();if(i)try{var a=n[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(l){c["logger"].error("error while trying to append buffer:"+l.message),r.unshift(i);var o={type:s["ErrorTypes"].MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===l.code?(this.segments=[],o.details=s["ErrorDetails"].BUFFER_FULL_ERROR):(this.appendError++,o.details=s["ErrorDetails"].BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c["logger"].log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u["default"].ERROR,o)}}}},r.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c["logger"].log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c["logger"].warn("abort flushing too many retries"),!0;var a=n[r];if(a){if(a.ended=!1,a.updating)return c["logger"].warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return c["logger"].log("buffer flushed"),!0},r.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,r),l=Math.min(o,n);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c["logger"].log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(d){c["logger"].warn("removeBufferRange failed",d)}return!1},t}(f),Ct=Rt;function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t,r){return t&&Lt(e.prototype,t),r&&Lt(e,r),e}function Ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Dt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].FPS_DROP_LEVEL_CAPPING,u["default"].MEDIA_ATTACHING,u["default"].MANIFEST_PARSED,u["default"].LEVELS_UPDATED,u["default"].BUFFER_CODECS,u["default"].MEDIA_DETACHING)||this,r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}Ot(t,e);var r=t.prototype;return r.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},r.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onBufferCodecs=function(e){var t=this.hls;t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},r.onLevelsUpdated=function(e){this.levels=e.levels},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return t.isLevelAllowed(i,r.restrictedLevels)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},r.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},t.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&n(o,e[a+1])){i=a;break}}return i},It(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),t}(f),Pt=Dt;function xt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Nt=window,Mt=Nt.performance,Ft=function(e){function t(t){return e.call(this,t,u["default"].MEDIA_ATTACHING)||this}xt(t,e);var r=t.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var r=this.video=e.media instanceof window.HTMLVideoElement?e.media:null;"function"===typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},r.checkFPS=function(e,t,r){var n=Mt.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(u["default"].FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c["logger"].warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u["default"].FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(f),jt=Ft,Ut=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(i){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:e.status,text:i.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;n.tload=Math.max(n.tfirst,window.performance.now()),"arraybuffer"===i.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,i,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(c["logger"].error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(c["logger"].warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c["logger"].warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}(),Bt=Ut;function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t,r){return t&&Gt(e.prototype,t),r&&Gt(e,r),e}function Vt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Yt=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_PARSED,u["default"].AUDIO_TRACK_LOADED,u["default"].AUDIO_TRACK_SWITCHED,u["default"].LEVEL_LOADED,u["default"].ERROR)||this,r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}Vt(t,e);var r=t.prototype;return r.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},r.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u["default"].AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},r.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c["logger"].warn("Invalid audio track id:",e.id);else{if(c["logger"].log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},r.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},r.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},r.onError=function(e){e.type===s["ErrorTypes"].NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR&&(c["logger"].warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},r._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c["logger"].debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c["logger"].warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c["logger"].log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(u["default"].AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},r.doTick=function(){this._updateTrack(this._trackId)},r._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},r._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c["logger"].warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(n=null,o()),a||(c["logger"].error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},r._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},r._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;c["logger"].log("loading audio-track playlist for id: "+r),this.hls.trigger(u["default"].AUDIO_TRACK_LOADING,{url:t,id:r})}},r._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c["logger"].log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},r._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;c["logger"].warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===r){a=o;break}}a!==e?(c["logger"].log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c["logger"].warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},Kt(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(Ve),Ht=Yt;function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t,r){return t&&Wt(e.prototype,t),r&&Wt(e,r),e}function $t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var qt=window,Xt=qt.performance,Zt=100,Jt=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].AUDIO_TRACKS_UPDATED,u["default"].AUDIO_TRACK_SWITCHING,u["default"].AUDIO_TRACK_LOADED,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].FRAG_PARSING_INIT_SEGMENT,u["default"].FRAG_PARSING_DATA,u["default"].FRAG_PARSED,u["default"].ERROR,u["default"].BUFFER_RESET,u["default"].BUFFER_CREATED,u["default"].BUFFER_APPENDED,u["default"].BUFFER_FLUSHED,u["default"].INIT_PTS_FOUND)||this,n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=He.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n.waitingVideoCC=null,n}$t(t,e);var r=t.prototype;return r.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c["logger"].log("InitPTS for cc: "+r+" found from main: "+n),this.state===He.WAITING_INIT_PTS&&this.tick())},r.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Zt),this.fragLoadError=0,t>0&&-1===e?(c["logger"].log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=He.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=He.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=He.STOPPED},r.doTick=function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case He.ERROR:case He.PAUSED:case He.BUFFER_FLUSHING:break;case He.STARTING:this.state=He.WAITING_TRACK,this.loadedmetadata=!1;break;case He.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(e=this.nextLoadPosition,void 0===e)break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=e<i.maxBufferHole?Math.max(Fe,i.maxBufferHole):i.maxBufferHole,h=re.bufferInfo(o,e,d),f=re.bufferInfo(s,e,d),p=h.len,g=h.end,m=this.fragPrevious,v=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(v,f.len),b=this.audioSwitch,A=this.trackId;if((p<y||b)&&A<a.length){if(r=a[A].details,"undefined"===typeof r){this.state=He.WAITING_TRACK;break}if(!b&&this._streamEnded(h,r))return this.hls.trigger(u["default"].BUFFER_EOS,{type:"audio"}),void(this.state=He.ENDED);var _,E=r.fragments,T=E.length,k=E[0].start,S=E[T-1].start+E[T-1].duration;if(b)if(r.live&&!r.PTSKnown)c["logger"].log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,r.PTSKnown&&e<k){if(!(h.end>k||h.nextStart))return;c["logger"].log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(r.initSegment&&!r.initSegment.data)_=r.initSegment;else if(g<=k){if(_=E[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=Se(E,this.videoTrackCC)),r.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var w=h.nextStart?h.nextStart:k;return c["logger"].log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(w+.05)),void(this.media.currentTime=w+.05)}}else{var R,C=i.maxFragLookUpTolerance,L=m?E[m.sn-E[0].sn+1]:void 0;g<S?(g>S-C&&(C=0),R=L&&!xe(g,C,L)?L:te.search(E,(function(e){return xe(g,C,e)}))):R=E[T-1],R&&(_=R,k=R.start,m&&_.level===m.level&&_.sn===m.sn&&(_.sn<r.endSN?(_=E[_.sn+1-r.startSN],this.fragmentTracker.getState(_)!==J.OK&&c["logger"].log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(c["logger"].log("Loading key for "+_.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+A),this.state=He.KEY_LOADING,n.trigger(u["default"].KEY_LOADING,{frag:_})):(this.fragCurrent=_,(b||this.fragmentTracker.getState(_)===J.NOT_LOADED)&&(c["logger"].log("Loading "+_.sn+", cc: "+_.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+A+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+g.toFixed(3)),"initSegment"!==_.sn&&(this.startFragRequested=!0),Object(l["isFiniteNumber"])(_.sn)&&(this.nextLoadPosition=_.start+_.duration),n.trigger(u["default"].FRAG_LOADING,{frag:_}),this.state=He.FRAG_LOADING)))}break;case He.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=He.IDLE);break;case He.FRAG_LOADING_WAITING_RETRY:var I=Xt.now(),O=this.retryDate;o=this.media;var D=o&&o.seeking;(!O||I>=O||D)&&(c["logger"].log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=He.IDLE);break;case He.WAITING_INIT_PTS:var P=this.waitingFragment;if(P){var x=P.frag.cc;if(void 0!==this.initPTS[x])this.waitingFragment=null,this.state=He.FRAG_LOADING,this.onFragLoaded(P);else if(this.videoTrackCC!==this.waitingVideoCC)c["logger"].log("Waiting fragment cc ("+x+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var N=re.bufferInfo(this.mediaBuffer,this.media.currentTime,i.maxBufferHole),M=xe(N.end,i.maxFragLookUpTolerance,P.frag);M<0&&(c["logger"].log("Waiting fragment cc ("+x+") @ "+P.frag.start+" cancelled because another fragment at "+N.end+" is needed"),this.clearWaitingFragment())}}else this.state=He.IDLE;break}},r.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=He.IDLE)},r.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c["logger"].log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onAudioTracksUpdated=function(e){c["logger"].log("audio tracks updated"),this.tracks=e.audioTracks},r.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=He.PAUSED,t?this.setInterval(Zt):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=He.IDLE),this.tick()},r.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],i=n.details,a=t.totalduration,o=0;if(c["logger"].log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||i&&i.live?i&&t.fragments.length>0?(ve(i,t),o=t.fragments[0].start,t.PTSKnown?c["logger"].log("live audio playlist sliding:"+o.toFixed(3)):c["logger"].log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c["logger"].log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l["isFiniteNumber"])(s)?(c["logger"].log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),c["logger"].log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===He.WAITING_TRACK&&(this.state=He.IDLE),this.tick()},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE,this.tick())},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===He.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=He.IDLE,h.tparsed=h.tbuffered=Xt.now(),i.initSegment.data=e.payload,this.hls.trigger(u["default"].FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=He.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new fe(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];if(void 0!==f){this.pendingBuffering=!0,c["logger"].log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);var g=!1;this.demuxer.push(e.payload,p,d,null,t,a,g,f)}else c["logger"].log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=He.WAITING_INIT_PTS}}this.fragLoadError=0},r.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING){var n,i=e.tracks;if(i.video&&delete i.video,n=i.audio,n){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(u["default"].BUFFER_CODECS,i),c["logger"].log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var a=n.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u["default"].BUFFER_APPENDING,o))}this.tick()}}},r.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===He.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(l["isFiniteNumber"])(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(v.AUDIO),c["logger"].log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),me(a.details,r,e.startPTS,e.endPTS);var d=this.media,h=!1;if(this.audioSwitch)if(d&&d.readyState){var f=d.currentTime;c["logger"].log("switching audio track : currentTime:"+f),f>=e.startPTS&&(c["logger"].log("switching audio track : flushing all audio"),this.state=He.BUFFER_FLUSHING,o.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:i});var p=this.pendingData;if(!p)return c["logger"].warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u["default"].ERROR,{type:s["ErrorTypes"].MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})})),!h&&p.length&&(p.forEach((function(e){t.state===He.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(u["default"].BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},r.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===He.PARSING&&(this.stats.tparsed=Xt.now(),this.state=He.PARSED,this._checkAppendedParsed())},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==He.PARSING&&t!==He.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r._checkAppendedParsed=function(){if(this.state===He.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=Xt.now(),r.trigger(u["default"].FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c["logger"].log("audio buffered : "+Te.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u["default"].AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=He.IDLE}this.tick()}},r.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s["ErrorDetails"].FRAG_LOAD_ERROR:case s["ErrorDetails"].FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var a=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c["logger"].warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Xt.now()+a,this.state=He.FRAG_LOADING_WAITING_RETRY}else c["logger"].error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=He.ERROR}break;case s["ErrorDetails"].AUDIO_TRACK_LOAD_ERROR:case s["ErrorDetails"].AUDIO_TRACK_LOAD_TIMEOUT:case s["ErrorDetails"].KEY_LOAD_ERROR:case s["ErrorDetails"].KEY_LOAD_TIMEOUT:this.state!==He.ERROR&&(this.state=e.fatal?He.ERROR:He.IDLE,c["logger"].warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s["ErrorDetails"].BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===He.PARSING||this.state===He.PARSED)){var o=this.mediaBuffer,l=this.media.currentTime,d=o&&re.isBuffered(o,l)&&re.isBuffered(o,l+.5);if(d){var h=this.config;h.maxMaxBufferLength>=h.maxBufferLength&&(h.maxMaxBufferLength/=2,c["logger"].warn("AudioStreamController: reduce max buffer length to "+h.maxMaxBufferLength+"s")),this.state=He.IDLE}else c["logger"].warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=He.BUFFER_FLUSHING,this.hls.trigger(u["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},r.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c["logger"].log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u["default"].BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=He.PARSED):(this.state=He.IDLE,this.fragPrevious=null,this.tick())},zt(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c["logger"].log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(We),Qt=Jt,er=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){if("string"!==typeof e)return!1;var r=t[e.toLowerCase()];return!!r&&e.toLowerCase()}function i(e){if("string"!==typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function o(t,r,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=t,h=r,f=o,p=null,g="",m=!0,v="auto",y="start",b=50,A="middle",_=50,E="middle";Object.defineProperty(s,"id",a({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",a({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",a({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},l,{get:function(){return g},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},l,{get:function(){return v},set:function(t){if("number"!==typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},l,{get:function(){return A},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return o.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},o}(),tr=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function rr(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new tr,this.regionList=[]}function nr(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function ir(){this.values=Object.create(null)}function ar(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}ir.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var or=new er(0,0,0),sr="middle"===or.align?"middle":"center";function lr(e,t,r){var n=e;function i(){var t=nr(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var n=new ir;ar(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",sr,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",sr,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",sr,"end","left","right"]);break}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===or.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",sr);var a=n.get("position","auto");"auto"===a&&50===or.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),o(),t.endTime=i(),o(),a(e,t)}function ur(e){return e.replace(/<br(?: \/)?>/gi,"\n")}rr.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;e=ur(e);while(r<e.length&&"\r"!==e[r]&&"\n"!==e[r])++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function n(e){ar(e,(function(e,t){}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;i=r();var a=i.match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}var o=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=r(),t.state){case"HEADER":/:/.test(i)?n(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new er(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{lr(i,t.cue,t.regionList)}catch(l){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(l){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}};var cr=rr;function dr(e,t,r,n){for(var i,a,o,s,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<n.rows.length;d++)if(i=n.rows[d],o=!0,s=0,l="",!i.isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&o?s++:(l+=i.chars[h].uchar,o=!1);i.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,ur(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),u.push(a),e&&e.addCue(a)}return u}var hr,fr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},pr=function(e){var t=e;return fr.hasOwnProperty(e)&&(t=fr[e]),String.fromCharCode(t)},gr=15,mr=100,vr={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},br={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ar={25:2,26:4,29:6,30:8,31:10,27:13,28:15},_r=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(e){e[e["ERROR"]=0]="ERROR",e[e["TEXT"]=1]="TEXT",e[e["WARNING"]=2]="WARNING",e[e["INFO"]=2]="INFO",e[e["DEBUG"]=3]="DEBUG",e[e["DATA"]=3]="DATA"})(hr||(hr={}));var Er=function(){function e(){this.time=null,this.verboseLevel=hr.ERROR}var t=e.prototype;return t.log=function(e,t){this.verboseLevel>=e&&c["logger"].log(this.time+" ["+e+"] "+t)},e}(),Tr=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},kr=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Sr=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new kr(t,r,n,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),wr=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<mr;t++)this.chars.push(new Sr);this.logger=e,this.pos=0,this.currPenState=new kr}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<mr;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<mr;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<mr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(hr.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>mr&&(this.logger.log(hr.DEBUG,"Too large cursor position "+this.pos),this.pos=mr)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=pr(e);this.pos>=mr?this.logger.log(hr.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<mr;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<mr;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)},e}(),Rr=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<gr;t++)this.rows.push(new wr(e));this.logger=e,this.currRow=gr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<gr;e++)this.rows[e].clear();this.currRow=gr-1},t.equals=function(e){for(var t=!0,r=0;r<gr;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<gr;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<gr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){var e=this.rows[this.currRow];e.backSpace()},t.clearToEndOfRow=function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},t.insertChar=function(e){var t=this.rows[this.currRow];t.insertChar(e)},t.setPen=function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},t.moveCursor=function(e){var t=this.rows[this.currRow];t.moveCursor(e)},t.setCursor=function(e){this.logger.log(hr.INFO,"setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},t.setPAC=function(e){this.logger.log(hr.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<gr;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[n+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(hr.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(hr.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(hr.INFO,"Rolling up")}else this.logger.log(hr.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<gr;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Cr=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Rr(r),this.nonDisplayedMemory=new Rr(r),this.lastOutputScreen=new Rr(r),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(hr.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(hr.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(hr.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(hr.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(hr.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(hr.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(hr.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(hr.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(hr.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(hr.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(hr.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(hr.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(hr.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(hr.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(hr.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(hr.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(hr.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}this.logger.log(hr.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Lr=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Er;this.channels=[null,new Cr(e,t,n),new Cr(e+1,r,n)],this.cmdHistory=Dr(),this.logger=n}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,i,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(this.logger.log(hr.DATA,"["+Tr([t[o],t[o+1]])+"] -> ("+Tr([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i),a)){var s=this.currentChannel;if(s&&s>0){var l=this.channels[s];l.insertChars(a)}else this.logger.log(hr.WARNING,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(hr.WARNING,"Couldn't parse cleaned data "+Tr([n,i])+" orig: "+Tr([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory,n=(20===e||28===e||21===e||29===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=33&&t<=35;if(!n&&!i)return!1;if(Or(e,t,r))return Ir(null,null,r),this.logger.log(hr.DEBUG,"Repeated command ("+Tr([e,t])+") is dropped"),!0;var a=20===e||21===e||23===e?1:2,o=this.channels[a];return 20===e||21===e||28===e||29===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),Ir(e,t,r),this.currentChannel=a,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currentChannel)return this.logger.log(hr.ERROR,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(hr.DEBUG,"MIDROW ("+Tr([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,n=this.cmdHistory,i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(16===e||24===e)&&t>=64&&t<=95;if(!i&&!a)return!1;if(Or(e,t,n))return Ir(null,null,n),!0;var o=e<=23?1:2;r=t>=64&&t<=95?1===o?vr[e]:br[e]:1===o?yr[e]:Ar[e];var s=this.channels[o];return!!s&&(s.setPAC(this.interpretPAC(r,t)),Ir(e,t,n),this.currentChannel=o,!0)},t.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,this.logger.log(hr.INFO,"Special char '"+pr(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=Tr(n);this.logger.log(hr.DEBUG,"Char codes =  "+o.join(",")),Ir(e,t,this.cmdHistory)}return n},t.parseBackgroundAttributes=function(e,t){var r,n=(16===e||24===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=45&&t<=47;if(!n&&!i)return!1;var a={};16===e||24===e?(r=Math.floor((t-32)/2),a.background=_r[r],t%2===1&&(a.background=a.background+"_semi")):45===t?a.background="transparent":(a.foreground="black",47===t&&(a.underline=!0));var o=e<=23?1:2,s=this.channels[o];return s.setBkgData(a),Ir(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory=Dr()},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}();function Ir(e,t,r){r.a=e,r.b=t}function Or(e,t,r){return r.a===e&&r.b===t}function Dr(){return{a:null,b:null}}var Pr=Lr,xr=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Nr=function(e,t,r){return e.substr(r||0,t.length)===t},Mr=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!Object(l["isFiniteNumber"])(t)||!Object(l["isFiniteNumber"])(r)||!Object(l["isFiniteNumber"])(n)||!Object(l["isFiniteNumber"])(i))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*n,t+=36e5*i,t},Fr=function(e){var t=5381,r=e.length;while(r)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},jr=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);while(i&&i.new)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},Ur={parse:function(e,t,r,n,i,a){var o,s=/\r\n|\n\r|\n|\r/g,l=Object(it["utf8ArrayToStr"])(new Uint8Array(e)).trim().replace(s,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new cr;m.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(void 0!==d?i=r.ccOffset=t.start:jr(r,n,h)),h&&(i=h-r.presentationOffset),g&&(e.startTime+=i-d,e.endTime+=i-d),e.id=Fr(e.startTime.toString())+Fr(e.endTime.toString())+Fr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},m.onparsingerror=function(e){o=e},m.onflush=function(){o&&a?a(o):i(f)},l.forEach((function(e){if(p){if(Nr(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach((function(e){Nr(e,"LOCAL:")?u=e.substr(6):Nr(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),c-=t,d=Mr(u)/1e3,h=c/9e4}catch(i){g=!1,o=i}return}""===e&&(p=!1)}m.parse(e+"\n")})),m.flush()}},Br=Ur;function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Vr=function(e){function t(t){var r;if(r=e.call(this,t,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].FRAG_PARSING_USERDATA,u["default"].FRAG_DECRYPTED,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_LOADED,u["default"].FRAG_LOADED,u["default"].INIT_PTS_FOUND)||this,r.media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=Wr(),r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var n=new xr(Gr(r),"textTrack1"),i=new xr(Gr(r),"textTrack2"),a=new xr(Gr(r),"textTrack3"),o=new xr(Gr(r),"textTrack4");r.cea608Parser1=new Pr(1,n,i),r.cea608Parser2=new Pr(3,a,o)}return r}Kr(t,e);var r=t.prototype;return r.addCues=function(e,t,r,n,i){for(var a=!1,o=i.length;o--;){var s=i[o],l=Hr(s[0],s[1],t,r);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),a=!0,l/(r-t)>.5))return}if(a||i.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,r,n);else{var c=this.Cues.newCue(null,t,r,n);this.hls.trigger(u["default"].CUES_PARSED,{type:"captions",cues:c,track:e})}},r.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,i=e.initPTS,a=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},r.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,ot(r[e]),at(r[e],n);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},r.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r=t.label,n={_id:e,label:r,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(u["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},r.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){ot(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=Wr(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)ot(t[r])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=e.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var n;if(r<i.length){for(var a=null,o=0;o<i.length;o++)if(Yr(i[o],e)){a=i[o];break}a&&(n=a)}n||(n=t.createTextTrack("subtitles",e.name,e.lang)),e.default?n.mode=t.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",t.textTracks.push(n)}))}else if(!n&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(u["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var r=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(r){var n="textTrack"+r[1],i=t.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},r.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser1,i=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var c=t.sn;t.sn!==o+1&&n&&i&&(n.reset(),i.reset()),this.lastSn=c}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l["isFiniteNumber"])(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(t,r)}else this.hls.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var r=this,n=this.hls,i=this.prevCC,a=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),Br.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var i=a[e.level];if("disabled"===i.mode)return void n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){c["logger"].debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}}))}else{var o=r.tracks[e.level].default?"default":"subtitles"+e.level;n.trigger(u["default"].CUES_PARSED,{type:"subtitles",cues:t,track:o})}n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){c["logger"].log("Failed to parse VTT cue: "+t),n.trigger(u["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l["isFiniteNumber"])(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},r.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var a=this.extractCea608Data(i);t.addData(e.samples[n].pts,a[0]),r.addData(e.samples[n].pts,a[1])}}},r.extractCea608Data=function(e){for(var t=31&e[0],r=2,n=[[],[]],i=0;i<t;i++){var a=e[r++],o=127&e[r++],s=127&e[r++],l=0!==(4&a),u=3&a;0===o&&0===s||l&&(0!==u&&1!==u||(n[u].push(o),n[u].push(s)))}return n},t}(f);function Yr(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Hr(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}function Wr(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var zr=Vr;function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t,r){return t&&$r(e.prototype,t),r&&$r(e,r),e}function Xr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Zr=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADED,u["default"].SUBTITLE_TRACK_LOADED)||this,r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}Xr(t,e);var r=t.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l["isFiniteNumber"])(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l["isFiniteNumber"])(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var e=Jr(this.media.textTracks);e.forEach((function(e){ot(e)})),this.subtitleTrack=-1,this.media=null}},r.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u["default"].SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},r.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,o=a[i];if(r>=a.length||r!==i||!o||this.stopped)this._clearReloadTimer();else if(c["logger"].log("subtitle track "+r+" loaded"),n.live){var s=_e(o.details,n,e.stats.trequest);c["logger"].log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},r.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},r._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(c["logger"].log("Loading subtitle track "+e),r.trigger(u["default"].SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=Jr(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var a=i[n];a&&(a.mode="disabled")}var o=i[e];o&&(o.mode=r?"showing":"hidden")}},r._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l["isFiniteNumber"])(e)||e<-1||e>=r.length||(this.trackId=e,c["logger"].log("Switching to subtitle track "+e),t.trigger(u["default"].SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Jr(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},qr(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),t}(f);function Jr(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var Qr=Zr,en=r("./src/crypt/decrypter.js");function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var nn,an=window,on=an.performance,sn=500,ln=function(e){function t(t,r){var n;return n=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].ERROR,u["default"].KEY_LOADED,u["default"].FRAG_LOADED,u["default"].SUBTITLE_TRACKS_UPDATED,u["default"].SUBTITLE_TRACK_SWITCH,u["default"].SUBTITLE_TRACK_LOADED,u["default"].SUBTITLE_FRAG_PROCESSED,u["default"].LEVEL_UPDATED)||this,n.fragmentTracker=r,n.config=t.config,n.state=He.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new en["default"](t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(tn(n)),n}rn(t,e);var r=t.prototype;return r.startLoad=function(){this.stopLoad(),this.state=He.IDLE;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(sn),this.tick())},r.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=He.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,o=0;o<n.length;o++)if(a>=n[o].start&&a<=n[o].end){i=n[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=He.IDLE},r.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=He.STOPPED)},r.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=He.IDLE)},r.onSubtitleTracksUpdated=function(e){var t=this;c["logger"].log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(sn)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t>=i.length||t!==n||!a||(r.live&&ye(a.details,r,this.lastAVStart),a.details=r,this.setInterval(sn))},r.onKeyLoaded=function(){this.state===He.KEY_LOADING&&(this.state=He.IDLE)},r.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===He.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=on.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=on.now();i.trigger(u["default"].FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},r.onLevelUpdated=function(e){var t=e.details,r=t.fragments;this.lastAVStart=r.length?r[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case He.IDLE:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=re.bufferedInfo(this._getBuffered(),n.currentTime,o),h=d.end,f=d.len,p=i[t].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(f>l)return;var y=this.fragPrevious;h<v?(y&&p.hasProgramDateTime&&(a=De(g,y.endProgramDateTime,s)),a||(a=Pe(y,g,h,s))):a=g[m-1],a&&a.encrypted?(c["logger"].log("Loading key for "+a.sn),this.state=He.KEY_LOADING,this.hls.trigger(u["default"].KEY_LOADING,{frag:a})):a&&r.getState(a)===J.NOT_LOADED&&(this.fragCurrent=a,this.state=He.FRAG_LOADING,this.hls.trigger(u["default"].FRAG_LOADING,{frag:a}))}else this.state=He.IDLE},r.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){if(this.fragCurrent){var e=this.media?this.media.currentTime:0,t=this.config.maxFragLookUpTolerance,r=this.fragCurrent.start-t,n=this.fragCurrent.start+this.fragCurrent.duration+t;(e<r||e>n)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=He.IDLE,this.tick())}},t}(We);(function(e){e["WIDEVINE"]="com.widevine.alpha",e["PLAYREADY"]="com.microsoft.playready"})(nn||(nn={}));var un=function(){return"undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dn(e,t,r){return t&&cn(e.prototype,t),r&&cn(e,r),e}function hn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var fn=3,pn=function(e,t,r){var n={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[n]},gn=function(e,t,r,n){switch(e){case nn.WIDEVINE:return pn(t,r,n);default:throw new Error("Unknown key-system: "+e)}},mn=function(e){function t(t){var r;return r=e.call(this,t,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHED,u["default"].MANIFEST_PARSED)||this,r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(c["logger"].log('Media is encrypted using "'+e.initDataType+'" init data type'),!r.mediaKeysPromise)return c["logger"].error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}hn(t,e);var r=t.prototype;return r.getLicenseServerUrl=function(e){switch(e){case nn.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},r._attemptKeySystemAccess=function(e,t,r){var n=this,i=gn(e,t,r,this._drmSystemOptions);c["logger"].log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=a.then((function(t){return n._onMediaKeySystemAccessObtained(e,t)})),a.catch((function(t){c["logger"].error('Failed to obtain key-system "'+e+'" access:',t)}))},r._onMediaKeySystemAccessObtained=function(e,t){var r=this;c["logger"].log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return n.mediaKeys=t,c["logger"].log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return i.catch((function(e){c["logger"].error("Failed to create media-keys:",e)})),i},r._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},r._onNewMediaKeySession=function(e){var t=this;c["logger"].log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},r._onKeySessionMessage=function(e,t){c["logger"].log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c["logger"].log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},r._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c["logger"].error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_KEYS,fatal:!0});c["logger"].log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return c["logger"].error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c["logger"].warn("Key-Session already initialized but requested again");else{var i=n.mediaKeysSession;if(!i)return c["logger"].error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c["logger"].warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c["logger"].log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c["logger"].debug("Key-session generation succeeded")})).catch((function(e){c["logger"].error("Error generating key-session request:",e),r.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},r._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(a){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},r._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c["logger"].log("License request succeeded"),"arraybuffer"!==e.responseType&&c["logger"].warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(c["logger"].error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>fn)return void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=fn-this._requestLicenseFailureCount+1;c["logger"].warn("Retrying license request, "+i+" attempts left"),this._requestLicense(r,n)}break}},r._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case nn.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){c["logger"].log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c["logger"].error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);c["logger"].log("Sending license request to URL: "+n);var a=this._generateLicenseRequestChallenge(r,e);i.send(a)}catch(o){c["logger"].error("Failure requesting DRM license: "+o),this.hls.trigger(u["default"].ERROR,{type:s["ErrorTypes"].KEY_SYSTEM_ERROR,details:s["ErrorDetails"].KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},r.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},r.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(nn.WIDEVINE,t,r)}},dn(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(f),vn=mn;function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){An(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function An(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _n=bn(bn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Bt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:kt,bufferController:Ct,capLevelController:Pt,fpsController:jt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:un,testBandwidth:!0},En()),{},{subtitleStreamController:ln,subtitleTrackController:Qr,timelineController:zr,audioStreamController:Qt,audioTrackController:Ht,emeController:vn});function En(){return{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cn(e,t,r){return t&&Rn(e.prototype,t),r&&Rn(e,r),e}function Ln(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var In=function(e){function t(r){var n;void 0===r&&(r={}),n=e.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=kn(kn({},i),r);var a=wn(n),o=a.config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c["enableLogs"])(o.debug),n._autoLevelCapping=-1;var s=n.abrController=new o.abrController(wn(n)),l=new o.bufferController(wn(n)),u=n.capLevelController=new o.capLevelController(wn(n)),d=new o.fpsController(wn(n)),h=new Y(wn(n)),f=new z(wn(n)),p=new X(wn(n)),g=new dt(wn(n)),m=n.levelController=new nt(wn(n)),v=new Q(wn(n)),y=n.streamController=new Qe(wn(n),v),b=[m,y],A=o.audioStreamController;A&&b.push(new A(wn(n),v)),n.networkControllers=b;var _=[h,f,p,s,l,u,d,g,v];if(A=o.audioTrackController,A){var E=new A(wn(n));n.audioTrackController=E,_.push(E)}if(A=o.subtitleTrackController,A){var T=new A(wn(n));n.subtitleTrackController=T,b.push(T)}if(A=o.emeController,A){var k=new A(wn(n));n.emeController=k,_.push(k)}return A=o.subtitleStreamController,A&&b.push(new A(wn(n),v)),A=o.timelineController,A&&_.push(new A(wn(n))),n.coreComponents=_,n}Ln(t,e),t.isSupported=function(){return ht()},Cn(t,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return u["default"]}},{key:"ErrorTypes",get:function(){return s["ErrorTypes"]}},{key:"ErrorDetails",get:function(){return s["ErrorDetails"]}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:_n},set:function(e){t.defaultConfig=e}}]);var r=t.prototype;return r.destroy=function(){c["logger"].log("destroy"),this.trigger(u["default"].DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){c["logger"].log("attachMedia"),this.media=e,this.trigger(u["default"].MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){c["logger"].log("detachMedia"),this.trigger(u["default"].MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=o["buildAbsoluteURL"](window.location.href,e,{alwaysNormalize:!0}),c["logger"].log("loadSource:"+e),this.url=e,this.trigger(u["default"].MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&&(e=-1),c["logger"].log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},r.stopLoad=function(){c["logger"].log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},r.swapAudioCodec=function(){c["logger"].log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){c["logger"].log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},r.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},Cn(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c["logger"].log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c["logger"].log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c["logger"].log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c["logger"].log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c["logger"].log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c["logger"].log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++){var i=e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate;if(i>t)return n}return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping;return e=-1===r&&t&&t.length?t.length-1:r,e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),t}(ue);In.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
    !*** ./src/polyfills/number.js ***!
    \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,r){r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var n=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
    !*** ./src/utils/get-self-scope.js ***!
    \*************************************/
/*! exports provided: getSelfScope */function(e,t,r){function n(){return"undefined"===typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":
/*!*****************************!*\
    !*** ./src/utils/logger.js ***!
    \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,r){r.r(t),r.d(t,"enableLogs",(function(){return d})),r.d(t,"logger",(function(){return h}));var n=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(e,t){return t="["+e+"] > "+t,t}var l=Object(n["getSelfScope"])();function u(e){var t=l.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=s(e,n[0])),t.apply(l.console,n)}:i}function c(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}var d=function(e){if(l.console&&!0===e||"object"===typeof e){c(e,"debug","log","info","warn","error");try{o.log()}catch(t){o=a}}else o=a},h=o}})["default"]}))})(Rn);var Cn=wn(Rn.exports),Ln=me.now,In=me.assign,On=me.listContainsIgnoreCase,Dn=-1;xe.register("PLAYBACK_FRAGMENT_CHANGED"),xe.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var Pn=function(e){dn(r,e);var t=vn(r);function r(){var e;sn(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),e.options.playback=on(on({},e.options),e.options.playback),e.options.hlsPlayback=on(on({},e.defaultOptions),e.options.hlsPlayback),e._minDvrSize="undefined"===typeof e.options.hlsMinimumDvrSize?60:e.options.hlsMinimumDvrSize,e._extrapolatedWindowNumSegments=e.options.playback&&"undefined"!==typeof e.options.playback.extrapolatedWindowNumSegments?e.options.playback.extrapolatedWindowNumSegments:2,e._playbackType=et.VOD,e._lastTimeUpdate={current:0,total:0},e._lastDuration=null,e._playableRegionStartTime=0,e._localStartTimeCorrelation=null,e._localEndTimeCorrelation=null,e._playableRegionDuration=0,e._programDateTime=0,e._durationExcludesAfterLiveSyncPoint=!1,e._segmentTargetDuration=null,e._playlistType=null,e._recoverAttemptsRemaining=e.options.hlsRecoverAttempts||16,e}return un(r,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?Dn:this._currentLevel},set:function(e){this._currentLevel=e,this.trigger(xe.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===et.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return Ln()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,r=(e.remote+t)/1e3;return Math.min(r,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,r=this._now-t.local,n=(t.remote+r)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(n,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"_setup",value:function(){var e=this;this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new Cn(In({},this.options.playback.hlsjsConfig)),this._hls.once(Cn.Events.MEDIA_ATTACHED,(function(){e.options.hlsPlayback.preload&&e._hls.loadSource(e.options.src)})),this._hls.on(Cn.Events.MANIFEST_PARSED,(function(){return e._manifestParsed=!0})),this._hls.on(Cn.Events.LEVEL_LOADED,(function(t,r){return e._updatePlaybackType(t,r)})),this._hls.on(Cn.Events.LEVEL_UPDATED,(function(t,r){return e._onLevelUpdated(t,r)})),this._hls.on(Cn.Events.LEVEL_SWITCHING,(function(t,r){return e._onLevelSwitch(t,r)})),this._hls.on(Cn.Events.FRAG_CHANGED,(function(t,r){return e._onFragmentChanged(t,r)})),this._hls.on(Cn.Events.FRAG_LOADED,(function(t,r){return e._onFragmentLoaded(t,r)})),this._hls.on(Cn.Events.FRAG_PARSING_METADATA,(function(t,r){return e._onFragmentParsingMetadata(t,r)})),this._hls.on(Cn.Events.ERROR,(function(t,r){return e._onHLSJSError(t,r)})),this._hls.on(Cn.Events.SUBTITLE_TRACK_LOADED,(function(t,r){return e._onSubtitleLoaded(t,r)})),this._hls.on(Cn.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this.bindCustomListeners(),this._hls.attachMedia(this.el)}},{key:"bindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var r=t.eventName,n=t.once?"once":"on";r&&e._hls["".concat(n)](r,t.callback)}))}},{key:"unbindCustomListeners",value:function(){var e=this;this.customListeners.forEach((function(t){var r=t.eventName;r&&e._hls.off(r,t.callback)}))}},{key:"_onFragmentParsingMetadata",value:function(e,t){this.trigger(xe.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:e,data:t})}},{key:"render",value:function(){return this._ready(),bn(hn(r.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(xe.PLAYBACK_READY,this.name))}},{key:"_recover",value:function(e,t,r){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){Le.error("hlsjs: failed to recover",{evt:e,data:t}),r.level=qe.Levels.FATAL;var n=this.createError(r);this.trigger(xe.PLAYBACK_ERROR,n),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(e){e<0&&(Le.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this._startTime,this.el.currentTime=e}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(e){this.trigger(xe.PLAYBACK_DVR,e),this.trigger(xe.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"_updateSettings",value:function(){this._playbackType===et.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(xe.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(e,t){var r,n={code:"".concat(t.type,"_").concat(t.details),description:"".concat(this.name," error: type: ").concat(t.type,", details: ").concat(t.details),raw:t};if(t.response&&(n.description+=", response: ".concat(JSON.stringify(t.response))),t.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,t.type){case Cn.ErrorTypes.NETWORK_ERROR:switch(t.details){case Cn.ErrorDetails.MANIFEST_LOAD_ERROR:case Cn.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case Cn.ErrorDetails.MANIFEST_PARSING_ERROR:case Cn.ErrorDetails.LEVEL_LOAD_ERROR:case Cn.ErrorDetails.LEVEL_LOAD_TIMEOUT:Le.error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),r=this.createError(n),this.trigger(xe.PLAYBACK_ERROR,r),this.stop();break;default:Le.warn("hlsjs: trying to recover from network error.",{evt:e,data:t}),n.level=qe.Levels.WARN,this._hls.startLoad();break}break;case Cn.ErrorTypes.MEDIA_ERROR:Le.warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),n.level=qe.Levels.WARN,this._recover(e,t,n);break;default:Le.error("hlsjs: could not recover from error.",{evt:e,data:t}),r=this.createError(n),this.trigger(xe.PLAYBACK_ERROR,r),this.stop();break}else Le.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:e,data:t}),r=this.createError(n),this.trigger(xe.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(t))return Le.error("hlsjs: could not load decrypt key.",{evt:e,data:t}),r=this.createError(n),this.trigger(xe.PLAYBACK_ERROR,r),void this.stop();n.level=qe.Levels.WARN,Le.warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}}},{key:"_keyIsDenied",value:function(e){return e.type===Cn.ErrorTypes.NETWORK_ERROR&&e.details===Cn.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},t=this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total;t||(this._lastTimeUpdate=e,this.trigger(xe.PLAYBACK_TIMEUPDATE,e,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,bn(hn(r.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat(An(e),[{start:Math.max(0,this.el.buffered.start(r)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(r)-this._playableRegionStartTime)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(xe.PLAYBACK_PROGRESS,n,e)}}},{key:"play",value:function(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),bn(hn(r.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(bn(hn(r.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),bn(hn(r.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(e,t){this._playbackType=t.details.live?et.LIVE:et.VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===et.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(xe.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(e,t){this._segmentTargetDuration=t.details.targetduration,this._playlistType=t.details.type||null;var r=!1,n=!1,i=t.details.fragments,a=this._playableRegionStartTime,o=this._playableRegionDuration;if(0!==i.length){if(i[0].rawProgramDateTime&&(this._programDateTime=i[0].rawProgramDateTime),this._playableRegionStartTime!==i[0].start&&(r=!0,this._playableRegionStartTime=i[0].start),r)if(this._localStartTimeCorrelation){var s=this._localStartTimeCorrelation,l=this._now-s.local,u=(s.remote+l)/1e3;u<i[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*i[0].start}:u>a+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(i[0].start,a+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(i[0].start+this._extrapolatedWindowDuration/2)};var c=t.details.totalduration;if(this._playbackType===et.LIVE){var d=t.details.targetduration,h=this.options.playback.hlsjsConfig||{},f=h.liveSyncDurationCount||Cn.DefaultConfig.liveSyncDurationCount,p=d*f;p<=c?(c-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}c!==this._playableRegionDuration&&(n=!0,this._playableRegionDuration=c);var g=i[0].start+c,m=a+o,v=g!==m;if(v)if(this._localEndTimeCorrelation){var y=this._localEndTimeCorrelation,b=this._now-y.local,A=(y.remote+b)/1e3;A>g?this._localEndTimeCorrelation={local:this._now,remote:1e3*g}:A<g-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(g-this._extrapolatedWindowDuration)}:A>m&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*m})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*g};n&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(e,t){this.trigger(xe.Custom.PLAYBACK_FRAGMENT_CHANGED,t)}},{key:"_onFragmentLoaded",value:function(e,t){this.trigger(xe.PLAYBACK_FRAGMENT_LOADED,t)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(xe.PLAYBACK_SUBTITLE_AVAILABLE);var e=this._playbackType===et.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(e,t){this.levels.length||this._fillLevels(),this.trigger(xe.PLAYBACK_LEVEL_SWITCH_END),this.trigger(xe.PLAYBACK_LEVEL_SWITCH,t);var r=this._hls.levels[t.level];r&&(this.highDefinition=r.height>=720||r.bitrate/1e3>=2e3,this.trigger(xe.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(xe.PLAYBACK_BITRATE,{height:r.height,width:r.width,bandwidth:r.bitrate,bitrate:r.bitrate,level:t.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===et.LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===et.VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function(){return Cn}}]),r}(_t);Pn.canPlay=function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[],n=r.length>1&&"m3u8"===r[1].toLowerCase()||On(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!Cn.isSupported()||!n)},nn.Loader.registerPlayback(Pn);var xn=r(r({},nn),{},{HLS:Pn});return xn}))}).call(this,r("c8ba"))},b39a:function(e,t,r){"use strict";var n=r("da84"),i=r("ebb5"),a=r("d039"),o=n.Int8Array,s=i.aTypedArray,l=i.exportTypedArrayMethod,u=[].toLocaleString,c=[].slice,d=!!o&&a((function(){u.call(new o(1))})),h=a((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!a((function(){o.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return u.apply(d?c.call(s(this)):s(this),arguments)}),h)},b6b7:function(e,t,r){var n=r("ebb5"),i=r("4840"),a=n.TYPED_ARRAY_CONSTRUCTOR,o=n.aTypedArrayConstructor;e.exports=function(e){return o(i(e,e[a]))}},bf18:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?p(e):t}function m(e){var t=f();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function v(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=d(e),null===e)break;return e}function y(e,t,r){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},y(e,t,r||e)}function b(e,t){return E(e)||k(e,t)||S(e,t)||C()}function A(e){return _(e)||T(e)||S(e)||R()}function _(e){if(Array.isArray(e))return w(e)}function E(e){if(Array.isArray(e))return e}function T(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function k(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(r.push(o.value),t&&r.length===t)break}catch(l){i=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw a}}return r}}function S(e,t){if(e){if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=S(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}r.d(t,"a",(function(){return Pe})),r.d(t,"b",(function(){return At})),r.d(t,"c",(function(){return Ce})),r.d(t,"d",(function(){return Qe})),r.d(t,"e",(function(){return $e})),r.d(t,"f",(function(){return ge})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var n=arguments[1],i=0;while(i<r){var a=t[i];if(e.call(n,a,i,t))return a;i++}}}),Object.entries||(Object.entries=function(e){var t=Object.keys(e),r=t.length,n=new Array(r);while(r--)n[r]=[t[r],e[t[r]]];return n}),Object.values||(Object.values=function(e){var t=Object.keys(e),r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var n=arguments[1],i=0;while(i<r){var a=t[i];if(e.call(n,a,i,t))return i;i++}return-1},configurable:!0,writable:!0});var I="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",O={mp4:I},D=function(){var e,t,r,n,i,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],A=["after","prepend","before","append"],_=c.createElement("table"),E=c.createElement("tr"),T={tr:c.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:E,th:E,"*":c.createElement("div")},k=/complete|loaded|interactive/,S=/^[\w-]*$/,w={},R=w.toString,C={},L=c.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};function D(e){return null==e?String(e):w[R.call(e)]||"object"}function P(e){return"function"==D(e)}function x(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==D(e)}function F(e){return M(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){var t=!!e&&"length"in e&&e.length,n=r.type(e);return"function"!=n&&!x(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return l.call(e,(function(e){return null!=e}))}function B(e){return e.length>0?r.fn.concat.apply([],e):e}function G(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function K(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||f[G(e)]?t:t+"px"}function Y(e){var t,r;return d[e]||(t=c.createElement(e),c.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),d[e]=r),d[e]}function H(e){return"children"in e?u.call(e.children):r.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function W(e,t){var r,n=e?e.length:0;for(r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function z(r,n,i){for(t in n)i&&(F(n[t])||O(n[t]))?(F(n[t])&&!F(r[t])&&(r[t]={}),O(n[t])&&!O(r[t])&&(r[t]=[]),z(r[t],n[t],i)):n[t]!==e&&(r[t]=n[t])}function $(e,t){return null==t?r(e):r(e).filter(t)}function q(e,t,r,n){return P(t)?t.call(e,r,n):t}function X(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function Z(t,r){var n=t.className||"",i=n&&n.baseVal!==e;if(r===e)return i?n.baseVal:n;i?n.baseVal=r:t.className=r}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?r.parseJSON(e):e):e}catch(t){return e}}function Q(e,t){t(e);for(var r=0,n=e.childNodes.length;r<n;r++)Q(e.childNodes[r],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,a=!i;return a&&(i=L).appendChild(e),n=~C.qsa(i,t).indexOf(e),a&&L.removeChild(e),n},i=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,r){return e.indexOf(t)==r}))},C.fragment=function(t,n,i){var a,o,s;return g.test(t)&&(a=r(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in T||(n="*"),s=T[n],s.innerHTML=""+t,a=r.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),F(i)&&(o=r(a),r.each(i,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new W(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,n){var i;if(!t)return C.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=C.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}else{if(P(t))return r(c).ready(t);if(C.isZ(t))return t;if(O(t))i=U(t);else if(M(t))i=[t],t=null;else if(p.test(t))i=C.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=C.qsa(c,t)}}return C.Z(i,t)},r=function(e,t){return C.init(e,t)},r.extend=function(e){var t,r=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=r.shift()),r.forEach((function(r){z(e,r,t)})),e},C.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],a=n||i?t.slice(1):t,o=S.test(a);return e.getElementById&&o&&n?(r=e.getElementById(a))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},r.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},r.type=D,r.isFunction=P,r.isWindow=x,r.isArray=O,r.isPlainObject=F,r.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},r.isNumeric=function(e){var t=Number(e),r=typeof e;return null!=e&&"boolean"!=r&&("string"!=r||e.length)&&!isNaN(t)&&isFinite(t)||!1},r.inArray=function(e,t,r){return o.indexOf.call(t,e,r)},r.camelCase=i,r.trim=function(e){return null==e?"":String.prototype.trim.call(e)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(e,t){var r,n,i,a=[];if(j(e))for(n=0;n<e.length;n++)r=t(e[n],n),null!=r&&a.push(r);else for(i in e)r=t(e[i],i),null!=r&&a.push(r);return B(a)},r.each=function(e,t){var r,n;if(j(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},r.grep=function(e,t){return l.call(e,t)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),r.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,r=[];for(e=0;e<arguments.length;e++)t=arguments[e],r[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,r)},map:function(e){return r(r.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return r(u.apply(this,arguments))},ready:function(e){return k.test(c.readyState)&&c.body?e(r):c.addEventListener("DOMContentLoaded",(function(){e(r)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,r){return!1!==e.call(t,r,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):r(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return r(a(this.concat(r(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var n=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||n.push(this)}));else{var i="string"==typeof t?this.filter(t):j(t)&&P(t.item)?u.call(t):r(t);this.forEach((function(e){i.indexOf(e)<0&&n.push(e)}))}return r(n)},has:function(e){return this.filter((function(){return M(e)?r.contains(this,e):r(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:r(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:r(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?r(e).filter((function(){var e=this;return o.some.call(n,(function(t){return r.contains(t,e)}))})):1==this.length?r(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):r(),t},closest:function(e,t){var n=[],i="object"==typeof e&&r(e);return this.each((function(r,a){while(a&&!(i?i.indexOf(a)>=0:C.matches(a,e)))a=a!==t&&!N(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),r(n)},parents:function(e){var t=[],n=this;while(n.length>0)n=r.map(n,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return $(t,e)},parent:function(e){return $(a(this.pluck("parentNode")),e)},children:function(e){return $(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return $(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return r.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=Y(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var n=r(e).get(0),i=n.parentNode||this.length>1;return this.each((function(a){r(this).wrapAll(t?e.call(this,a):i?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){var t;r(this[0]).before(e=r(e));while((t=e.children()).length)e=t.first();r(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(n){var i=r(this),a=i.contents(),o=t?e.call(this,n):e;a.length?a.wrapAll(o):i.append(o)}))},unwrap:function(){return this.parent().each((function(){r(this).replaceWith(r(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()}))},prev:function(e){return r(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return r(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var n=this.innerHTML;r(this).empty().append(q(this,e,t,n))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var r=q(this,e,t,this.textContent);this.textContent=null==r?"":""+r})):0 in this?this.pluck("textContent").join(""):null},attr:function(r,n){var i;return"string"!=typeof r||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(r))for(t in r)X(this,t,r[t]);else X(this,r,q(this,n,e,this.getAttribute(r)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(r))?i:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){X(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(r){this[e]=q(this,t,r,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(t,r){var n="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,r):this.attr(n);return null!==i?J(i):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=q(this,e,t,this.value)}))):this[0]&&(this[0].multiple?r(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=r(this),i=q(this,e,t,n.offset()),a=n.offsetParent().offset(),o={top:i.top-a.top,left:i.left-a.left};"static"==n.css("position")&&(o["position"]="relative"),n.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!r.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[i(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(O(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return r.each(e,(function(e,t){o[t]=a.style[i(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==D(e))n||0===n?l=G(e)+":"+V(e,n):this.each((function(){this.style.removeProperty(G(e))}));else for(t in e)e[t]||0===e[t]?l+=G(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(G(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(r(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Z(e))}),K(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){n=[];var i=Z(this),a=q(this,e,t,i);a.split(/\s+/g).forEach((function(e){r(this).hasClass(e)||n.push(e)}),this),n.length&&Z(this,i+(i?" ":"")+n.join(" "))}})):this},removeClass:function(t){return this.each((function(r){if("className"in this){if(t===e)return Z(this,"");n=Z(this),q(this,t,r,n).split(/\s+/g).forEach((function(e){n=n.replace(K(e)," ")})),Z(this,n.trim())}}))},toggleClass:function(t,n){return t?this.each((function(i){var a=r(this),o=q(this,t,i,Z(this));o.split(/\s+/g).forEach((function(t){(n===e?!a.hasClass(t):n)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var r="scrollTop"in this[0];return t===e?r?this[0].scrollTop:this[0].pageYOffset:this.each(r?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var r="scrollLeft"in this[0];return t===e?r?this[0].scrollLeft:this[0].pageXOffset:this.each(r?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(r(e).css("margin-top"))||0,n.left-=parseFloat(r(e).css("margin-left"))||0,i.top+=parseFloat(r(t[0]).css("border-top-width"))||0,i.left+=parseFloat(r(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent||c.body;while(e&&!v.test(e.nodeName)&&"static"==r(e).css("position"))e=e.offsetParent;return e}))}},r.fn.detach=r.fn.remove,["width","height"].forEach((function(t){var n=t.replace(/./,(function(e){return e[0].toUpperCase()}));r.fn[t]=function(i){var a,o=this[0];return i===e?x(o)?o["inner"+n]:N(o)?o.documentElement["scroll"+n]:(a=this.offset())&&a[t]:this.each((function(e){o=r(this),o.css(t,q(this,i,e,o[t]()))}))}})),A.forEach((function(t,n){var i=n%2;r.fn[t]=function(){var t,a,o=r.map(arguments,(function(n){var i=[];return t=D(n),"array"==t?(n.forEach((function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(C.fragment(t)))})),i):"object"==t||null==n?n:C.fragment(n)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var l=r.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return r(e).remove();a.insertBefore(e,t),l&&Q(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t["eval"].call(t,e.innerHTML)}}))}))}))},r.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return r(e)[t](this),this}})),C.Z.prototype=W.prototype=r.fn,C.uniq=a,C.deserializeValue=J,r.zepto=C,r}();window.Zepto=D,void 0===window.$&&(window.$=D),function(e){var t,r,n=+new Date,i=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=i.createElement("a");function h(t,r,n){var i=e.Event(r);return e(t).trigger(i,n),!i.isDefaultPrevented()}function f(e,t,r,n){if(e.global)return h(t||i,r,n)}function p(t){t.global&&0===e.active++&&f(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&f(t,null,"ajaxStop")}function m(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===f(t,r,"ajaxBeforeSend",[e,t]))return!1;f(t,r,"ajaxSend",[e,t])}function v(e,t,r,n){var i=r.context,a="success";r.success.call(i,e,a,t),n&&n.resolveWith(i,[e,a,t]),f(r,i,"ajaxSuccess",[t,r,e]),b(a,t,r)}function y(e,t,r,n,i){var a=n.context;n.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),f(n,a,"ajaxError",[r,n,e||t]),b(t,r,n)}function b(e,t,r){var n=r.context;r.complete.call(n,t,e),f(r,n,"ajaxComplete",[t,r]),g(r)}function A(e,t,r){if(r.dataFilter==_)return e;var n=r.context;return r.dataFilter.call(n,e,t)}function _(){}function E(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}function T(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function k(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function S(t,r,n,i){return e.isFunction(r)&&(i=n,n=r,r=void 0),e.isFunction(n)||(i=n,n=void 0),{url:t,data:r,success:n,dataType:i}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,r){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+n++,u=i.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return r&&r.promise(h),e(u).on("load error",(function(n,i){clearTimeout(o),e(u).off().remove(),"error"!=n.type&&a?v(a[0],h,t,r):y(null,i||"error",h,t,r),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===m(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),i.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:_},e.ajax=function(n){var a,o,s=e.extend({},n||{}),l=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===s[t]&&(s[t]=e.ajaxSettings[t]);p(s),s.crossDomain||(a=i.createElement("a"),a.href=s.url,a.href=a.href,s.crossDomain=d.protocol+"//"+d.host!==a.protocol+"//"+a.host),s.url||(s.url=window.location.toString()),(o=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,o)),k(s);var u=s.dataType,h=/\?.+=\?/.test(s.url);if(h&&(u="jsonp"),!1!==s.cache&&(n&&!0===n.cache||"script"!=u&&"jsonp"!=u)||(s.url=T(s.url,"_="+Date.now())),"jsonp"==u)return h||(s.url=T(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),e.ajaxJSONP(s,l);var f,g=s.accepts[u],b={},S=function(e,t){b[e.toLowerCase()]=[e,t]},w=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:window.location.protocol,R=s.xhr(),C=R.setRequestHeader;if(l&&l.promise(R),s.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",g||"*/*"),(g=s.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),R.overrideMimeType&&R.overrideMimeType(g)),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&S("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(r in s.headers)S(r,s.headers[r]);if(R.setRequestHeader=S,R.onreadystatechange=function(){if(4==R.readyState){R.onreadystatechange=_,clearTimeout(f);var t,r=!1;if(R.status>=200&&R.status<300||304==R.status||0==R.status&&"file:"==w){if(u=u||E(s.mimeType||R.getResponseHeader("content-type")),"arraybuffer"==R.responseType||"blob"==R.responseType)t=R.response;else{t=R.responseText;try{t=A(t,u,s),"script"==u?(0,eval)(t):"xml"==u?t=R.responseXML:"json"==u&&(t=c.test(t)?null:e.parseJSON(t))}catch(n){r=n}if(r)return y(r,"parsererror",R,s,l)}v(t,R,s,l)}else y(R.statusText||null,R.status?"error":"abort",R,s,l)}},!1===m(R,s))return R.abort(),y(null,"abort",R,s,l),R;var L=!("async"in s)||s.async;if(R.open(s.type,s.url,L,s.username,s.password),s.xhrFields)for(r in s.xhrFields)R[r]=s.xhrFields[r];for(r in b)C.apply(R,b[r]);return s.timeout>0&&(f=setTimeout((function(){R.onreadystatechange=_,R.abort(),y(null,"timeout",R,s,l)}),s.timeout)),R.send(s.data?s.data:null),R},e.get=function(){return e.ajax(S.apply(null,arguments))},e.post=function(){var t=S.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=S.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,r,n){if(!this.length)return this;var i,o=this,s=t.split(/\s/),l=S(t,r,n),u=l.success;return s.length>1&&(l.url=s[0],i=s[1]),l.success=function(t){o.html(i?e("<div>").html(t.replace(a,"")).find(i):t),u&&u.apply(o,arguments)},e.ajax(l),this};var w=encodeURIComponent;function R(t,r,n,i){var a,o=e.isArray(r),s=e.isPlainObject(r);e.each(r,(function(r,l){a=e.type(l),i&&(r=n?i:i+"["+(s||"object"==a||"array"==a?r:"")+"]"),!i&&o?t.add(l.name,l.value):"array"==a||!n&&"object"==a?R(t,l,n,r):t.add(r,l)}))}e.param=function(t,r){var n=[];return n.add=function(t,r){e.isFunction(r)&&(r=r()),null==r&&(r=""),this.push(w(t)+"="+w(r))},R(n,t,r),n.join("&").replace(/%20/g,"+")}}(D),function(e){e.Callbacks=function(t){t=e.extend({},t);var r,n,i,a,o,s,l=[],u=!t.once&&[],c=function(e){for(r=t.memory&&e,n=!0,s=a||0,a=0,o=l.length,i=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){r=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):r?l.length=0:d.disable())},d={add:function(){if(l){var n=l.length,s=function(r){e.each(r,(function(e,r){"function"===typeof r?t.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==typeof r&&s(r)}))};s(arguments),i?o=l.length:r&&(a=n,c(r))}return this},remove:function(){return l&&e.each(arguments,(function(t,r){var n;while((n=e.inArray(r,l,n))>-1)l.splice(n,1),i&&(n<=o&&--o,n<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=r=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,r||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!n}};return d}}(D),function(e){var t=Array.prototype.slice;function r(t){var n=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",a={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r((function(r){e.each(n,(function(n,i){var s=e.isFunction(t[n])&&t[n];o[i[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var n=this===a?r.promise():this,o=s?[t]:arguments;r[i[0]+"With"](n,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(n,(function(e,t){var r=t[2],s=t[3];a[t[1]]=r.add,s&&r.add((function(){i=s}),n[1^e][2].disable,n[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=r.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(n){var i,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||n&&e.isFunction(n.promise)?l:0,d=1===c?n:r(),h=function(e,r,n){return function(a){r[e]=this,n[e]=arguments.length>1?t.call(arguments):a,n===i?d.notifyWith(r,n):--c||d.resolveWith(r,n)}};if(l>1)for(i=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,i)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=r}(D),function(e){var t,r=1,n=Array.prototype.slice,i=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=r++)}function h(e,t,r,n){if(t=f(t),t.ns)var i=p(t.ns);return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||d(e.fn)===d(r))&&(!n||e.sel==n)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function g(e,t){return e.del&&!l&&e.e in u||!!t}function m(e){return c[e]||l&&u[e]||e}function v(r,n,i,a,s,l,u){var h=d(r),p=o[h]||(o[h]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(i);var o=f(n);o.fn=i,o.sel=s,o.e in c&&(i=function(t){var r=t.relatedTarget;if(!r||r!==this&&!e.contains(this,r))return o.fn.apply(this,arguments)}),o.del=l;var d=l||i;o.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=a;var n=d.apply(r,e._args==t?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},o.i=p.length,p.push(o),"addEventListener"in r&&r.addEventListener(m(o.e),o.proxy,g(o,u))}))}function y(e,t,r,n,i){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,r,n).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,g(t,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:v,remove:y},e.proxy=function(t,r){var o=2 in arguments&&n.call(arguments,2);if(i(t)){var s=function(){return t.apply(r,o?o.concat(n.call(arguments)):arguments)};return s._zid=d(t),s}if(a(r))return o?(o.unshift(t[r],t),e.proxy.apply(null,o)):e.proxy(t[r],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,r){return this.on(e,t,r)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var b=function(){return!0},A=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function T(r,n){return!n&&r.isDefaultPrevented||(n||(n=r),e.each(E,(function(e,t){var i=n[e];r[e]=function(){return this[t]=b,i&&i.apply(n,arguments)},r[t]=A})),r.timeStamp||(r.timeStamp=Date.now()),(n.defaultPrevented!==t?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(r.isDefaultPrevented=b)),r}function k(e){var r,n={originalEvent:e};for(r in e)_.test(r)||e[r]===t||(n[r]=e[r]);return T(n,e)}e.fn.delegate=function(e,t,r){return this.on(t,e,r)},e.fn.undelegate=function(e,t,r){return this.off(t,e,r)},e.fn.live=function(t,r){return e(document.body).delegate(this.selector,t,r),this},e.fn.die=function(t,r){return e(document.body).undelegate(this.selector,t,r),this},e.fn.on=function(r,o,s,l,u){var c,d,h=this;return r&&!a(r)?(e.each(r,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||i(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=A),h.each((function(t,i){u&&(c=function(e){return y(i,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var r,a=e(t.target).closest(o,i).get(0);if(a&&a!==i)return r=e.extend(k(t),{currentTarget:a,liveFired:i}),(c||l).apply(a,[r].concat(n.call(arguments,1)))}),v(i,r,l,s,o,d||c)})))},e.fn.off=function(r,n,o){var s=this;return r&&!a(r)?(e.each(r,(function(e,t){s.off(e,n,t)})),s):(a(n)||i(o)||!1===o||(o=n,n=t),!1===o&&(o=A),s.each((function(){y(this,r,o,n)})))},e.fn.trigger=function(t,r){return t=a(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=r,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,r)}))},e.fn.triggerHandler=function(t,r){var n,i;return this.each((function(o,s){n=k(a(t)?e.Event(t):t),n._args=r,n.target=s,e.each(h(s,t.type||t),(function(e,t){if(i=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(t=e,e=t.type);var r=document.createEvent(s[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),T(r)}}(D),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(r,n){try{return e(r,n)}catch(t){return null}}}}(),function(e){var t=e.zepto,r=t.qsa,n=t.matches;function i(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(i(this))return this},hidden:function(){if(!i(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,r){if(e===r)return this},contains:function(t,r,n){if(e(this).text().indexOf(n)>-1)return this},has:function(e,r,n){if(t.qsa(this,n).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=o.exec(e);if(i&&i[2]in a&&(r=a[i[2]],n=i[3],e=i[1],n)){var s=Number(n);n=isNaN(s)?n.replace(/^["']|["']$/g,""):s}return t(e,r,n)}t.qsa=function(n,i){return u(i,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(n).addClass(l),a="."+l+" "+a);var d=r(n,a)}catch(h){throw console.error("error performing selector: %o",i),h}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,r,i){return(!t||n(e,t))&&(!r||r.call(e,null,i)===e)}))}}(D);var P=D,x=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],N=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],M={},F=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}},j=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!e}catch(t){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},U=function(e){var t,r=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===r[1]){if(t=e.match(/\bOPR\/(\d+)/),null!=t)return{name:"Opera",version:parseInt(t[1])};if(t=e.match(/\bEdge\/(\d+)/),null!=t)return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(r.splice(1,1,"Android WebView"),r.splice(2,1,t[1]));return r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:r[0],version:parseInt(r[1])}},B=function(){var e,t={},r=M.userAgent.toLowerCase(),n=L(x);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new RegExp(i.identifier.toLowerCase()),o=a.exec(r);if(null!=o&&o[1]){if(t.name=i.name,t.group=i.group,i.versionIdentifier){var s=new RegExp(i.versionIdentifier.toLowerCase()),l=s.exec(r);null!=l&&l[1]&&G(l[1],t)}else G(o[1],t);break}}}catch(u){n.e(u)}finally{n.f()}return t},G=function(e,t){var r=e.split(".",2);t.fullVersion=e,r[0]&&(t.majorVersion=parseInt(r[0])),r[1]&&(t.minorVersion=parseInt(r[1]))},K=function(){var e,t={},r=M.userAgent.toLowerCase(),n=L(N);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new RegExp(i.identifier.toLowerCase()),o=a.exec(r);if(null!=o){if(t.name=i.name,t.group=i.group,i.version)V(i.version,i.versionSeparator?i.versionSeparator:".",t);else if(o[1])V(o[1],i.versionSeparator?i.versionSeparator:".",t);else if(i.versionIdentifier){var s=new RegExp(i.versionIdentifier.toLowerCase()),l=s.exec(r);null!=l&&l[1]&&V(l[1],i.versionSeparator?i.versionSeparator:".",t)}break}}}catch(u){n.e(u)}finally{n.f()}return t},V=function(e,t,r){var n="["==t.substr(0,1)?new RegExp(t,"g"):t,i=e.split(n,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),r.fullVersion=e,i&&i[0]&&(r.majorVersion=parseInt(i[0])),i&&i[1]&&(r.minorVersion=parseInt(i[1]))},Y=function(){var e={};return e.width=P(window).width(),e.height=P(window).height(),e},H=function(){switch(window.orientation){case-90:case 90:M.viewport.orientation="landscape";break;default:M.viewport.orientation="portrait";break}},W=function(e){var t=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,r=t.exec(e),n=r&&(r[1]||r[2])||"";return n},z=U(navigator.userAgent);M.isEdge=/edge/i.test(navigator.userAgent),M.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!M.isEdge,M.isSafari=/safari/i.test(navigator.userAgent)&&!M.isChrome&&!M.isEdge,M.isFirefox=/firefox/i.test(navigator.userAgent),M.isLegacyIE=!!window.ActiveXObject,M.isIE=M.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),M.isIE11=/trident.*rv:11/i.test(navigator.userAgent),M.isChromecast=M.isChrome&&/CrKey/i.test(navigator.userAgent),M.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),M.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),M.isAndroid=/Android/i.test(navigator.userAgent),M.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),M.isWin8App=/MSAppHost/i.test(navigator.userAgent),M.isWiiU=/WiiU/i.test(navigator.userAgent),M.isPS4=/PlayStation 4/i.test(navigator.userAgent),M.hasLocalstorage=F(),M.hasFlash=j(),M.name=z.name,M.version=z.version,M.userAgent=navigator.userAgent,M.data=B(),M.os=K(),M.viewport=Y(),M.device=W(M.userAgent),"undefined"!==typeof window.orientation&&H();var $={},q=[],X=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Z=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function J(e,t){if(t)for(var r in t){var n=Object.getOwnPropertyDescriptor(t,r);n?Object.defineProperty(e,r,n):e[r]=t[r]}return e}function Q(e,t){var r=function(e){c(n,e);var r=m(n);function n(){var e;i(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return e=r.call.apply(r,[this].concat(o)),t.initialize&&t.initialize.apply(p(e),o),e}return n}(e);return J(r.prototype,t),r}function ee(e,t){if(!isFinite(e))return"--:--";e*=1e3,e=parseInt(e/1e3);var r=e%60;e=parseInt(e/60);var n=e%60;e=parseInt(e/60);var i=e%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",i<1&&(o+="00:")),(i&&i>0||t)&&(o+=("0"+i).slice(-2)+":"),o+=("0"+n).slice(-2)+":",o+=("0"+r).slice(-2),o.trim()}var te={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"===typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},re=function(){function e(){i(this,e)}return o(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(t){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return M.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(M.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(r){return!1}}}]),e}(),ne=function(){function e(){i(this,e)}return o(e,null,[{key:"parse",value:function(e){var t,r=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a={};while(t=n.exec(e))a[i(t[1]).toLowerCase()]=i(t[2]);return a}},{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}}]),e}();function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,r=ne.params[e]||ne.hashParams[e]||"",n=r.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(e){if(e){var r=e[e.length-1],n=parseInt(e.slice(0,e.length-1),10);t+=n*i[r]}}))}else r&&(t=parseInt(r,10));return t}function ae(e){$[e]||($[e]=0);var t=++$[e];return e+t}function oe(e){return e-parseFloat(e)+1>=0}function se(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function le(){return window.navigator&&window.navigator.language}function ue(){return window.performance&&window.performance.now?performance.now():Date.now()}function ce(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function de(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))}function he(e,t){t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:O.mp4,element:null},t);var r=t.element?t.element:document.createElement(t.type);r.muted=t.muted,!0===t.muted&&r.setAttribute("muted","muted"),!0===t.inline&&r.setAttribute("playsinline","playsinline"),r.src=t.source;var n=r.play(),i=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(i),e(t,r)};void 0!==n?n.then((function(){return a(!0)}))["catch"]((function(e){return a(!1,e)})):a(!0)}var fe=function(){function e(){i(this,e)}return o(e,null,[{key:"configure",value:function(e){this.options=P.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&q.length>0?q.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(P(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),q.push(e))}}]),e}();fe.options={recycleVideo:!1};var pe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;i(this,e),this.delay=t,this.lastTime=0}return o(e,[{key:"handle",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(new Date).getTime(),i=n-this.lastTime;i<this.delay&&i>0&&(t(),r&&e.preventDefault()),this.lastTime=n}}]),e}(),ge={Config:re,Fullscreen:te,QueryString:ne,DomRecycler:fe,assign:J,extend:Q,formatTime:ee,seekStringToSeconds:ie,uniqueId:ae,currentScriptUrl:se,isNumber:oe,requestAnimationFrame:X,cancelAnimationFrame:Z,getBrowserLanguage:le,now:ue,removeArrayItem:ce,listContainsIgnoreCase:de,canAutoPlayMedia:he,Media:O,DoubleEventHandler:pe},me="font-weight: bold; font-size: 13px;",ve="color: #006600;"+me,ye="color: #0000ff;"+me,be="color: #ff8000;"+me,Ae="color: #ff0000;"+me,_e=0,Ee=1,Te=2,ke=3,Se=ke,we=[ye,ve,be,Ae,Ae],Re=["debug","info","warn","error","disabled"],Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;i(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.previousLevel=this.level,this.offLevel=r}return o(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),o(e,[{key:"debug",value:function(e){this.log(e,_e,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,Ee,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,Te,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,ke,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+Re[this.level],be)}},{key:"log",value:function(e,t,r){if(!(this.EXCLUDE_LIST.indexOf(r[0])>=0)&&!(t<this.level)){r||(r=e,e=null);var n=we[t],i="";e&&(i="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+Re[t]+"]"+i,n].concat(r))}}}]),e}();Ce.LEVEL_DEBUG=_e,Ce.LEVEL_INFO=Ee,Ce.LEVEL_WARN=Te,Ce.LEVEL_ERROR=ke,Ce.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},Ce.setLevel=function(e){this.getInstance().level=e},Ce.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},Ce.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},Ce.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},Ce.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Le=Array.prototype.slice,Ie=/\s+/,Oe=function(e,t,r,i){if(!r)return!0;if("object"===n(r)){for(var a in r)e[t].apply(e,[a,r[a]].concat(i));return!1}if(Ie.test(r)){for(var o=r.split(Ie),s=0,l=o.length;s<l;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},De=function(e,t,r,n){var i,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];function c(){try{switch(t.length){case 0:while(++a<o)(i=e[a]).callback.call(i.ctx);return;case 1:while(++a<o)(i=e[a]).callback.call(i.ctx,s);return;case 2:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l);return;case 3:while(++a<o)(i=e[a]).callback.call(i.ctx,s,l,u);return;default:while(++a<o)(i=e[a]).callback.apply(i.ctx,t);return}}catch(d){Ce.error.apply(Ce,[r,"error on event",n,"trigger","-",d]),c()}}c()},Pe=function(){function e(){i(this,e)}return o(e,[{key:"on",value:function(e,t,r){if(!Oe(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this}},{key:"once",value:function(e,t,r){var n,i=this;if(!Oe(this,"once",e,[t,r])||!t)return this;var a=function(){return i.off(e,n)};return n=function(){a(),t.apply(this,arguments)},this.on(e,n,r)}},{key:"off",value:function(e,t,r){var n,i,a,o,s,l,u,c;if(!this._events||!Oe(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(o=e?[e]:Object.keys(this._events),s=0,l=o.length;s<l;s++)if(e=o[s],a=this._events[e],a){if(this._events[e]=n=[],t||r)for(u=0,c=a.length;u<c;u++)i=a[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(Ce.debug.apply(Ce,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var r=Le.call(arguments,1);if(!Oe(this,"trigger",e,r))return this;var n=this._events[e],i=this._events.all;return n&&De(n,r,t,e),i&&De(i,arguments,t,e),this}},{key:"stopListening",value:function(e,t,r){var i=this._listeningTo;if(!i)return this;var a=!t&&!r;for(var o in r||"object"!==n(t)||(r=this),e&&((i={})[e._listenId]=e),i)e=i[o],e.off(t,r,this),(a||0===Object.keys(e._events).length)&&delete this._listeningTo[o];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var r="string"===typeof t&&t.toUpperCase().trim();r&&!e.Custom[r]?e.Custom[r]=r.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):Ce.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"===typeof e.Custom[t]}))}}]),e}(),xe={listenTo:"on",listenToOnce:"once"};Object.keys(xe).forEach((function(e){Pe.prototype[e]=function(t,r,i){var a=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=ae("l"));return a[o]=t,i||"object"!==n(r)||(i=this),t[xe[e]](r,i,this),this}})),Pe.PLAYER_READY="ready",Pe.PLAYER_RESIZE="resize",Pe.PLAYER_FULLSCREEN="fullscreen",Pe.PLAYER_PLAY="play",Pe.PLAYER_PAUSE="pause",Pe.PLAYER_STOP="stop",Pe.PLAYER_ENDED="ended",Pe.PLAYER_SEEK="seek",Pe.PLAYER_ERROR="playererror",Pe.ERROR="error",Pe.PLAYER_TIMEUPDATE="timeupdate",Pe.PLAYER_VOLUMEUPDATE="volumeupdate",Pe.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",Pe.PLAYBACK_PROGRESS="playback:progress",Pe.PLAYBACK_TIMEUPDATE="playback:timeupdate",Pe.PLAYBACK_READY="playback:ready",Pe.PLAYBACK_BUFFERING="playback:buffering",Pe.PLAYBACK_BUFFERFULL="playback:bufferfull",Pe.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",Pe.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",Pe.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",Pe.PLAYBACK_BITRATE="playback:bitrate",Pe.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",Pe.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",Pe.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",Pe.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",Pe.PLAYBACK_DVR="playback:dvr",Pe.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",Pe.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",Pe.PLAYBACK_ENDED="playback:ended",Pe.PLAYBACK_PLAY_INTENT="playback:play:intent",Pe.PLAYBACK_PLAY="playback:play",Pe.PLAYBACK_PAUSE="playback:pause",Pe.PLAYBACK_SEEK="playback:seek",Pe.PLAYBACK_SEEKED="playback:seeked",Pe.PLAYBACK_STOP="playback:stop",Pe.PLAYBACK_ERROR="playback:error",Pe.PLAYBACK_STATS_ADD="playback:stats:add",Pe.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",Pe.PLAYBACK_LEVEL_SWITCH="playback:level:switch",Pe.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",Pe.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",Pe.CORE_CONTAINERS_CREATED="core:containers:created",Pe.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",Pe.CORE_OPTIONS_CHANGE="core:options:change",Pe.CORE_READY="core:ready",Pe.CORE_FULLSCREEN="core:fullscreen",Pe.CORE_RESIZE="core:resize",Pe.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",Pe.CORE_MOUSE_MOVE="core:mousemove",Pe.CORE_MOUSE_LEAVE="core:mouseleave",Pe.CONTAINER_PLAYBACKSTATE="container:playbackstate",Pe.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",Pe.CONTAINER_BITRATE="container:bitrate",Pe.CONTAINER_STATS_REPORT="container:stats:report",Pe.CONTAINER_DESTROYED="container:destroyed",Pe.CONTAINER_READY="container:ready",Pe.CONTAINER_RESIZE="container:resize",Pe.CONTAINER_ERROR="container:error",Pe.CONTAINER_LOADEDMETADATA="container:loadedmetadata",Pe.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",Pe.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",Pe.CONTAINER_TIMEUPDATE="container:timeupdate",Pe.CONTAINER_PROGRESS="container:progress",Pe.CONTAINER_PLAY="container:play",Pe.CONTAINER_STOP="container:stop",Pe.CONTAINER_PAUSE="container:pause",Pe.CONTAINER_ENDED="container:ended",Pe.CONTAINER_CLICK="container:click",Pe.CONTAINER_DBLCLICK="container:dblclick",Pe.CONTAINER_CONTEXTMENU="container:contextmenu",Pe.CONTAINER_MOUSE_ENTER="container:mouseenter",Pe.CONTAINER_MOUSE_LEAVE="container:mouseleave",Pe.CONTAINER_SEEK="container:seek",Pe.CONTAINER_SEEKED="container:seeked",Pe.CONTAINER_VOLUME="container:volume",Pe.CONTAINER_FULLSCREEN="container:fullscreen",Pe.CONTAINER_STATE_BUFFERING="container:state:buffering",Pe.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",Pe.CONTAINER_SETTINGSUPDATE="container:settingsupdate",Pe.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",Pe.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",Pe.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",Pe.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",Pe.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",Pe.CONTAINER_STATS_ADD="container:stats:add",Pe.CONTAINER_OPTIONS_CHANGE="container:options:change",Pe.MEDIACONTROL_RENDERED="mediacontrol:rendered",Pe.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",Pe.MEDIACONTROL_SHOW="mediacontrol:show",Pe.MEDIACONTROL_HIDE="mediacontrol:hide",Pe.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",Pe.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",Pe.MEDIACONTROL_PLAYING="mediacontrol:playing",Pe.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",Pe.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",Pe.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Ne=function(e){c(r,e);var t=m(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),e=t.call(this,n),e._options=n,e.uniqueId=ae("o"),e}return o(r,[{key:"options",get:function(){return this._options}}]),r}(Pe),Me={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Fe=/(.)^/,je={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ue=/\\|'|\r|\n|\t|\u2028|\u2029/g,Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ge=new RegExp("[&<>\"']","g"),Ke=function(e){return null===e?"":(""+e).replace(Ge,(function(e){return Be[e]}))},Ve=0,Ye=function(e,t){var r,n=new RegExp([(Me.escape||Fe).source,(Me.interpolate||Fe).source,(Me.evaluate||Fe).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(n,(function(t,r,n,o,s){return a+=e.slice(i,s).replace(Ue,(function(e){return"\\"+je[e]})),r&&(a+="'+\n((__t=("+r+"))==null?'':escapeExpr(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),i=s+t.length,t})),a+="';\n",Me.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Ve+++"]";try{r=new Function(Me.variable||"obj","escapeExpr",a)}catch(s){throw s.source=a,s}if(t)return r(t,Ke);var o=function(e){return r.call(this,e,Ke)};return o.source="function("+(Me.variable||"obj")+"){\n"+a+"}",o};Ye.settings=Me;var He={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return P('<style class="clappr-style"></style>').html(Ye(e.toString())(t))}},We=/^(\S+)\s*(.*)$/,ze=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e),n.cid=ae("c"),n._ensureElement(),n.delegateEvents(),n}return o(r,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),o(r,[{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=P.zepto.isZ(e)?e:P(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var r=e[t];if(r&&r.constructor!==Function&&(r=this[e[t]]),r){var n=t.match(We),i=n[1],a=n[2];i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,r.bind(this)):this.$el.on(i,a,r.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=P.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e["class"]=this.className);var t=P(fe.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),r}(Ne),$e=function(e){c(r,e);var t=m(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return i(this,r),e=t.call(this,n),e.core=a,e}return o(r,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),o(r,[{key:"createError",value:function(e){this.core?this.core.trigger(Pe.ERROR,e):Ce.warn(this.name,"Core is not set. Error: ",e)}}]),r}(Ne),qe={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},r=this.constructor&&this.constructor.type||"",n=this.name||r,i=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(n,":").concat(e&&e.code||"unknown"),o={description:"",level:$e.Levels.FATAL,origin:n,scope:r,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(i&&s.level==$e.Levels.FATAL&&!s.UI){var l={title:i.t("default_error_title"),message:i.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):Ce.warn(n,"PlayerError is not defined. Error: ",s),s}},Xe=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e.options),n.core=e,n.enabled=!0,n.bindEvents(),n.render(),n}return o(r,[{key:"playerError",get:function(){return this.core.playerError}}]),o(r,[{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),r}(ze);Object.assign(Xe.prototype,qe),Xe.extend=function(e){return Q(Xe,e)},Xe.type="core";var Ze=".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n",Je=function(e){c(r,e);var t=m(r);function r(e,n,a){var o;return i(this,r),o=t.call(this,e),o._i18n=n,o.currentTime=0,o.volume=100,o.playback=e.playback,o.playerError=a,o.settings=P.extend(!0,{},o.playback.settings),o.isReady=!1,o.mediaControlDisabled=!1,o.plugins=[o.playback],o.dblTapHandler=new pe(500),o.clickTimer=null,o.clickDelay=200,o.bindEvents(),o}return o(r,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}}]),o(r,[{key:"bindEvents",value:function(){this.listenTo(this.playback,Pe.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,Pe.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,Pe.PLAYBACK_READY,this.ready),this.listenTo(this.playback,Pe.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,Pe.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,Pe.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,Pe.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,Pe.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,Pe.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,Pe.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,Pe.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,Pe.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,Pe.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,Pe.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,Pe.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,Pe.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,Pe.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,Pe.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,Pe.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,Pe.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,Pe.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,Pe.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(Pe.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(Pe.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(Pe.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(Pe.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(Pe.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(Pe.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(Pe.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(Pe.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(Pe.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(Pe.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(Pe.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.trigger.apply(this,[Pe.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(Pe.CONTAINER_PLAY,this.name)}},{key:"paused",value:function(){this.trigger(Pe.CONTAINER_PAUSE,this.name)}},{key:"play",value:function(){this.playback.play()}},{key:"stop",value:function(){this.playback.stop(),this.currentTime=0}},{key:"pause",value:function(){this.playback.pause()}},{key:"onEnded",value:function(){this.trigger(Pe.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"stopped",value:function(){this.trigger(Pe.CONTAINER_STOP)}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(Pe.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(Pe.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(Pe.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Pe.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(Pe.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(Pe.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var r=t*(e/100);this.seek(r)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(Pe.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(Pe.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(Pe.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(Pe.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Pe.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(Pe.CONTAINER_MOUSE_LEAVE)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(Pe.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(Pe.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(Pe.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(Pe.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},r=t.width,n=t.height,i=n!==e.height||r!==e.width;i&&(this.currentSize=e,this.trigger(Pe.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=P.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(Pe.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=He.getStyleFor(Ze.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),r}(ze);Object.assign(Je.prototype,qe);var Qe=function(e){c(r,e);var t=m(r);function r(e,n,a){var o;return i(this,r),o=t.call(this,e),o.settings={},o._i18n=n,o.playerError=a,o._consented=!1,o}return o(r,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}}]),o(r,[{key:"consent",value:function(e){"function"===typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"getPlaybackType",value:function(){return r.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=P.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,r){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}}]),r}(ze);Object.assign(Qe.prototype,qe),Qe.extend=function(e){return Q(Qe,e)},Qe.canPlay=function(e,t){return!1},Qe.VOD="vod",Qe.AOD="aod",Qe.LIVE="live",Qe.NO_OP="no_op",Qe.type="playback";var et=function(e){c(r,e);var t=m(r);function r(e,n,a,o){var s;return i(this,r),s=t.call(this,e),s._i18n=a,s.loader=n,s.playerError=o,s}return o(r,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),o(r,[{key:"createContainers",value:function(){var e=this;return P.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(r){return r.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,r=this.options.mimeType;"object"===n(e)?(t=e.source.toString(),e.mimeType&&(r=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=u(u({},this.options),{},{src:t,mimeType:r}),a=this.findPlaybackPlugin(t,r),o=a?new a(i,this._i18n,this.playerError):new Qe;i=u(u({},i),{},{playback:o});var s=new Je(i,this._i18n,this.playerError),l=P.Deferred();return l.promise(s),this.addContainerPlugins(s),this.listenToOnce(s,Pe.CONTAINER_READY,(function(){return l.resolve(s)})),s}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),r}(Ne),tt='[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n',rt='[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n',nt=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e),n.playerError=new $e(e,p(n)),n.configureDomRecycler(),n.firstResize=!0,n.plugins=[],n.containers=[],n._boundFullscreenHandler=function(){return n.handleFullscreenChange()},P(document).bind("fullscreenchange",n._boundFullscreenHandler),P(document).bind("MSFullscreenChange",n._boundFullscreenHandler),P(document).bind("mozfullscreenchange",n._boundFullscreenHandler),M.isMobile&&P(window).bind("resize",(function(e){n.handleWindowResize(e)})),n}return o(r,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Xe(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(Pe.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),o(r,[{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;fe.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=P.Deferred(),this.defer.promise(this),this.containerFactory=new et(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){M.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:P(window).width(),height:P(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:P(window).width(),height:P(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){oe(e.height)||oe(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();var t=function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})};this.resizeObserverInterval=setInterval(t,500)}},{key:"triggerResize",value:function(e){var t=this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width;t&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(Pe.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;P.when.apply(P,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(Pe.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=P.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),P(document).unbind("fullscreenchange",this._boundFullscreenHandler),P(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),P(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(Pe.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(Pe.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,Pe.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(Pe.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var r=this.containerFactory.createContainer(e,t);return this.setupContainer(r),this.el.appendChild(r.render().el),r}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=te.fullscreenElement();if(!e)return!1;var t=this.activePlayback&&this.activePlayback.el;return e===this.el||e===t}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen())te.cancelFullscreen(),!M.isiOS&&this.$el.removeClass("fullscreen nocursor");else{var t=M.isiOS?this.activePlayback&&this.activePlayback.el:this.el;if(!t)return;M.isSafari||M.isiOS?te.requestFullscreen(t):te.requestFullscreen(t).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!M.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(Pe.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(Pe.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=P.extend(!0,this._options,e),this.configureDomRecycler();var r=e.source||e.sources;r&&this.load(r,e.mimeType||this.options.mimeType),this.trigger(Pe.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){var e=He.getStyleFor(tt.toString(),{baseUrl:this.options.baseUrl}),t=He.getStyleFor(rt.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]);var r=this.$el.parent()&&this.$el.parent().length;!r&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),r}(ze);Object.assign(nt.prototype,qe);var it=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e.options),n.player=e,n}return o(r,[{key:"loader",get:function(){return this.player.loader}}]),o(r,[{key:"create",value:function(){return this.options.loader=this.loader,this.core=new nt(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var r=new t(e.core);e.core.addPlugin(r),e.setupExternalInterface(r)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var r in t)this.player[r]=t[r].bind(e)}}]),r}(Ne),at=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,ot=function(){function e(t,r,n){i(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(r||0,10),this.patch=parseInt(n||0,10)}return o(e,null,[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.match(at)||[],n=b(r,4),i=n[1],a=n[2],o=n[3];return"undefined"===typeof i?null:new e(i,a,o)}}]),o(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=t||this.minor-e.minor,t=t||this.patch-e.patch,t}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return"undefined"!==typeof this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}]),e}(),st=function(e,t){return e&&t?Object.entries(e).filter((function(e){var r=b(e,2),n=r[1];return n.type===t})).reduce((function(e,t){var r=b(t,2),n=r[0],i=r[1];return e[n]=i,e}),{}):{}},lt=function(){var e={plugins:{},playbacks:[]},t="0.4.18";return function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,r),this.playerId=n,this.playbackPlugins=A(e.playbacks);var a=r.registeredPlugins,o=a.core,s=a.container;this.containerPlugins=Object.values(s),this.corePlugins=Object.values(o),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return o(r,null,[{key:"checkVersionSupport",value:function(e){var r=e.prototype,n=r.supportedVersion,i=r.name;if(!n||!n.min)return Ce.warn("Loader","missing version information for ".concat(i)),!1;var a=n.max?ot.parse(n.max):ot.parse(n.min).inc("minor"),o=ot.parse(n.min);return!!ot.parse(t).satisfies(o,a)||(Ce.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(t," does not match required range [").concat(o,",").concat(a,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return Ce.warn("Loader","missing information to register plugin: ".concat(t)),!1;r.checkVersionSupport(t);var n=e.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&Ce.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;r.checkVersionSupport(t);var n=e.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var a=n[i];n.splice(i,1),Ce.warn("Loader","overriding playback entry: ".concat(a.name," - ").concat(a))}return e.playbacks=[t].concat(A(n)),!0}},{key:"unregisterPlugin",value:function(t){if(!t)return!1;var r=e.plugins,n=r[t];return!!n&&(delete r[t],!0)}},{key:"unregisterPlayback",value:function(t){if(!t)return!1;var r=e.playbacks,n=r.findIndex((function(e){return e.prototype.name===t}));return!(n<0)&&(r.splice(n,1),e.playbacks=r,!0)}},{key:"clearPlugins",value:function(){e.plugins={}}},{key:"clearPlaybacks",value:function(){e.playbacks=[]}},{key:"registeredPlaybacks",get:function(){return A(e.playbacks)}},{key:"registeredPlugins",get:function(){var t=e.plugins,r=st(t,"core"),n=st(t,"container");return{core:r,container:n}}}]),o(r,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e,r){return e[r.prototype.name]&&t||(e[r.prototype.name]&&delete e[r.prototype.name],e[r.prototype.name]=r),e},n=e.reduceRight(r,Object.create(null)),i=[];for(var a in n)i.unshift(n[a]);return i}},{key:"addExternalPlugins",value:function(e){var t="boolean"!==typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,n="boolean"!==typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if(e=this.groupPluginsByType(e),e.playback){var i=e.playback.filter((function(e){return r.checkVersionSupport(e),!0}));this.playbackPlugins=n?this.removeDups(i.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(i),!0)}if(e.container){var a=e.container.filter((function(e){return r.checkVersionSupport(e),!0}));this.containerPlugins=t?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(e.core){var o=e.core.filter((function(e){return r.checkVersionSupport(e),!0}));this.corePlugins=t?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){var t=["playback","container","core"];t.forEach((function(t){(e[t]||[]).forEach((function(e){var r="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(r)}))}))}}]),r}()}(),ut=se().replace(/\/[^/]+$/,""),ct=function(e){c(r,e);var t=m(r);function r(e){var n;i(this,r),n=t.call(this,e);var a={recycleVideo:!0},o={playerId:ae(""),persistConfig:!0,width:640,height:360,baseUrl:ut,allowUserInteraction:M.isMobile,includeResetStyle:!0,playback:a};return n._options=P.extend(!0,o,e),n.options.sources=n._normalizeSources(e),n.options.chromeless||(n.options.allowUserInteraction=!0),n.options.allowUserInteraction||(n.options.disableKeyboardShortcuts=!0),n._registerOptionEventListeners(n.options.events),n._coreFactory=new it(p(n)),n.options.parentId?n.setParentId(n.options.parentId):n.options.parent&&n.attachTo(n.options.parent),n}return o(r,[{key:"loader",set:function(e){this._loader=e},get:function(){return this._loader||(this._loader=new lt(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:Pe.PLAYER_READY,onResize:Pe.PLAYER_RESIZE,onPlay:Pe.PLAYER_PLAY,onPause:Pe.PLAYER_PAUSE,onStop:Pe.PLAYER_STOP,onEnded:Pe.PLAYER_ENDED,onSeek:Pe.PLAYER_SEEK,onError:Pe.PLAYER_ERROR,onTimeUpdate:Pe.PLAYER_TIMEUPDATE,onVolumeUpdate:Pe.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:Pe.PLAYER_SUBTITLE_AVAILABLE}}}]),o(r,[{key:"setParentId",value:function(e){var t=document.querySelector(e);return t&&this.attachTo(t),this}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,Pe.CORE_READY,this._onReady),this.listenTo(this.core,Pe.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,Pe.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,Pe.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,Pe.CONTAINER_PLAY,this._onPlay),this.listenTo(e,Pe.CONTAINER_PAUSE,this._onPause),this.listenTo(e,Pe.CONTAINER_STOP,this._onStop),this.listenTo(e,Pe.CONTAINER_ENDED,this._onEnded),this.listenTo(e,Pe.CONTAINER_SEEK,this._onSeek),this.listenTo(e,Pe.CONTAINER_ERROR,this._onError),this.listenTo(e,Pe.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,Pe.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,Pe.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).length>0;return n&&Object.keys(r).forEach((function(t){var n=e.eventsMapping[t];n&&e.off(n,r[t])})),Object.keys(t).forEach((function(r){var n=e.eventsMapping[r];if(n){var i=t[r];i="function"===typeof i&&i,i&&e.on(n,i)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(Pe.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(Pe.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(Pe.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(Pe.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(Pe.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(){this.trigger(Pe.PLAYER_PLAY)}},{key:"_onPause",value:function(){this.trigger(Pe.PLAYER_PAUSE)}},{key:"_onStop",value:function(){this.trigger(Pe.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function(){this.trigger(Pe.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(Pe.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(Pe.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(Pe.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,r){return void 0!==r&&this.configure({autoPlay:!!r}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){var t=this.core.plugins.concat(this.core.activeContainer.plugins);return t.filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),r}(Ne);Object.assign(ct.prototype,qe);var dt=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e.options),n.container=e,n.enabled=!0,n.bindEvents(),n}return o(r,[{key:"playerError",get:function(){return this.container.playerError}}]),o(r,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),r}(Ne);Object.assign(dt.prototype,qe),dt.extend=function(e){return Q(dt,e)},dt.type="container";var ht=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e.options),n.core=e,n.enabled=!0,n.bindEvents(),n}return o(r,[{key:"playerError",get:function(){return this.core.playerError}}]),o(r,[{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),r}(Ne);Object.assign(ht.prototype,qe),ht.extend=function(e){return Q(ht,e)},ht.type="core";var ft=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e.options),n.container=e,n.enabled=!0,n.bindEvents(),n}return o(r,[{key:"playerError",get:function(){return this.container.playerError}}]),o(r,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),r}(ze);Object.assign(ft.prototype,qe),ft.extend=function(e){return Q(ft,e)},ft.type="container";var pt='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n',gt="[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n",mt={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};mt["ogv"]=mt["ogg"],mt["3gp"]=mt["3gpp"];var vt={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},yt=Object.keys(vt).reduce((function(e,t){return[].concat(A(e),A(vt[t]))}),[]),bt={code:"unknown",message:"unknown"},At=function(e){c(r,e);var t=m(r);function r(){var e;i(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];e=t.call.apply(t,[this].concat(a)),e._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var s,l=e.options.playback,u=l.preload||(M.isSafari?"auto":e.options.preload);return e.options.poster&&("string"===typeof e.options.poster?s=e.options.poster:"string"===typeof e.options.poster.url&&(s=e.options.poster.url)),P.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:s,preload:u||"metadata",crossOrigin:l.crossOrigin,"x-webkit-playsinline":l.playInline}),(l.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),l.playInline&&e.$el.attr({playsinline:"playsinline"}),l.crossOrigin&&e.$el.attr({crossorigin:l.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],l.externalTracks&&e._setupExternalTracks(l.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return o(r,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=r._mimeTypesForUrl(e,vt,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||yt.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===Qe.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return"undefined"!==typeof this.minimumDVRSizeConfig&&"number"===typeof this.minimumDVRSizeConfig}}]),o(r,[{key:"configure",value:function(e){y(d(r.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,r){r&&Ce.warn(e.name,"autoplay error.",{result:t,error:r}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};M.isMobile&&fe.options.recycleVideo&&(t.element=this.el),he(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t="undefined"===typeof this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==Qe.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===Qe.VOD||this.getPlaybackType()===Qe.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Pe.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?Qe.AOD:Qe.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?Qe.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying()||this.el._consented)y(d(r.prototype),"consent",this).call(this,e);else{var n=function n(){t.el.removeEventListener("loadedmetadata",n,!1),t.el.removeEventListener("error",n,!1),t.el._consented=!0,y(d(r.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",n,!1),this.el.addEventListener("error",n,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(Pe.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e["catch"]&&e["catch"]((function(){}))}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(Pe.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(Pe.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(Pe.PLAYBACK_BUFFERING,this.name):this.trigger(Pe.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||bt,t=e.code,r=e.message,n=t===bt.code,i=this.createError({code:t,description:r,raw:this.el.error,level:n?$e.Levels.WARN:$e.Levels.FATAL});n?Ce.warn(this.name,"HTML5 unknown error: ",i):this.trigger(Pe.PLAYBACK_ERROR,i)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),y(d(r.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,fe.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(Pe.PLAYBACK_DVR,e),this.trigger(Pe.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(Ce.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=ie();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(Pe.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat(A(e),[{start:this.el.buffered.start(r),end:this.el.buffered.end(r)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(Pe.PLAYBACK_PROGRESS,n,e)}}},{key:"_typeFor",value:function(e){var t=r._mimeTypesForUrl(e,mt,this.options.mimeType);0===t.length&&(t=r._mimeTypesForUrl(e,vt,this.options.mimeType));var n=t[0]||"";return n.split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(Pe.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(Pe.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks,t=e.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==t.id&&(this._ccTrackId=t.id,this.trigger(Pe.PLAYBACK_SUBTITLE_CHANGED,{id:t.id}))}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=He.getStyleFor(gt.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}},{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===r.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0,t=function(){return e++},r=this.el.textTracks?Array.from(this.el.textTracks):[];return r.filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:t(),name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(oe(e)){var t,r=this.closedCaptionsTracks;if(-1!==e){if(t=r.find((function(t){return t.id===e})),!t)return;if("showing"===t.track.mode)return}r.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(Pe.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return Ye(pt)}}]),r}(Qe);At._mimeTypesForUrl=function(e,t,r){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=r||n&&t[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},At._canPlay=function(e,t,r,n){var i=At._mimeTypesForUrl(r,t,n),a=document.createElement(e);return!!i.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},At.canPlay=function(e,t){return At._canPlay("audio",vt,e,t)||At._canPlay("video",mt,e,t)};var _t=function(e){c(r,e);var t=m(r);function r(){return i(this,r),t.apply(this,arguments)}return o(r,[{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(Pe.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return Qe.AOD}},{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),r}(At);_t.canPlay=function(e,t){var r={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return At._canPlay("audio",r,e,t)};var Et="[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n",Tt=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e),n.el.src=e.src,n}return o(r,[{key:"getPlaybackType",value:function(){return Qe.NO_OP}},{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),o(r,[{key:"render",value:function(){var e=He.getStyleFor(Et.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(Pe.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(Pe.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(Pe.PLAYBACK_ERROR,{message:t},this.name)}}]),r}(Qe);Tt.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var kt="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>",St="[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n",wt=function(e){c(r,e);var t=m(r);function r(){var e;i(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),e._noiseFrameNum=-1,e}return o(r,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"template",get:function(){return Ye(kt)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),o(r,[{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=He.getStyleFor(St.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(Pe.PLAYBACK_READY,this.name);var r=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&r||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(c){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var r=t.data,n=0;n<r.length;n++)e[n]=r[n]}for(var i=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<i;){if(o<0){o=a*Math.random();var u=Math.pow(Math.random(),.4);s=255*u<<24}o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=X((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(Z(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),r}(Qe);wt.canPlay=function(e){return!0};var Rt=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),n=t.call(this,e),n._initializeMessages(),n}return o(r,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}}]),o(r,[{key:"t",value:function(e){var t=this._language(),r=this._messages["en"],n=t&&this._messages[t]||r;return n[e]||r[e]||e}},{key:"_language",value:function(){return this.core.options.language||le()}},{key:"_initializeMessages",value:function(){var e={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurck zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser untersttzt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}};this._messages=P.extend(!0,e,this.core.options.strings||{}),this._messages["de-DE"]=this._messages["de"],this._messages["pt-BR"]=this._messages["pt"],this._messages["en-US"]=this._messages["en"],this._messages["es-419"]=this._messages["es"],this._messages["fr-FR"]=this._messages["fr"],this._messages["tr-TR"]=this._messages["tr"],this._messages["et-EE"]=this._messages["et"],this._messages["ar-IQ"]=this._messages["ar"]}}]),r}(ht),Ct=function(e){c(r,e);var t=m(r);function r(){return i(this,r),t.apply(this,arguments)}return o(r,[{key:"bindEvents",value:function(){this.listenTo(this.core,Pe.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}},{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}}]),r}(ht);lt.registerPlugin(Rt),lt.registerPlugin(Ct),lt.registerPlayback(wt),lt.registerPlayback(Tt),lt.registerPlayback(_t),lt.registerPlayback(At)},c1ac:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").filter,a=r("1448"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:void 0);return a(this,t)}))},ca91:function(e,t,r){"use strict";var n=r("ebb5"),i=r("d58f").left,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduce",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cd26:function(e,t,r){"use strict";var n=r("ebb5"),i=n.aTypedArray,a=n.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){var e,t=this,r=i(t).length,n=o(r/2),a=0;while(a<n)e=t[a],t[a++]=t[--r],t[r]=e;return t}))},cfeb:function(e,t,r){(function(t,n){e.exports=n(r("61f9"))})("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="<%=baseUrl%>/",r(r.s=39)}([function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(10),i=r(29),a=r(14),o=Object.defineProperty;t.f=r(2)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports=!r(11)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){var r=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(1),i=r(12);e.exports=r(2)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,r){var n=r(54),i=r(16);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(22)("wks"),i=r(13),a=r(0).Symbol,o="function"==typeof a,s=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=n},function(e,t,r){var n=r(0),i=r(4),a=r(28),o=r(5),s=r(3),l="prototype",u=function(e,t,r){var c,d,h,f=e&u.F,p=e&u.G,g=e&u.S,m=e&u.P,v=e&u.B,y=e&u.W,b=p?i:i[t]||(i[t]={}),A=b[l],_=p?n:g?n[t]:(n[t]||{})[l];for(c in p&&(r=t),r)d=!f&&_&&void 0!==_[c],d&&s(b,c)||(h=d?_[c]:r[c],b[c]=p&&"function"!=typeof _[c]?r[c]:v&&d?a(h,n):y&&_[c]==h?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[l]=e[l],t}(h):m&&"function"==typeof h?a(Function.call,h):h,m&&((b.virtual||(b.virtual={}))[c]=h,e&u.R&&A&&!A[c]&&o(A,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(6);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,r){var n=r(10),i=r(53),a=r(23),o=r(21)("IE_PROTO"),s=function(){},l="prototype",u=function(){var e,t=r(30)("iframe"),n=a.length,i="<",o=">";t.style.display="none",r(58).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+o+"document.F=Object"+i+"/script"+o),e.close(),u=e.F;while(n--)delete u[l][a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[l]=n(e),r=new s,s[l]=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(34),i=r(23);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(22)("keys"),i=r(13);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(0),i="__core-js_shared__",a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(1).f,i=r(3),a=r(8)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){t.f=r(8)},function(e,t,r){var n=r(0),i=r(4),a=r(17),o=r(25),s=r(1).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(46);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){e.exports=!r(2)&&!r(11)((function(){return 7!=Object.defineProperty(r(30)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(6),i=r(0).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(48),i=l(n),a=r(65),o=l(a),s="function"===typeof o.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof o.default&&"symbol"===s(i.default)?function(e){return"undefined"===typeof e?"undefined":s(e)}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":"undefined"===typeof e?"undefined":s(e)}},function(e,t,r){"use strict";var n=r(17),i=r(9),a=r(33),o=r(5),s=r(18),l=r(52),u=r(24),c=r(59),d=r(8)("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",g="values",m=function(){return this};e.exports=function(e,t,r,v,y,b,A){l(r,t,v);var _,E,T,k=function(e){if(!h&&e in C)return C[e];switch(e){case p:return function(){return new r(this,e)};case g:return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",w=y==g,R=!1,C=e.prototype,L=C[d]||C[f]||y&&C[y],I=L||k(y),O=y?w?k("entries"):I:void 0,D="Array"==t&&C.entries||L;if(D&&(T=c(D.call(new e)),T!==Object.prototype&&T.next&&(u(T,S,!0),n||"function"==typeof T[d]||o(T,d,m))),w&&L&&L.name!==g&&(R=!0,I=function(){return L.call(this)}),n&&!A||!h&&!R&&C[d]||o(C,d,I),s[t]=I,s[S]=m,y)if(_={values:w?I:k(g),keys:b?I:k(p),entries:O},A)for(E in _)E in C||a(C,E,_[E]);else i(i.P+i.F*(h||R),t,_);return _}},function(e,t,r){e.exports=r(5)},function(e,t,r){var n=r(3),i=r(7),a=r(55)(!1),o=r(21)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=o&&n(s,r)&&u.push(r);while(t.length>l)n(s,r=t[l++])&&(~a(u,r)||u.push(r));return u}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(34),i=r(23).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(27),i=r(12),a=r(7),o=r(14),s=r(3),l=r(29),u=Object.getOwnPropertyDescriptor;t.f=r(2)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(r){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,e.exports=t["default"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41),i=m(n),a=r(42),o=m(a),s=r(47),l=m(s),u=r(75),c=m(u),d=r(83),h=r(84),f=m(h),p=r(85),g=m(p);function m(e){return e&&e.__esModule?e:{default:e}}var v=-1,y=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,c.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core,d.Events.CORE_READY,this.bindPlaybackEvents),this.listenTo(this.core,d.Events.CORE_ACTIVE_CONTAINER_CHANGED,this.reload),this.listenTo(this.core.mediaControl,d.Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,d.Events.MEDIACONTROL_HIDE,this.hideSelectLevelMenu)},t.prototype.unBindEvents=function(){this.stopListening(this.core,d.Events.CORE_READY),this.stopListening(this.core,d.Events.CORE_ACTIVE_CONTAINER_CHANGED),this.stopListening(this.core.mediaControl,d.Events.MEDIACONTROL_RENDERED),this.stopListening(this.core.mediaControl,d.Events.MEDIACONTROL_HIDE),this.stopListening(this.core.activePlayback,d.Events.PLAYBACK_LEVELS_AVAILABLE),this.stopListening(this.core.activePlayback,d.Events.PLAYBACK_LEVEL_SWITCH_START),this.stopListening(this.core.activePlayback,d.Events.PLAYBACK_LEVEL_SWITCH_END),this.stopListening(this.core.activePlayback,d.Events.PLAYBACK_BITRATE)},t.prototype.bindPlaybackEvents=function(){var e=this.core.activePlayback;this.listenTo(e,d.Events.PLAYBACK_LEVELS_AVAILABLE,this.fillLevels),this.listenTo(e,d.Events.PLAYBACK_LEVEL_SWITCH_START,this.startLevelSwitch),this.listenTo(e,d.Events.PLAYBACK_LEVEL_SWITCH_END,this.stopLevelSwitch),this.listenTo(e,d.Events.PLAYBACK_BITRATE,this.updateCurrentLevel);var t=e.levels&&e.levels.length>0;t&&this.fillLevels(e.levels)},t.prototype.reload=function(){this.unBindEvents(),this.bindEvents(),this.bindPlaybackEvents()},t.prototype.shouldRender=function(){if(!this.core.activeContainer)return!1;var e=this.core.activePlayback;if(!e)return!1;var t=void 0!==e.currentLevel,r=!!(this.levels&&this.levels.length>1);return t&&r},t.prototype.render=function(){if(this.shouldRender()){var e=d.Styler.getStyleFor(g.default,{baseUrl:this.core.options.baseUrl});this.$el.html(this.template({levels:this.levels,title:this.getTitle()})),this.$el.append(e),this.core.mediaControl.$(".media-control-right-panel").append(this.el),this.highlightCurrentLevel()}return this},t.prototype.fillLevels=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;void 0===this.selectedLevelId&&(this.selectedLevelId=t),this.levels=e,this.configureLevelsLabels(),this.render()},t.prototype.configureLevelsLabels=function(){if(void 0!==this.core.options.levelSelectorConfig){var e=this.core.options.levelSelectorConfig.labelCallback;if(e&&"function"!==typeof e)throw new TypeError("labelCallback must be a function");var t=this.core.options.levelSelectorConfig.labels,r=t?this.core.options.levelSelectorConfig.labels:{};if(e||t){var n=void 0,i=void 0;for(var a in this.levels)n=this.levels[a],i=r[n.id],e?n.label=e(n,i):i&&(n.label=i)}}},t.prototype.findLevelBy=function(e){var t=void 0;return this.levels.forEach((function(r){r.id===e&&(t=r)})),t},t.prototype.onLevelSelect=function(e){return this.selectedLevelId=parseInt(e.target.dataset.levelSelectorSelect,10),this.core.activePlayback.currentLevel==this.selectedLevelId||(this.core.activePlayback.currentLevel=this.selectedLevelId,this.toggleContextMenu(),e.stopPropagation()),!1},t.prototype.onShowLevelSelectMenu=function(){this.toggleContextMenu()},t.prototype.hideSelectLevelMenu=function(){this.$(".level_selector ul").hide()},t.prototype.toggleContextMenu=function(){this.$(".level_selector ul").toggle()},t.prototype.buttonElement=function(){return this.$(".level_selector button")},t.prototype.levelElement=function(e){return this.$(".level_selector ul a"+(isNaN(e)?"":'[data-level-selector-select="'+e+'"]')).parent()},t.prototype.getTitle=function(){return(this.core.options.levelSelectorConfig||{}).title},t.prototype.startLevelSwitch=function(){this.buttonElement().addClass("changing")},t.prototype.stopLevelSwitch=function(){this.buttonElement().removeClass("changing")},t.prototype.updateText=function(e){e===v?this.buttonElement().text(this.currentLevel?"AUTO ("+this.currentLevel.label+")":"AUTO"):this.buttonElement().text(this.findLevelBy(e).label)},t.prototype.updateCurrentLevel=function(e){var t=this.findLevelBy(e.level);this.currentLevel=t||null,this.highlightCurrentLevel()},t.prototype.highlightCurrentLevel=function(){this.levelElement().removeClass("current"),this.currentLevel&&this.levelElement(this.currentLevel.id).addClass("current"),this.updateText(this.selectedLevelId)},(0,o.default)(t,[{key:"name",get:function(){return"level_selector"}},{key:"template",get:function(){return(0,d.template)(f.default)}},{key:"attributes",get:function(){return{class:this.name,"data-level-selector":""}}},{key:"events",get:function(){return{"click [data-level-selector-select]":"onLevelSelect","click [data-level-selector-button]":"onShowLevelSelectMenu"}}}],[{key:"version",get:function(){return VERSION}}]),t}(d.UICorePlugin);t.default=y,e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(43),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){e.exports={default:r(44),__esModule:!0}},function(e,t,r){r(45);var n=r(4).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(9);n(n.S+n.F*!r(2),"Object",{defineProperty:r(1).f})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(31),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},function(e,t,r){e.exports={default:r(49),__esModule:!0}},function(e,t,r){r(50),r(61),e.exports=r(25).f("iterator")},function(e,t,r){"use strict";var n=r(51)(!0);r(32)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){var n=r(15),i=r(16);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,r){"use strict";var n=r(19),i=r(12),a=r(24),o={};r(5)(o,r(8)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(1),i=r(10),a=r(20);e.exports=r(2)?Object.defineProperties:function(e,t){i(e);var r,o=a(t),s=o.length,l=0;while(s>l)n.f(e,r=o[l++],t[r]);return e}},function(e,t,r){var n=r(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(7),i=r(56),a=r(57);e.exports=function(e){return function(t,r,o){var s,l=n(t),u=i(l.length),c=a(o,u);if(e&&r!=r){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(15),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(15),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(0).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(3),i=r(60),a=r(21)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(16);e.exports=function(e){return Object(n(e))}},function(e,t,r){r(62);for(var n=r(0),i=r(5),a=r(18),o=r(8)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=n[u],d=c&&c.prototype;d&&!d[o]&&i(d,o,u),a[u]=a.Array}},function(e,t,r){"use strict";var n=r(63),i=r(64),a=r(18),o=r(7);e.exports=r(32)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(66),__esModule:!0}},function(e,t,r){r(67),r(72),r(73),r(74),e.exports=r(4).Symbol},function(e,t,r){"use strict";var n=r(0),i=r(3),a=r(2),o=r(9),s=r(33),l=r(68).KEY,u=r(11),c=r(22),d=r(24),h=r(13),f=r(8),p=r(25),g=r(26),m=r(69),v=r(70),y=r(10),b=r(6),A=r(7),_=r(14),E=r(12),T=r(19),k=r(71),S=r(38),w=r(1),R=r(20),C=S.f,L=w.f,I=k.f,O=n.Symbol,D=n.JSON,P=D&&D.stringify,x="prototype",N=f("_hidden"),M=f("toPrimitive"),F={}.propertyIsEnumerable,j=c("symbol-registry"),U=c("symbols"),B=c("op-symbols"),G=Object[x],K="function"==typeof O,V=n.QObject,Y=!V||!V[x]||!V[x].findChild,H=a&&u((function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=C(G,t);n&&delete G[t],L(e,t,r),n&&e!==G&&L(G,t,n)}:L,W=function(e){var t=U[e]=T(O[x]);return t._k=e,t},z=K&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},$=function(e,t,r){return e===G&&$(B,t,r),y(e),t=_(t,!0),y(r),i(U,t)?(r.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),r=T(r,{enumerable:E(0,!1)})):(i(e,N)||L(e,N,E(1,{})),e[N][t]=!0),H(e,t,r)):L(e,t,r)},q=function(e,t){y(e);var r,n=m(t=A(t)),i=0,a=n.length;while(a>i)$(e,r=n[i++],t[r]);return e},X=function(e,t){return void 0===t?T(e):q(T(e),t)},Z=function(e){var t=F.call(this,e=_(e,!0));return!(this===G&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,N)&&this[N][e])||t)},J=function(e,t){if(e=A(e),t=_(t,!0),e!==G||!i(U,t)||i(B,t)){var r=C(e,t);return!r||!i(U,t)||i(e,N)&&e[N][t]||(r.enumerable=!0),r}},Q=function(e){var t,r=I(A(e)),n=[],a=0;while(r.length>a)i(U,t=r[a++])||t==N||t==l||n.push(t);return n},ee=function(e){var t,r=e===G,n=I(r?B:A(e)),a=[],o=0;while(n.length>o)!i(U,t=n[o++])||r&&!i(G,t)||a.push(U[t]);return a};K||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call(B,r),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),H(this,e,E(1,r))};return a&&Y&&H(G,e,{configurable:!0,set:t}),W(e)},s(O[x],"toString",(function(){return this._k})),S.f=J,w.f=$,r(37).f=k.f=Q,r(27).f=Z,r(36).f=ee,a&&!r(17)&&s(G,"propertyIsEnumerable",Z,!0),p.f=function(e){return W(f(e))}),o(o.G+o.W+o.F*!K,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)f(te[re++]);for(var ne=R(f.store),ie=0;ne.length>ie;)g(ne[ie++]);o(o.S+o.F*!K,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=O(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),o(o.S+o.F*!K,"Object",{create:X,defineProperty:$,defineProperties:q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),D&&o(o.S+o.F*(!K||u((function(){var e=O();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))}))),"JSON",{stringify:function(e){var t,r,n=[e],i=1;while(arguments.length>i)n.push(arguments[i++]);if(r=t=n[1],(b(t)||void 0!==e)&&!z(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!z(t))return t}),n[1]=t,P.apply(D,n)}}),O[x][M]||r(5)(O[x],M,O[x].valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,r){var n=r(13)("meta"),i=r(6),a=r(3),o=r(1).f,s=0,l=Object.isExtensible||function(){return!0},u=!r(11)((function(){return l(Object.preventExtensions({}))})),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},h=function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},f=function(e){return u&&p.NEED&&l(e)&&!a(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},function(e,t,r){var n=r(20),i=r(36),a=r(27);e.exports=function(e){var t=n(e),r=i.f;if(r){var o,s=r(e),l=a.f,u=0;while(s.length>u)l.call(e,o=s[u++])&&t.push(o)}return t}},function(e,t,r){var n=r(35);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(7),i=r(37).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t){},function(e,t,r){r(26)("asyncIterator")},function(e,t,r){r(26)("observable")},function(e,t,r){"use strict";t.__esModule=!0;var n=r(76),i=u(n),a=r(80),o=u(a),s=r(31),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,l.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,r){e.exports={default:r(77),__esModule:!0}},function(e,t,r){r(78),e.exports=r(4).Object.setPrototypeOf},function(e,t,r){var n=r(9);n(n.S,"Object",{setPrototypeOf:r(79).set})},function(e,t,r){var n=r(6),i=r(10),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(28)(Function.call,r(38).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){e.exports={default:r(81),__esModule:!0}},function(e,t,r){r(82);var n=r(4).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(9);n(n.S,"Object",{create:r(19)})},function(t,r){t.exports=e},function(e,t){e.exports='<button data-level-selector-button>\n  Auto\n</button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-level-selector-select="-1">AUTO</a></li>\n  <% for (var i = 0; i < levels.length; i++) { %>\n    <li><a href="#" data-level-selector-select="<%= levels[i].id %>"><%= levels[i].label %></a></li>\n  <% }; %>\n</ul>\n'},function(e,t,r){var n=r(86);"string"===typeof n&&(n=[[e.i,n,""]]);r(88)(n,{singleton:!0});n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(87)(!1),t.push([e.i,'.level_selector[data-level-selector] {\n  float: right;\n  position: relative;\n  height: 100%; }\n  .level_selector[data-level-selector] button {\n    background-color: transparent;\n    color: #fff;\n    font-family: Roboto,"Open Sans",Arial,sans-serif;\n    -webkit-font-smoothing: antialiased;\n    border: none;\n    font-size: 12px;\n    height: 100%; }\n    .level_selector[data-level-selector] button:hover {\n      color: #c9c9c9; }\n    .level_selector[data-level-selector] button.changing {\n      -webkit-animation: pulse 0.5s infinite alternate; }\n  .level_selector[data-level-selector] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 100%;\n    display: none;\n    background-color: rgba(28, 28, 28, 0.9);\n    white-space: nowrap; }\n  .level_selector[data-level-selector] li {\n    font-size: 12px;\n    color: #eee; }\n    .level_selector[data-level-selector] li[data-title] {\n      background-color: #333;\n      padding: 8px 25px; }\n    .level_selector[data-level-selector] li a {\n      color: #eee;\n      padding: 5px 10px;\n      display: block;\n      text-decoration: none; }\n      .level_selector[data-level-selector] li a:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: #fff; }\n        .level_selector[data-level-selector] li a:hover a {\n          color: #fff;\n          text-decoration: none; }\n    .level_selector[data-level-selector] li.current a {\n      color: #2ecc71; }\n',""])},function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"===typeof btoa){var a=n(i),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}function n(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+r+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,r){"string"===typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"===typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"===typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t){var r={},n=function(e){var t;return function(){return"undefined"===typeof t&&(t=e.apply(this,arguments)),t}},i=n((function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())})),a=n((function(){return document.head||document.getElementsByTagName("head")[0]})),o=null,s=0;function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(h(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(h(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function u(e){for(var t=[],r={},n=0;n<e.length;n++){var i=e[n],a=i[0],o=i[1],s=i[2],l=i[3],u={css:o,media:s,sourceMap:l};r[a]?r[a].parts.push(u):t.push(r[a]={id:a,parts:[u]})}return t}function c(){var e=document.createElement("style"),t=a();return e.type="text/css",t.appendChild(e),e}function d(){var e=document.createElement("link"),t=a();return e.rel="stylesheet",t.appendChild(e),e}function h(e,t){var r,n,i;if(t.singleton){var a=s++;r=o||(o=c()),n=p.bind(null,r,a,!1),i=p.bind(null,r,a,!0)}else e.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa?(r=d(),n=m.bind(null,r),i=function(){r.parentNode.removeChild(r),r.href&&URL.revokeObjectURL(r.href)}):(r=c(),n=g.bind(null,r),i=function(){r.parentNode.removeChild(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!==typeof DEBUG&&DEBUG&&"object"!==typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"===typeof t.singleton&&(t.singleton=i());var n=u(e);return l(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var o=n[a],s=r[o.id];s.refs--,i.push(s)}if(e){var c=u(e);l(c,t)}for(a=0;a<i.length;a++){s=i[a];if(0===s.refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete r[s.id]}}}};var f=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function p(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function g(e,t){var r=t.css,n=t.media;t.sourceMap;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function m(e,t){var r=t.css,n=(t.media,t.sourceMap);n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}}])}))},d139:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").find,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},d58f:function(e,t,r){var n=r("1c0b"),i=r("7b0b"),a=r("44ad"),o=r("50c4"),s=function(e){return function(t,r,s,l){n(r);var u=i(t),c=a(u),d=o(u.length),h=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(h in c){l=c[h],h+=f;break}if(h+=f,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=f)h in c&&(l=r(l,c[h],h,u));return l}};e.exports={left:s(!1),right:s(!0)}},d5d6:function(e,t,r){"use strict";var n=r("ebb5"),i=r("b727").forEach,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},dfb9:function(e,t){e.exports=function(e,t){var r=0,n=t.length,i=new e(n);while(n>r)i[r]=t[r++];return i}},e58c:function(e,t,r){"use strict";var n=r("fc6a"),i=r("a691"),a=r("50c4"),o=r("a640"),s=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,c=o("lastIndexOf"),d=u||!c;e.exports=d?function(e){if(u)return l.apply(this,arguments)||0;var t=n(this),r=a(t.length),o=r-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:l},e91f:function(e,t,r){"use strict";var n=r("ebb5"),i=r("4d64").indexOf,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("indexOf",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0)}))},ebb5:function(e,t,r){"use strict";var n,i,a,o=r("a981"),s=r("83ab"),l=r("da84"),u=r("861d"),c=r("5135"),d=r("f5df"),h=r("9112"),f=r("6eeb"),p=r("9bf2").f,g=r("e163"),m=r("d2bb"),v=r("b622"),y=r("90e3"),b=l.Int8Array,A=b&&b.prototype,_=l.Uint8ClampedArray,E=_&&_.prototype,T=b&&g(b),k=A&&g(A),S=Object.prototype,w=S.isPrototypeOf,R=v("toStringTag"),C=y("TYPED_ARRAY_TAG"),L=y("TYPED_ARRAY_CONSTRUCTOR"),I=o&&!!m&&"Opera"!==d(l.opera),O=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},x=function(e){if(!u(e))return!1;var t=d(e);return"DataView"===t||c(D,t)||c(P,t)},N=function(e){if(!u(e))return!1;var t=d(e);return c(D,t)||c(P,t)},M=function(e){if(N(e))return e;throw TypeError("Target is not a typed array")},F=function(e){if(m&&!w.call(T,e))throw TypeError("Target is not a typed array constructor");return e},j=function(e,t,r){if(s){if(r)for(var n in D){var i=l[n];if(i&&c(i.prototype,e))try{delete i.prototype[e]}catch(a){}}k[e]&&!r||f(k,e,r?t:I&&A[e]||t)}},U=function(e,t,r){var n,i;if(s){if(m){if(r)for(n in D)if(i=l[n],i&&c(i,e))try{delete i[e]}catch(a){}if(T[e]&&!r)return;try{return f(T,e,r?t:I&&T[e]||t)}catch(a){}}for(n in D)i=l[n],!i||i[e]&&!r||f(i,e,t)}};for(n in D)i=l[n],a=i&&i.prototype,a?h(a,L,i):I=!1;for(n in P)i=l[n],a=i&&i.prototype,a&&h(a,L,i);if((!I||"function"!=typeof T||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},I))for(n in D)l[n]&&m(l[n],T);if((!I||!k||k===S)&&(k=T.prototype,I))for(n in D)l[n]&&m(l[n].prototype,k);if(I&&g(E)!==k&&m(E,k),s&&!c(k,R))for(n in O=!0,p(k,R,{get:function(){return u(this)?this[C]:void 0}}),D)l[n]&&h(l[n],C,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:O&&C,aTypedArray:M,aTypedArrayConstructor:F,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:U,isView:x,isTypedArray:N,TypedArray:T,TypedArrayPrototype:k}},f8cd:function(e,t,r){var n=r("a691");e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}}}]);